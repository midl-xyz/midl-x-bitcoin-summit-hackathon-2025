"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2";
exports.ids = ["vendor-chunks/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/address.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/address.js ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fromBase58Check: () => (/* binding */ fromBase58Check),\n/* harmony export */   fromBech32: () => (/* binding */ fromBech32),\n/* harmony export */   fromOutputScript: () => (/* binding */ fromOutputScript),\n/* harmony export */   toBase58Check: () => (/* binding */ toBase58Check),\n/* harmony export */   toBech32: () => (/* binding */ toBech32),\n/* harmony export */   toOutputScript: () => (/* binding */ toOutputScript)\n/* harmony export */ });\n/* harmony import */ var _networks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./networks.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js\");\n/* harmony import */ var _payments_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./payments/index.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/index.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var bech32__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! bech32 */ \"(ssr)/./node_modules/.pnpm/bech32@2.0.0/node_modules/bech32/dist/index.js\");\n/* harmony import */ var bs58check__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bs58check */ \"(ssr)/./node_modules/.pnpm/bs58check@4.0.0/node_modules/bs58check/src/esm/index.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n\n\n\n\n\n\n\n\nconst FUTURE_SEGWIT_MAX_SIZE = 40;\nconst FUTURE_SEGWIT_MIN_SIZE = 2;\nconst FUTURE_SEGWIT_MAX_VERSION = 16;\nconst FUTURE_SEGWIT_MIN_VERSION = 2;\nconst FUTURE_SEGWIT_VERSION_DIFF = 0x50;\nconst FUTURE_SEGWIT_VERSION_WARNING =\n  'WARNING: Sending to a future segwit version address can lead to loss of funds. ' +\n  'End users MUST be warned carefully in the GUI and asked if they wish to proceed ' +\n  'with caution. Wallets should verify the segwit version from the output of fromBech32, ' +\n  'then decide when it is safe to use which version of segwit.';\n/**\n * Converts an output buffer to a future segwit address.\n * @param output - The output buffer.\n * @param network - The network object.\n * @returns The future segwit address.\n * @throws {TypeError} If the program length or version is invalid for segwit address.\n */\nfunction _toFutureSegwitAddress(output, network) {\n  const data = output.slice(2);\n  if (\n    data.length < FUTURE_SEGWIT_MIN_SIZE ||\n    data.length > FUTURE_SEGWIT_MAX_SIZE\n  )\n    throw new TypeError('Invalid program length for segwit address');\n  const version = output[0] - FUTURE_SEGWIT_VERSION_DIFF;\n  if (\n    version < FUTURE_SEGWIT_MIN_VERSION ||\n    version > FUTURE_SEGWIT_MAX_VERSION\n  )\n    throw new TypeError('Invalid version for segwit address');\n  if (output[1] !== data.length)\n    throw new TypeError('Invalid script for segwit address');\n  console.warn(FUTURE_SEGWIT_VERSION_WARNING);\n  return toBech32(data, version, network.bech32);\n}\n/**\n * Decodes a base58check encoded Bitcoin address and returns the version and hash.\n *\n * @param address - The base58check encoded Bitcoin address to decode.\n * @returns An object containing the version and hash of the decoded address.\n * @throws {TypeError} If the address is too short or too long.\n */\nfunction fromBase58Check(address) {\n  const payload = bs58check__WEBPACK_IMPORTED_MODULE_5__[\"default\"].decode(address);\n  // TODO: 4.0.0, move to \"toOutputScript\"\n  if (payload.length < 21) throw new TypeError(address + ' is too short');\n  if (payload.length > 21) throw new TypeError(address + ' is too long');\n  const version = uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.readUInt8(payload, 0);\n  const hash = payload.slice(1);\n  return { version, hash };\n}\n/**\n * Converts a Bech32 or Bech32m encoded address to its corresponding data representation.\n * @param address - The Bech32 or Bech32m encoded address.\n * @returns An object containing the version, prefix, and data of the address.\n * @throws {TypeError} If the address uses the wrong encoding.\n */\nfunction fromBech32(address) {\n  let result;\n  let version;\n  try {\n    result = bech32__WEBPACK_IMPORTED_MODULE_4__.bech32.decode(address);\n  } catch (e) {}\n  if (result) {\n    version = result.words[0];\n    if (version !== 0) throw new TypeError(address + ' uses wrong encoding');\n  } else {\n    result = bech32__WEBPACK_IMPORTED_MODULE_4__.bech32m.decode(address);\n    version = result.words[0];\n    if (version === 0) throw new TypeError(address + ' uses wrong encoding');\n  }\n  const data = bech32__WEBPACK_IMPORTED_MODULE_4__.bech32.fromWords(result.words.slice(1));\n  return {\n    version,\n    prefix: result.prefix,\n    data: Uint8Array.from(data),\n  };\n}\n/**\n * Converts a hash to a Base58Check-encoded string.\n * @param hash - The hash to be encoded.\n * @param version - The version byte to be prepended to the encoded string.\n * @returns The Base58Check-encoded string.\n */\nfunction toBase58Check(hash, version) {\n  valibot__WEBPACK_IMPORTED_MODULE_7__.parse(valibot__WEBPACK_IMPORTED_MODULE_7__.tuple([_types_js__WEBPACK_IMPORTED_MODULE_3__.Hash160bitSchema, _types_js__WEBPACK_IMPORTED_MODULE_3__.UInt8Schema]), [hash, version]);\n  const payload = new Uint8Array(21);\n  uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.writeUInt8(payload, 0, version);\n  payload.set(hash, 1);\n  return bs58check__WEBPACK_IMPORTED_MODULE_5__[\"default\"].encode(payload);\n}\n/**\n * Converts a buffer to a Bech32 or Bech32m encoded string.\n * @param data - The buffer to be encoded.\n * @param version - The version number to be used in the encoding.\n * @param prefix - The prefix string to be used in the encoding.\n * @returns The Bech32 or Bech32m encoded string.\n */\nfunction toBech32(data, version, prefix) {\n  const words = bech32__WEBPACK_IMPORTED_MODULE_4__.bech32.toWords(data);\n  words.unshift(version);\n  return version === 0\n    ? bech32__WEBPACK_IMPORTED_MODULE_4__.bech32.encode(prefix, words)\n    : bech32__WEBPACK_IMPORTED_MODULE_4__.bech32m.encode(prefix, words);\n}\n/**\n * Converts an output script to a Bitcoin address.\n * @param output - The output script as a Buffer.\n * @param network - The Bitcoin network (optional).\n * @returns The Bitcoin address corresponding to the output script.\n * @throws If the output script has no matching address.\n */\nfunction fromOutputScript(output, network) {\n  // TODO: Network\n  network = network || _networks_js__WEBPACK_IMPORTED_MODULE_0__.bitcoin;\n  try {\n    return _payments_index_js__WEBPACK_IMPORTED_MODULE_1__.p2pkh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return _payments_index_js__WEBPACK_IMPORTED_MODULE_1__.p2sh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return _payments_index_js__WEBPACK_IMPORTED_MODULE_1__.p2wpkh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return _payments_index_js__WEBPACK_IMPORTED_MODULE_1__.p2wsh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return _payments_index_js__WEBPACK_IMPORTED_MODULE_1__.p2tr({ output, network }).address;\n  } catch (e) {}\n  try {\n    return _toFutureSegwitAddress(output, network);\n  } catch (e) {}\n  throw new Error(_script_js__WEBPACK_IMPORTED_MODULE_2__.toASM(output) + ' has no matching Address');\n}\n/**\n * Converts a Bitcoin address to its corresponding output script.\n * @param address - The Bitcoin address to convert.\n * @param network - The Bitcoin network to use. Defaults to the Bitcoin network.\n * @returns The corresponding output script as a Buffer.\n * @throws If the address has an invalid prefix or no matching script.\n */\nfunction toOutputScript(address, network) {\n  network = network || _networks_js__WEBPACK_IMPORTED_MODULE_0__.bitcoin;\n  let decodeBase58;\n  let decodeBech32;\n  try {\n    decodeBase58 = fromBase58Check(address);\n  } catch (e) {}\n  if (decodeBase58) {\n    if (decodeBase58.version === network.pubKeyHash)\n      return _payments_index_js__WEBPACK_IMPORTED_MODULE_1__.p2pkh({ hash: decodeBase58.hash }).output;\n    if (decodeBase58.version === network.scriptHash)\n      return _payments_index_js__WEBPACK_IMPORTED_MODULE_1__.p2sh({ hash: decodeBase58.hash }).output;\n  } else {\n    try {\n      decodeBech32 = fromBech32(address);\n    } catch (e) {}\n    if (decodeBech32) {\n      if (decodeBech32.prefix !== network.bech32)\n        throw new Error(address + ' has an invalid prefix');\n      if (decodeBech32.version === 0) {\n        if (decodeBech32.data.length === 20)\n          return _payments_index_js__WEBPACK_IMPORTED_MODULE_1__.p2wpkh({ hash: decodeBech32.data }).output;\n        if (decodeBech32.data.length === 32)\n          return _payments_index_js__WEBPACK_IMPORTED_MODULE_1__.p2wsh({ hash: decodeBech32.data }).output;\n      } else if (decodeBech32.version === 1) {\n        if (decodeBech32.data.length === 32)\n          return _payments_index_js__WEBPACK_IMPORTED_MODULE_1__.p2tr({ pubkey: decodeBech32.data }).output;\n      } else if (\n        decodeBech32.version >= FUTURE_SEGWIT_MIN_VERSION &&\n        decodeBech32.version <= FUTURE_SEGWIT_MAX_VERSION &&\n        decodeBech32.data.length >= FUTURE_SEGWIT_MIN_SIZE &&\n        decodeBech32.data.length <= FUTURE_SEGWIT_MAX_SIZE\n      ) {\n        console.warn(FUTURE_SEGWIT_VERSION_WARNING);\n        return _script_js__WEBPACK_IMPORTED_MODULE_2__.compile([\n          decodeBech32.version + FUTURE_SEGWIT_VERSION_DIFF,\n          decodeBech32.data,\n        ]);\n      }\n    }\n  }\n  throw new Error(address + ' has no matching Script');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9hZGRyZXNzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ007QUFDVDtBQUNvQjtBQUNsQjtBQUNQO0FBQ1E7QUFDYjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ087QUFDUCxrQkFBa0IsaURBQVM7QUFDM0I7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUFlO0FBQ2pDO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGFBQWEsMENBQU07QUFDbkIsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixhQUFhLDJDQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMENBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxFQUFFLDBDQUFPLENBQUMsMENBQU8sRUFBRSx1REFBZ0IsRUFBRSxrREFBVztBQUNoRDtBQUNBLEVBQUUsd0RBQWdCO0FBQ2xCO0FBQ0EsU0FBUyxpREFBUztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxnQkFBZ0IsMENBQU07QUFDdEI7QUFDQTtBQUNBLE1BQU0sMENBQU07QUFDWixNQUFNLDJDQUFPO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSx1QkFBdUIsaURBQWdCO0FBQ3ZDO0FBQ0EsV0FBVyxxREFBYyxHQUFHLGlCQUFpQjtBQUM3QyxJQUFJO0FBQ0o7QUFDQSxXQUFXLG9EQUFhLEdBQUcsaUJBQWlCO0FBQzVDLElBQUk7QUFDSjtBQUNBLFdBQVcsc0RBQWUsR0FBRyxpQkFBaUI7QUFDOUMsSUFBSTtBQUNKO0FBQ0EsV0FBVyxxREFBYyxHQUFHLGlCQUFpQjtBQUM3QyxJQUFJO0FBQ0o7QUFDQSxXQUFXLG9EQUFhLEdBQUcsaUJBQWlCO0FBQzVDLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKLGtCQUFrQiw2Q0FBYTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCx1QkFBdUIsaURBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxhQUFhLHFEQUFjLEdBQUcseUJBQXlCO0FBQ3ZEO0FBQ0EsYUFBYSxvREFBYSxHQUFHLHlCQUF5QjtBQUN0RCxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNEQUFlLEdBQUcseUJBQXlCO0FBQzVEO0FBQ0EsaUJBQWlCLHFEQUFjLEdBQUcseUJBQXlCO0FBQzNELFFBQVE7QUFDUjtBQUNBLGlCQUFpQixvREFBYSxHQUFHLDJCQUEyQjtBQUM1RCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwrQ0FBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvYnRjL21pZGwteC1iaXRjb2luLXN1bW1pdC1oYWNrYXRob24tMjAyNS91dHhvLXBzYnQtZGVtby9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9hZGRyZXNzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIG5ldHdvcmtzIGZyb20gJy4vbmV0d29ya3MuanMnO1xuaW1wb3J0ICogYXMgcGF5bWVudHMgZnJvbSAnLi9wYXltZW50cy9pbmRleC5qcyc7XG5pbXBvcnQgKiBhcyBic2NyaXB0IGZyb20gJy4vc2NyaXB0LmpzJztcbmltcG9ydCB7IEhhc2gxNjBiaXRTY2hlbWEsIFVJbnQ4U2NoZW1hIH0gZnJvbSAnLi90eXBlcy5qcyc7XG5pbXBvcnQgeyBiZWNoMzIsIGJlY2gzMm0gfSBmcm9tICdiZWNoMzInO1xuaW1wb3J0IGJzNThjaGVjayBmcm9tICdiczU4Y2hlY2snO1xuaW1wb3J0ICogYXMgdG9vbHMgZnJvbSAndWludDhhcnJheS10b29scyc7XG5pbXBvcnQgKiBhcyB2IGZyb20gJ3ZhbGlib3QnO1xuY29uc3QgRlVUVVJFX1NFR1dJVF9NQVhfU0laRSA9IDQwO1xuY29uc3QgRlVUVVJFX1NFR1dJVF9NSU5fU0laRSA9IDI7XG5jb25zdCBGVVRVUkVfU0VHV0lUX01BWF9WRVJTSU9OID0gMTY7XG5jb25zdCBGVVRVUkVfU0VHV0lUX01JTl9WRVJTSU9OID0gMjtcbmNvbnN0IEZVVFVSRV9TRUdXSVRfVkVSU0lPTl9ESUZGID0gMHg1MDtcbmNvbnN0IEZVVFVSRV9TRUdXSVRfVkVSU0lPTl9XQVJOSU5HID1cbiAgJ1dBUk5JTkc6IFNlbmRpbmcgdG8gYSBmdXR1cmUgc2Vnd2l0IHZlcnNpb24gYWRkcmVzcyBjYW4gbGVhZCB0byBsb3NzIG9mIGZ1bmRzLiAnICtcbiAgJ0VuZCB1c2VycyBNVVNUIGJlIHdhcm5lZCBjYXJlZnVsbHkgaW4gdGhlIEdVSSBhbmQgYXNrZWQgaWYgdGhleSB3aXNoIHRvIHByb2NlZWQgJyArXG4gICd3aXRoIGNhdXRpb24uIFdhbGxldHMgc2hvdWxkIHZlcmlmeSB0aGUgc2Vnd2l0IHZlcnNpb24gZnJvbSB0aGUgb3V0cHV0IG9mIGZyb21CZWNoMzIsICcgK1xuICAndGhlbiBkZWNpZGUgd2hlbiBpdCBpcyBzYWZlIHRvIHVzZSB3aGljaCB2ZXJzaW9uIG9mIHNlZ3dpdC4nO1xuLyoqXG4gKiBDb252ZXJ0cyBhbiBvdXRwdXQgYnVmZmVyIHRvIGEgZnV0dXJlIHNlZ3dpdCBhZGRyZXNzLlxuICogQHBhcmFtIG91dHB1dCAtIFRoZSBvdXRwdXQgYnVmZmVyLlxuICogQHBhcmFtIG5ldHdvcmsgLSBUaGUgbmV0d29yayBvYmplY3QuXG4gKiBAcmV0dXJucyBUaGUgZnV0dXJlIHNlZ3dpdCBhZGRyZXNzLlxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiB0aGUgcHJvZ3JhbSBsZW5ndGggb3IgdmVyc2lvbiBpcyBpbnZhbGlkIGZvciBzZWd3aXQgYWRkcmVzcy5cbiAqL1xuZnVuY3Rpb24gX3RvRnV0dXJlU2Vnd2l0QWRkcmVzcyhvdXRwdXQsIG5ldHdvcmspIHtcbiAgY29uc3QgZGF0YSA9IG91dHB1dC5zbGljZSgyKTtcbiAgaWYgKFxuICAgIGRhdGEubGVuZ3RoIDwgRlVUVVJFX1NFR1dJVF9NSU5fU0laRSB8fFxuICAgIGRhdGEubGVuZ3RoID4gRlVUVVJFX1NFR1dJVF9NQVhfU0laRVxuICApXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBwcm9ncmFtIGxlbmd0aCBmb3Igc2Vnd2l0IGFkZHJlc3MnKTtcbiAgY29uc3QgdmVyc2lvbiA9IG91dHB1dFswXSAtIEZVVFVSRV9TRUdXSVRfVkVSU0lPTl9ESUZGO1xuICBpZiAoXG4gICAgdmVyc2lvbiA8IEZVVFVSRV9TRUdXSVRfTUlOX1ZFUlNJT04gfHxcbiAgICB2ZXJzaW9uID4gRlVUVVJFX1NFR1dJVF9NQVhfVkVSU0lPTlxuICApXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCB2ZXJzaW9uIGZvciBzZWd3aXQgYWRkcmVzcycpO1xuICBpZiAob3V0cHV0WzFdICE9PSBkYXRhLmxlbmd0aClcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHNjcmlwdCBmb3Igc2Vnd2l0IGFkZHJlc3MnKTtcbiAgY29uc29sZS53YXJuKEZVVFVSRV9TRUdXSVRfVkVSU0lPTl9XQVJOSU5HKTtcbiAgcmV0dXJuIHRvQmVjaDMyKGRhdGEsIHZlcnNpb24sIG5ldHdvcmsuYmVjaDMyKTtcbn1cbi8qKlxuICogRGVjb2RlcyBhIGJhc2U1OGNoZWNrIGVuY29kZWQgQml0Y29pbiBhZGRyZXNzIGFuZCByZXR1cm5zIHRoZSB2ZXJzaW9uIGFuZCBoYXNoLlxuICpcbiAqIEBwYXJhbSBhZGRyZXNzIC0gVGhlIGJhc2U1OGNoZWNrIGVuY29kZWQgQml0Y29pbiBhZGRyZXNzIHRvIGRlY29kZS5cbiAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSB2ZXJzaW9uIGFuZCBoYXNoIG9mIHRoZSBkZWNvZGVkIGFkZHJlc3MuXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIHRoZSBhZGRyZXNzIGlzIHRvbyBzaG9ydCBvciB0b28gbG9uZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21CYXNlNThDaGVjayhhZGRyZXNzKSB7XG4gIGNvbnN0IHBheWxvYWQgPSBiczU4Y2hlY2suZGVjb2RlKGFkZHJlc3MpO1xuICAvLyBUT0RPOiA0LjAuMCwgbW92ZSB0byBcInRvT3V0cHV0U2NyaXB0XCJcbiAgaWYgKHBheWxvYWQubGVuZ3RoIDwgMjEpIHRocm93IG5ldyBUeXBlRXJyb3IoYWRkcmVzcyArICcgaXMgdG9vIHNob3J0Jyk7XG4gIGlmIChwYXlsb2FkLmxlbmd0aCA+IDIxKSB0aHJvdyBuZXcgVHlwZUVycm9yKGFkZHJlc3MgKyAnIGlzIHRvbyBsb25nJyk7XG4gIGNvbnN0IHZlcnNpb24gPSB0b29scy5yZWFkVUludDgocGF5bG9hZCwgMCk7XG4gIGNvbnN0IGhhc2ggPSBwYXlsb2FkLnNsaWNlKDEpO1xuICByZXR1cm4geyB2ZXJzaW9uLCBoYXNoIH07XG59XG4vKipcbiAqIENvbnZlcnRzIGEgQmVjaDMyIG9yIEJlY2gzMm0gZW5jb2RlZCBhZGRyZXNzIHRvIGl0cyBjb3JyZXNwb25kaW5nIGRhdGEgcmVwcmVzZW50YXRpb24uXG4gKiBAcGFyYW0gYWRkcmVzcyAtIFRoZSBCZWNoMzIgb3IgQmVjaDMybSBlbmNvZGVkIGFkZHJlc3MuXG4gKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgdmVyc2lvbiwgcHJlZml4LCBhbmQgZGF0YSBvZiB0aGUgYWRkcmVzcy5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgdGhlIGFkZHJlc3MgdXNlcyB0aGUgd3JvbmcgZW5jb2RpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQmVjaDMyKGFkZHJlc3MpIHtcbiAgbGV0IHJlc3VsdDtcbiAgbGV0IHZlcnNpb247XG4gIHRyeSB7XG4gICAgcmVzdWx0ID0gYmVjaDMyLmRlY29kZShhZGRyZXNzKTtcbiAgfSBjYXRjaCAoZSkge31cbiAgaWYgKHJlc3VsdCkge1xuICAgIHZlcnNpb24gPSByZXN1bHQud29yZHNbMF07XG4gICAgaWYgKHZlcnNpb24gIT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoYWRkcmVzcyArICcgdXNlcyB3cm9uZyBlbmNvZGluZycpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9IGJlY2gzMm0uZGVjb2RlKGFkZHJlc3MpO1xuICAgIHZlcnNpb24gPSByZXN1bHQud29yZHNbMF07XG4gICAgaWYgKHZlcnNpb24gPT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoYWRkcmVzcyArICcgdXNlcyB3cm9uZyBlbmNvZGluZycpO1xuICB9XG4gIGNvbnN0IGRhdGEgPSBiZWNoMzIuZnJvbVdvcmRzKHJlc3VsdC53b3Jkcy5zbGljZSgxKSk7XG4gIHJldHVybiB7XG4gICAgdmVyc2lvbixcbiAgICBwcmVmaXg6IHJlc3VsdC5wcmVmaXgsXG4gICAgZGF0YTogVWludDhBcnJheS5mcm9tKGRhdGEpLFxuICB9O1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhIGhhc2ggdG8gYSBCYXNlNThDaGVjay1lbmNvZGVkIHN0cmluZy5cbiAqIEBwYXJhbSBoYXNoIC0gVGhlIGhhc2ggdG8gYmUgZW5jb2RlZC5cbiAqIEBwYXJhbSB2ZXJzaW9uIC0gVGhlIHZlcnNpb24gYnl0ZSB0byBiZSBwcmVwZW5kZWQgdG8gdGhlIGVuY29kZWQgc3RyaW5nLlxuICogQHJldHVybnMgVGhlIEJhc2U1OENoZWNrLWVuY29kZWQgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9CYXNlNThDaGVjayhoYXNoLCB2ZXJzaW9uKSB7XG4gIHYucGFyc2Uodi50dXBsZShbSGFzaDE2MGJpdFNjaGVtYSwgVUludDhTY2hlbWFdKSwgW2hhc2gsIHZlcnNpb25dKTtcbiAgY29uc3QgcGF5bG9hZCA9IG5ldyBVaW50OEFycmF5KDIxKTtcbiAgdG9vbHMud3JpdGVVSW50OChwYXlsb2FkLCAwLCB2ZXJzaW9uKTtcbiAgcGF5bG9hZC5zZXQoaGFzaCwgMSk7XG4gIHJldHVybiBiczU4Y2hlY2suZW5jb2RlKHBheWxvYWQpO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhIGJ1ZmZlciB0byBhIEJlY2gzMiBvciBCZWNoMzJtIGVuY29kZWQgc3RyaW5nLlxuICogQHBhcmFtIGRhdGEgLSBUaGUgYnVmZmVyIHRvIGJlIGVuY29kZWQuXG4gKiBAcGFyYW0gdmVyc2lvbiAtIFRoZSB2ZXJzaW9uIG51bWJlciB0byBiZSB1c2VkIGluIHRoZSBlbmNvZGluZy5cbiAqIEBwYXJhbSBwcmVmaXggLSBUaGUgcHJlZml4IHN0cmluZyB0byBiZSB1c2VkIGluIHRoZSBlbmNvZGluZy5cbiAqIEByZXR1cm5zIFRoZSBCZWNoMzIgb3IgQmVjaDMybSBlbmNvZGVkIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvQmVjaDMyKGRhdGEsIHZlcnNpb24sIHByZWZpeCkge1xuICBjb25zdCB3b3JkcyA9IGJlY2gzMi50b1dvcmRzKGRhdGEpO1xuICB3b3Jkcy51bnNoaWZ0KHZlcnNpb24pO1xuICByZXR1cm4gdmVyc2lvbiA9PT0gMFxuICAgID8gYmVjaDMyLmVuY29kZShwcmVmaXgsIHdvcmRzKVxuICAgIDogYmVjaDMybS5lbmNvZGUocHJlZml4LCB3b3Jkcyk7XG59XG4vKipcbiAqIENvbnZlcnRzIGFuIG91dHB1dCBzY3JpcHQgdG8gYSBCaXRjb2luIGFkZHJlc3MuXG4gKiBAcGFyYW0gb3V0cHV0IC0gVGhlIG91dHB1dCBzY3JpcHQgYXMgYSBCdWZmZXIuXG4gKiBAcGFyYW0gbmV0d29yayAtIFRoZSBCaXRjb2luIG5ldHdvcmsgKG9wdGlvbmFsKS5cbiAqIEByZXR1cm5zIFRoZSBCaXRjb2luIGFkZHJlc3MgY29ycmVzcG9uZGluZyB0byB0aGUgb3V0cHV0IHNjcmlwdC5cbiAqIEB0aHJvd3MgSWYgdGhlIG91dHB1dCBzY3JpcHQgaGFzIG5vIG1hdGNoaW5nIGFkZHJlc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tT3V0cHV0U2NyaXB0KG91dHB1dCwgbmV0d29yaykge1xuICAvLyBUT0RPOiBOZXR3b3JrXG4gIG5ldHdvcmsgPSBuZXR3b3JrIHx8IG5ldHdvcmtzLmJpdGNvaW47XG4gIHRyeSB7XG4gICAgcmV0dXJuIHBheW1lbnRzLnAycGtoKHsgb3V0cHV0LCBuZXR3b3JrIH0pLmFkZHJlc3M7XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHRyeSB7XG4gICAgcmV0dXJuIHBheW1lbnRzLnAyc2goeyBvdXRwdXQsIG5ldHdvcmsgfSkuYWRkcmVzcztcbiAgfSBjYXRjaCAoZSkge31cbiAgdHJ5IHtcbiAgICByZXR1cm4gcGF5bWVudHMucDJ3cGtoKHsgb3V0cHV0LCBuZXR3b3JrIH0pLmFkZHJlc3M7XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHRyeSB7XG4gICAgcmV0dXJuIHBheW1lbnRzLnAyd3NoKHsgb3V0cHV0LCBuZXR3b3JrIH0pLmFkZHJlc3M7XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHRyeSB7XG4gICAgcmV0dXJuIHBheW1lbnRzLnAydHIoeyBvdXRwdXQsIG5ldHdvcmsgfSkuYWRkcmVzcztcbiAgfSBjYXRjaCAoZSkge31cbiAgdHJ5IHtcbiAgICByZXR1cm4gX3RvRnV0dXJlU2Vnd2l0QWRkcmVzcyhvdXRwdXQsIG5ldHdvcmspO1xuICB9IGNhdGNoIChlKSB7fVxuICB0aHJvdyBuZXcgRXJyb3IoYnNjcmlwdC50b0FTTShvdXRwdXQpICsgJyBoYXMgbm8gbWF0Y2hpbmcgQWRkcmVzcycpO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhIEJpdGNvaW4gYWRkcmVzcyB0byBpdHMgY29ycmVzcG9uZGluZyBvdXRwdXQgc2NyaXB0LlxuICogQHBhcmFtIGFkZHJlc3MgLSBUaGUgQml0Y29pbiBhZGRyZXNzIHRvIGNvbnZlcnQuXG4gKiBAcGFyYW0gbmV0d29yayAtIFRoZSBCaXRjb2luIG5ldHdvcmsgdG8gdXNlLiBEZWZhdWx0cyB0byB0aGUgQml0Y29pbiBuZXR3b3JrLlxuICogQHJldHVybnMgVGhlIGNvcnJlc3BvbmRpbmcgb3V0cHV0IHNjcmlwdCBhcyBhIEJ1ZmZlci5cbiAqIEB0aHJvd3MgSWYgdGhlIGFkZHJlc3MgaGFzIGFuIGludmFsaWQgcHJlZml4IG9yIG5vIG1hdGNoaW5nIHNjcmlwdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvT3V0cHV0U2NyaXB0KGFkZHJlc3MsIG5ldHdvcmspIHtcbiAgbmV0d29yayA9IG5ldHdvcmsgfHwgbmV0d29ya3MuYml0Y29pbjtcbiAgbGV0IGRlY29kZUJhc2U1ODtcbiAgbGV0IGRlY29kZUJlY2gzMjtcbiAgdHJ5IHtcbiAgICBkZWNvZGVCYXNlNTggPSBmcm9tQmFzZTU4Q2hlY2soYWRkcmVzcyk7XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIGlmIChkZWNvZGVCYXNlNTgpIHtcbiAgICBpZiAoZGVjb2RlQmFzZTU4LnZlcnNpb24gPT09IG5ldHdvcmsucHViS2V5SGFzaClcbiAgICAgIHJldHVybiBwYXltZW50cy5wMnBraCh7IGhhc2g6IGRlY29kZUJhc2U1OC5oYXNoIH0pLm91dHB1dDtcbiAgICBpZiAoZGVjb2RlQmFzZTU4LnZlcnNpb24gPT09IG5ldHdvcmsuc2NyaXB0SGFzaClcbiAgICAgIHJldHVybiBwYXltZW50cy5wMnNoKHsgaGFzaDogZGVjb2RlQmFzZTU4Lmhhc2ggfSkub3V0cHV0O1xuICB9IGVsc2Uge1xuICAgIHRyeSB7XG4gICAgICBkZWNvZGVCZWNoMzIgPSBmcm9tQmVjaDMyKGFkZHJlc3MpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgaWYgKGRlY29kZUJlY2gzMikge1xuICAgICAgaWYgKGRlY29kZUJlY2gzMi5wcmVmaXggIT09IG5ldHdvcmsuYmVjaDMyKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYWRkcmVzcyArICcgaGFzIGFuIGludmFsaWQgcHJlZml4Jyk7XG4gICAgICBpZiAoZGVjb2RlQmVjaDMyLnZlcnNpb24gPT09IDApIHtcbiAgICAgICAgaWYgKGRlY29kZUJlY2gzMi5kYXRhLmxlbmd0aCA9PT0gMjApXG4gICAgICAgICAgcmV0dXJuIHBheW1lbnRzLnAyd3BraCh7IGhhc2g6IGRlY29kZUJlY2gzMi5kYXRhIH0pLm91dHB1dDtcbiAgICAgICAgaWYgKGRlY29kZUJlY2gzMi5kYXRhLmxlbmd0aCA9PT0gMzIpXG4gICAgICAgICAgcmV0dXJuIHBheW1lbnRzLnAyd3NoKHsgaGFzaDogZGVjb2RlQmVjaDMyLmRhdGEgfSkub3V0cHV0O1xuICAgICAgfSBlbHNlIGlmIChkZWNvZGVCZWNoMzIudmVyc2lvbiA9PT0gMSkge1xuICAgICAgICBpZiAoZGVjb2RlQmVjaDMyLmRhdGEubGVuZ3RoID09PSAzMilcbiAgICAgICAgICByZXR1cm4gcGF5bWVudHMucDJ0cih7IHB1YmtleTogZGVjb2RlQmVjaDMyLmRhdGEgfSkub3V0cHV0O1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgZGVjb2RlQmVjaDMyLnZlcnNpb24gPj0gRlVUVVJFX1NFR1dJVF9NSU5fVkVSU0lPTiAmJlxuICAgICAgICBkZWNvZGVCZWNoMzIudmVyc2lvbiA8PSBGVVRVUkVfU0VHV0lUX01BWF9WRVJTSU9OICYmXG4gICAgICAgIGRlY29kZUJlY2gzMi5kYXRhLmxlbmd0aCA+PSBGVVRVUkVfU0VHV0lUX01JTl9TSVpFICYmXG4gICAgICAgIGRlY29kZUJlY2gzMi5kYXRhLmxlbmd0aCA8PSBGVVRVUkVfU0VHV0lUX01BWF9TSVpFXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS53YXJuKEZVVFVSRV9TRUdXSVRfVkVSU0lPTl9XQVJOSU5HKTtcbiAgICAgICAgcmV0dXJuIGJzY3JpcHQuY29tcGlsZShbXG4gICAgICAgICAgZGVjb2RlQmVjaDMyLnZlcnNpb24gKyBGVVRVUkVfU0VHV0lUX1ZFUlNJT05fRElGRixcbiAgICAgICAgICBkZWNvZGVCZWNoMzIuZGF0YSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHRocm93IG5ldyBFcnJvcihhZGRyZXNzICsgJyBoYXMgbm8gbWF0Y2hpbmcgU2NyaXB0Jyk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/address.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/bip66.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/bip66.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   check: () => (/* binding */ check),\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   encode: () => (/* binding */ encode)\n/* harmony export */ });\n// Reference https://github.com/bitcoin/bips/blob/master/bip-0066.mediawiki\n// Format: 0x30 [total-length] 0x02 [R-length] [R] 0x02 [S-length] [S]\n// NOTE: SIGHASH byte ignored AND restricted, truncate before use\n/**\n * Checks if the given buffer is a valid BIP66-encoded signature.\n *\n * @param buffer - The buffer to check.\n * @returns A boolean indicating whether the buffer is a valid BIP66-encoded signature.\n */\nfunction check(buffer) {\n  if (buffer.length < 8) return false;\n  if (buffer.length > 72) return false;\n  if (buffer[0] !== 0x30) return false;\n  if (buffer[1] !== buffer.length - 2) return false;\n  if (buffer[2] !== 0x02) return false;\n  const lenR = buffer[3];\n  if (lenR === 0) return false;\n  if (5 + lenR >= buffer.length) return false;\n  if (buffer[4 + lenR] !== 0x02) return false;\n  const lenS = buffer[5 + lenR];\n  if (lenS === 0) return false;\n  if (6 + lenR + lenS !== buffer.length) return false;\n  if (buffer[4] & 0x80) return false;\n  if (lenR > 1 && buffer[4] === 0x00 && !(buffer[5] & 0x80)) return false;\n  if (buffer[lenR + 6] & 0x80) return false;\n  if (lenS > 1 && buffer[lenR + 6] === 0x00 && !(buffer[lenR + 7] & 0x80))\n    return false;\n  return true;\n}\n/**\n * Decodes a DER-encoded signature buffer and returns the R and S values.\n * @param buffer - The DER-encoded signature buffer.\n * @returns An object containing the R and S values.\n * @throws {Error} If the DER sequence length is too short, too long, or invalid.\n * @throws {Error} If the R or S length is zero or invalid.\n * @throws {Error} If the R or S value is negative or excessively padded.\n */\nfunction decode(buffer) {\n  if (buffer.length < 8) throw new Error('DER sequence length is too short');\n  if (buffer.length > 72) throw new Error('DER sequence length is too long');\n  if (buffer[0] !== 0x30) throw new Error('Expected DER sequence');\n  if (buffer[1] !== buffer.length - 2)\n    throw new Error('DER sequence length is invalid');\n  if (buffer[2] !== 0x02) throw new Error('Expected DER integer');\n  const lenR = buffer[3];\n  if (lenR === 0) throw new Error('R length is zero');\n  if (5 + lenR >= buffer.length) throw new Error('R length is too long');\n  if (buffer[4 + lenR] !== 0x02) throw new Error('Expected DER integer (2)');\n  const lenS = buffer[5 + lenR];\n  if (lenS === 0) throw new Error('S length is zero');\n  if (6 + lenR + lenS !== buffer.length) throw new Error('S length is invalid');\n  if (buffer[4] & 0x80) throw new Error('R value is negative');\n  if (lenR > 1 && buffer[4] === 0x00 && !(buffer[5] & 0x80))\n    throw new Error('R value excessively padded');\n  if (buffer[lenR + 6] & 0x80) throw new Error('S value is negative');\n  if (lenS > 1 && buffer[lenR + 6] === 0x00 && !(buffer[lenR + 7] & 0x80))\n    throw new Error('S value excessively padded');\n  // non-BIP66 - extract R, S values\n  return {\n    r: buffer.slice(4, 4 + lenR),\n    s: buffer.slice(6 + lenR),\n  };\n}\n/*\n * Expects r and s to be positive DER integers.\n *\n * The DER format uses the most significant bit as a sign bit (& 0x80).\n * If the significant bit is set AND the integer is positive, a 0x00 is prepended.\n *\n * Examples:\n *\n *      0 =>     0x00\n *      1 =>     0x01\n *     -1 =>     0xff\n *    127 =>     0x7f\n *   -127 =>     0x81\n *    128 =>   0x0080\n *   -128 =>     0x80\n *    255 =>   0x00ff\n *   -255 =>   0xff01\n *  16300 =>   0x3fac\n * -16300 =>   0xc054\n *  62300 => 0x00f35c\n * -62300 => 0xff0ca4\n */\nfunction encode(r, s) {\n  const lenR = r.length;\n  const lenS = s.length;\n  if (lenR === 0) throw new Error('R length is zero');\n  if (lenS === 0) throw new Error('S length is zero');\n  if (lenR > 33) throw new Error('R length is too long');\n  if (lenS > 33) throw new Error('S length is too long');\n  if (r[0] & 0x80) throw new Error('R value is negative');\n  if (s[0] & 0x80) throw new Error('S value is negative');\n  if (lenR > 1 && r[0] === 0x00 && !(r[1] & 0x80))\n    throw new Error('R value excessively padded');\n  if (lenS > 1 && s[0] === 0x00 && !(s[1] & 0x80))\n    throw new Error('S value excessively padded');\n  const signature = new Uint8Array(6 + lenR + lenS);\n  // 0x30 [total-length] 0x02 [R-length] [R] 0x02 [S-length] [S]\n  signature[0] = 0x30;\n  signature[1] = signature.length - 2;\n  signature[2] = 0x02;\n  signature[3] = r.length;\n  signature.set(r, 4);\n  signature[4 + lenR] = 0x02;\n  signature[5 + lenR] = s.length;\n  signature.set(s, 6 + lenR);\n  return signature;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9iaXA2Ni5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIsWUFBWSxPQUFPO0FBQ25CLFlBQVksT0FBTztBQUNuQjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvYnRjL21pZGwteC1iaXRjb2luLXN1bW1pdC1oYWNrYXRob24tMjAyNS91dHhvLXBzYnQtZGVtby9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9iaXA2Ni5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBSZWZlcmVuY2UgaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW4vYmlwcy9ibG9iL21hc3Rlci9iaXAtMDA2Ni5tZWRpYXdpa2lcbi8vIEZvcm1hdDogMHgzMCBbdG90YWwtbGVuZ3RoXSAweDAyIFtSLWxlbmd0aF0gW1JdIDB4MDIgW1MtbGVuZ3RoXSBbU11cbi8vIE5PVEU6IFNJR0hBU0ggYnl0ZSBpZ25vcmVkIEFORCByZXN0cmljdGVkLCB0cnVuY2F0ZSBiZWZvcmUgdXNlXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gYnVmZmVyIGlzIGEgdmFsaWQgQklQNjYtZW5jb2RlZCBzaWduYXR1cmUuXG4gKlxuICogQHBhcmFtIGJ1ZmZlciAtIFRoZSBidWZmZXIgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBBIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBidWZmZXIgaXMgYSB2YWxpZCBCSVA2Ni1lbmNvZGVkIHNpZ25hdHVyZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrKGJ1ZmZlcikge1xuICBpZiAoYnVmZmVyLmxlbmd0aCA8IDgpIHJldHVybiBmYWxzZTtcbiAgaWYgKGJ1ZmZlci5sZW5ndGggPiA3MikgcmV0dXJuIGZhbHNlO1xuICBpZiAoYnVmZmVyWzBdICE9PSAweDMwKSByZXR1cm4gZmFsc2U7XG4gIGlmIChidWZmZXJbMV0gIT09IGJ1ZmZlci5sZW5ndGggLSAyKSByZXR1cm4gZmFsc2U7XG4gIGlmIChidWZmZXJbMl0gIT09IDB4MDIpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgbGVuUiA9IGJ1ZmZlclszXTtcbiAgaWYgKGxlblIgPT09IDApIHJldHVybiBmYWxzZTtcbiAgaWYgKDUgKyBsZW5SID49IGJ1ZmZlci5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgaWYgKGJ1ZmZlcls0ICsgbGVuUl0gIT09IDB4MDIpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgbGVuUyA9IGJ1ZmZlcls1ICsgbGVuUl07XG4gIGlmIChsZW5TID09PSAwKSByZXR1cm4gZmFsc2U7XG4gIGlmICg2ICsgbGVuUiArIGxlblMgIT09IGJ1ZmZlci5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgaWYgKGJ1ZmZlcls0XSAmIDB4ODApIHJldHVybiBmYWxzZTtcbiAgaWYgKGxlblIgPiAxICYmIGJ1ZmZlcls0XSA9PT0gMHgwMCAmJiAhKGJ1ZmZlcls1XSAmIDB4ODApKSByZXR1cm4gZmFsc2U7XG4gIGlmIChidWZmZXJbbGVuUiArIDZdICYgMHg4MCkgcmV0dXJuIGZhbHNlO1xuICBpZiAobGVuUyA+IDEgJiYgYnVmZmVyW2xlblIgKyA2XSA9PT0gMHgwMCAmJiAhKGJ1ZmZlcltsZW5SICsgN10gJiAweDgwKSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBEZWNvZGVzIGEgREVSLWVuY29kZWQgc2lnbmF0dXJlIGJ1ZmZlciBhbmQgcmV0dXJucyB0aGUgUiBhbmQgUyB2YWx1ZXMuXG4gKiBAcGFyYW0gYnVmZmVyIC0gVGhlIERFUi1lbmNvZGVkIHNpZ25hdHVyZSBidWZmZXIuXG4gKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgUiBhbmQgUyB2YWx1ZXMuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIERFUiBzZXF1ZW5jZSBsZW5ndGggaXMgdG9vIHNob3J0LCB0b28gbG9uZywgb3IgaW52YWxpZC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgUiBvciBTIGxlbmd0aCBpcyB6ZXJvIG9yIGludmFsaWQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIFIgb3IgUyB2YWx1ZSBpcyBuZWdhdGl2ZSBvciBleGNlc3NpdmVseSBwYWRkZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGUoYnVmZmVyKSB7XG4gIGlmIChidWZmZXIubGVuZ3RoIDwgOCkgdGhyb3cgbmV3IEVycm9yKCdERVIgc2VxdWVuY2UgbGVuZ3RoIGlzIHRvbyBzaG9ydCcpO1xuICBpZiAoYnVmZmVyLmxlbmd0aCA+IDcyKSB0aHJvdyBuZXcgRXJyb3IoJ0RFUiBzZXF1ZW5jZSBsZW5ndGggaXMgdG9vIGxvbmcnKTtcbiAgaWYgKGJ1ZmZlclswXSAhPT0gMHgzMCkgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBERVIgc2VxdWVuY2UnKTtcbiAgaWYgKGJ1ZmZlclsxXSAhPT0gYnVmZmVyLmxlbmd0aCAtIDIpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdERVIgc2VxdWVuY2UgbGVuZ3RoIGlzIGludmFsaWQnKTtcbiAgaWYgKGJ1ZmZlclsyXSAhPT0gMHgwMikgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBERVIgaW50ZWdlcicpO1xuICBjb25zdCBsZW5SID0gYnVmZmVyWzNdO1xuICBpZiAobGVuUiA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdSIGxlbmd0aCBpcyB6ZXJvJyk7XG4gIGlmICg1ICsgbGVuUiA+PSBidWZmZXIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ1IgbGVuZ3RoIGlzIHRvbyBsb25nJyk7XG4gIGlmIChidWZmZXJbNCArIGxlblJdICE9PSAweDAyKSB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIERFUiBpbnRlZ2VyICgyKScpO1xuICBjb25zdCBsZW5TID0gYnVmZmVyWzUgKyBsZW5SXTtcbiAgaWYgKGxlblMgPT09IDApIHRocm93IG5ldyBFcnJvcignUyBsZW5ndGggaXMgemVybycpO1xuICBpZiAoNiArIGxlblIgKyBsZW5TICE9PSBidWZmZXIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ1MgbGVuZ3RoIGlzIGludmFsaWQnKTtcbiAgaWYgKGJ1ZmZlcls0XSAmIDB4ODApIHRocm93IG5ldyBFcnJvcignUiB2YWx1ZSBpcyBuZWdhdGl2ZScpO1xuICBpZiAobGVuUiA+IDEgJiYgYnVmZmVyWzRdID09PSAweDAwICYmICEoYnVmZmVyWzVdICYgMHg4MCkpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdSIHZhbHVlIGV4Y2Vzc2l2ZWx5IHBhZGRlZCcpO1xuICBpZiAoYnVmZmVyW2xlblIgKyA2XSAmIDB4ODApIHRocm93IG5ldyBFcnJvcignUyB2YWx1ZSBpcyBuZWdhdGl2ZScpO1xuICBpZiAobGVuUyA+IDEgJiYgYnVmZmVyW2xlblIgKyA2XSA9PT0gMHgwMCAmJiAhKGJ1ZmZlcltsZW5SICsgN10gJiAweDgwKSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1MgdmFsdWUgZXhjZXNzaXZlbHkgcGFkZGVkJyk7XG4gIC8vIG5vbi1CSVA2NiAtIGV4dHJhY3QgUiwgUyB2YWx1ZXNcbiAgcmV0dXJuIHtcbiAgICByOiBidWZmZXIuc2xpY2UoNCwgNCArIGxlblIpLFxuICAgIHM6IGJ1ZmZlci5zbGljZSg2ICsgbGVuUiksXG4gIH07XG59XG4vKlxuICogRXhwZWN0cyByIGFuZCBzIHRvIGJlIHBvc2l0aXZlIERFUiBpbnRlZ2Vycy5cbiAqXG4gKiBUaGUgREVSIGZvcm1hdCB1c2VzIHRoZSBtb3N0IHNpZ25pZmljYW50IGJpdCBhcyBhIHNpZ24gYml0ICgmIDB4ODApLlxuICogSWYgdGhlIHNpZ25pZmljYW50IGJpdCBpcyBzZXQgQU5EIHRoZSBpbnRlZ2VyIGlzIHBvc2l0aXZlLCBhIDB4MDAgaXMgcHJlcGVuZGVkLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgMCA9PiAgICAgMHgwMFxuICogICAgICAxID0+ICAgICAweDAxXG4gKiAgICAgLTEgPT4gICAgIDB4ZmZcbiAqICAgIDEyNyA9PiAgICAgMHg3ZlxuICogICAtMTI3ID0+ICAgICAweDgxXG4gKiAgICAxMjggPT4gICAweDAwODBcbiAqICAgLTEyOCA9PiAgICAgMHg4MFxuICogICAgMjU1ID0+ICAgMHgwMGZmXG4gKiAgIC0yNTUgPT4gICAweGZmMDFcbiAqICAxNjMwMCA9PiAgIDB4M2ZhY1xuICogLTE2MzAwID0+ICAgMHhjMDU0XG4gKiAgNjIzMDAgPT4gMHgwMGYzNWNcbiAqIC02MjMwMCA9PiAweGZmMGNhNFxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlKHIsIHMpIHtcbiAgY29uc3QgbGVuUiA9IHIubGVuZ3RoO1xuICBjb25zdCBsZW5TID0gcy5sZW5ndGg7XG4gIGlmIChsZW5SID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ1IgbGVuZ3RoIGlzIHplcm8nKTtcbiAgaWYgKGxlblMgPT09IDApIHRocm93IG5ldyBFcnJvcignUyBsZW5ndGggaXMgemVybycpO1xuICBpZiAobGVuUiA+IDMzKSB0aHJvdyBuZXcgRXJyb3IoJ1IgbGVuZ3RoIGlzIHRvbyBsb25nJyk7XG4gIGlmIChsZW5TID4gMzMpIHRocm93IG5ldyBFcnJvcignUyBsZW5ndGggaXMgdG9vIGxvbmcnKTtcbiAgaWYgKHJbMF0gJiAweDgwKSB0aHJvdyBuZXcgRXJyb3IoJ1IgdmFsdWUgaXMgbmVnYXRpdmUnKTtcbiAgaWYgKHNbMF0gJiAweDgwKSB0aHJvdyBuZXcgRXJyb3IoJ1MgdmFsdWUgaXMgbmVnYXRpdmUnKTtcbiAgaWYgKGxlblIgPiAxICYmIHJbMF0gPT09IDB4MDAgJiYgIShyWzFdICYgMHg4MCkpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdSIHZhbHVlIGV4Y2Vzc2l2ZWx5IHBhZGRlZCcpO1xuICBpZiAobGVuUyA+IDEgJiYgc1swXSA9PT0gMHgwMCAmJiAhKHNbMV0gJiAweDgwKSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1MgdmFsdWUgZXhjZXNzaXZlbHkgcGFkZGVkJyk7XG4gIGNvbnN0IHNpZ25hdHVyZSA9IG5ldyBVaW50OEFycmF5KDYgKyBsZW5SICsgbGVuUyk7XG4gIC8vIDB4MzAgW3RvdGFsLWxlbmd0aF0gMHgwMiBbUi1sZW5ndGhdIFtSXSAweDAyIFtTLWxlbmd0aF0gW1NdXG4gIHNpZ25hdHVyZVswXSA9IDB4MzA7XG4gIHNpZ25hdHVyZVsxXSA9IHNpZ25hdHVyZS5sZW5ndGggLSAyO1xuICBzaWduYXR1cmVbMl0gPSAweDAyO1xuICBzaWduYXR1cmVbM10gPSByLmxlbmd0aDtcbiAgc2lnbmF0dXJlLnNldChyLCA0KTtcbiAgc2lnbmF0dXJlWzQgKyBsZW5SXSA9IDB4MDI7XG4gIHNpZ25hdHVyZVs1ICsgbGVuUl0gPSBzLmxlbmd0aDtcbiAgc2lnbmF0dXJlLnNldChzLCA2ICsgbGVuUik7XG4gIHJldHVybiBzaWduYXR1cmU7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/bip66.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/block.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/block.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Block: () => (/* binding */ Block)\n/* harmony export */ });\n/* harmony import */ var _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bufferutils.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/bufferutils.js\");\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./crypto.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/crypto.js\");\n/* harmony import */ var _merkle_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./merkle.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/merkle.js\");\n/* harmony import */ var _transaction_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./transaction.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/transaction.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n\n\n\n\n\n\nconst errorMerkleNoTxes = new TypeError(\n  'Cannot compute merkle root for zero transactions',\n);\nconst errorWitnessNotSegwit = new TypeError(\n  'Cannot compute witness commit for non-segwit block',\n);\nclass Block {\n  static fromBuffer(buffer) {\n    if (buffer.length < 80) throw new Error('Buffer too small (< 80 bytes)');\n    const bufferReader = new _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferReader(buffer);\n    const block = new Block();\n    block.version = bufferReader.readInt32();\n    block.prevHash = bufferReader.readSlice(32);\n    block.merkleRoot = bufferReader.readSlice(32);\n    block.timestamp = bufferReader.readUInt32();\n    block.bits = bufferReader.readUInt32();\n    block.nonce = bufferReader.readUInt32();\n    if (buffer.length === 80) return block;\n    const readTransaction = () => {\n      const tx = _transaction_js__WEBPACK_IMPORTED_MODULE_3__.Transaction.fromBuffer(\n        bufferReader.buffer.slice(bufferReader.offset),\n        true,\n      );\n      bufferReader.offset += tx.byteLength();\n      return tx;\n    };\n    const nTransactions = bufferReader.readVarInt();\n    block.transactions = [];\n    for (let i = 0; i < nTransactions; ++i) {\n      const tx = readTransaction();\n      block.transactions.push(tx);\n    }\n    const witnessCommit = block.getWitnessCommit();\n    // This Block contains a witness commit\n    if (witnessCommit) block.witnessCommit = witnessCommit;\n    return block;\n  }\n  static fromHex(hex) {\n    return Block.fromBuffer(uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.fromHex(hex));\n  }\n  static calculateTarget(bits) {\n    const exponent = ((bits & 0xff000000) >> 24) - 3;\n    const mantissa = bits & 0x007fffff;\n    const target = new Uint8Array(32);\n    target[29 - exponent] = (mantissa >> 16) & 0xff;\n    target[30 - exponent] = (mantissa >> 8) & 0xff;\n    target[31 - exponent] = mantissa & 0xff;\n    return target;\n  }\n  static calculateMerkleRoot(transactions, forWitness) {\n    valibot__WEBPACK_IMPORTED_MODULE_5__.parse(valibot__WEBPACK_IMPORTED_MODULE_5__.array(valibot__WEBPACK_IMPORTED_MODULE_5__.object({ getHash: valibot__WEBPACK_IMPORTED_MODULE_5__[\"function\"]() })), transactions);\n    if (transactions.length === 0) throw errorMerkleNoTxes;\n    if (forWitness && !txesHaveWitnessCommit(transactions))\n      throw errorWitnessNotSegwit;\n    const hashes = transactions.map(transaction =>\n      transaction.getHash(forWitness),\n    );\n    const rootHash = (0,_merkle_js__WEBPACK_IMPORTED_MODULE_2__.fastMerkleRoot)(hashes, _crypto_js__WEBPACK_IMPORTED_MODULE_1__.hash256);\n    return forWitness\n      ? _crypto_js__WEBPACK_IMPORTED_MODULE_1__.hash256(\n          uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.concat([rootHash, transactions[0].ins[0].witness[0]]),\n        )\n      : rootHash;\n  }\n  version = 1;\n  prevHash = undefined;\n  merkleRoot = undefined;\n  timestamp = 0;\n  witnessCommit = undefined;\n  bits = 0;\n  nonce = 0;\n  transactions = undefined;\n  getWitnessCommit() {\n    if (!txesHaveWitnessCommit(this.transactions)) return null;\n    // The merkle root for the witness data is in an OP_RETURN output.\n    // There is no rule for the index of the output, so use filter to find it.\n    // The root is prepended with 0xaa21a9ed so check for 0x6a24aa21a9ed\n    // If multiple commits are found, the output with highest index is assumed.\n    const witnessCommits = this.transactions[0].outs\n      .filter(\n        out =>\n          uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.compare(\n            out.script.slice(0, 6),\n            Uint8Array.from([0x6a, 0x24, 0xaa, 0x21, 0xa9, 0xed]),\n          ) === 0,\n      )\n      .map(out => out.script.slice(6, 38));\n    if (witnessCommits.length === 0) return null;\n    // Use the commit with the highest output (should only be one though)\n    const result = witnessCommits[witnessCommits.length - 1];\n    if (!(result instanceof Uint8Array && result.length === 32)) return null;\n    return result;\n  }\n  hasWitnessCommit() {\n    if (\n      this.witnessCommit instanceof Uint8Array &&\n      this.witnessCommit.length === 32\n    )\n      return true;\n    if (this.getWitnessCommit() !== null) return true;\n    return false;\n  }\n  hasWitness() {\n    return anyTxHasWitness(this.transactions);\n  }\n  weight() {\n    const base = this.byteLength(false, false);\n    const total = this.byteLength(false, true);\n    return base * 3 + total;\n  }\n  byteLength(headersOnly, allowWitness = true) {\n    if (headersOnly || !this.transactions) return 80;\n    return (\n      80 +\n      _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.varuint.encodingLength(this.transactions.length) +\n      this.transactions.reduce((a, x) => a + x.byteLength(allowWitness), 0)\n    );\n  }\n  getHash() {\n    return _crypto_js__WEBPACK_IMPORTED_MODULE_1__.hash256(this.toBuffer(true));\n  }\n  getId() {\n    return uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.toHex((0,_bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.reverseBuffer)(this.getHash()));\n  }\n  getUTCDate() {\n    const date = new Date(0); // epoch\n    date.setUTCSeconds(this.timestamp);\n    return date;\n  }\n  // TODO: buffer, offset compatibility\n  toBuffer(headersOnly) {\n    const buffer = new Uint8Array(this.byteLength(headersOnly));\n    const bufferWriter = new _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter(buffer);\n    bufferWriter.writeInt32(this.version);\n    bufferWriter.writeSlice(this.prevHash);\n    bufferWriter.writeSlice(this.merkleRoot);\n    bufferWriter.writeUInt32(this.timestamp);\n    bufferWriter.writeUInt32(this.bits);\n    bufferWriter.writeUInt32(this.nonce);\n    if (headersOnly || !this.transactions) return buffer;\n    const { bytes } = _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.varuint.encode(\n      this.transactions.length,\n      buffer,\n      bufferWriter.offset,\n    );\n    bufferWriter.offset += bytes;\n    this.transactions.forEach(tx => {\n      const txSize = tx.byteLength(); // TODO: extract from toBuffer?\n      tx.toBuffer(buffer, bufferWriter.offset);\n      bufferWriter.offset += txSize;\n    });\n    return buffer;\n  }\n  toHex(headersOnly) {\n    return uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.toHex(this.toBuffer(headersOnly));\n  }\n  checkTxRoots() {\n    // If the Block has segwit transactions but no witness commit,\n    // there's no way it can be valid, so fail the check.\n    const hasWitnessCommit = this.hasWitnessCommit();\n    if (!hasWitnessCommit && this.hasWitness()) return false;\n    return (\n      this.__checkMerkleRoot() &&\n      (hasWitnessCommit ? this.__checkWitnessCommit() : true)\n    );\n  }\n  checkProofOfWork() {\n    const hash = (0,_bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.reverseBuffer)(this.getHash());\n    const target = Block.calculateTarget(this.bits);\n    return uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.compare(hash, target) <= 0;\n  }\n  __checkMerkleRoot() {\n    if (!this.transactions) throw errorMerkleNoTxes;\n    const actualMerkleRoot = Block.calculateMerkleRoot(this.transactions);\n    return uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.compare(this.merkleRoot, actualMerkleRoot) === 0;\n  }\n  __checkWitnessCommit() {\n    if (!this.transactions) throw errorMerkleNoTxes;\n    if (!this.hasWitnessCommit()) throw errorWitnessNotSegwit;\n    const actualWitnessCommit = Block.calculateMerkleRoot(\n      this.transactions,\n      true,\n    );\n    return uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.compare(this.witnessCommit, actualWitnessCommit) === 0;\n  }\n}\nfunction txesHaveWitnessCommit(transactions) {\n  return (\n    transactions instanceof Array &&\n    transactions[0] &&\n    transactions[0].ins &&\n    transactions[0].ins instanceof Array &&\n    transactions[0].ins[0] &&\n    transactions[0].ins[0].witness &&\n    transactions[0].ins[0].witness instanceof Array &&\n    transactions[0].ins[0].witness.length > 0\n  );\n}\nfunction anyTxHasWitness(transactions) {\n  return (\n    transactions instanceof Array &&\n    transactions.some(\n      tx =>\n        typeof tx === 'object' &&\n        tx.ins instanceof Array &&\n        tx.ins.some(\n          input =>\n            typeof input === 'object' &&\n            input.witness instanceof Array &&\n            input.witness.length > 0,\n        ),\n    )\n  );\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9ibG9jay5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBSzBCO0FBQ2E7QUFDTTtBQUNFO0FBQ2xCO0FBQ2E7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsNkJBQTZCLHlEQUFZO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix3REFBVztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1CQUFtQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIscURBQWE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksMENBQU8sQ0FBQywwQ0FBTyxDQUFDLDJDQUFRLEdBQUcsU0FBUyxnREFBVSxJQUFJO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwwREFBYyxTQUFTLCtDQUFlO0FBQzNEO0FBQ0EsUUFBUSwrQ0FBZTtBQUN2QixVQUFVLG9EQUFZO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFEQUFhO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG1FQUFzQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0NBQWU7QUFDMUI7QUFDQTtBQUNBLFdBQVcsbURBQVcsQ0FBQyw4REFBYTtBQUNwQztBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix5REFBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUSxFQUFFLDJEQUFjO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbURBQVc7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDhEQUFhO0FBQzlCO0FBQ0EsV0FBVyxxREFBYTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQWE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQWE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvYnRjL21pZGwteC1iaXRjb2luLXN1bW1pdC1oYWNrYXRob24tMjAyNS91dHhvLXBzYnQtZGVtby9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9ibG9jay5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBCdWZmZXJSZWFkZXIsXG4gIEJ1ZmZlcldyaXRlcixcbiAgcmV2ZXJzZUJ1ZmZlcixcbiAgdmFydWludCxcbn0gZnJvbSAnLi9idWZmZXJ1dGlscy5qcyc7XG5pbXBvcnQgKiBhcyBiY3J5cHRvIGZyb20gJy4vY3J5cHRvLmpzJztcbmltcG9ydCB7IGZhc3RNZXJrbGVSb290IH0gZnJvbSAnLi9tZXJrbGUuanMnO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb24gfSBmcm9tICcuL3RyYW5zYWN0aW9uLmpzJztcbmltcG9ydCAqIGFzIHYgZnJvbSAndmFsaWJvdCc7XG5pbXBvcnQgKiBhcyB0b29scyBmcm9tICd1aW50OGFycmF5LXRvb2xzJztcbmNvbnN0IGVycm9yTWVya2xlTm9UeGVzID0gbmV3IFR5cGVFcnJvcihcbiAgJ0Nhbm5vdCBjb21wdXRlIG1lcmtsZSByb290IGZvciB6ZXJvIHRyYW5zYWN0aW9ucycsXG4pO1xuY29uc3QgZXJyb3JXaXRuZXNzTm90U2Vnd2l0ID0gbmV3IFR5cGVFcnJvcihcbiAgJ0Nhbm5vdCBjb21wdXRlIHdpdG5lc3MgY29tbWl0IGZvciBub24tc2Vnd2l0IGJsb2NrJyxcbik7XG5leHBvcnQgY2xhc3MgQmxvY2sge1xuICBzdGF0aWMgZnJvbUJ1ZmZlcihidWZmZXIpIHtcbiAgICBpZiAoYnVmZmVyLmxlbmd0aCA8IDgwKSB0aHJvdyBuZXcgRXJyb3IoJ0J1ZmZlciB0b28gc21hbGwgKDwgODAgYnl0ZXMpJyk7XG4gICAgY29uc3QgYnVmZmVyUmVhZGVyID0gbmV3IEJ1ZmZlclJlYWRlcihidWZmZXIpO1xuICAgIGNvbnN0IGJsb2NrID0gbmV3IEJsb2NrKCk7XG4gICAgYmxvY2sudmVyc2lvbiA9IGJ1ZmZlclJlYWRlci5yZWFkSW50MzIoKTtcbiAgICBibG9jay5wcmV2SGFzaCA9IGJ1ZmZlclJlYWRlci5yZWFkU2xpY2UoMzIpO1xuICAgIGJsb2NrLm1lcmtsZVJvb3QgPSBidWZmZXJSZWFkZXIucmVhZFNsaWNlKDMyKTtcbiAgICBibG9jay50aW1lc3RhbXAgPSBidWZmZXJSZWFkZXIucmVhZFVJbnQzMigpO1xuICAgIGJsb2NrLmJpdHMgPSBidWZmZXJSZWFkZXIucmVhZFVJbnQzMigpO1xuICAgIGJsb2NrLm5vbmNlID0gYnVmZmVyUmVhZGVyLnJlYWRVSW50MzIoKTtcbiAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gODApIHJldHVybiBibG9jaztcbiAgICBjb25zdCByZWFkVHJhbnNhY3Rpb24gPSAoKSA9PiB7XG4gICAgICBjb25zdCB0eCA9IFRyYW5zYWN0aW9uLmZyb21CdWZmZXIoXG4gICAgICAgIGJ1ZmZlclJlYWRlci5idWZmZXIuc2xpY2UoYnVmZmVyUmVhZGVyLm9mZnNldCksXG4gICAgICAgIHRydWUsXG4gICAgICApO1xuICAgICAgYnVmZmVyUmVhZGVyLm9mZnNldCArPSB0eC5ieXRlTGVuZ3RoKCk7XG4gICAgICByZXR1cm4gdHg7XG4gICAgfTtcbiAgICBjb25zdCBuVHJhbnNhY3Rpb25zID0gYnVmZmVyUmVhZGVyLnJlYWRWYXJJbnQoKTtcbiAgICBibG9jay50cmFuc2FjdGlvbnMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5UcmFuc2FjdGlvbnM7ICsraSkge1xuICAgICAgY29uc3QgdHggPSByZWFkVHJhbnNhY3Rpb24oKTtcbiAgICAgIGJsb2NrLnRyYW5zYWN0aW9ucy5wdXNoKHR4KTtcbiAgICB9XG4gICAgY29uc3Qgd2l0bmVzc0NvbW1pdCA9IGJsb2NrLmdldFdpdG5lc3NDb21taXQoKTtcbiAgICAvLyBUaGlzIEJsb2NrIGNvbnRhaW5zIGEgd2l0bmVzcyBjb21taXRcbiAgICBpZiAod2l0bmVzc0NvbW1pdCkgYmxvY2sud2l0bmVzc0NvbW1pdCA9IHdpdG5lc3NDb21taXQ7XG4gICAgcmV0dXJuIGJsb2NrO1xuICB9XG4gIHN0YXRpYyBmcm9tSGV4KGhleCkge1xuICAgIHJldHVybiBCbG9jay5mcm9tQnVmZmVyKHRvb2xzLmZyb21IZXgoaGV4KSk7XG4gIH1cbiAgc3RhdGljIGNhbGN1bGF0ZVRhcmdldChiaXRzKSB7XG4gICAgY29uc3QgZXhwb25lbnQgPSAoKGJpdHMgJiAweGZmMDAwMDAwKSA+PiAyNCkgLSAzO1xuICAgIGNvbnN0IG1hbnRpc3NhID0gYml0cyAmIDB4MDA3ZmZmZmY7XG4gICAgY29uc3QgdGFyZ2V0ID0gbmV3IFVpbnQ4QXJyYXkoMzIpO1xuICAgIHRhcmdldFsyOSAtIGV4cG9uZW50XSA9IChtYW50aXNzYSA+PiAxNikgJiAweGZmO1xuICAgIHRhcmdldFszMCAtIGV4cG9uZW50XSA9IChtYW50aXNzYSA+PiA4KSAmIDB4ZmY7XG4gICAgdGFyZ2V0WzMxIC0gZXhwb25lbnRdID0gbWFudGlzc2EgJiAweGZmO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgc3RhdGljIGNhbGN1bGF0ZU1lcmtsZVJvb3QodHJhbnNhY3Rpb25zLCBmb3JXaXRuZXNzKSB7XG4gICAgdi5wYXJzZSh2LmFycmF5KHYub2JqZWN0KHsgZ2V0SGFzaDogdi5mdW5jdGlvbigpIH0pKSwgdHJhbnNhY3Rpb25zKTtcbiAgICBpZiAodHJhbnNhY3Rpb25zLmxlbmd0aCA9PT0gMCkgdGhyb3cgZXJyb3JNZXJrbGVOb1R4ZXM7XG4gICAgaWYgKGZvcldpdG5lc3MgJiYgIXR4ZXNIYXZlV2l0bmVzc0NvbW1pdCh0cmFuc2FjdGlvbnMpKVxuICAgICAgdGhyb3cgZXJyb3JXaXRuZXNzTm90U2Vnd2l0O1xuICAgIGNvbnN0IGhhc2hlcyA9IHRyYW5zYWN0aW9ucy5tYXAodHJhbnNhY3Rpb24gPT5cbiAgICAgIHRyYW5zYWN0aW9uLmdldEhhc2goZm9yV2l0bmVzcyksXG4gICAgKTtcbiAgICBjb25zdCByb290SGFzaCA9IGZhc3RNZXJrbGVSb290KGhhc2hlcywgYmNyeXB0by5oYXNoMjU2KTtcbiAgICByZXR1cm4gZm9yV2l0bmVzc1xuICAgICAgPyBiY3J5cHRvLmhhc2gyNTYoXG4gICAgICAgICAgdG9vbHMuY29uY2F0KFtyb290SGFzaCwgdHJhbnNhY3Rpb25zWzBdLmluc1swXS53aXRuZXNzWzBdXSksXG4gICAgICAgIClcbiAgICAgIDogcm9vdEhhc2g7XG4gIH1cbiAgdmVyc2lvbiA9IDE7XG4gIHByZXZIYXNoID0gdW5kZWZpbmVkO1xuICBtZXJrbGVSb290ID0gdW5kZWZpbmVkO1xuICB0aW1lc3RhbXAgPSAwO1xuICB3aXRuZXNzQ29tbWl0ID0gdW5kZWZpbmVkO1xuICBiaXRzID0gMDtcbiAgbm9uY2UgPSAwO1xuICB0cmFuc2FjdGlvbnMgPSB1bmRlZmluZWQ7XG4gIGdldFdpdG5lc3NDb21taXQoKSB7XG4gICAgaWYgKCF0eGVzSGF2ZVdpdG5lc3NDb21taXQodGhpcy50cmFuc2FjdGlvbnMpKSByZXR1cm4gbnVsbDtcbiAgICAvLyBUaGUgbWVya2xlIHJvb3QgZm9yIHRoZSB3aXRuZXNzIGRhdGEgaXMgaW4gYW4gT1BfUkVUVVJOIG91dHB1dC5cbiAgICAvLyBUaGVyZSBpcyBubyBydWxlIGZvciB0aGUgaW5kZXggb2YgdGhlIG91dHB1dCwgc28gdXNlIGZpbHRlciB0byBmaW5kIGl0LlxuICAgIC8vIFRoZSByb290IGlzIHByZXBlbmRlZCB3aXRoIDB4YWEyMWE5ZWQgc28gY2hlY2sgZm9yIDB4NmEyNGFhMjFhOWVkXG4gICAgLy8gSWYgbXVsdGlwbGUgY29tbWl0cyBhcmUgZm91bmQsIHRoZSBvdXRwdXQgd2l0aCBoaWdoZXN0IGluZGV4IGlzIGFzc3VtZWQuXG4gICAgY29uc3Qgd2l0bmVzc0NvbW1pdHMgPSB0aGlzLnRyYW5zYWN0aW9uc1swXS5vdXRzXG4gICAgICAuZmlsdGVyKFxuICAgICAgICBvdXQgPT5cbiAgICAgICAgICB0b29scy5jb21wYXJlKFxuICAgICAgICAgICAgb3V0LnNjcmlwdC5zbGljZSgwLCA2KSxcbiAgICAgICAgICAgIFVpbnQ4QXJyYXkuZnJvbShbMHg2YSwgMHgyNCwgMHhhYSwgMHgyMSwgMHhhOSwgMHhlZF0pLFxuICAgICAgICAgICkgPT09IDAsXG4gICAgICApXG4gICAgICAubWFwKG91dCA9PiBvdXQuc2NyaXB0LnNsaWNlKDYsIDM4KSk7XG4gICAgaWYgKHdpdG5lc3NDb21taXRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG4gICAgLy8gVXNlIHRoZSBjb21taXQgd2l0aCB0aGUgaGlnaGVzdCBvdXRwdXQgKHNob3VsZCBvbmx5IGJlIG9uZSB0aG91Z2gpXG4gICAgY29uc3QgcmVzdWx0ID0gd2l0bmVzc0NvbW1pdHNbd2l0bmVzc0NvbW1pdHMubGVuZ3RoIC0gMV07XG4gICAgaWYgKCEocmVzdWx0IGluc3RhbmNlb2YgVWludDhBcnJheSAmJiByZXN1bHQubGVuZ3RoID09PSAzMikpIHJldHVybiBudWxsO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgaGFzV2l0bmVzc0NvbW1pdCgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLndpdG5lc3NDb21taXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmXG4gICAgICB0aGlzLndpdG5lc3NDb21taXQubGVuZ3RoID09PSAzMlxuICAgIClcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmICh0aGlzLmdldFdpdG5lc3NDb21taXQoKSAhPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGhhc1dpdG5lc3MoKSB7XG4gICAgcmV0dXJuIGFueVR4SGFzV2l0bmVzcyh0aGlzLnRyYW5zYWN0aW9ucyk7XG4gIH1cbiAgd2VpZ2h0KCkge1xuICAgIGNvbnN0IGJhc2UgPSB0aGlzLmJ5dGVMZW5ndGgoZmFsc2UsIGZhbHNlKTtcbiAgICBjb25zdCB0b3RhbCA9IHRoaXMuYnl0ZUxlbmd0aChmYWxzZSwgdHJ1ZSk7XG4gICAgcmV0dXJuIGJhc2UgKiAzICsgdG90YWw7XG4gIH1cbiAgYnl0ZUxlbmd0aChoZWFkZXJzT25seSwgYWxsb3dXaXRuZXNzID0gdHJ1ZSkge1xuICAgIGlmIChoZWFkZXJzT25seSB8fCAhdGhpcy50cmFuc2FjdGlvbnMpIHJldHVybiA4MDtcbiAgICByZXR1cm4gKFxuICAgICAgODAgK1xuICAgICAgdmFydWludC5lbmNvZGluZ0xlbmd0aCh0aGlzLnRyYW5zYWN0aW9ucy5sZW5ndGgpICtcbiAgICAgIHRoaXMudHJhbnNhY3Rpb25zLnJlZHVjZSgoYSwgeCkgPT4gYSArIHguYnl0ZUxlbmd0aChhbGxvd1dpdG5lc3MpLCAwKVxuICAgICk7XG4gIH1cbiAgZ2V0SGFzaCgpIHtcbiAgICByZXR1cm4gYmNyeXB0by5oYXNoMjU2KHRoaXMudG9CdWZmZXIodHJ1ZSkpO1xuICB9XG4gIGdldElkKCkge1xuICAgIHJldHVybiB0b29scy50b0hleChyZXZlcnNlQnVmZmVyKHRoaXMuZ2V0SGFzaCgpKSk7XG4gIH1cbiAgZ2V0VVRDRGF0ZSgpIHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoMCk7IC8vIGVwb2NoXG4gICAgZGF0ZS5zZXRVVENTZWNvbmRzKHRoaXMudGltZXN0YW1wKTtcbiAgICByZXR1cm4gZGF0ZTtcbiAgfVxuICAvLyBUT0RPOiBidWZmZXIsIG9mZnNldCBjb21wYXRpYmlsaXR5XG4gIHRvQnVmZmVyKGhlYWRlcnNPbmx5KSB7XG4gICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5ieXRlTGVuZ3RoKGhlYWRlcnNPbmx5KSk7XG4gICAgY29uc3QgYnVmZmVyV3JpdGVyID0gbmV3IEJ1ZmZlcldyaXRlcihidWZmZXIpO1xuICAgIGJ1ZmZlcldyaXRlci53cml0ZUludDMyKHRoaXMudmVyc2lvbik7XG4gICAgYnVmZmVyV3JpdGVyLndyaXRlU2xpY2UodGhpcy5wcmV2SGFzaCk7XG4gICAgYnVmZmVyV3JpdGVyLndyaXRlU2xpY2UodGhpcy5tZXJrbGVSb290KTtcbiAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50MzIodGhpcy50aW1lc3RhbXApO1xuICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQzMih0aGlzLmJpdHMpO1xuICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQzMih0aGlzLm5vbmNlKTtcbiAgICBpZiAoaGVhZGVyc09ubHkgfHwgIXRoaXMudHJhbnNhY3Rpb25zKSByZXR1cm4gYnVmZmVyO1xuICAgIGNvbnN0IHsgYnl0ZXMgfSA9IHZhcnVpbnQuZW5jb2RlKFxuICAgICAgdGhpcy50cmFuc2FjdGlvbnMubGVuZ3RoLFxuICAgICAgYnVmZmVyLFxuICAgICAgYnVmZmVyV3JpdGVyLm9mZnNldCxcbiAgICApO1xuICAgIGJ1ZmZlcldyaXRlci5vZmZzZXQgKz0gYnl0ZXM7XG4gICAgdGhpcy50cmFuc2FjdGlvbnMuZm9yRWFjaCh0eCA9PiB7XG4gICAgICBjb25zdCB0eFNpemUgPSB0eC5ieXRlTGVuZ3RoKCk7IC8vIFRPRE86IGV4dHJhY3QgZnJvbSB0b0J1ZmZlcj9cbiAgICAgIHR4LnRvQnVmZmVyKGJ1ZmZlciwgYnVmZmVyV3JpdGVyLm9mZnNldCk7XG4gICAgICBidWZmZXJXcml0ZXIub2Zmc2V0ICs9IHR4U2l6ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gYnVmZmVyO1xuICB9XG4gIHRvSGV4KGhlYWRlcnNPbmx5KSB7XG4gICAgcmV0dXJuIHRvb2xzLnRvSGV4KHRoaXMudG9CdWZmZXIoaGVhZGVyc09ubHkpKTtcbiAgfVxuICBjaGVja1R4Um9vdHMoKSB7XG4gICAgLy8gSWYgdGhlIEJsb2NrIGhhcyBzZWd3aXQgdHJhbnNhY3Rpb25zIGJ1dCBubyB3aXRuZXNzIGNvbW1pdCxcbiAgICAvLyB0aGVyZSdzIG5vIHdheSBpdCBjYW4gYmUgdmFsaWQsIHNvIGZhaWwgdGhlIGNoZWNrLlxuICAgIGNvbnN0IGhhc1dpdG5lc3NDb21taXQgPSB0aGlzLmhhc1dpdG5lc3NDb21taXQoKTtcbiAgICBpZiAoIWhhc1dpdG5lc3NDb21taXQgJiYgdGhpcy5oYXNXaXRuZXNzKCkpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5fX2NoZWNrTWVya2xlUm9vdCgpICYmXG4gICAgICAoaGFzV2l0bmVzc0NvbW1pdCA/IHRoaXMuX19jaGVja1dpdG5lc3NDb21taXQoKSA6IHRydWUpXG4gICAgKTtcbiAgfVxuICBjaGVja1Byb29mT2ZXb3JrKCkge1xuICAgIGNvbnN0IGhhc2ggPSByZXZlcnNlQnVmZmVyKHRoaXMuZ2V0SGFzaCgpKTtcbiAgICBjb25zdCB0YXJnZXQgPSBCbG9jay5jYWxjdWxhdGVUYXJnZXQodGhpcy5iaXRzKTtcbiAgICByZXR1cm4gdG9vbHMuY29tcGFyZShoYXNoLCB0YXJnZXQpIDw9IDA7XG4gIH1cbiAgX19jaGVja01lcmtsZVJvb3QoKSB7XG4gICAgaWYgKCF0aGlzLnRyYW5zYWN0aW9ucykgdGhyb3cgZXJyb3JNZXJrbGVOb1R4ZXM7XG4gICAgY29uc3QgYWN0dWFsTWVya2xlUm9vdCA9IEJsb2NrLmNhbGN1bGF0ZU1lcmtsZVJvb3QodGhpcy50cmFuc2FjdGlvbnMpO1xuICAgIHJldHVybiB0b29scy5jb21wYXJlKHRoaXMubWVya2xlUm9vdCwgYWN0dWFsTWVya2xlUm9vdCkgPT09IDA7XG4gIH1cbiAgX19jaGVja1dpdG5lc3NDb21taXQoKSB7XG4gICAgaWYgKCF0aGlzLnRyYW5zYWN0aW9ucykgdGhyb3cgZXJyb3JNZXJrbGVOb1R4ZXM7XG4gICAgaWYgKCF0aGlzLmhhc1dpdG5lc3NDb21taXQoKSkgdGhyb3cgZXJyb3JXaXRuZXNzTm90U2Vnd2l0O1xuICAgIGNvbnN0IGFjdHVhbFdpdG5lc3NDb21taXQgPSBCbG9jay5jYWxjdWxhdGVNZXJrbGVSb290KFxuICAgICAgdGhpcy50cmFuc2FjdGlvbnMsXG4gICAgICB0cnVlLFxuICAgICk7XG4gICAgcmV0dXJuIHRvb2xzLmNvbXBhcmUodGhpcy53aXRuZXNzQ29tbWl0LCBhY3R1YWxXaXRuZXNzQ29tbWl0KSA9PT0gMDtcbiAgfVxufVxuZnVuY3Rpb24gdHhlc0hhdmVXaXRuZXNzQ29tbWl0KHRyYW5zYWN0aW9ucykge1xuICByZXR1cm4gKFxuICAgIHRyYW5zYWN0aW9ucyBpbnN0YW5jZW9mIEFycmF5ICYmXG4gICAgdHJhbnNhY3Rpb25zWzBdICYmXG4gICAgdHJhbnNhY3Rpb25zWzBdLmlucyAmJlxuICAgIHRyYW5zYWN0aW9uc1swXS5pbnMgaW5zdGFuY2VvZiBBcnJheSAmJlxuICAgIHRyYW5zYWN0aW9uc1swXS5pbnNbMF0gJiZcbiAgICB0cmFuc2FjdGlvbnNbMF0uaW5zWzBdLndpdG5lc3MgJiZcbiAgICB0cmFuc2FjdGlvbnNbMF0uaW5zWzBdLndpdG5lc3MgaW5zdGFuY2VvZiBBcnJheSAmJlxuICAgIHRyYW5zYWN0aW9uc1swXS5pbnNbMF0ud2l0bmVzcy5sZW5ndGggPiAwXG4gICk7XG59XG5mdW5jdGlvbiBhbnlUeEhhc1dpdG5lc3ModHJhbnNhY3Rpb25zKSB7XG4gIHJldHVybiAoXG4gICAgdHJhbnNhY3Rpb25zIGluc3RhbmNlb2YgQXJyYXkgJiZcbiAgICB0cmFuc2FjdGlvbnMuc29tZShcbiAgICAgIHR4ID0+XG4gICAgICAgIHR5cGVvZiB0eCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdHguaW5zIGluc3RhbmNlb2YgQXJyYXkgJiZcbiAgICAgICAgdHguaW5zLnNvbWUoXG4gICAgICAgICAgaW5wdXQgPT5cbiAgICAgICAgICAgIHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIGlucHV0LndpdG5lc3MgaW5zdGFuY2VvZiBBcnJheSAmJlxuICAgICAgICAgICAgaW5wdXQud2l0bmVzcy5sZW5ndGggPiAwLFxuICAgICAgICApLFxuICAgIClcbiAgKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/block.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/bufferutils.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/bufferutils.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BufferReader: () => (/* binding */ BufferReader),\n/* harmony export */   BufferWriter: () => (/* binding */ BufferWriter),\n/* harmony export */   cloneBuffer: () => (/* binding */ cloneBuffer),\n/* harmony export */   reverseBuffer: () => (/* binding */ reverseBuffer),\n/* harmony export */   varuint: () => (/* reexport module object */ varuint_bitcoin__WEBPACK_IMPORTED_MODULE_1__)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var varuint_bitcoin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! varuint-bitcoin */ \"(ssr)/./node_modules/.pnpm/varuint-bitcoin@2.0.0/node_modules/varuint-bitcoin/src/esm/index.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n\n\n\n\n\nconst MAX_JS_NUMBER = 0x001fffffffffffff;\n// https://github.com/feross/buffer/blob/master/index.js#L1127\nfunction verifuint(value, max) {\n  if (typeof value !== 'number' && typeof value !== 'bigint')\n    throw new Error('cannot write a non-number as a number');\n  if (value < 0 && value < BigInt(0))\n    throw new Error('specified a negative value for writing an unsigned value');\n  if (value > max && value > BigInt(max))\n    throw new Error('RangeError: value out of range');\n  if (Math.floor(Number(value)) !== Number(value))\n    throw new Error('value has a fractional component');\n}\n/**\n * Reverses the order of bytes in a buffer.\n * @param buffer - The buffer to reverse.\n * @returns A new buffer with the bytes reversed.\n */\nfunction reverseBuffer(buffer) {\n  if (buffer.length < 1) return buffer;\n  let j = buffer.length - 1;\n  let tmp = 0;\n  for (let i = 0; i < buffer.length / 2; i++) {\n    tmp = buffer[i];\n    buffer[i] = buffer[j];\n    buffer[j] = tmp;\n    j--;\n  }\n  return buffer;\n}\nfunction cloneBuffer(buffer) {\n  const clone = new Uint8Array(buffer.length);\n  clone.set(buffer);\n  return clone;\n}\n/**\n * Helper class for serialization of bitcoin data types into a pre-allocated buffer.\n */\nclass BufferWriter {\n  buffer;\n  offset;\n  static withCapacity(size) {\n    return new BufferWriter(new Uint8Array(size));\n  }\n  constructor(buffer, offset = 0) {\n    this.buffer = buffer;\n    this.offset = offset;\n    valibot__WEBPACK_IMPORTED_MODULE_3__.parse(valibot__WEBPACK_IMPORTED_MODULE_3__.tuple([_types_js__WEBPACK_IMPORTED_MODULE_0__.BufferSchema, _types_js__WEBPACK_IMPORTED_MODULE_0__.UInt32Schema]), [\n      buffer,\n      offset,\n    ]);\n  }\n  writeUInt8(i) {\n    this.offset = uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.writeUInt8(this.buffer, this.offset, i);\n  }\n  writeInt32(i) {\n    this.offset = uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.writeInt32(this.buffer, this.offset, i, 'LE');\n  }\n  writeInt64(i) {\n    this.offset = uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.writeInt64(this.buffer, this.offset, BigInt(i), 'LE');\n  }\n  writeUInt32(i) {\n    this.offset = uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.writeUInt32(this.buffer, this.offset, i, 'LE');\n  }\n  writeUInt64(i) {\n    this.offset = uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.writeUInt64(this.buffer, this.offset, BigInt(i), 'LE');\n  }\n  writeVarInt(i) {\n    const { bytes } = varuint_bitcoin__WEBPACK_IMPORTED_MODULE_1__.encode(i, this.buffer, this.offset);\n    this.offset += bytes;\n  }\n  writeSlice(slice) {\n    if (this.buffer.length < this.offset + slice.length) {\n      throw new Error('Cannot write slice out of bounds');\n    }\n    this.buffer.set(slice, this.offset);\n    this.offset += slice.length;\n  }\n  writeVarSlice(slice) {\n    this.writeVarInt(slice.length);\n    this.writeSlice(slice);\n  }\n  writeVector(vector) {\n    this.writeVarInt(vector.length);\n    vector.forEach(buf => this.writeVarSlice(buf));\n  }\n  end() {\n    if (this.buffer.length === this.offset) {\n      return this.buffer;\n    }\n    throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`);\n  }\n}\n/**\n * Helper class for reading of bitcoin data types from a buffer.\n */\nclass BufferReader {\n  buffer;\n  offset;\n  constructor(buffer, offset = 0) {\n    this.buffer = buffer;\n    this.offset = offset;\n    valibot__WEBPACK_IMPORTED_MODULE_3__.parse(valibot__WEBPACK_IMPORTED_MODULE_3__.tuple([_types_js__WEBPACK_IMPORTED_MODULE_0__.BufferSchema, _types_js__WEBPACK_IMPORTED_MODULE_0__.UInt32Schema]), [\n      buffer,\n      offset,\n    ]);\n  }\n  readUInt8() {\n    const result = uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.readUInt8(this.buffer, this.offset);\n    this.offset++;\n    return result;\n  }\n  readInt32() {\n    const result = uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.readInt32(this.buffer, this.offset, 'LE');\n    this.offset += 4;\n    return result;\n  }\n  readUInt32() {\n    const result = uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.readUInt32(this.buffer, this.offset, 'LE');\n    this.offset += 4;\n    return result;\n  }\n  readInt64() {\n    const result = uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.readInt64(this.buffer, this.offset, 'LE');\n    this.offset += 8;\n    return result;\n  }\n  readVarInt() {\n    const { bigintValue, bytes } = varuint_bitcoin__WEBPACK_IMPORTED_MODULE_1__.decode(this.buffer, this.offset);\n    this.offset += bytes;\n    return bigintValue;\n  }\n  readSlice(n) {\n    verifuint(n, MAX_JS_NUMBER);\n    const num = Number(n);\n    if (this.buffer.length < this.offset + num) {\n      throw new Error('Cannot read slice out of bounds');\n    }\n    const result = this.buffer.slice(this.offset, this.offset + num);\n    this.offset += num;\n    return result;\n  }\n  readVarSlice() {\n    return this.readSlice(this.readVarInt());\n  }\n  readVector() {\n    const count = this.readVarInt();\n    const vector = [];\n    for (let i = 0; i < count; i++) vector.push(this.readVarSlice());\n    return vector;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9idWZmZXJ1dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBb0M7QUFDTztBQUNkO0FBQ1Y7QUFDdUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVCQUF1QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDBDQUFPLENBQUMsMENBQU8sRUFBRSxtREFBa0IsRUFBRSxtREFBa0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix3REFBZ0I7QUFDbEM7QUFDQTtBQUNBLGtCQUFrQix3REFBZ0I7QUFDbEM7QUFDQTtBQUNBLGtCQUFrQix3REFBZ0I7QUFDbEM7QUFDQTtBQUNBLGtCQUFrQix5REFBaUI7QUFDbkM7QUFDQTtBQUNBLGtCQUFrQix5REFBaUI7QUFDbkM7QUFDQTtBQUNBLFlBQVksUUFBUSxFQUFFLG1EQUFjO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxtQkFBbUIsV0FBVyxZQUFZO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDBDQUFPLENBQUMsMENBQU8sRUFBRSxtREFBa0IsRUFBRSxtREFBa0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1REFBZTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1REFBZTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix3REFBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsdURBQWU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFCQUFxQixFQUFFLG1EQUFjO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvYnRjL21pZGwteC1iaXRjb2luLXN1bW1pdC1oYWNrYXRob24tMjAyNS91dHhvLXBzYnQtZGVtby9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9idWZmZXJ1dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB0eXBlcyBmcm9tICcuL3R5cGVzLmpzJztcbmltcG9ydCAqIGFzIHZhcnVpbnQgZnJvbSAndmFydWludC1iaXRjb2luJztcbmltcG9ydCAqIGFzIHYgZnJvbSAndmFsaWJvdCc7XG5leHBvcnQgeyB2YXJ1aW50IH07XG5pbXBvcnQgKiBhcyB0b29scyBmcm9tICd1aW50OGFycmF5LXRvb2xzJztcbmNvbnN0IE1BWF9KU19OVU1CRVIgPSAweDAwMWZmZmZmZmZmZmZmZmY7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9ibG9iL21hc3Rlci9pbmRleC5qcyNMMTEyN1xuZnVuY3Rpb24gdmVyaWZ1aW50KHZhbHVlLCBtYXgpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicgJiYgdHlwZW9mIHZhbHVlICE9PSAnYmlnaW50JylcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCB3cml0ZSBhIG5vbi1udW1iZXIgYXMgYSBudW1iZXInKTtcbiAgaWYgKHZhbHVlIDwgMCAmJiB2YWx1ZSA8IEJpZ0ludCgwKSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NwZWNpZmllZCBhIG5lZ2F0aXZlIHZhbHVlIGZvciB3cml0aW5nIGFuIHVuc2lnbmVkIHZhbHVlJyk7XG4gIGlmICh2YWx1ZSA+IG1heCAmJiB2YWx1ZSA+IEJpZ0ludChtYXgpKVxuICAgIHRocm93IG5ldyBFcnJvcignUmFuZ2VFcnJvcjogdmFsdWUgb3V0IG9mIHJhbmdlJyk7XG4gIGlmIChNYXRoLmZsb29yKE51bWJlcih2YWx1ZSkpICE9PSBOdW1iZXIodmFsdWUpKVxuICAgIHRocm93IG5ldyBFcnJvcigndmFsdWUgaGFzIGEgZnJhY3Rpb25hbCBjb21wb25lbnQnKTtcbn1cbi8qKlxuICogUmV2ZXJzZXMgdGhlIG9yZGVyIG9mIGJ5dGVzIGluIGEgYnVmZmVyLlxuICogQHBhcmFtIGJ1ZmZlciAtIFRoZSBidWZmZXIgdG8gcmV2ZXJzZS5cbiAqIEByZXR1cm5zIEEgbmV3IGJ1ZmZlciB3aXRoIHRoZSBieXRlcyByZXZlcnNlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldmVyc2VCdWZmZXIoYnVmZmVyKSB7XG4gIGlmIChidWZmZXIubGVuZ3RoIDwgMSkgcmV0dXJuIGJ1ZmZlcjtcbiAgbGV0IGogPSBidWZmZXIubGVuZ3RoIC0gMTtcbiAgbGV0IHRtcCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aCAvIDI7IGkrKykge1xuICAgIHRtcCA9IGJ1ZmZlcltpXTtcbiAgICBidWZmZXJbaV0gPSBidWZmZXJbal07XG4gICAgYnVmZmVyW2pdID0gdG1wO1xuICAgIGotLTtcbiAgfVxuICByZXR1cm4gYnVmZmVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lQnVmZmVyKGJ1ZmZlcikge1xuICBjb25zdCBjbG9uZSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlci5sZW5ndGgpO1xuICBjbG9uZS5zZXQoYnVmZmVyKTtcbiAgcmV0dXJuIGNsb25lO1xufVxuLyoqXG4gKiBIZWxwZXIgY2xhc3MgZm9yIHNlcmlhbGl6YXRpb24gb2YgYml0Y29pbiBkYXRhIHR5cGVzIGludG8gYSBwcmUtYWxsb2NhdGVkIGJ1ZmZlci5cbiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZmZlcldyaXRlciB7XG4gIGJ1ZmZlcjtcbiAgb2Zmc2V0O1xuICBzdGF0aWMgd2l0aENhcGFjaXR5KHNpemUpIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcldyaXRlcihuZXcgVWludDhBcnJheShzaXplKSk7XG4gIH1cbiAgY29uc3RydWN0b3IoYnVmZmVyLCBvZmZzZXQgPSAwKSB7XG4gICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgdi5wYXJzZSh2LnR1cGxlKFt0eXBlcy5CdWZmZXJTY2hlbWEsIHR5cGVzLlVJbnQzMlNjaGVtYV0pLCBbXG4gICAgICBidWZmZXIsXG4gICAgICBvZmZzZXQsXG4gICAgXSk7XG4gIH1cbiAgd3JpdGVVSW50OChpKSB7XG4gICAgdGhpcy5vZmZzZXQgPSB0b29scy53cml0ZVVJbnQ4KHRoaXMuYnVmZmVyLCB0aGlzLm9mZnNldCwgaSk7XG4gIH1cbiAgd3JpdGVJbnQzMihpKSB7XG4gICAgdGhpcy5vZmZzZXQgPSB0b29scy53cml0ZUludDMyKHRoaXMuYnVmZmVyLCB0aGlzLm9mZnNldCwgaSwgJ0xFJyk7XG4gIH1cbiAgd3JpdGVJbnQ2NChpKSB7XG4gICAgdGhpcy5vZmZzZXQgPSB0b29scy53cml0ZUludDY0KHRoaXMuYnVmZmVyLCB0aGlzLm9mZnNldCwgQmlnSW50KGkpLCAnTEUnKTtcbiAgfVxuICB3cml0ZVVJbnQzMihpKSB7XG4gICAgdGhpcy5vZmZzZXQgPSB0b29scy53cml0ZVVJbnQzMih0aGlzLmJ1ZmZlciwgdGhpcy5vZmZzZXQsIGksICdMRScpO1xuICB9XG4gIHdyaXRlVUludDY0KGkpIHtcbiAgICB0aGlzLm9mZnNldCA9IHRvb2xzLndyaXRlVUludDY0KHRoaXMuYnVmZmVyLCB0aGlzLm9mZnNldCwgQmlnSW50KGkpLCAnTEUnKTtcbiAgfVxuICB3cml0ZVZhckludChpKSB7XG4gICAgY29uc3QgeyBieXRlcyB9ID0gdmFydWludC5lbmNvZGUoaSwgdGhpcy5idWZmZXIsIHRoaXMub2Zmc2V0KTtcbiAgICB0aGlzLm9mZnNldCArPSBieXRlcztcbiAgfVxuICB3cml0ZVNsaWNlKHNsaWNlKSB7XG4gICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA8IHRoaXMub2Zmc2V0ICsgc2xpY2UubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCB3cml0ZSBzbGljZSBvdXQgb2YgYm91bmRzJyk7XG4gICAgfVxuICAgIHRoaXMuYnVmZmVyLnNldChzbGljZSwgdGhpcy5vZmZzZXQpO1xuICAgIHRoaXMub2Zmc2V0ICs9IHNsaWNlLmxlbmd0aDtcbiAgfVxuICB3cml0ZVZhclNsaWNlKHNsaWNlKSB7XG4gICAgdGhpcy53cml0ZVZhckludChzbGljZS5sZW5ndGgpO1xuICAgIHRoaXMud3JpdGVTbGljZShzbGljZSk7XG4gIH1cbiAgd3JpdGVWZWN0b3IodmVjdG9yKSB7XG4gICAgdGhpcy53cml0ZVZhckludCh2ZWN0b3IubGVuZ3RoKTtcbiAgICB2ZWN0b3IuZm9yRWFjaChidWYgPT4gdGhpcy53cml0ZVZhclNsaWNlKGJ1ZikpO1xuICB9XG4gIGVuZCgpIHtcbiAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID09PSB0aGlzLm9mZnNldCkge1xuICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYGJ1ZmZlciBzaXplICR7dGhpcy5idWZmZXIubGVuZ3RofSwgb2Zmc2V0ICR7dGhpcy5vZmZzZXR9YCk7XG4gIH1cbn1cbi8qKlxuICogSGVscGVyIGNsYXNzIGZvciByZWFkaW5nIG9mIGJpdGNvaW4gZGF0YSB0eXBlcyBmcm9tIGEgYnVmZmVyLlxuICovXG5leHBvcnQgY2xhc3MgQnVmZmVyUmVhZGVyIHtcbiAgYnVmZmVyO1xuICBvZmZzZXQ7XG4gIGNvbnN0cnVjdG9yKGJ1ZmZlciwgb2Zmc2V0ID0gMCkge1xuICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuICAgIHYucGFyc2Uodi50dXBsZShbdHlwZXMuQnVmZmVyU2NoZW1hLCB0eXBlcy5VSW50MzJTY2hlbWFdKSwgW1xuICAgICAgYnVmZmVyLFxuICAgICAgb2Zmc2V0LFxuICAgIF0pO1xuICB9XG4gIHJlYWRVSW50OCgpIHtcbiAgICBjb25zdCByZXN1bHQgPSB0b29scy5yZWFkVUludDgodGhpcy5idWZmZXIsIHRoaXMub2Zmc2V0KTtcbiAgICB0aGlzLm9mZnNldCsrO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgcmVhZEludDMyKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRvb2xzLnJlYWRJbnQzMih0aGlzLmJ1ZmZlciwgdGhpcy5vZmZzZXQsICdMRScpO1xuICAgIHRoaXMub2Zmc2V0ICs9IDQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZWFkVUludDMyKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRvb2xzLnJlYWRVSW50MzIodGhpcy5idWZmZXIsIHRoaXMub2Zmc2V0LCAnTEUnKTtcbiAgICB0aGlzLm9mZnNldCArPSA0O1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgcmVhZEludDY0KCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRvb2xzLnJlYWRJbnQ2NCh0aGlzLmJ1ZmZlciwgdGhpcy5vZmZzZXQsICdMRScpO1xuICAgIHRoaXMub2Zmc2V0ICs9IDg7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZWFkVmFySW50KCkge1xuICAgIGNvbnN0IHsgYmlnaW50VmFsdWUsIGJ5dGVzIH0gPSB2YXJ1aW50LmRlY29kZSh0aGlzLmJ1ZmZlciwgdGhpcy5vZmZzZXQpO1xuICAgIHRoaXMub2Zmc2V0ICs9IGJ5dGVzO1xuICAgIHJldHVybiBiaWdpbnRWYWx1ZTtcbiAgfVxuICByZWFkU2xpY2Uobikge1xuICAgIHZlcmlmdWludChuLCBNQVhfSlNfTlVNQkVSKTtcbiAgICBjb25zdCBudW0gPSBOdW1iZXIobik7XG4gICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA8IHRoaXMub2Zmc2V0ICsgbnVtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCByZWFkIHNsaWNlIG91dCBvZiBib3VuZHMnKTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5idWZmZXIuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMub2Zmc2V0ICsgbnVtKTtcbiAgICB0aGlzLm9mZnNldCArPSBudW07XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZWFkVmFyU2xpY2UoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhZFNsaWNlKHRoaXMucmVhZFZhckludCgpKTtcbiAgfVxuICByZWFkVmVjdG9yKCkge1xuICAgIGNvbnN0IGNvdW50ID0gdGhpcy5yZWFkVmFySW50KCk7XG4gICAgY29uc3QgdmVjdG9yID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB2ZWN0b3IucHVzaCh0aGlzLnJlYWRWYXJTbGljZSgpKTtcbiAgICByZXR1cm4gdmVjdG9yO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/bufferutils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/crypto.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/crypto.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TAGGED_HASH_PREFIXES: () => (/* binding */ TAGGED_HASH_PREFIXES),\n/* harmony export */   TAGS: () => (/* binding */ TAGS),\n/* harmony export */   hash160: () => (/* binding */ hash160),\n/* harmony export */   hash256: () => (/* binding */ hash256),\n/* harmony export */   taggedHash: () => (/* binding */ taggedHash)\n/* harmony export */ });\n/* harmony import */ var _noble_hashes_ripemd160__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @noble/hashes/ripemd160 */ \"(ssr)/./node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/esm/ripemd160.js\");\n/* harmony import */ var _noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @noble/hashes/sha256 */ \"(ssr)/./node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/esm/sha256.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n/**\n * A module for hashing functions.\n * include ripemd160sha1sha256hash160hash256taggedHash\n *\n * @packageDocumentation\n */\n\n\n\nfunction hash160(buffer) {\n  return (0,_noble_hashes_ripemd160__WEBPACK_IMPORTED_MODULE_1__.ripemd160)((0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_2__.sha256)(buffer));\n}\nfunction hash256(buffer) {\n  return (0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_2__.sha256)((0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_2__.sha256)(buffer));\n}\nconst TAGS = [\n  'BIP0340/challenge',\n  'BIP0340/aux',\n  'BIP0340/nonce',\n  'TapLeaf',\n  'TapBranch',\n  'TapSighash',\n  'TapTweak',\n  'KeyAgg list',\n  'KeyAgg coefficient',\n];\n/** An object mapping tags to their tagged hash prefix of [SHA256(tag) | SHA256(tag)] */\n/**\n * Defines the tagged hash prefixes used in the crypto module.\n */\nconst TAGGED_HASH_PREFIXES = {\n  'BIP0340/challenge': Uint8Array.from([\n    123, 181, 45, 122, 159, 239, 88, 50, 62, 177, 191, 122, 64, 125, 179, 130,\n    210, 243, 242, 216, 27, 177, 34, 79, 73, 254, 81, 143, 109, 72, 211, 124,\n    123, 181, 45, 122, 159, 239, 88, 50, 62, 177, 191, 122, 64, 125, 179, 130,\n    210, 243, 242, 216, 27, 177, 34, 79, 73, 254, 81, 143, 109, 72, 211, 124,\n  ]),\n  'BIP0340/aux': Uint8Array.from([\n    241, 239, 78, 94, 192, 99, 202, 218, 109, 148, 202, 250, 157, 152, 126, 160,\n    105, 38, 88, 57, 236, 193, 31, 151, 45, 119, 165, 46, 216, 193, 204, 144,\n    241, 239, 78, 94, 192, 99, 202, 218, 109, 148, 202, 250, 157, 152, 126, 160,\n    105, 38, 88, 57, 236, 193, 31, 151, 45, 119, 165, 46, 216, 193, 204, 144,\n  ]),\n  'BIP0340/nonce': Uint8Array.from([\n    7, 73, 119, 52, 167, 155, 203, 53, 91, 155, 140, 125, 3, 79, 18, 28, 244,\n    52, 215, 62, 247, 45, 218, 25, 135, 0, 97, 251, 82, 191, 235, 47, 7, 73,\n    119, 52, 167, 155, 203, 53, 91, 155, 140, 125, 3, 79, 18, 28, 244, 52, 215,\n    62, 247, 45, 218, 25, 135, 0, 97, 251, 82, 191, 235, 47,\n  ]),\n  TapLeaf: Uint8Array.from([\n    174, 234, 143, 220, 66, 8, 152, 49, 5, 115, 75, 88, 8, 29, 30, 38, 56, 211,\n    95, 28, 181, 64, 8, 212, 211, 87, 202, 3, 190, 120, 233, 238, 174, 234, 143,\n    220, 66, 8, 152, 49, 5, 115, 75, 88, 8, 29, 30, 38, 56, 211, 95, 28, 181,\n    64, 8, 212, 211, 87, 202, 3, 190, 120, 233, 238,\n  ]),\n  TapBranch: Uint8Array.from([\n    25, 65, 161, 242, 229, 110, 185, 95, 162, 169, 241, 148, 190, 92, 1, 247,\n    33, 111, 51, 237, 130, 176, 145, 70, 52, 144, 208, 91, 245, 22, 160, 21, 25,\n    65, 161, 242, 229, 110, 185, 95, 162, 169, 241, 148, 190, 92, 1, 247, 33,\n    111, 51, 237, 130, 176, 145, 70, 52, 144, 208, 91, 245, 22, 160, 21,\n  ]),\n  TapSighash: Uint8Array.from([\n    244, 10, 72, 223, 75, 42, 112, 200, 180, 146, 75, 242, 101, 70, 97, 237, 61,\n    149, 253, 102, 163, 19, 235, 135, 35, 117, 151, 198, 40, 228, 160, 49, 244,\n    10, 72, 223, 75, 42, 112, 200, 180, 146, 75, 242, 101, 70, 97, 237, 61, 149,\n    253, 102, 163, 19, 235, 135, 35, 117, 151, 198, 40, 228, 160, 49,\n  ]),\n  TapTweak: Uint8Array.from([\n    232, 15, 225, 99, 156, 156, 160, 80, 227, 175, 27, 57, 193, 67, 198, 62, 66,\n    156, 188, 235, 21, 217, 64, 251, 181, 197, 161, 244, 175, 87, 197, 233, 232,\n    15, 225, 99, 156, 156, 160, 80, 227, 175, 27, 57, 193, 67, 198, 62, 66, 156,\n    188, 235, 21, 217, 64, 251, 181, 197, 161, 244, 175, 87, 197, 233,\n  ]),\n  'KeyAgg list': Uint8Array.from([\n    72, 28, 151, 28, 60, 11, 70, 215, 240, 178, 117, 174, 89, 141, 78, 44, 126,\n    215, 49, 156, 89, 74, 92, 110, 199, 158, 160, 212, 153, 2, 148, 240, 72, 28,\n    151, 28, 60, 11, 70, 215, 240, 178, 117, 174, 89, 141, 78, 44, 126, 215, 49,\n    156, 89, 74, 92, 110, 199, 158, 160, 212, 153, 2, 148, 240,\n  ]),\n  'KeyAgg coefficient': Uint8Array.from([\n    191, 201, 4, 3, 77, 28, 136, 232, 200, 14, 34, 229, 61, 36, 86, 109, 100,\n    130, 78, 214, 66, 114, 129, 192, 145, 0, 249, 77, 205, 82, 201, 129, 191,\n    201, 4, 3, 77, 28, 136, 232, 200, 14, 34, 229, 61, 36, 86, 109, 100, 130,\n    78, 214, 66, 114, 129, 192, 145, 0, 249, 77, 205, 82, 201, 129,\n  ]),\n};\nfunction taggedHash(prefix, data) {\n  return (0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_2__.sha256)(uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.concat([TAGGED_HASH_PREFIXES[prefix], data]));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9jcnlwdG8uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDb0Q7QUFDTjtBQUNKO0FBQ25DO0FBQ1AsU0FBUyxrRUFBUyxDQUFDLDREQUFNO0FBQ3pCO0FBQ087QUFDUCxTQUFTLDREQUFNLENBQUMsNERBQU07QUFDdEI7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxTQUFTLDREQUFNLENBQUMsb0RBQVk7QUFDNUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9idGMvbWlkbC14LWJpdGNvaW4tc3VtbWl0LWhhY2thdGhvbi0yMDI1L3V0eG8tcHNidC1kZW1vL25vZGVfbW9kdWxlcy8ucG5wbS9iaXRjb2luanMtbGliQDcuMC4wLXJjLjBfdHlwZXNjcmlwdEA1LjkuMi9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYi9zcmMvZXNtL2NyeXB0by5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEEgbW9kdWxlIGZvciBoYXNoaW5nIGZ1bmN0aW9ucy5cbiAqIGluY2x1ZGUgcmlwZW1kMTYw44CBc2hhMeOAgXNoYTI1NuOAgWhhc2gxNjDjgIFoYXNoMjU244CBdGFnZ2VkSGFzaFxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5pbXBvcnQgeyByaXBlbWQxNjAgfSBmcm9tICdAbm9ibGUvaGFzaGVzL3JpcGVtZDE2MCc7XG5pbXBvcnQgeyBzaGEyNTYgfSBmcm9tICdAbm9ibGUvaGFzaGVzL3NoYTI1Nic7XG5pbXBvcnQgKiBhcyB0b29scyBmcm9tICd1aW50OGFycmF5LXRvb2xzJztcbmV4cG9ydCBmdW5jdGlvbiBoYXNoMTYwKGJ1ZmZlcikge1xuICByZXR1cm4gcmlwZW1kMTYwKHNoYTI1NihidWZmZXIpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoYXNoMjU2KGJ1ZmZlcikge1xuICByZXR1cm4gc2hhMjU2KHNoYTI1NihidWZmZXIpKTtcbn1cbmV4cG9ydCBjb25zdCBUQUdTID0gW1xuICAnQklQMDM0MC9jaGFsbGVuZ2UnLFxuICAnQklQMDM0MC9hdXgnLFxuICAnQklQMDM0MC9ub25jZScsXG4gICdUYXBMZWFmJyxcbiAgJ1RhcEJyYW5jaCcsXG4gICdUYXBTaWdoYXNoJyxcbiAgJ1RhcFR3ZWFrJyxcbiAgJ0tleUFnZyBsaXN0JyxcbiAgJ0tleUFnZyBjb2VmZmljaWVudCcsXG5dO1xuLyoqIEFuIG9iamVjdCBtYXBwaW5nIHRhZ3MgdG8gdGhlaXIgdGFnZ2VkIGhhc2ggcHJlZml4IG9mIFtTSEEyNTYodGFnKSB8IFNIQTI1Nih0YWcpXSAqL1xuLyoqXG4gKiBEZWZpbmVzIHRoZSB0YWdnZWQgaGFzaCBwcmVmaXhlcyB1c2VkIGluIHRoZSBjcnlwdG8gbW9kdWxlLlxuICovXG5leHBvcnQgY29uc3QgVEFHR0VEX0hBU0hfUFJFRklYRVMgPSB7XG4gICdCSVAwMzQwL2NoYWxsZW5nZSc6IFVpbnQ4QXJyYXkuZnJvbShbXG4gICAgMTIzLCAxODEsIDQ1LCAxMjIsIDE1OSwgMjM5LCA4OCwgNTAsIDYyLCAxNzcsIDE5MSwgMTIyLCA2NCwgMTI1LCAxNzksIDEzMCxcbiAgICAyMTAsIDI0MywgMjQyLCAyMTYsIDI3LCAxNzcsIDM0LCA3OSwgNzMsIDI1NCwgODEsIDE0MywgMTA5LCA3MiwgMjExLCAxMjQsXG4gICAgMTIzLCAxODEsIDQ1LCAxMjIsIDE1OSwgMjM5LCA4OCwgNTAsIDYyLCAxNzcsIDE5MSwgMTIyLCA2NCwgMTI1LCAxNzksIDEzMCxcbiAgICAyMTAsIDI0MywgMjQyLCAyMTYsIDI3LCAxNzcsIDM0LCA3OSwgNzMsIDI1NCwgODEsIDE0MywgMTA5LCA3MiwgMjExLCAxMjQsXG4gIF0pLFxuICAnQklQMDM0MC9hdXgnOiBVaW50OEFycmF5LmZyb20oW1xuICAgIDI0MSwgMjM5LCA3OCwgOTQsIDE5MiwgOTksIDIwMiwgMjE4LCAxMDksIDE0OCwgMjAyLCAyNTAsIDE1NywgMTUyLCAxMjYsIDE2MCxcbiAgICAxMDUsIDM4LCA4OCwgNTcsIDIzNiwgMTkzLCAzMSwgMTUxLCA0NSwgMTE5LCAxNjUsIDQ2LCAyMTYsIDE5MywgMjA0LCAxNDQsXG4gICAgMjQxLCAyMzksIDc4LCA5NCwgMTkyLCA5OSwgMjAyLCAyMTgsIDEwOSwgMTQ4LCAyMDIsIDI1MCwgMTU3LCAxNTIsIDEyNiwgMTYwLFxuICAgIDEwNSwgMzgsIDg4LCA1NywgMjM2LCAxOTMsIDMxLCAxNTEsIDQ1LCAxMTksIDE2NSwgNDYsIDIxNiwgMTkzLCAyMDQsIDE0NCxcbiAgXSksXG4gICdCSVAwMzQwL25vbmNlJzogVWludDhBcnJheS5mcm9tKFtcbiAgICA3LCA3MywgMTE5LCA1MiwgMTY3LCAxNTUsIDIwMywgNTMsIDkxLCAxNTUsIDE0MCwgMTI1LCAzLCA3OSwgMTgsIDI4LCAyNDQsXG4gICAgNTIsIDIxNSwgNjIsIDI0NywgNDUsIDIxOCwgMjUsIDEzNSwgMCwgOTcsIDI1MSwgODIsIDE5MSwgMjM1LCA0NywgNywgNzMsXG4gICAgMTE5LCA1MiwgMTY3LCAxNTUsIDIwMywgNTMsIDkxLCAxNTUsIDE0MCwgMTI1LCAzLCA3OSwgMTgsIDI4LCAyNDQsIDUyLCAyMTUsXG4gICAgNjIsIDI0NywgNDUsIDIxOCwgMjUsIDEzNSwgMCwgOTcsIDI1MSwgODIsIDE5MSwgMjM1LCA0NyxcbiAgXSksXG4gIFRhcExlYWY6IFVpbnQ4QXJyYXkuZnJvbShbXG4gICAgMTc0LCAyMzQsIDE0MywgMjIwLCA2NiwgOCwgMTUyLCA0OSwgNSwgMTE1LCA3NSwgODgsIDgsIDI5LCAzMCwgMzgsIDU2LCAyMTEsXG4gICAgOTUsIDI4LCAxODEsIDY0LCA4LCAyMTIsIDIxMSwgODcsIDIwMiwgMywgMTkwLCAxMjAsIDIzMywgMjM4LCAxNzQsIDIzNCwgMTQzLFxuICAgIDIyMCwgNjYsIDgsIDE1MiwgNDksIDUsIDExNSwgNzUsIDg4LCA4LCAyOSwgMzAsIDM4LCA1NiwgMjExLCA5NSwgMjgsIDE4MSxcbiAgICA2NCwgOCwgMjEyLCAyMTEsIDg3LCAyMDIsIDMsIDE5MCwgMTIwLCAyMzMsIDIzOCxcbiAgXSksXG4gIFRhcEJyYW5jaDogVWludDhBcnJheS5mcm9tKFtcbiAgICAyNSwgNjUsIDE2MSwgMjQyLCAyMjksIDExMCwgMTg1LCA5NSwgMTYyLCAxNjksIDI0MSwgMTQ4LCAxOTAsIDkyLCAxLCAyNDcsXG4gICAgMzMsIDExMSwgNTEsIDIzNywgMTMwLCAxNzYsIDE0NSwgNzAsIDUyLCAxNDQsIDIwOCwgOTEsIDI0NSwgMjIsIDE2MCwgMjEsIDI1LFxuICAgIDY1LCAxNjEsIDI0MiwgMjI5LCAxMTAsIDE4NSwgOTUsIDE2MiwgMTY5LCAyNDEsIDE0OCwgMTkwLCA5MiwgMSwgMjQ3LCAzMyxcbiAgICAxMTEsIDUxLCAyMzcsIDEzMCwgMTc2LCAxNDUsIDcwLCA1MiwgMTQ0LCAyMDgsIDkxLCAyNDUsIDIyLCAxNjAsIDIxLFxuICBdKSxcbiAgVGFwU2lnaGFzaDogVWludDhBcnJheS5mcm9tKFtcbiAgICAyNDQsIDEwLCA3MiwgMjIzLCA3NSwgNDIsIDExMiwgMjAwLCAxODAsIDE0NiwgNzUsIDI0MiwgMTAxLCA3MCwgOTcsIDIzNywgNjEsXG4gICAgMTQ5LCAyNTMsIDEwMiwgMTYzLCAxOSwgMjM1LCAxMzUsIDM1LCAxMTcsIDE1MSwgMTk4LCA0MCwgMjI4LCAxNjAsIDQ5LCAyNDQsXG4gICAgMTAsIDcyLCAyMjMsIDc1LCA0MiwgMTEyLCAyMDAsIDE4MCwgMTQ2LCA3NSwgMjQyLCAxMDEsIDcwLCA5NywgMjM3LCA2MSwgMTQ5LFxuICAgIDI1MywgMTAyLCAxNjMsIDE5LCAyMzUsIDEzNSwgMzUsIDExNywgMTUxLCAxOTgsIDQwLCAyMjgsIDE2MCwgNDksXG4gIF0pLFxuICBUYXBUd2VhazogVWludDhBcnJheS5mcm9tKFtcbiAgICAyMzIsIDE1LCAyMjUsIDk5LCAxNTYsIDE1NiwgMTYwLCA4MCwgMjI3LCAxNzUsIDI3LCA1NywgMTkzLCA2NywgMTk4LCA2MiwgNjYsXG4gICAgMTU2LCAxODgsIDIzNSwgMjEsIDIxNywgNjQsIDI1MSwgMTgxLCAxOTcsIDE2MSwgMjQ0LCAxNzUsIDg3LCAxOTcsIDIzMywgMjMyLFxuICAgIDE1LCAyMjUsIDk5LCAxNTYsIDE1NiwgMTYwLCA4MCwgMjI3LCAxNzUsIDI3LCA1NywgMTkzLCA2NywgMTk4LCA2MiwgNjYsIDE1NixcbiAgICAxODgsIDIzNSwgMjEsIDIxNywgNjQsIDI1MSwgMTgxLCAxOTcsIDE2MSwgMjQ0LCAxNzUsIDg3LCAxOTcsIDIzMyxcbiAgXSksXG4gICdLZXlBZ2cgbGlzdCc6IFVpbnQ4QXJyYXkuZnJvbShbXG4gICAgNzIsIDI4LCAxNTEsIDI4LCA2MCwgMTEsIDcwLCAyMTUsIDI0MCwgMTc4LCAxMTcsIDE3NCwgODksIDE0MSwgNzgsIDQ0LCAxMjYsXG4gICAgMjE1LCA0OSwgMTU2LCA4OSwgNzQsIDkyLCAxMTAsIDE5OSwgMTU4LCAxNjAsIDIxMiwgMTUzLCAyLCAxNDgsIDI0MCwgNzIsIDI4LFxuICAgIDE1MSwgMjgsIDYwLCAxMSwgNzAsIDIxNSwgMjQwLCAxNzgsIDExNywgMTc0LCA4OSwgMTQxLCA3OCwgNDQsIDEyNiwgMjE1LCA0OSxcbiAgICAxNTYsIDg5LCA3NCwgOTIsIDExMCwgMTk5LCAxNTgsIDE2MCwgMjEyLCAxNTMsIDIsIDE0OCwgMjQwLFxuICBdKSxcbiAgJ0tleUFnZyBjb2VmZmljaWVudCc6IFVpbnQ4QXJyYXkuZnJvbShbXG4gICAgMTkxLCAyMDEsIDQsIDMsIDc3LCAyOCwgMTM2LCAyMzIsIDIwMCwgMTQsIDM0LCAyMjksIDYxLCAzNiwgODYsIDEwOSwgMTAwLFxuICAgIDEzMCwgNzgsIDIxNCwgNjYsIDExNCwgMTI5LCAxOTIsIDE0NSwgMCwgMjQ5LCA3NywgMjA1LCA4MiwgMjAxLCAxMjksIDE5MSxcbiAgICAyMDEsIDQsIDMsIDc3LCAyOCwgMTM2LCAyMzIsIDIwMCwgMTQsIDM0LCAyMjksIDYxLCAzNiwgODYsIDEwOSwgMTAwLCAxMzAsXG4gICAgNzgsIDIxNCwgNjYsIDExNCwgMTI5LCAxOTIsIDE0NSwgMCwgMjQ5LCA3NywgMjA1LCA4MiwgMjAxLCAxMjksXG4gIF0pLFxufTtcbmV4cG9ydCBmdW5jdGlvbiB0YWdnZWRIYXNoKHByZWZpeCwgZGF0YSkge1xuICByZXR1cm4gc2hhMjU2KHRvb2xzLmNvbmNhdChbVEFHR0VEX0hBU0hfUFJFRklYRVNbcHJlZml4XSwgZGF0YV0pKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/crypto.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/ecc_lib.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/ecc_lib.js ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEccLib: () => (/* binding */ getEccLib),\n/* harmony export */   initEccLib: () => (/* binding */ initEccLib)\n/* harmony export */ });\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n\nconst _ECCLIB_CACHE = {};\n/**\n * Initializes the ECC library with the provided instance.\n * If `eccLib` is `undefined`, the library will be cleared.\n * If `eccLib` is a new instance, it will be verified before setting it as the active library.\n *\n * @param eccLib The instance of the ECC library to initialize.\n */\nfunction initEccLib(eccLib) {\n  if (!eccLib) {\n    // allow clearing the library\n    _ECCLIB_CACHE.eccLib = eccLib;\n  } else if (eccLib !== _ECCLIB_CACHE.eccLib) {\n    // new instance, verify it\n    verifyEcc(eccLib);\n    _ECCLIB_CACHE.eccLib = eccLib;\n  }\n}\n/**\n * Retrieves the ECC Library instance.\n * Throws an error if the ECC Library is not provided.\n * You must call initEccLib() with a valid TinySecp256k1Interface instance before calling this function.\n * @returns The ECC Library instance.\n * @throws Error if the ECC Library is not provided.\n */\nfunction getEccLib() {\n  if (!_ECCLIB_CACHE.eccLib)\n    throw new Error(\n      'No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance',\n    );\n  return _ECCLIB_CACHE.eccLib;\n}\nconst h = hex => uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.fromHex(hex);\n/**\n * Verifies the ECC functionality.\n *\n * @param ecc - The TinySecp256k1Interface object.\n */\nfunction verifyEcc(ecc) {\n  assert(typeof ecc.isXOnlyPoint === 'function');\n  assert(\n    ecc.isXOnlyPoint(\n      h('79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798'),\n    ),\n  );\n  assert(\n    ecc.isXOnlyPoint(\n      h('fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e'),\n    ),\n  );\n  assert(\n    ecc.isXOnlyPoint(\n      h('f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9'),\n    ),\n  );\n  assert(\n    ecc.isXOnlyPoint(\n      h('0000000000000000000000000000000000000000000000000000000000000001'),\n    ),\n  );\n  assert(\n    !ecc.isXOnlyPoint(\n      h('0000000000000000000000000000000000000000000000000000000000000000'),\n    ),\n  );\n  assert(\n    !ecc.isXOnlyPoint(\n      h('fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f'),\n    ),\n  );\n  assert(typeof ecc.xOnlyPointAddTweak === 'function');\n  tweakAddVectors.forEach(t => {\n    const r = ecc.xOnlyPointAddTweak(h(t.pubkey), h(t.tweak));\n    if (t.result === null) {\n      assert(r === null);\n    } else {\n      assert(r !== null);\n      assert(r.parity === t.parity);\n      assert(uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.compare(r.xOnlyPubkey, h(t.result)) === 0);\n    }\n  });\n}\nfunction assert(bool) {\n  if (!bool) throw new Error('ecc library invalid');\n}\nconst tweakAddVectors = [\n  {\n    pubkey: '79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798',\n    tweak: 'fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140',\n    parity: -1,\n    result: null,\n  },\n  {\n    pubkey: '1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b',\n    tweak: 'a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac',\n    parity: 1,\n    result: 'e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf',\n  },\n  {\n    pubkey: '2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991',\n    tweak: '823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47',\n    parity: 0,\n    result: '9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c',\n  },\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9lY2NfbGliLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIscURBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxhQUFhLHFEQUFhO0FBQzFCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCIsInNvdXJjZXMiOlsiL1VzZXJzL2J0Yy9taWRsLXgtYml0Y29pbi1zdW1taXQtaGFja2F0aG9uLTIwMjUvdXR4by1wc2J0LWRlbW8vbm9kZV9tb2R1bGVzLy5wbnBtL2JpdGNvaW5qcy1saWJANy4wLjAtcmMuMF90eXBlc2NyaXB0QDUuOS4yL25vZGVfbW9kdWxlcy9iaXRjb2luanMtbGliL3NyYy9lc20vZWNjX2xpYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB0b29scyBmcm9tICd1aW50OGFycmF5LXRvb2xzJztcbmNvbnN0IF9FQ0NMSUJfQ0FDSEUgPSB7fTtcbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIEVDQyBsaWJyYXJ5IHdpdGggdGhlIHByb3ZpZGVkIGluc3RhbmNlLlxuICogSWYgYGVjY0xpYmAgaXMgYHVuZGVmaW5lZGAsIHRoZSBsaWJyYXJ5IHdpbGwgYmUgY2xlYXJlZC5cbiAqIElmIGBlY2NMaWJgIGlzIGEgbmV3IGluc3RhbmNlLCBpdCB3aWxsIGJlIHZlcmlmaWVkIGJlZm9yZSBzZXR0aW5nIGl0IGFzIHRoZSBhY3RpdmUgbGlicmFyeS5cbiAqXG4gKiBAcGFyYW0gZWNjTGliIFRoZSBpbnN0YW5jZSBvZiB0aGUgRUNDIGxpYnJhcnkgdG8gaW5pdGlhbGl6ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRFY2NMaWIoZWNjTGliKSB7XG4gIGlmICghZWNjTGliKSB7XG4gICAgLy8gYWxsb3cgY2xlYXJpbmcgdGhlIGxpYnJhcnlcbiAgICBfRUNDTElCX0NBQ0hFLmVjY0xpYiA9IGVjY0xpYjtcbiAgfSBlbHNlIGlmIChlY2NMaWIgIT09IF9FQ0NMSUJfQ0FDSEUuZWNjTGliKSB7XG4gICAgLy8gbmV3IGluc3RhbmNlLCB2ZXJpZnkgaXRcbiAgICB2ZXJpZnlFY2MoZWNjTGliKTtcbiAgICBfRUNDTElCX0NBQ0hFLmVjY0xpYiA9IGVjY0xpYjtcbiAgfVxufVxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIEVDQyBMaWJyYXJ5IGluc3RhbmNlLlxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBFQ0MgTGlicmFyeSBpcyBub3QgcHJvdmlkZWQuXG4gKiBZb3UgbXVzdCBjYWxsIGluaXRFY2NMaWIoKSB3aXRoIGEgdmFsaWQgVGlueVNlY3AyNTZrMUludGVyZmFjZSBpbnN0YW5jZSBiZWZvcmUgY2FsbGluZyB0aGlzIGZ1bmN0aW9uLlxuICogQHJldHVybnMgVGhlIEVDQyBMaWJyYXJ5IGluc3RhbmNlLlxuICogQHRocm93cyBFcnJvciBpZiB0aGUgRUNDIExpYnJhcnkgaXMgbm90IHByb3ZpZGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWNjTGliKCkge1xuICBpZiAoIV9FQ0NMSUJfQ0FDSEUuZWNjTGliKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdObyBFQ0MgTGlicmFyeSBwcm92aWRlZC4gWW91IG11c3QgY2FsbCBpbml0RWNjTGliKCkgd2l0aCBhIHZhbGlkIFRpbnlTZWNwMjU2azFJbnRlcmZhY2UgaW5zdGFuY2UnLFxuICAgICk7XG4gIHJldHVybiBfRUNDTElCX0NBQ0hFLmVjY0xpYjtcbn1cbmNvbnN0IGggPSBoZXggPT4gdG9vbHMuZnJvbUhleChoZXgpO1xuLyoqXG4gKiBWZXJpZmllcyB0aGUgRUNDIGZ1bmN0aW9uYWxpdHkuXG4gKlxuICogQHBhcmFtIGVjYyAtIFRoZSBUaW55U2VjcDI1NmsxSW50ZXJmYWNlIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gdmVyaWZ5RWNjKGVjYykge1xuICBhc3NlcnQodHlwZW9mIGVjYy5pc1hPbmx5UG9pbnQgPT09ICdmdW5jdGlvbicpO1xuICBhc3NlcnQoXG4gICAgZWNjLmlzWE9ubHlQb2ludChcbiAgICAgIGgoJzc5YmU2NjdlZjlkY2JiYWM1NWEwNjI5NWNlODcwYjA3MDI5YmZjZGIyZGNlMjhkOTU5ZjI4MTViMTZmODE3OTgnKSxcbiAgICApLFxuICApO1xuICBhc3NlcnQoXG4gICAgZWNjLmlzWE9ubHlQb2ludChcbiAgICAgIGgoJ2ZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZlZWZmZmZjMmUnKSxcbiAgICApLFxuICApO1xuICBhc3NlcnQoXG4gICAgZWNjLmlzWE9ubHlQb2ludChcbiAgICAgIGgoJ2Y5MzA4YTAxOTI1OGMzMTA0OTM0NGY4NWY4OWQ1MjI5YjUzMWM4NDU4MzZmOTliMDg2MDFmMTEzYmNlMDM2ZjknKSxcbiAgICApLFxuICApO1xuICBhc3NlcnQoXG4gICAgZWNjLmlzWE9ubHlQb2ludChcbiAgICAgIGgoJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEnKSxcbiAgICApLFxuICApO1xuICBhc3NlcnQoXG4gICAgIWVjYy5pc1hPbmx5UG9pbnQoXG4gICAgICBoKCcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyksXG4gICAgKSxcbiAgKTtcbiAgYXNzZXJ0KFxuICAgICFlY2MuaXNYT25seVBvaW50KFxuICAgICAgaCgnZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmVmZmZmZmMyZicpLFxuICAgICksXG4gICk7XG4gIGFzc2VydCh0eXBlb2YgZWNjLnhPbmx5UG9pbnRBZGRUd2VhayA9PT0gJ2Z1bmN0aW9uJyk7XG4gIHR3ZWFrQWRkVmVjdG9ycy5mb3JFYWNoKHQgPT4ge1xuICAgIGNvbnN0IHIgPSBlY2MueE9ubHlQb2ludEFkZFR3ZWFrKGgodC5wdWJrZXkpLCBoKHQudHdlYWspKTtcbiAgICBpZiAodC5yZXN1bHQgPT09IG51bGwpIHtcbiAgICAgIGFzc2VydChyID09PSBudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KHIgIT09IG51bGwpO1xuICAgICAgYXNzZXJ0KHIucGFyaXR5ID09PSB0LnBhcml0eSk7XG4gICAgICBhc3NlcnQodG9vbHMuY29tcGFyZShyLnhPbmx5UHVia2V5LCBoKHQucmVzdWx0KSkgPT09IDApO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBhc3NlcnQoYm9vbCkge1xuICBpZiAoIWJvb2wpIHRocm93IG5ldyBFcnJvcignZWNjIGxpYnJhcnkgaW52YWxpZCcpO1xufVxuY29uc3QgdHdlYWtBZGRWZWN0b3JzID0gW1xuICB7XG4gICAgcHVia2V5OiAnNzliZTY2N2VmOWRjYmJhYzU1YTA2Mjk1Y2U4NzBiMDcwMjliZmNkYjJkY2UyOGQ5NTlmMjgxNWIxNmY4MTc5OCcsXG4gICAgdHdlYWs6ICdmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWJhYWVkY2U2YWY0OGEwM2JiZmQyNWU4Y2QwMzY0MTQwJyxcbiAgICBwYXJpdHk6IC0xLFxuICAgIHJlc3VsdDogbnVsbCxcbiAgfSxcbiAge1xuICAgIHB1YmtleTogJzE2MTdkMzhlZDhkODY1N2RhNGQ0NzYxZTgwNTdiYzM5NmVhOWU0YjlkMjk3NzZkNGJlMDk2MDE2ZGJkMjUwOWInLFxuICAgIHR3ZWFrOiAnYTgzOTdhOTM1ZjBkZmNlYmE2YmE5NjE4ZjY0NTFlZjRkODA2MzdhYmY0ZTZhZjI2NjlmYmM5ZGU2YThmZDJhYycsXG4gICAgcGFyaXR5OiAxLFxuICAgIHJlc3VsdDogJ2U0NzhmOTlkYWI5MTA1MmFiMzlhMzNlYTM1ZmQ1ZTZlNDkzM2Y0ZDI4MDIzY2Q1OTdjOWExZjY3NjAzNDZhZGYnLFxuICB9LFxuICB7XG4gICAgcHVia2V5OiAnMmMwYjdjZjk1MzI0YTA3ZDA1Mzk4YjI0MDE3NGRjMGMyYmU0NDRkOTZiMTU5YWE2YzdmN2IxZTY2ODY4MDk5MScsXG4gICAgdHdlYWs6ICc4MjNjM2NkMjE0Mjc0NGIwNzVhODdlYWRlN2UxYjg2NzhiYTMwOGQ1NjYyMjZhMDA1NmNhMmI3YTc2Zjg2YjQ3JyxcbiAgICBwYXJpdHk6IDAsXG4gICAgcmVzdWx0OiAnOTUzNGY4ZGM4YzZkZWRhMmRjMDA3NjU1OTgxYzc4YjQ5YzVkOTZjNzc4ZmJmMzYzNDYyYTExZWM5ZGZkOTQ4YycsXG4gIH0sXG5dO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/ecc_lib.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/index.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/index.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Block: () => (/* reexport safe */ _block_js__WEBPACK_IMPORTED_MODULE_5__.Block),\n/* harmony export */   Psbt: () => (/* reexport safe */ _psbt_js__WEBPACK_IMPORTED_MODULE_6__.Psbt),\n/* harmony export */   Transaction: () => (/* reexport safe */ _transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction),\n/* harmony export */   address: () => (/* reexport module object */ _address_js__WEBPACK_IMPORTED_MODULE_0__),\n/* harmony export */   crypto: () => (/* reexport module object */ _crypto_js__WEBPACK_IMPORTED_MODULE_1__),\n/* harmony export */   initEccLib: () => (/* reexport safe */ _ecc_lib_js__WEBPACK_IMPORTED_MODULE_9__.initEccLib),\n/* harmony export */   networks: () => (/* reexport module object */ _networks_js__WEBPACK_IMPORTED_MODULE_2__),\n/* harmony export */   opcodes: () => (/* reexport safe */ _ops_js__WEBPACK_IMPORTED_MODULE_7__.OPS),\n/* harmony export */   payments: () => (/* reexport module object */ _payments_index_js__WEBPACK_IMPORTED_MODULE_3__),\n/* harmony export */   script: () => (/* reexport module object */ _script_js__WEBPACK_IMPORTED_MODULE_4__)\n/* harmony export */ });\n/* harmony import */ var _address_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./address.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/address.js\");\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./crypto.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/crypto.js\");\n/* harmony import */ var _networks_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./networks.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js\");\n/* harmony import */ var _payments_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./payments/index.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/index.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _block_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./block.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/block.js\");\n/* harmony import */ var _psbt_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./psbt.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt.js\");\n/* harmony import */ var _ops_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ops.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/ops.js\");\n/* harmony import */ var _transaction_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./transaction.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/transaction.js\");\n/* harmony import */ var _ecc_lib_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ecc_lib.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/ecc_lib.js\");\n\n\n\n\n\n\n\n\n/** @hidden */\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QztBQUNGO0FBQ0k7QUFDTTtBQUNWO0FBQ2lCO0FBQ3BCO0FBQ0Y7QUFDakM7QUFDMEM7QUFDSztBQUNMIiwic291cmNlcyI6WyIvVXNlcnMvYnRjL21pZGwteC1iaXRjb2luLXN1bW1pdC1oYWNrYXRob24tMjAyNS91dHhvLXBzYnQtZGVtby9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBhZGRyZXNzIGZyb20gJy4vYWRkcmVzcy5qcyc7XG5pbXBvcnQgKiBhcyBjcnlwdG8gZnJvbSAnLi9jcnlwdG8uanMnO1xuaW1wb3J0ICogYXMgbmV0d29ya3MgZnJvbSAnLi9uZXR3b3Jrcy5qcyc7XG5pbXBvcnQgKiBhcyBwYXltZW50cyBmcm9tICcuL3BheW1lbnRzL2luZGV4LmpzJztcbmltcG9ydCAqIGFzIHNjcmlwdCBmcm9tICcuL3NjcmlwdC5qcyc7XG5leHBvcnQgeyBhZGRyZXNzLCBjcnlwdG8sIG5ldHdvcmtzLCBwYXltZW50cywgc2NyaXB0IH07XG5leHBvcnQgeyBCbG9jayB9IGZyb20gJy4vYmxvY2suanMnO1xuZXhwb3J0IHsgUHNidCB9IGZyb20gJy4vcHNidC5qcyc7XG4vKiogQGhpZGRlbiAqL1xuZXhwb3J0IHsgT1BTIGFzIG9wY29kZXMgfSBmcm9tICcuL29wcy5qcyc7XG5leHBvcnQgeyBUcmFuc2FjdGlvbiB9IGZyb20gJy4vdHJhbnNhY3Rpb24uanMnO1xuZXhwb3J0IHsgaW5pdEVjY0xpYiB9IGZyb20gJy4vZWNjX2xpYi5qcyc7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/merkle.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/merkle.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fastMerkleRoot: () => (/* binding */ fastMerkleRoot)\n/* harmony export */ });\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n\n/**\n * Calculates the Merkle root of an array of buffers using a specified digest function.\n *\n * @param values - The array of buffers.\n * @param digestFn - The digest function used to calculate the hash of the concatenated buffers.\n * @returns The Merkle root as a buffer.\n * @throws {TypeError} If the values parameter is not an array or the digestFn parameter is not a function.\n */\nfunction fastMerkleRoot(values, digestFn) {\n  if (!Array.isArray(values)) throw TypeError('Expected values Array');\n  if (typeof digestFn !== 'function')\n    throw TypeError('Expected digest Function');\n  let length = values.length;\n  const results = values.concat();\n  while (length > 1) {\n    let j = 0;\n    for (let i = 0; i < length; i += 2, ++j) {\n      const left = results[i];\n      const right = i + 1 === length ? left : results[i + 1];\n      const data = uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.concat([left, right]);\n      results[j] = digestFn(data);\n    }\n    length = j;\n  }\n  return results[0];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9tZXJrbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQSxtQkFBbUIsb0RBQVk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvYnRjL21pZGwteC1iaXRjb2luLXN1bW1pdC1oYWNrYXRob24tMjAyNS91dHhvLXBzYnQtZGVtby9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9tZXJrbGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgdG9vbHMgZnJvbSAndWludDhhcnJheS10b29scyc7XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIE1lcmtsZSByb290IG9mIGFuIGFycmF5IG9mIGJ1ZmZlcnMgdXNpbmcgYSBzcGVjaWZpZWQgZGlnZXN0IGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB2YWx1ZXMgLSBUaGUgYXJyYXkgb2YgYnVmZmVycy5cbiAqIEBwYXJhbSBkaWdlc3RGbiAtIFRoZSBkaWdlc3QgZnVuY3Rpb24gdXNlZCB0byBjYWxjdWxhdGUgdGhlIGhhc2ggb2YgdGhlIGNvbmNhdGVuYXRlZCBidWZmZXJzLlxuICogQHJldHVybnMgVGhlIE1lcmtsZSByb290IGFzIGEgYnVmZmVyLlxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiB0aGUgdmFsdWVzIHBhcmFtZXRlciBpcyBub3QgYW4gYXJyYXkgb3IgdGhlIGRpZ2VzdEZuIHBhcmFtZXRlciBpcyBub3QgYSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZhc3RNZXJrbGVSb290KHZhbHVlcywgZGlnZXN0Rm4pIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlcykpIHRocm93IFR5cGVFcnJvcignRXhwZWN0ZWQgdmFsdWVzIEFycmF5Jyk7XG4gIGlmICh0eXBlb2YgZGlnZXN0Rm4gIT09ICdmdW5jdGlvbicpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdFeHBlY3RlZCBkaWdlc3QgRnVuY3Rpb24nKTtcbiAgbGV0IGxlbmd0aCA9IHZhbHVlcy5sZW5ndGg7XG4gIGNvbnN0IHJlc3VsdHMgPSB2YWx1ZXMuY29uY2F0KCk7XG4gIHdoaWxlIChsZW5ndGggPiAxKSB7XG4gICAgbGV0IGogPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDIsICsraikge1xuICAgICAgY29uc3QgbGVmdCA9IHJlc3VsdHNbaV07XG4gICAgICBjb25zdCByaWdodCA9IGkgKyAxID09PSBsZW5ndGggPyBsZWZ0IDogcmVzdWx0c1tpICsgMV07XG4gICAgICBjb25zdCBkYXRhID0gdG9vbHMuY29uY2F0KFtsZWZ0LCByaWdodF0pO1xuICAgICAgcmVzdWx0c1tqXSA9IGRpZ2VzdEZuKGRhdGEpO1xuICAgIH1cbiAgICBsZW5ndGggPSBqO1xuICB9XG4gIHJldHVybiByZXN1bHRzWzBdO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/merkle.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bitcoin: () => (/* binding */ bitcoin),\n/* harmony export */   regtest: () => (/* binding */ regtest),\n/* harmony export */   testnet: () => (/* binding */ testnet)\n/* harmony export */ });\n// https://en.bitcoin.it/wiki/List_of_address_prefixes\n// Dogecoin BIP32 is a proposed standard: https://bitcointalk.org/index.php?topic=409731\n/**\n * Represents the Bitcoin network configuration.\n */\nconst bitcoin = {\n  /**\n   * The message prefix used for signing Bitcoin messages.\n   */\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  /**\n   * The Bech32 prefix used for Bitcoin addresses.\n   */\n  bech32: 'bc',\n  /**\n   * The BIP32 key prefixes for Bitcoin.\n   */\n  bip32: {\n    /**\n     * The public key prefix for BIP32 extended public keys.\n     */\n    public: 0x0488b21e,\n    /**\n     * The private key prefix for BIP32 extended private keys.\n     */\n    private: 0x0488ade4,\n  },\n  /**\n   * The prefix for Bitcoin public key hashes.\n   */\n  pubKeyHash: 0x00,\n  /**\n   * The prefix for Bitcoin script hashes.\n   */\n  scriptHash: 0x05,\n  /**\n   * The prefix for Bitcoin Wallet Import Format (WIF) private keys.\n   */\n  wif: 0x80,\n};\n/**\n * Represents the regtest network configuration.\n */\nconst regtest = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'bcrt',\n  bip32: {\n    public: 0x043587cf,\n    private: 0x04358394,\n  },\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  wif: 0xef,\n};\n/**\n * Represents the testnet network configuration.\n */\nconst testnet = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'tb',\n  bip32: {\n    public: 0x043587cf,\n    private: 0x04358394,\n  },\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  wif: 0xef,\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9uZXR3b3Jrcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvYnRjL21pZGwteC1iaXRjb2luLXN1bW1pdC1oYWNrYXRob24tMjAyNS91dHhvLXBzYnQtZGVtby9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9uZXR3b3Jrcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBodHRwczovL2VuLmJpdGNvaW4uaXQvd2lraS9MaXN0X29mX2FkZHJlc3NfcHJlZml4ZXNcbi8vIERvZ2Vjb2luIEJJUDMyIGlzIGEgcHJvcG9zZWQgc3RhbmRhcmQ6IGh0dHBzOi8vYml0Y29pbnRhbGsub3JnL2luZGV4LnBocD90b3BpYz00MDk3MzFcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgQml0Y29pbiBuZXR3b3JrIGNvbmZpZ3VyYXRpb24uXG4gKi9cbmV4cG9ydCBjb25zdCBiaXRjb2luID0ge1xuICAvKipcbiAgICogVGhlIG1lc3NhZ2UgcHJlZml4IHVzZWQgZm9yIHNpZ25pbmcgQml0Y29pbiBtZXNzYWdlcy5cbiAgICovXG4gIG1lc3NhZ2VQcmVmaXg6ICdcXHgxOEJpdGNvaW4gU2lnbmVkIE1lc3NhZ2U6XFxuJyxcbiAgLyoqXG4gICAqIFRoZSBCZWNoMzIgcHJlZml4IHVzZWQgZm9yIEJpdGNvaW4gYWRkcmVzc2VzLlxuICAgKi9cbiAgYmVjaDMyOiAnYmMnLFxuICAvKipcbiAgICogVGhlIEJJUDMyIGtleSBwcmVmaXhlcyBmb3IgQml0Y29pbi5cbiAgICovXG4gIGJpcDMyOiB7XG4gICAgLyoqXG4gICAgICogVGhlIHB1YmxpYyBrZXkgcHJlZml4IGZvciBCSVAzMiBleHRlbmRlZCBwdWJsaWMga2V5cy5cbiAgICAgKi9cbiAgICBwdWJsaWM6IDB4MDQ4OGIyMWUsXG4gICAgLyoqXG4gICAgICogVGhlIHByaXZhdGUga2V5IHByZWZpeCBmb3IgQklQMzIgZXh0ZW5kZWQgcHJpdmF0ZSBrZXlzLlxuICAgICAqL1xuICAgIHByaXZhdGU6IDB4MDQ4OGFkZTQsXG4gIH0sXG4gIC8qKlxuICAgKiBUaGUgcHJlZml4IGZvciBCaXRjb2luIHB1YmxpYyBrZXkgaGFzaGVzLlxuICAgKi9cbiAgcHViS2V5SGFzaDogMHgwMCxcbiAgLyoqXG4gICAqIFRoZSBwcmVmaXggZm9yIEJpdGNvaW4gc2NyaXB0IGhhc2hlcy5cbiAgICovXG4gIHNjcmlwdEhhc2g6IDB4MDUsXG4gIC8qKlxuICAgKiBUaGUgcHJlZml4IGZvciBCaXRjb2luIFdhbGxldCBJbXBvcnQgRm9ybWF0IChXSUYpIHByaXZhdGUga2V5cy5cbiAgICovXG4gIHdpZjogMHg4MCxcbn07XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIHJlZ3Rlc3QgbmV0d29yayBjb25maWd1cmF0aW9uLlxuICovXG5leHBvcnQgY29uc3QgcmVndGVzdCA9IHtcbiAgbWVzc2FnZVByZWZpeDogJ1xceDE4Qml0Y29pbiBTaWduZWQgTWVzc2FnZTpcXG4nLFxuICBiZWNoMzI6ICdiY3J0JyxcbiAgYmlwMzI6IHtcbiAgICBwdWJsaWM6IDB4MDQzNTg3Y2YsXG4gICAgcHJpdmF0ZTogMHgwNDM1ODM5NCxcbiAgfSxcbiAgcHViS2V5SGFzaDogMHg2ZixcbiAgc2NyaXB0SGFzaDogMHhjNCxcbiAgd2lmOiAweGVmLFxufTtcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgdGVzdG5ldCBuZXR3b3JrIGNvbmZpZ3VyYXRpb24uXG4gKi9cbmV4cG9ydCBjb25zdCB0ZXN0bmV0ID0ge1xuICBtZXNzYWdlUHJlZml4OiAnXFx4MThCaXRjb2luIFNpZ25lZCBNZXNzYWdlOlxcbicsXG4gIGJlY2gzMjogJ3RiJyxcbiAgYmlwMzI6IHtcbiAgICBwdWJsaWM6IDB4MDQzNTg3Y2YsXG4gICAgcHJpdmF0ZTogMHgwNDM1ODM5NCxcbiAgfSxcbiAgcHViS2V5SGFzaDogMHg2ZixcbiAgc2NyaXB0SGFzaDogMHhjNCxcbiAgd2lmOiAweGVmLFxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/ops.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/ops.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OPS: () => (/* binding */ OPS),\n/* harmony export */   REVERSE_OPS: () => (/* binding */ REVERSE_OPS)\n/* harmony export */ });\nconst OPS = {\n  OP_FALSE: 0,\n  OP_0: 0,\n  OP_PUSHDATA1: 76,\n  OP_PUSHDATA2: 77,\n  OP_PUSHDATA4: 78,\n  OP_1NEGATE: 79,\n  OP_RESERVED: 80,\n  OP_TRUE: 81,\n  OP_1: 81,\n  OP_2: 82,\n  OP_3: 83,\n  OP_4: 84,\n  OP_5: 85,\n  OP_6: 86,\n  OP_7: 87,\n  OP_8: 88,\n  OP_9: 89,\n  OP_10: 90,\n  OP_11: 91,\n  OP_12: 92,\n  OP_13: 93,\n  OP_14: 94,\n  OP_15: 95,\n  OP_16: 96,\n  OP_NOP: 97,\n  OP_VER: 98,\n  OP_IF: 99,\n  OP_NOTIF: 100,\n  OP_VERIF: 101,\n  OP_VERNOTIF: 102,\n  OP_ELSE: 103,\n  OP_ENDIF: 104,\n  OP_VERIFY: 105,\n  OP_RETURN: 106,\n  OP_TOALTSTACK: 107,\n  OP_FROMALTSTACK: 108,\n  OP_2DROP: 109,\n  OP_2DUP: 110,\n  OP_3DUP: 111,\n  OP_2OVER: 112,\n  OP_2ROT: 113,\n  OP_2SWAP: 114,\n  OP_IFDUP: 115,\n  OP_DEPTH: 116,\n  OP_DROP: 117,\n  OP_DUP: 118,\n  OP_NIP: 119,\n  OP_OVER: 120,\n  OP_PICK: 121,\n  OP_ROLL: 122,\n  OP_ROT: 123,\n  OP_SWAP: 124,\n  OP_TUCK: 125,\n  OP_CAT: 126,\n  OP_SUBSTR: 127,\n  OP_LEFT: 128,\n  OP_RIGHT: 129,\n  OP_SIZE: 130,\n  OP_INVERT: 131,\n  OP_AND: 132,\n  OP_OR: 133,\n  OP_XOR: 134,\n  OP_EQUAL: 135,\n  OP_EQUALVERIFY: 136,\n  OP_RESERVED1: 137,\n  OP_RESERVED2: 138,\n  OP_1ADD: 139,\n  OP_1SUB: 140,\n  OP_2MUL: 141,\n  OP_2DIV: 142,\n  OP_NEGATE: 143,\n  OP_ABS: 144,\n  OP_NOT: 145,\n  OP_0NOTEQUAL: 146,\n  OP_ADD: 147,\n  OP_SUB: 148,\n  OP_MUL: 149,\n  OP_DIV: 150,\n  OP_MOD: 151,\n  OP_LSHIFT: 152,\n  OP_RSHIFT: 153,\n  OP_BOOLAND: 154,\n  OP_BOOLOR: 155,\n  OP_NUMEQUAL: 156,\n  OP_NUMEQUALVERIFY: 157,\n  OP_NUMNOTEQUAL: 158,\n  OP_LESSTHAN: 159,\n  OP_GREATERTHAN: 160,\n  OP_LESSTHANOREQUAL: 161,\n  OP_GREATERTHANOREQUAL: 162,\n  OP_MIN: 163,\n  OP_MAX: 164,\n  OP_WITHIN: 165,\n  OP_RIPEMD160: 166,\n  OP_SHA1: 167,\n  OP_SHA256: 168,\n  OP_HASH160: 169,\n  OP_HASH256: 170,\n  OP_CODESEPARATOR: 171,\n  OP_CHECKSIG: 172,\n  OP_CHECKSIGVERIFY: 173,\n  OP_CHECKMULTISIG: 174,\n  OP_CHECKMULTISIGVERIFY: 175,\n  OP_NOP1: 176,\n  OP_NOP2: 177,\n  OP_CHECKLOCKTIMEVERIFY: 177,\n  OP_NOP3: 178,\n  OP_CHECKSEQUENCEVERIFY: 178,\n  OP_NOP4: 179,\n  OP_NOP5: 180,\n  OP_NOP6: 181,\n  OP_NOP7: 182,\n  OP_NOP8: 183,\n  OP_NOP9: 184,\n  OP_NOP10: 185,\n  OP_CHECKSIGADD: 186,\n  OP_PUBKEYHASH: 253,\n  OP_PUBKEY: 254,\n  OP_INVALIDOPCODE: 255,\n};\nconst REVERSE_OPS = {};\nfor (const op of Object.keys(OPS)) {\n  const code = OPS[op];\n  REVERSE_OPS[code] = op;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9vcHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDNEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9idGMvbWlkbC14LWJpdGNvaW4tc3VtbWl0LWhhY2thdGhvbi0yMDI1L3V0eG8tcHNidC1kZW1vL25vZGVfbW9kdWxlcy8ucG5wbS9iaXRjb2luanMtbGliQDcuMC4wLXJjLjBfdHlwZXNjcmlwdEA1LjkuMi9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYi9zcmMvZXNtL29wcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBPUFMgPSB7XG4gIE9QX0ZBTFNFOiAwLFxuICBPUF8wOiAwLFxuICBPUF9QVVNIREFUQTE6IDc2LFxuICBPUF9QVVNIREFUQTI6IDc3LFxuICBPUF9QVVNIREFUQTQ6IDc4LFxuICBPUF8xTkVHQVRFOiA3OSxcbiAgT1BfUkVTRVJWRUQ6IDgwLFxuICBPUF9UUlVFOiA4MSxcbiAgT1BfMTogODEsXG4gIE9QXzI6IDgyLFxuICBPUF8zOiA4MyxcbiAgT1BfNDogODQsXG4gIE9QXzU6IDg1LFxuICBPUF82OiA4NixcbiAgT1BfNzogODcsXG4gIE9QXzg6IDg4LFxuICBPUF85OiA4OSxcbiAgT1BfMTA6IDkwLFxuICBPUF8xMTogOTEsXG4gIE9QXzEyOiA5MixcbiAgT1BfMTM6IDkzLFxuICBPUF8xNDogOTQsXG4gIE9QXzE1OiA5NSxcbiAgT1BfMTY6IDk2LFxuICBPUF9OT1A6IDk3LFxuICBPUF9WRVI6IDk4LFxuICBPUF9JRjogOTksXG4gIE9QX05PVElGOiAxMDAsXG4gIE9QX1ZFUklGOiAxMDEsXG4gIE9QX1ZFUk5PVElGOiAxMDIsXG4gIE9QX0VMU0U6IDEwMyxcbiAgT1BfRU5ESUY6IDEwNCxcbiAgT1BfVkVSSUZZOiAxMDUsXG4gIE9QX1JFVFVSTjogMTA2LFxuICBPUF9UT0FMVFNUQUNLOiAxMDcsXG4gIE9QX0ZST01BTFRTVEFDSzogMTA4LFxuICBPUF8yRFJPUDogMTA5LFxuICBPUF8yRFVQOiAxMTAsXG4gIE9QXzNEVVA6IDExMSxcbiAgT1BfMk9WRVI6IDExMixcbiAgT1BfMlJPVDogMTEzLFxuICBPUF8yU1dBUDogMTE0LFxuICBPUF9JRkRVUDogMTE1LFxuICBPUF9ERVBUSDogMTE2LFxuICBPUF9EUk9QOiAxMTcsXG4gIE9QX0RVUDogMTE4LFxuICBPUF9OSVA6IDExOSxcbiAgT1BfT1ZFUjogMTIwLFxuICBPUF9QSUNLOiAxMjEsXG4gIE9QX1JPTEw6IDEyMixcbiAgT1BfUk9UOiAxMjMsXG4gIE9QX1NXQVA6IDEyNCxcbiAgT1BfVFVDSzogMTI1LFxuICBPUF9DQVQ6IDEyNixcbiAgT1BfU1VCU1RSOiAxMjcsXG4gIE9QX0xFRlQ6IDEyOCxcbiAgT1BfUklHSFQ6IDEyOSxcbiAgT1BfU0laRTogMTMwLFxuICBPUF9JTlZFUlQ6IDEzMSxcbiAgT1BfQU5EOiAxMzIsXG4gIE9QX09SOiAxMzMsXG4gIE9QX1hPUjogMTM0LFxuICBPUF9FUVVBTDogMTM1LFxuICBPUF9FUVVBTFZFUklGWTogMTM2LFxuICBPUF9SRVNFUlZFRDE6IDEzNyxcbiAgT1BfUkVTRVJWRUQyOiAxMzgsXG4gIE9QXzFBREQ6IDEzOSxcbiAgT1BfMVNVQjogMTQwLFxuICBPUF8yTVVMOiAxNDEsXG4gIE9QXzJESVY6IDE0MixcbiAgT1BfTkVHQVRFOiAxNDMsXG4gIE9QX0FCUzogMTQ0LFxuICBPUF9OT1Q6IDE0NSxcbiAgT1BfME5PVEVRVUFMOiAxNDYsXG4gIE9QX0FERDogMTQ3LFxuICBPUF9TVUI6IDE0OCxcbiAgT1BfTVVMOiAxNDksXG4gIE9QX0RJVjogMTUwLFxuICBPUF9NT0Q6IDE1MSxcbiAgT1BfTFNISUZUOiAxNTIsXG4gIE9QX1JTSElGVDogMTUzLFxuICBPUF9CT09MQU5EOiAxNTQsXG4gIE9QX0JPT0xPUjogMTU1LFxuICBPUF9OVU1FUVVBTDogMTU2LFxuICBPUF9OVU1FUVVBTFZFUklGWTogMTU3LFxuICBPUF9OVU1OT1RFUVVBTDogMTU4LFxuICBPUF9MRVNTVEhBTjogMTU5LFxuICBPUF9HUkVBVEVSVEhBTjogMTYwLFxuICBPUF9MRVNTVEhBTk9SRVFVQUw6IDE2MSxcbiAgT1BfR1JFQVRFUlRIQU5PUkVRVUFMOiAxNjIsXG4gIE9QX01JTjogMTYzLFxuICBPUF9NQVg6IDE2NCxcbiAgT1BfV0lUSElOOiAxNjUsXG4gIE9QX1JJUEVNRDE2MDogMTY2LFxuICBPUF9TSEExOiAxNjcsXG4gIE9QX1NIQTI1NjogMTY4LFxuICBPUF9IQVNIMTYwOiAxNjksXG4gIE9QX0hBU0gyNTY6IDE3MCxcbiAgT1BfQ09ERVNFUEFSQVRPUjogMTcxLFxuICBPUF9DSEVDS1NJRzogMTcyLFxuICBPUF9DSEVDS1NJR1ZFUklGWTogMTczLFxuICBPUF9DSEVDS01VTFRJU0lHOiAxNzQsXG4gIE9QX0NIRUNLTVVMVElTSUdWRVJJRlk6IDE3NSxcbiAgT1BfTk9QMTogMTc2LFxuICBPUF9OT1AyOiAxNzcsXG4gIE9QX0NIRUNLTE9DS1RJTUVWRVJJRlk6IDE3NyxcbiAgT1BfTk9QMzogMTc4LFxuICBPUF9DSEVDS1NFUVVFTkNFVkVSSUZZOiAxNzgsXG4gIE9QX05PUDQ6IDE3OSxcbiAgT1BfTk9QNTogMTgwLFxuICBPUF9OT1A2OiAxODEsXG4gIE9QX05PUDc6IDE4MixcbiAgT1BfTk9QODogMTgzLFxuICBPUF9OT1A5OiAxODQsXG4gIE9QX05PUDEwOiAxODUsXG4gIE9QX0NIRUNLU0lHQUREOiAxODYsXG4gIE9QX1BVQktFWUhBU0g6IDI1MyxcbiAgT1BfUFVCS0VZOiAyNTQsXG4gIE9QX0lOVkFMSURPUENPREU6IDI1NSxcbn07XG5jb25zdCBSRVZFUlNFX09QUyA9IHt9O1xuZm9yIChjb25zdCBvcCBvZiBPYmplY3Qua2V5cyhPUFMpKSB7XG4gIGNvbnN0IGNvZGUgPSBPUFNbb3BdO1xuICBSRVZFUlNFX09QU1tjb2RlXSA9IG9wO1xufVxuZXhwb3J0IHsgT1BTLCBSRVZFUlNFX09QUyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/ops.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/bip341.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/bip341.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LEAF_VERSION_TAPSCRIPT: () => (/* binding */ LEAF_VERSION_TAPSCRIPT),\n/* harmony export */   MAX_TAPTREE_DEPTH: () => (/* binding */ MAX_TAPTREE_DEPTH),\n/* harmony export */   findScriptPath: () => (/* binding */ findScriptPath),\n/* harmony export */   rootHashFromPath: () => (/* binding */ rootHashFromPath),\n/* harmony export */   tapTweakHash: () => (/* binding */ tapTweakHash),\n/* harmony export */   tapleafHash: () => (/* binding */ tapleafHash),\n/* harmony export */   toHashTree: () => (/* binding */ toHashTree),\n/* harmony export */   tweakKey: () => (/* binding */ tweakKey)\n/* harmony export */ });\n/* harmony import */ var _ecc_lib_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ecc_lib.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/ecc_lib.js\");\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../crypto.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/crypto.js\");\n/* harmony import */ var _bufferutils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../bufferutils.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/bufferutils.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n\n\n\n\n\nconst LEAF_VERSION_TAPSCRIPT = 0xc0;\nconst MAX_TAPTREE_DEPTH = 128;\nconst isHashBranch = ht => 'left' in ht && 'right' in ht;\n/**\n * Calculates the root hash from a given control block and leaf hash.\n * @param controlBlock - The control block buffer.\n * @param leafHash - The leaf hash buffer.\n * @returns The root hash buffer.\n * @throws {TypeError} If the control block length is less than 33.\n */\nfunction rootHashFromPath(controlBlock, leafHash) {\n  if (controlBlock.length < 33)\n    throw new TypeError(\n      `The control-block length is too small. Got ${controlBlock.length}, expected min 33.`,\n    );\n  const m = (controlBlock.length - 33) / 32;\n  let kj = leafHash;\n  for (let j = 0; j < m; j++) {\n    const ej = controlBlock.slice(33 + 32 * j, 65 + 32 * j);\n    if (uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.compare(kj, ej) < 0) {\n      kj = tapBranchHash(kj, ej);\n    } else {\n      kj = tapBranchHash(ej, kj);\n    }\n  }\n  return kj;\n}\n/**\n * Build a hash tree of merkle nodes from the scripts binary tree.\n * @param scriptTree - the tree of scripts to pairwise hash.\n */\nfunction toHashTree(scriptTree) {\n  if ((0,_types_js__WEBPACK_IMPORTED_MODULE_3__.isTapleaf)(scriptTree)) return { hash: tapleafHash(scriptTree) };\n  const hashes = [toHashTree(scriptTree[0]), toHashTree(scriptTree[1])];\n  // hashes.sort((a, b) => a.hash.compare(b.hash));\n  hashes.sort((a, b) => uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.compare(a.hash, b.hash));\n  const [left, right] = hashes;\n  return {\n    hash: tapBranchHash(left.hash, right.hash),\n    left,\n    right,\n  };\n}\n/**\n * Given a HashTree, finds the path from a particular hash to the root.\n * @param node - the root of the tree\n * @param hash - the hash to search for\n * @returns - array of sibling hashes, from leaf (inclusive) to root\n * (exclusive) needed to prove inclusion of the specified hash. undefined if no\n * path is found\n */\nfunction findScriptPath(node, hash) {\n  if (isHashBranch(node)) {\n    const leftPath = findScriptPath(node.left, hash);\n    if (leftPath !== undefined) return [...leftPath, node.right.hash];\n    const rightPath = findScriptPath(node.right, hash);\n    if (rightPath !== undefined) return [...rightPath, node.left.hash];\n  } else if (uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.compare(node.hash, hash) === 0) {\n    return [];\n  }\n  return undefined;\n}\n/**\n * Calculates the tapleaf hash for a given Tapleaf object.\n * @param leaf - The Tapleaf object to calculate the hash for.\n * @returns The tapleaf hash as a Buffer.\n */\nfunction tapleafHash(leaf) {\n  const version = leaf.version || LEAF_VERSION_TAPSCRIPT;\n  return _crypto_js__WEBPACK_IMPORTED_MODULE_1__.taggedHash(\n    'TapLeaf',\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.concat([Uint8Array.from([version]), serializeScript(leaf.output)]),\n  );\n}\n/**\n * Computes the taproot tweak hash for a given public key and optional hash.\n * If a hash is provided, the public key and hash are concatenated before computing the hash.\n * If no hash is provided, only the public key is used to compute the hash.\n *\n * @param pubKey - The public key buffer.\n * @param h - The optional hash buffer.\n * @returns The taproot tweak hash.\n */\nfunction tapTweakHash(pubKey, h) {\n  return _crypto_js__WEBPACK_IMPORTED_MODULE_1__.taggedHash(\n    'TapTweak',\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.concat(h ? [pubKey, h] : [pubKey]),\n  );\n}\n/**\n * Tweak a public key with a given tweak hash.\n * @param pubKey - The public key to be tweaked.\n * @param h - The tweak hash.\n * @returns The tweaked public key or null if the input is invalid.\n */\nfunction tweakKey(pubKey, h) {\n  if (!(pubKey instanceof Uint8Array)) return null;\n  if (pubKey.length !== 32) return null;\n  if (h && h.length !== 32) return null;\n  const tweakHash = tapTweakHash(pubKey, h);\n  const res = (0,_ecc_lib_js__WEBPACK_IMPORTED_MODULE_0__.getEccLib)().xOnlyPointAddTweak(pubKey, tweakHash);\n  if (!res || res.xOnlyPubkey === null) return null;\n  return {\n    parity: res.parity,\n    x: Uint8Array.from(res.xOnlyPubkey),\n  };\n}\n/**\n * Computes the TapBranch hash by concatenating two buffers and applying the 'TapBranch' tagged hash algorithm.\n *\n * @param a - The first buffer.\n * @param b - The second buffer.\n * @returns The TapBranch hash of the concatenated buffers.\n */\nfunction tapBranchHash(a, b) {\n  return _crypto_js__WEBPACK_IMPORTED_MODULE_1__.taggedHash('TapBranch', uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.concat([a, b]));\n}\n/**\n * Serializes a script by encoding its length as a varint and concatenating it with the script.\n *\n * @param s - The script to be serialized.\n * @returns The serialized script as a Buffer.\n */\nfunction serializeScript(s) {\n  /* global BigInt */\n  const varintLen = _bufferutils_js__WEBPACK_IMPORTED_MODULE_2__.varuint.encodingLength(s.length);\n  const buffer = new Uint8Array(varintLen);\n  _bufferutils_js__WEBPACK_IMPORTED_MODULE_2__.varuint.encode(s.length, buffer);\n  return uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.concat([buffer, s]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9iaXAzNDEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUEwQztBQUNGO0FBQ0k7QUFDSjtBQUNFO0FBQ25DO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDTztBQUNQO0FBQ0E7QUFDQSxvREFBb0Qsb0JBQW9CO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0EsUUFBUSxxREFBYTtBQUNyQjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLE1BQU0sb0RBQVMsdUJBQXVCO0FBQ3RDO0FBQ0E7QUFDQSx3QkFBd0IscURBQWE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxTQUFTLHFEQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxTQUFTLGtEQUFrQjtBQUMzQjtBQUNBLElBQUksb0RBQVk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBa0I7QUFDM0I7QUFDQSxJQUFJLG9EQUFZO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxzREFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxrREFBa0IsY0FBYyxvREFBWTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUVBQXNCO0FBQzFDO0FBQ0EsRUFBRSwyREFBYztBQUNoQixTQUFTLG9EQUFZO0FBQ3JCIiwic291cmNlcyI6WyIvVXNlcnMvYnRjL21pZGwteC1iaXRjb2luLXN1bW1pdC1oYWNrYXRob24tMjAyNS91dHhvLXBzYnQtZGVtby9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9iaXAzNDEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RWNjTGliIH0gZnJvbSAnLi4vZWNjX2xpYi5qcyc7XG5pbXBvcnQgKiBhcyBiY3J5cHRvIGZyb20gJy4uL2NyeXB0by5qcyc7XG5pbXBvcnQgeyB2YXJ1aW50IH0gZnJvbSAnLi4vYnVmZmVydXRpbHMuanMnO1xuaW1wb3J0IHsgaXNUYXBsZWFmIH0gZnJvbSAnLi4vdHlwZXMuanMnO1xuaW1wb3J0ICogYXMgdG9vbHMgZnJvbSAndWludDhhcnJheS10b29scyc7XG5leHBvcnQgY29uc3QgTEVBRl9WRVJTSU9OX1RBUFNDUklQVCA9IDB4YzA7XG5leHBvcnQgY29uc3QgTUFYX1RBUFRSRUVfREVQVEggPSAxMjg7XG5jb25zdCBpc0hhc2hCcmFuY2ggPSBodCA9PiAnbGVmdCcgaW4gaHQgJiYgJ3JpZ2h0JyBpbiBodDtcbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcm9vdCBoYXNoIGZyb20gYSBnaXZlbiBjb250cm9sIGJsb2NrIGFuZCBsZWFmIGhhc2guXG4gKiBAcGFyYW0gY29udHJvbEJsb2NrIC0gVGhlIGNvbnRyb2wgYmxvY2sgYnVmZmVyLlxuICogQHBhcmFtIGxlYWZIYXNoIC0gVGhlIGxlYWYgaGFzaCBidWZmZXIuXG4gKiBAcmV0dXJucyBUaGUgcm9vdCBoYXNoIGJ1ZmZlci5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgdGhlIGNvbnRyb2wgYmxvY2sgbGVuZ3RoIGlzIGxlc3MgdGhhbiAzMy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvb3RIYXNoRnJvbVBhdGgoY29udHJvbEJsb2NrLCBsZWFmSGFzaCkge1xuICBpZiAoY29udHJvbEJsb2NrLmxlbmd0aCA8IDMzKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBgVGhlIGNvbnRyb2wtYmxvY2sgbGVuZ3RoIGlzIHRvbyBzbWFsbC4gR290ICR7Y29udHJvbEJsb2NrLmxlbmd0aH0sIGV4cGVjdGVkIG1pbiAzMy5gLFxuICAgICk7XG4gIGNvbnN0IG0gPSAoY29udHJvbEJsb2NrLmxlbmd0aCAtIDMzKSAvIDMyO1xuICBsZXQga2ogPSBsZWFmSGFzaDtcbiAgZm9yIChsZXQgaiA9IDA7IGogPCBtOyBqKyspIHtcbiAgICBjb25zdCBlaiA9IGNvbnRyb2xCbG9jay5zbGljZSgzMyArIDMyICogaiwgNjUgKyAzMiAqIGopO1xuICAgIGlmICh0b29scy5jb21wYXJlKGtqLCBlaikgPCAwKSB7XG4gICAgICBraiA9IHRhcEJyYW5jaEhhc2goa2osIGVqKTtcbiAgICB9IGVsc2Uge1xuICAgICAga2ogPSB0YXBCcmFuY2hIYXNoKGVqLCBraik7XG4gICAgfVxuICB9XG4gIHJldHVybiBrajtcbn1cbi8qKlxuICogQnVpbGQgYSBoYXNoIHRyZWUgb2YgbWVya2xlIG5vZGVzIGZyb20gdGhlIHNjcmlwdHMgYmluYXJ5IHRyZWUuXG4gKiBAcGFyYW0gc2NyaXB0VHJlZSAtIHRoZSB0cmVlIG9mIHNjcmlwdHMgdG8gcGFpcndpc2UgaGFzaC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvSGFzaFRyZWUoc2NyaXB0VHJlZSkge1xuICBpZiAoaXNUYXBsZWFmKHNjcmlwdFRyZWUpKSByZXR1cm4geyBoYXNoOiB0YXBsZWFmSGFzaChzY3JpcHRUcmVlKSB9O1xuICBjb25zdCBoYXNoZXMgPSBbdG9IYXNoVHJlZShzY3JpcHRUcmVlWzBdKSwgdG9IYXNoVHJlZShzY3JpcHRUcmVlWzFdKV07XG4gIC8vIGhhc2hlcy5zb3J0KChhLCBiKSA9PiBhLmhhc2guY29tcGFyZShiLmhhc2gpKTtcbiAgaGFzaGVzLnNvcnQoKGEsIGIpID0+IHRvb2xzLmNvbXBhcmUoYS5oYXNoLCBiLmhhc2gpKTtcbiAgY29uc3QgW2xlZnQsIHJpZ2h0XSA9IGhhc2hlcztcbiAgcmV0dXJuIHtcbiAgICBoYXNoOiB0YXBCcmFuY2hIYXNoKGxlZnQuaGFzaCwgcmlnaHQuaGFzaCksXG4gICAgbGVmdCxcbiAgICByaWdodCxcbiAgfTtcbn1cbi8qKlxuICogR2l2ZW4gYSBIYXNoVHJlZSwgZmluZHMgdGhlIHBhdGggZnJvbSBhIHBhcnRpY3VsYXIgaGFzaCB0byB0aGUgcm9vdC5cbiAqIEBwYXJhbSBub2RlIC0gdGhlIHJvb3Qgb2YgdGhlIHRyZWVcbiAqIEBwYXJhbSBoYXNoIC0gdGhlIGhhc2ggdG8gc2VhcmNoIGZvclxuICogQHJldHVybnMgLSBhcnJheSBvZiBzaWJsaW5nIGhhc2hlcywgZnJvbSBsZWFmIChpbmNsdXNpdmUpIHRvIHJvb3RcbiAqIChleGNsdXNpdmUpIG5lZWRlZCB0byBwcm92ZSBpbmNsdXNpb24gb2YgdGhlIHNwZWNpZmllZCBoYXNoLiB1bmRlZmluZWQgaWYgbm9cbiAqIHBhdGggaXMgZm91bmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRTY3JpcHRQYXRoKG5vZGUsIGhhc2gpIHtcbiAgaWYgKGlzSGFzaEJyYW5jaChub2RlKSkge1xuICAgIGNvbnN0IGxlZnRQYXRoID0gZmluZFNjcmlwdFBhdGgobm9kZS5sZWZ0LCBoYXNoKTtcbiAgICBpZiAobGVmdFBhdGggIT09IHVuZGVmaW5lZCkgcmV0dXJuIFsuLi5sZWZ0UGF0aCwgbm9kZS5yaWdodC5oYXNoXTtcbiAgICBjb25zdCByaWdodFBhdGggPSBmaW5kU2NyaXB0UGF0aChub2RlLnJpZ2h0LCBoYXNoKTtcbiAgICBpZiAocmlnaHRQYXRoICE9PSB1bmRlZmluZWQpIHJldHVybiBbLi4ucmlnaHRQYXRoLCBub2RlLmxlZnQuaGFzaF07XG4gIH0gZWxzZSBpZiAodG9vbHMuY29tcGFyZShub2RlLmhhc2gsIGhhc2gpID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHRhcGxlYWYgaGFzaCBmb3IgYSBnaXZlbiBUYXBsZWFmIG9iamVjdC5cbiAqIEBwYXJhbSBsZWFmIC0gVGhlIFRhcGxlYWYgb2JqZWN0IHRvIGNhbGN1bGF0ZSB0aGUgaGFzaCBmb3IuXG4gKiBAcmV0dXJucyBUaGUgdGFwbGVhZiBoYXNoIGFzIGEgQnVmZmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGFwbGVhZkhhc2gobGVhZikge1xuICBjb25zdCB2ZXJzaW9uID0gbGVhZi52ZXJzaW9uIHx8IExFQUZfVkVSU0lPTl9UQVBTQ1JJUFQ7XG4gIHJldHVybiBiY3J5cHRvLnRhZ2dlZEhhc2goXG4gICAgJ1RhcExlYWYnLFxuICAgIHRvb2xzLmNvbmNhdChbVWludDhBcnJheS5mcm9tKFt2ZXJzaW9uXSksIHNlcmlhbGl6ZVNjcmlwdChsZWFmLm91dHB1dCldKSxcbiAgKTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIHRhcHJvb3QgdHdlYWsgaGFzaCBmb3IgYSBnaXZlbiBwdWJsaWMga2V5IGFuZCBvcHRpb25hbCBoYXNoLlxuICogSWYgYSBoYXNoIGlzIHByb3ZpZGVkLCB0aGUgcHVibGljIGtleSBhbmQgaGFzaCBhcmUgY29uY2F0ZW5hdGVkIGJlZm9yZSBjb21wdXRpbmcgdGhlIGhhc2guXG4gKiBJZiBubyBoYXNoIGlzIHByb3ZpZGVkLCBvbmx5IHRoZSBwdWJsaWMga2V5IGlzIHVzZWQgdG8gY29tcHV0ZSB0aGUgaGFzaC5cbiAqXG4gKiBAcGFyYW0gcHViS2V5IC0gVGhlIHB1YmxpYyBrZXkgYnVmZmVyLlxuICogQHBhcmFtIGggLSBUaGUgb3B0aW9uYWwgaGFzaCBidWZmZXIuXG4gKiBAcmV0dXJucyBUaGUgdGFwcm9vdCB0d2VhayBoYXNoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGFwVHdlYWtIYXNoKHB1YktleSwgaCkge1xuICByZXR1cm4gYmNyeXB0by50YWdnZWRIYXNoKFxuICAgICdUYXBUd2VhaycsXG4gICAgdG9vbHMuY29uY2F0KGggPyBbcHViS2V5LCBoXSA6IFtwdWJLZXldKSxcbiAgKTtcbn1cbi8qKlxuICogVHdlYWsgYSBwdWJsaWMga2V5IHdpdGggYSBnaXZlbiB0d2VhayBoYXNoLlxuICogQHBhcmFtIHB1YktleSAtIFRoZSBwdWJsaWMga2V5IHRvIGJlIHR3ZWFrZWQuXG4gKiBAcGFyYW0gaCAtIFRoZSB0d2VhayBoYXNoLlxuICogQHJldHVybnMgVGhlIHR3ZWFrZWQgcHVibGljIGtleSBvciBudWxsIGlmIHRoZSBpbnB1dCBpcyBpbnZhbGlkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHdlYWtLZXkocHViS2V5LCBoKSB7XG4gIGlmICghKHB1YktleSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKSByZXR1cm4gbnVsbDtcbiAgaWYgKHB1YktleS5sZW5ndGggIT09IDMyKSByZXR1cm4gbnVsbDtcbiAgaWYgKGggJiYgaC5sZW5ndGggIT09IDMyKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgdHdlYWtIYXNoID0gdGFwVHdlYWtIYXNoKHB1YktleSwgaCk7XG4gIGNvbnN0IHJlcyA9IGdldEVjY0xpYigpLnhPbmx5UG9pbnRBZGRUd2VhayhwdWJLZXksIHR3ZWFrSGFzaCk7XG4gIGlmICghcmVzIHx8IHJlcy54T25seVB1YmtleSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiB7XG4gICAgcGFyaXR5OiByZXMucGFyaXR5LFxuICAgIHg6IFVpbnQ4QXJyYXkuZnJvbShyZXMueE9ubHlQdWJrZXkpLFxuICB9O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgVGFwQnJhbmNoIGhhc2ggYnkgY29uY2F0ZW5hdGluZyB0d28gYnVmZmVycyBhbmQgYXBwbHlpbmcgdGhlICdUYXBCcmFuY2gnIHRhZ2dlZCBoYXNoIGFsZ29yaXRobS5cbiAqXG4gKiBAcGFyYW0gYSAtIFRoZSBmaXJzdCBidWZmZXIuXG4gKiBAcGFyYW0gYiAtIFRoZSBzZWNvbmQgYnVmZmVyLlxuICogQHJldHVybnMgVGhlIFRhcEJyYW5jaCBoYXNoIG9mIHRoZSBjb25jYXRlbmF0ZWQgYnVmZmVycy5cbiAqL1xuZnVuY3Rpb24gdGFwQnJhbmNoSGFzaChhLCBiKSB7XG4gIHJldHVybiBiY3J5cHRvLnRhZ2dlZEhhc2goJ1RhcEJyYW5jaCcsIHRvb2xzLmNvbmNhdChbYSwgYl0pKTtcbn1cbi8qKlxuICogU2VyaWFsaXplcyBhIHNjcmlwdCBieSBlbmNvZGluZyBpdHMgbGVuZ3RoIGFzIGEgdmFyaW50IGFuZCBjb25jYXRlbmF0aW5nIGl0IHdpdGggdGhlIHNjcmlwdC5cbiAqXG4gKiBAcGFyYW0gcyAtIFRoZSBzY3JpcHQgdG8gYmUgc2VyaWFsaXplZC5cbiAqIEByZXR1cm5zIFRoZSBzZXJpYWxpemVkIHNjcmlwdCBhcyBhIEJ1ZmZlci5cbiAqL1xuZnVuY3Rpb24gc2VyaWFsaXplU2NyaXB0KHMpIHtcbiAgLyogZ2xvYmFsIEJpZ0ludCAqL1xuICBjb25zdCB2YXJpbnRMZW4gPSB2YXJ1aW50LmVuY29kaW5nTGVuZ3RoKHMubGVuZ3RoKTtcbiAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkodmFyaW50TGVuKTtcbiAgdmFydWludC5lbmNvZGUocy5sZW5ndGgsIGJ1ZmZlcik7XG4gIHJldHVybiB0b29scy5jb25jYXQoW2J1ZmZlciwgc10pO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/bip341.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/embed.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/embed.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   p2data: () => (/* binding */ p2data)\n/* harmony export */ });\n/* harmony import */ var _networks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../networks.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var _lazy_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lazy.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/lazy.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n\n\n\n\n\nconst OPS = _script_js__WEBPACK_IMPORTED_MODULE_1__.OPS;\n// output: OP_RETURN ...\n/**\n * Embeds data in a Bitcoin payment.\n * @param a - The payment object.\n * @param opts - Optional payment options.\n * @returns The modified payment object.\n * @throws {TypeError} If there is not enough data or if the output is invalid.\n */\nfunction p2data(a, opts) {\n  if (!a.data && !a.output) throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  valibot__WEBPACK_IMPORTED_MODULE_4__.parse(\n    valibot__WEBPACK_IMPORTED_MODULE_4__.partial(\n      valibot__WEBPACK_IMPORTED_MODULE_4__.object({\n        network: valibot__WEBPACK_IMPORTED_MODULE_4__.object({}),\n        output: _types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema,\n        data: valibot__WEBPACK_IMPORTED_MODULE_4__.array(_types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema),\n      }),\n    ),\n    a,\n  );\n  const network = a.network || _networks_js__WEBPACK_IMPORTED_MODULE_0__.bitcoin;\n  const o = { name: 'embed', network };\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'output', () => {\n    if (!a.data) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_1__.compile([OPS.OP_RETURN].concat(a.data));\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'data', () => {\n    if (!a.output) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(a.output).slice(1);\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      const chunks = _script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(a.output);\n      if (chunks[0] !== OPS.OP_RETURN) throw new TypeError('Output is invalid');\n      if (!chunks.slice(1).every(chunk => valibot__WEBPACK_IMPORTED_MODULE_4__.is(_types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema, chunk)))\n        throw new TypeError('Output is invalid');\n      if (a.data && !(0,_types_js__WEBPACK_IMPORTED_MODULE_2__.stacksEqual)(a.data, o.data))\n        throw new TypeError('Data mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9lbWJlZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNEQ7QUFDcEI7QUFDZ0I7QUFDdEI7QUFDTDtBQUM3QixZQUFZLDJDQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNPO0FBQ1A7QUFDQSx5QkFBeUIsZ0JBQWdCLFlBQVk7QUFDckQsRUFBRSwwQ0FBTztBQUNULElBQUksNENBQVM7QUFDYixNQUFNLDJDQUFRO0FBQ2QsaUJBQWlCLDJDQUFRLEdBQUc7QUFDNUIsZ0JBQWdCLG1EQUFZO0FBQzVCLGNBQWMsMENBQU8sQ0FBQyxtREFBWTtBQUNsQyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGlEQUFlO0FBQzlDLGNBQWM7QUFDZCxFQUFFLDBDQUFTO0FBQ1g7QUFDQSxXQUFXLCtDQUFlO0FBQzFCLEdBQUc7QUFDSCxFQUFFLDBDQUFTO0FBQ1g7QUFDQSxXQUFXLGlEQUFpQjtBQUM1QixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGlEQUFpQjtBQUN0QztBQUNBLDBDQUEwQyx1Q0FBSSxDQUFDLG1EQUFZO0FBQzNEO0FBQ0EscUJBQXFCLHNEQUFXO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9idGMvbWlkbC14LWJpdGNvaW4tc3VtbWl0LWhhY2thdGhvbi0yMDI1L3V0eG8tcHNidC1kZW1vL25vZGVfbW9kdWxlcy8ucG5wbS9iaXRjb2luanMtbGliQDcuMC4wLXJjLjBfdHlwZXNjcmlwdEA1LjkuMi9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYi9zcmMvZXNtL3BheW1lbnRzL2VtYmVkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJpdGNvaW4gYXMgQklUQ09JTl9ORVRXT1JLIH0gZnJvbSAnLi4vbmV0d29ya3MuanMnO1xuaW1wb3J0ICogYXMgYnNjcmlwdCBmcm9tICcuLi9zY3JpcHQuanMnO1xuaW1wb3J0IHsgc3RhY2tzRXF1YWwsIEJ1ZmZlclNjaGVtYSB9IGZyb20gJy4uL3R5cGVzLmpzJztcbmltcG9ydCAqIGFzIGxhenkgZnJvbSAnLi9sYXp5LmpzJztcbmltcG9ydCAqIGFzIHYgZnJvbSAndmFsaWJvdCc7XG5jb25zdCBPUFMgPSBic2NyaXB0Lk9QUztcbi8vIG91dHB1dDogT1BfUkVUVVJOIC4uLlxuLyoqXG4gKiBFbWJlZHMgZGF0YSBpbiBhIEJpdGNvaW4gcGF5bWVudC5cbiAqIEBwYXJhbSBhIC0gVGhlIHBheW1lbnQgb2JqZWN0LlxuICogQHBhcmFtIG9wdHMgLSBPcHRpb25hbCBwYXltZW50IG9wdGlvbnMuXG4gKiBAcmV0dXJucyBUaGUgbW9kaWZpZWQgcGF5bWVudCBvYmplY3QuXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIHRoZXJlIGlzIG5vdCBlbm91Z2ggZGF0YSBvciBpZiB0aGUgb3V0cHV0IGlzIGludmFsaWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwMmRhdGEoYSwgb3B0cykge1xuICBpZiAoIWEuZGF0YSAmJiAhYS5vdXRwdXQpIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBlbm91Z2ggZGF0YScpO1xuICBvcHRzID0gT2JqZWN0LmFzc2lnbih7IHZhbGlkYXRlOiB0cnVlIH0sIG9wdHMgfHwge30pO1xuICB2LnBhcnNlKFxuICAgIHYucGFydGlhbChcbiAgICAgIHYub2JqZWN0KHtcbiAgICAgICAgbmV0d29yazogdi5vYmplY3Qoe30pLFxuICAgICAgICBvdXRwdXQ6IEJ1ZmZlclNjaGVtYSxcbiAgICAgICAgZGF0YTogdi5hcnJheShCdWZmZXJTY2hlbWEpLFxuICAgICAgfSksXG4gICAgKSxcbiAgICBhLFxuICApO1xuICBjb25zdCBuZXR3b3JrID0gYS5uZXR3b3JrIHx8IEJJVENPSU5fTkVUV09SSztcbiAgY29uc3QgbyA9IHsgbmFtZTogJ2VtYmVkJywgbmV0d29yayB9O1xuICBsYXp5LnByb3AobywgJ291dHB1dCcsICgpID0+IHtcbiAgICBpZiAoIWEuZGF0YSkgcmV0dXJuO1xuICAgIHJldHVybiBic2NyaXB0LmNvbXBpbGUoW09QUy5PUF9SRVRVUk5dLmNvbmNhdChhLmRhdGEpKTtcbiAgfSk7XG4gIGxhenkucHJvcChvLCAnZGF0YScsICgpID0+IHtcbiAgICBpZiAoIWEub3V0cHV0KSByZXR1cm47XG4gICAgcmV0dXJuIGJzY3JpcHQuZGVjb21waWxlKGEub3V0cHV0KS5zbGljZSgxKTtcbiAgfSk7XG4gIC8vIGV4dGVuZGVkIHZhbGlkYXRpb25cbiAgaWYgKG9wdHMudmFsaWRhdGUpIHtcbiAgICBpZiAoYS5vdXRwdXQpIHtcbiAgICAgIGNvbnN0IGNodW5rcyA9IGJzY3JpcHQuZGVjb21waWxlKGEub3V0cHV0KTtcbiAgICAgIGlmIChjaHVua3NbMF0gIT09IE9QUy5PUF9SRVRVUk4pIHRocm93IG5ldyBUeXBlRXJyb3IoJ091dHB1dCBpcyBpbnZhbGlkJyk7XG4gICAgICBpZiAoIWNodW5rcy5zbGljZSgxKS5ldmVyeShjaHVuayA9PiB2LmlzKEJ1ZmZlclNjaGVtYSwgY2h1bmspKSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT3V0cHV0IGlzIGludmFsaWQnKTtcbiAgICAgIGlmIChhLmRhdGEgJiYgIXN0YWNrc0VxdWFsKGEuZGF0YSwgby5kYXRhKSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRGF0YSBtaXNtYXRjaCcpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvLCBhKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/embed.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/index.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/index.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   embed: () => (/* reexport safe */ _embed_js__WEBPACK_IMPORTED_MODULE_0__.p2data),\n/* harmony export */   p2ms: () => (/* reexport safe */ _p2ms_js__WEBPACK_IMPORTED_MODULE_1__.p2ms),\n/* harmony export */   p2pk: () => (/* reexport safe */ _p2pk_js__WEBPACK_IMPORTED_MODULE_2__.p2pk),\n/* harmony export */   p2pkh: () => (/* reexport safe */ _p2pkh_js__WEBPACK_IMPORTED_MODULE_3__.p2pkh),\n/* harmony export */   p2sh: () => (/* reexport safe */ _p2sh_js__WEBPACK_IMPORTED_MODULE_4__.p2sh),\n/* harmony export */   p2tr: () => (/* reexport safe */ _p2tr_js__WEBPACK_IMPORTED_MODULE_7__.p2tr),\n/* harmony export */   p2wpkh: () => (/* reexport safe */ _p2wpkh_js__WEBPACK_IMPORTED_MODULE_5__.p2wpkh),\n/* harmony export */   p2wsh: () => (/* reexport safe */ _p2wsh_js__WEBPACK_IMPORTED_MODULE_6__.p2wsh)\n/* harmony export */ });\n/* harmony import */ var _embed_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./embed.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/embed.js\");\n/* harmony import */ var _p2ms_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./p2ms.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2ms.js\");\n/* harmony import */ var _p2pk_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./p2pk.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2pk.js\");\n/* harmony import */ var _p2pkh_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./p2pkh.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2pkh.js\");\n/* harmony import */ var _p2sh_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./p2sh.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2sh.js\");\n/* harmony import */ var _p2wpkh_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./p2wpkh.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2wpkh.js\");\n/* harmony import */ var _p2wsh_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./p2wsh.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2wsh.js\");\n/* harmony import */ var _p2tr_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./p2tr.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2tr.js\");\n\n\n\n\n\n\n\n\n\n// TODO\n// witness commitment\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZDO0FBQ1o7QUFDQTtBQUNFO0FBQ0Y7QUFDSTtBQUNGO0FBQ0Y7QUFDOEI7QUFDL0Q7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2J0Yy9taWRsLXgtYml0Y29pbi1zdW1taXQtaGFja2F0aG9uLTIwMjUvdXR4by1wc2J0LWRlbW8vbm9kZV9tb2R1bGVzLy5wbnBtL2JpdGNvaW5qcy1saWJANy4wLjAtcmMuMF90eXBlc2NyaXB0QDUuOS4yL25vZGVfbW9kdWxlcy9iaXRjb2luanMtbGliL3NyYy9lc20vcGF5bWVudHMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcDJkYXRhIGFzIGVtYmVkIH0gZnJvbSAnLi9lbWJlZC5qcyc7XG5pbXBvcnQgeyBwMm1zIH0gZnJvbSAnLi9wMm1zLmpzJztcbmltcG9ydCB7IHAycGsgfSBmcm9tICcuL3AycGsuanMnO1xuaW1wb3J0IHsgcDJwa2ggfSBmcm9tICcuL3AycGtoLmpzJztcbmltcG9ydCB7IHAyc2ggfSBmcm9tICcuL3Ayc2guanMnO1xuaW1wb3J0IHsgcDJ3cGtoIH0gZnJvbSAnLi9wMndwa2guanMnO1xuaW1wb3J0IHsgcDJ3c2ggfSBmcm9tICcuL3Ayd3NoLmpzJztcbmltcG9ydCB7IHAydHIgfSBmcm9tICcuL3AydHIuanMnO1xuZXhwb3J0IHsgZW1iZWQsIHAybXMsIHAycGssIHAycGtoLCBwMnNoLCBwMndwa2gsIHAyd3NoLCBwMnRyIH07XG4vLyBUT0RPXG4vLyB3aXRuZXNzIGNvbW1pdG1lbnRcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/lazy.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/lazy.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prop: () => (/* binding */ prop),\n/* harmony export */   value: () => (/* binding */ value)\n/* harmony export */ });\nfunction prop(object, name, f) {\n  Object.defineProperty(object, name, {\n    configurable: true,\n    enumerable: true,\n    get() {\n      const _value = f.call(this);\n      this[name] = _value;\n      return _value;\n    },\n    set(_value) {\n      Object.defineProperty(this, name, {\n        configurable: true,\n        enumerable: true,\n        value: _value,\n        writable: true,\n      });\n    },\n  });\n}\nfunction value(f) {\n  let _value;\n  return () => {\n    if (_value !== undefined) return _value;\n    _value = f();\n    return _value;\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9sYXp5LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9idGMvbWlkbC14LWJpdGNvaW4tc3VtbWl0LWhhY2thdGhvbi0yMDI1L3V0eG8tcHNidC1kZW1vL25vZGVfbW9kdWxlcy8ucG5wbS9iaXRjb2luanMtbGliQDcuMC4wLXJjLjBfdHlwZXNjcmlwdEA1LjkuMi9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYi9zcmMvZXNtL3BheW1lbnRzL2xhenkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHByb3Aob2JqZWN0LCBuYW1lLCBmKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIG5hbWUsIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQoKSB7XG4gICAgICBjb25zdCBfdmFsdWUgPSBmLmNhbGwodGhpcyk7XG4gICAgICB0aGlzW25hbWVdID0gX3ZhbHVlO1xuICAgICAgcmV0dXJuIF92YWx1ZTtcbiAgICB9LFxuICAgIHNldChfdmFsdWUpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBuYW1lLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IF92YWx1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB9KTtcbiAgICB9LFxuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB2YWx1ZShmKSB7XG4gIGxldCBfdmFsdWU7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgaWYgKF92YWx1ZSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gX3ZhbHVlO1xuICAgIF92YWx1ZSA9IGYoKTtcbiAgICByZXR1cm4gX3ZhbHVlO1xuICB9O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/lazy.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2ms.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2ms.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   p2ms: () => (/* binding */ p2ms)\n/* harmony export */ });\n/* harmony import */ var _networks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../networks.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var _lazy_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lazy.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/lazy.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n\n\n\n\n\nconst OPS = _script_js__WEBPACK_IMPORTED_MODULE_1__.OPS;\nconst OP_INT_BASE = OPS.OP_RESERVED; // OP_1 - 1\n// input: OP_0 [signatures ...]\n// output: m [pubKeys ...] n OP_CHECKMULTISIG\n/**\n * Represents a function that creates a Pay-to-Multisig (P2MS) payment object.\n * @param a - The payment object.\n * @param opts - Optional payment options.\n * @returns The created payment object.\n * @throws {TypeError} If the provided data is not valid.\n */\nfunction p2ms(a, opts) {\n  if (\n    !a.input &&\n    !a.output &&\n    !(a.pubkeys && a.m !== undefined) &&\n    !a.signatures\n  )\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  function isAcceptableSignature(x) {\n    return (\n      _script_js__WEBPACK_IMPORTED_MODULE_1__.isCanonicalScriptSignature(x) ||\n      (opts.allowIncomplete && x === OPS.OP_0) !== undefined\n    );\n  }\n  valibot__WEBPACK_IMPORTED_MODULE_4__.parse(\n    valibot__WEBPACK_IMPORTED_MODULE_4__.partial(\n      valibot__WEBPACK_IMPORTED_MODULE_4__.object({\n        network: valibot__WEBPACK_IMPORTED_MODULE_4__.object({}),\n        m: valibot__WEBPACK_IMPORTED_MODULE_4__.number(),\n        n: valibot__WEBPACK_IMPORTED_MODULE_4__.number(),\n        output: _types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema,\n        pubkeys: valibot__WEBPACK_IMPORTED_MODULE_4__.array(valibot__WEBPACK_IMPORTED_MODULE_4__.custom(_types_js__WEBPACK_IMPORTED_MODULE_2__.isPoint), 'Received invalid pubkey'),\n        signatures: valibot__WEBPACK_IMPORTED_MODULE_4__.array(\n          valibot__WEBPACK_IMPORTED_MODULE_4__.custom(isAcceptableSignature),\n          'Expected signature to be of type isAcceptableSignature',\n        ),\n        input: _types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema,\n      }),\n    ),\n    a,\n  );\n  const network = a.network || _networks_js__WEBPACK_IMPORTED_MODULE_0__.bitcoin;\n  const o = { network };\n  let chunks = [];\n  let decoded = false;\n  function decode(output) {\n    if (decoded) return;\n    decoded = true;\n    chunks = _script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(output);\n    o.m = chunks[0] - OP_INT_BASE;\n    o.n = chunks[chunks.length - 2] - OP_INT_BASE;\n    o.pubkeys = chunks.slice(1, -2);\n  }\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'output', () => {\n    if (!a.m) return;\n    if (!o.n) return;\n    if (!a.pubkeys) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_1__.compile(\n      [].concat(\n        OP_INT_BASE + a.m,\n        a.pubkeys,\n        OP_INT_BASE + o.n,\n        OPS.OP_CHECKMULTISIG,\n      ),\n    );\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'm', () => {\n    if (!o.output) return;\n    decode(o.output);\n    return o.m;\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'n', () => {\n    if (!o.pubkeys) return;\n    return o.pubkeys.length;\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'pubkeys', () => {\n    if (!a.output) return;\n    decode(a.output);\n    return o.pubkeys;\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'signatures', () => {\n    if (!a.input) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(a.input).slice(1);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'input', () => {\n    if (!a.signatures) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_1__.compile([OPS.OP_0].concat(a.signatures));\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'name', () => {\n    if (!o.m || !o.n) return;\n    return `p2ms(${o.m} of ${o.n})`;\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      decode(a.output);\n      valibot__WEBPACK_IMPORTED_MODULE_4__.parse(valibot__WEBPACK_IMPORTED_MODULE_4__.number(), chunks[0], { message: 'Output is invalid' });\n      valibot__WEBPACK_IMPORTED_MODULE_4__.parse(valibot__WEBPACK_IMPORTED_MODULE_4__.number(), chunks[chunks.length - 2], {\n        message: 'Output is invalid',\n      });\n      if (chunks[chunks.length - 1] !== OPS.OP_CHECKMULTISIG)\n        throw new TypeError('Output is invalid');\n      if (o.m <= 0 || o.n > 16 || o.m > o.n || o.n !== chunks.length - 3)\n        throw new TypeError('Output is invalid');\n      if (!o.pubkeys.every(x => (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.isPoint)(x)))\n        throw new TypeError('Output is invalid');\n      if (a.m !== undefined && a.m !== o.m) throw new TypeError('m mismatch');\n      if (a.n !== undefined && a.n !== o.n) throw new TypeError('n mismatch');\n      if (a.pubkeys && !(0,_types_js__WEBPACK_IMPORTED_MODULE_2__.stacksEqual)(a.pubkeys, o.pubkeys))\n        throw new TypeError('Pubkeys mismatch');\n    }\n    if (a.pubkeys) {\n      if (a.n !== undefined && a.n !== a.pubkeys.length)\n        throw new TypeError('Pubkey count mismatch');\n      o.n = a.pubkeys.length;\n      if (o.n < o.m) throw new TypeError('Pubkey count cannot be less than m');\n    }\n    if (a.signatures) {\n      if (a.signatures.length < o.m)\n        throw new TypeError('Not enough signatures provided');\n      if (a.signatures.length > o.m)\n        throw new TypeError('Too many signatures provided');\n    }\n    if (a.input) {\n      if (a.input[0] !== OPS.OP_0) throw new TypeError('Input is invalid');\n      if (\n        o.signatures.length === 0 ||\n        !o.signatures.every(isAcceptableSignature)\n      )\n        throw new TypeError('Input has invalid signature(s)');\n      if (a.signatures && !(0,_types_js__WEBPACK_IMPORTED_MODULE_2__.stacksEqual)(a.signatures, o.signatures))\n        throw new TypeError('Signature mismatch');\n      if (a.m !== undefined && a.m !== a.signatures.length)\n        throw new TypeError('Signature count mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9wMm1zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE0RDtBQUNwQjtBQUN5QjtBQUMvQjtBQUNMO0FBQzdCLFlBQVksMkNBQVc7QUFDdkIscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixnQkFBZ0IsWUFBWTtBQUNyRDtBQUNBO0FBQ0EsTUFBTSxrRUFBa0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsRUFBRSwwQ0FBTztBQUNULElBQUksNENBQVM7QUFDYixNQUFNLDJDQUFRO0FBQ2QsaUJBQWlCLDJDQUFRLEdBQUc7QUFDNUIsV0FBVywyQ0FBUTtBQUNuQixXQUFXLDJDQUFRO0FBQ25CLGdCQUFnQixtREFBWTtBQUM1QixpQkFBaUIsMENBQU8sQ0FBQywyQ0FBUSxDQUFDLDhDQUFPO0FBQ3pDLG9CQUFvQiwwQ0FBTztBQUMzQixVQUFVLDJDQUFRO0FBQ2xCO0FBQ0E7QUFDQSxlQUFlLG1EQUFZO0FBQzNCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaURBQWU7QUFDOUMsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGlEQUFpQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtDQUFlO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLDBDQUFTO0FBQ1g7QUFDQSxXQUFXLGlEQUFpQjtBQUM1QixHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0EsV0FBVywrQ0FBZTtBQUMxQixHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0EsbUJBQW1CLEtBQUssS0FBSyxJQUFJO0FBQ2pDLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sMENBQU8sQ0FBQywyQ0FBUSxpQkFBaUIsOEJBQThCO0FBQ3JFLE1BQU0sMENBQU8sQ0FBQywyQ0FBUTtBQUN0QjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxrREFBTztBQUN2QztBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNEQUFXO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvYnRjL21pZGwteC1iaXRjb2luLXN1bW1pdC1oYWNrYXRob24tMjAyNS91dHhvLXBzYnQtZGVtby9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9wMm1zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJpdGNvaW4gYXMgQklUQ09JTl9ORVRXT1JLIH0gZnJvbSAnLi4vbmV0d29ya3MuanMnO1xuaW1wb3J0ICogYXMgYnNjcmlwdCBmcm9tICcuLi9zY3JpcHQuanMnO1xuaW1wb3J0IHsgQnVmZmVyU2NoZW1hLCBpc1BvaW50LCBzdGFja3NFcXVhbCB9IGZyb20gJy4uL3R5cGVzLmpzJztcbmltcG9ydCAqIGFzIGxhenkgZnJvbSAnLi9sYXp5LmpzJztcbmltcG9ydCAqIGFzIHYgZnJvbSAndmFsaWJvdCc7XG5jb25zdCBPUFMgPSBic2NyaXB0Lk9QUztcbmNvbnN0IE9QX0lOVF9CQVNFID0gT1BTLk9QX1JFU0VSVkVEOyAvLyBPUF8xIC0gMVxuLy8gaW5wdXQ6IE9QXzAgW3NpZ25hdHVyZXMgLi4uXVxuLy8gb3V0cHV0OiBtIFtwdWJLZXlzIC4uLl0gbiBPUF9DSEVDS01VTFRJU0lHXG4vKipcbiAqIFJlcHJlc2VudHMgYSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgYSBQYXktdG8tTXVsdGlzaWcgKFAyTVMpIHBheW1lbnQgb2JqZWN0LlxuICogQHBhcmFtIGEgLSBUaGUgcGF5bWVudCBvYmplY3QuXG4gKiBAcGFyYW0gb3B0cyAtIE9wdGlvbmFsIHBheW1lbnQgb3B0aW9ucy5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHBheW1lbnQgb2JqZWN0LlxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiB0aGUgcHJvdmlkZWQgZGF0YSBpcyBub3QgdmFsaWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwMm1zKGEsIG9wdHMpIHtcbiAgaWYgKFxuICAgICFhLmlucHV0ICYmXG4gICAgIWEub3V0cHV0ICYmXG4gICAgIShhLnB1YmtleXMgJiYgYS5tICE9PSB1bmRlZmluZWQpICYmXG4gICAgIWEuc2lnbmF0dXJlc1xuICApXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTm90IGVub3VnaCBkYXRhJyk7XG4gIG9wdHMgPSBPYmplY3QuYXNzaWduKHsgdmFsaWRhdGU6IHRydWUgfSwgb3B0cyB8fCB7fSk7XG4gIGZ1bmN0aW9uIGlzQWNjZXB0YWJsZVNpZ25hdHVyZSh4KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGJzY3JpcHQuaXNDYW5vbmljYWxTY3JpcHRTaWduYXR1cmUoeCkgfHxcbiAgICAgIChvcHRzLmFsbG93SW5jb21wbGV0ZSAmJiB4ID09PSBPUFMuT1BfMCkgIT09IHVuZGVmaW5lZFxuICAgICk7XG4gIH1cbiAgdi5wYXJzZShcbiAgICB2LnBhcnRpYWwoXG4gICAgICB2Lm9iamVjdCh7XG4gICAgICAgIG5ldHdvcms6IHYub2JqZWN0KHt9KSxcbiAgICAgICAgbTogdi5udW1iZXIoKSxcbiAgICAgICAgbjogdi5udW1iZXIoKSxcbiAgICAgICAgb3V0cHV0OiBCdWZmZXJTY2hlbWEsXG4gICAgICAgIHB1YmtleXM6IHYuYXJyYXkodi5jdXN0b20oaXNQb2ludCksICdSZWNlaXZlZCBpbnZhbGlkIHB1YmtleScpLFxuICAgICAgICBzaWduYXR1cmVzOiB2LmFycmF5KFxuICAgICAgICAgIHYuY3VzdG9tKGlzQWNjZXB0YWJsZVNpZ25hdHVyZSksXG4gICAgICAgICAgJ0V4cGVjdGVkIHNpZ25hdHVyZSB0byBiZSBvZiB0eXBlIGlzQWNjZXB0YWJsZVNpZ25hdHVyZScsXG4gICAgICAgICksXG4gICAgICAgIGlucHV0OiBCdWZmZXJTY2hlbWEsXG4gICAgICB9KSxcbiAgICApLFxuICAgIGEsXG4gICk7XG4gIGNvbnN0IG5ldHdvcmsgPSBhLm5ldHdvcmsgfHwgQklUQ09JTl9ORVRXT1JLO1xuICBjb25zdCBvID0geyBuZXR3b3JrIH07XG4gIGxldCBjaHVua3MgPSBbXTtcbiAgbGV0IGRlY29kZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVjb2RlKG91dHB1dCkge1xuICAgIGlmIChkZWNvZGVkKSByZXR1cm47XG4gICAgZGVjb2RlZCA9IHRydWU7XG4gICAgY2h1bmtzID0gYnNjcmlwdC5kZWNvbXBpbGUob3V0cHV0KTtcbiAgICBvLm0gPSBjaHVua3NbMF0gLSBPUF9JTlRfQkFTRTtcbiAgICBvLm4gPSBjaHVua3NbY2h1bmtzLmxlbmd0aCAtIDJdIC0gT1BfSU5UX0JBU0U7XG4gICAgby5wdWJrZXlzID0gY2h1bmtzLnNsaWNlKDEsIC0yKTtcbiAgfVxuICBsYXp5LnByb3AobywgJ291dHB1dCcsICgpID0+IHtcbiAgICBpZiAoIWEubSkgcmV0dXJuO1xuICAgIGlmICghby5uKSByZXR1cm47XG4gICAgaWYgKCFhLnB1YmtleXMpIHJldHVybjtcbiAgICByZXR1cm4gYnNjcmlwdC5jb21waWxlKFxuICAgICAgW10uY29uY2F0KFxuICAgICAgICBPUF9JTlRfQkFTRSArIGEubSxcbiAgICAgICAgYS5wdWJrZXlzLFxuICAgICAgICBPUF9JTlRfQkFTRSArIG8ubixcbiAgICAgICAgT1BTLk9QX0NIRUNLTVVMVElTSUcsXG4gICAgICApLFxuICAgICk7XG4gIH0pO1xuICBsYXp5LnByb3AobywgJ20nLCAoKSA9PiB7XG4gICAgaWYgKCFvLm91dHB1dCkgcmV0dXJuO1xuICAgIGRlY29kZShvLm91dHB1dCk7XG4gICAgcmV0dXJuIG8ubTtcbiAgfSk7XG4gIGxhenkucHJvcChvLCAnbicsICgpID0+IHtcbiAgICBpZiAoIW8ucHVia2V5cykgcmV0dXJuO1xuICAgIHJldHVybiBvLnB1YmtleXMubGVuZ3RoO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdwdWJrZXlzJywgKCkgPT4ge1xuICAgIGlmICghYS5vdXRwdXQpIHJldHVybjtcbiAgICBkZWNvZGUoYS5vdXRwdXQpO1xuICAgIHJldHVybiBvLnB1YmtleXM7XG4gIH0pO1xuICBsYXp5LnByb3AobywgJ3NpZ25hdHVyZXMnLCAoKSA9PiB7XG4gICAgaWYgKCFhLmlucHV0KSByZXR1cm47XG4gICAgcmV0dXJuIGJzY3JpcHQuZGVjb21waWxlKGEuaW5wdXQpLnNsaWNlKDEpO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdpbnB1dCcsICgpID0+IHtcbiAgICBpZiAoIWEuc2lnbmF0dXJlcykgcmV0dXJuO1xuICAgIHJldHVybiBic2NyaXB0LmNvbXBpbGUoW09QUy5PUF8wXS5jb25jYXQoYS5zaWduYXR1cmVzKSk7XG4gIH0pO1xuICBsYXp5LnByb3AobywgJ3dpdG5lc3MnLCAoKSA9PiB7XG4gICAgaWYgKCFvLmlucHV0KSByZXR1cm47XG4gICAgcmV0dXJuIFtdO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICduYW1lJywgKCkgPT4ge1xuICAgIGlmICghby5tIHx8ICFvLm4pIHJldHVybjtcbiAgICByZXR1cm4gYHAybXMoJHtvLm19IG9mICR7by5ufSlgO1xuICB9KTtcbiAgLy8gZXh0ZW5kZWQgdmFsaWRhdGlvblxuICBpZiAob3B0cy52YWxpZGF0ZSkge1xuICAgIGlmIChhLm91dHB1dCkge1xuICAgICAgZGVjb2RlKGEub3V0cHV0KTtcbiAgICAgIHYucGFyc2Uodi5udW1iZXIoKSwgY2h1bmtzWzBdLCB7IG1lc3NhZ2U6ICdPdXRwdXQgaXMgaW52YWxpZCcgfSk7XG4gICAgICB2LnBhcnNlKHYubnVtYmVyKCksIGNodW5rc1tjaHVua3MubGVuZ3RoIC0gMl0sIHtcbiAgICAgICAgbWVzc2FnZTogJ091dHB1dCBpcyBpbnZhbGlkJyxcbiAgICAgIH0pO1xuICAgICAgaWYgKGNodW5rc1tjaHVua3MubGVuZ3RoIC0gMV0gIT09IE9QUy5PUF9DSEVDS01VTFRJU0lHKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPdXRwdXQgaXMgaW52YWxpZCcpO1xuICAgICAgaWYgKG8ubSA8PSAwIHx8IG8ubiA+IDE2IHx8IG8ubSA+IG8ubiB8fCBvLm4gIT09IGNodW5rcy5sZW5ndGggLSAzKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPdXRwdXQgaXMgaW52YWxpZCcpO1xuICAgICAgaWYgKCFvLnB1YmtleXMuZXZlcnkoeCA9PiBpc1BvaW50KHgpKSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT3V0cHV0IGlzIGludmFsaWQnKTtcbiAgICAgIGlmIChhLm0gIT09IHVuZGVmaW5lZCAmJiBhLm0gIT09IG8ubSkgdGhyb3cgbmV3IFR5cGVFcnJvcignbSBtaXNtYXRjaCcpO1xuICAgICAgaWYgKGEubiAhPT0gdW5kZWZpbmVkICYmIGEubiAhPT0gby5uKSB0aHJvdyBuZXcgVHlwZUVycm9yKCduIG1pc21hdGNoJyk7XG4gICAgICBpZiAoYS5wdWJrZXlzICYmICFzdGFja3NFcXVhbChhLnB1YmtleXMsIG8ucHVia2V5cykpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1B1YmtleXMgbWlzbWF0Y2gnKTtcbiAgICB9XG4gICAgaWYgKGEucHVia2V5cykge1xuICAgICAgaWYgKGEubiAhPT0gdW5kZWZpbmVkICYmIGEubiAhPT0gYS5wdWJrZXlzLmxlbmd0aClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHVia2V5IGNvdW50IG1pc21hdGNoJyk7XG4gICAgICBvLm4gPSBhLnB1YmtleXMubGVuZ3RoO1xuICAgICAgaWYgKG8ubiA8IG8ubSkgdGhyb3cgbmV3IFR5cGVFcnJvcignUHVia2V5IGNvdW50IGNhbm5vdCBiZSBsZXNzIHRoYW4gbScpO1xuICAgIH1cbiAgICBpZiAoYS5zaWduYXR1cmVzKSB7XG4gICAgICBpZiAoYS5zaWduYXR1cmVzLmxlbmd0aCA8IG8ubSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTm90IGVub3VnaCBzaWduYXR1cmVzIHByb3ZpZGVkJyk7XG4gICAgICBpZiAoYS5zaWduYXR1cmVzLmxlbmd0aCA+IG8ubSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVG9vIG1hbnkgc2lnbmF0dXJlcyBwcm92aWRlZCcpO1xuICAgIH1cbiAgICBpZiAoYS5pbnB1dCkge1xuICAgICAgaWYgKGEuaW5wdXRbMF0gIT09IE9QUy5PUF8wKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnB1dCBpcyBpbnZhbGlkJyk7XG4gICAgICBpZiAoXG4gICAgICAgIG8uc2lnbmF0dXJlcy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgIW8uc2lnbmF0dXJlcy5ldmVyeShpc0FjY2VwdGFibGVTaWduYXR1cmUpXG4gICAgICApXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0lucHV0IGhhcyBpbnZhbGlkIHNpZ25hdHVyZShzKScpO1xuICAgICAgaWYgKGEuc2lnbmF0dXJlcyAmJiAhc3RhY2tzRXF1YWwoYS5zaWduYXR1cmVzLCBvLnNpZ25hdHVyZXMpKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdTaWduYXR1cmUgbWlzbWF0Y2gnKTtcbiAgICAgIGlmIChhLm0gIT09IHVuZGVmaW5lZCAmJiBhLm0gIT09IGEuc2lnbmF0dXJlcy5sZW5ndGgpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1NpZ25hdHVyZSBjb3VudCBtaXNtYXRjaCcpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvLCBhKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2ms.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2pk.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2pk.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   p2pk: () => (/* binding */ p2pk)\n/* harmony export */ });\n/* harmony import */ var _networks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../networks.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var _lazy_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lazy.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/lazy.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n\n\n\n\n\n\nconst OPS = _script_js__WEBPACK_IMPORTED_MODULE_1__.OPS;\n// input: {signature}\n// output: {pubKey} OP_CHECKSIG\n/**\n * Creates a pay-to-public-key (P2PK) payment object.\n *\n * @param a - The payment object containing the necessary data.\n * @param opts - Optional payment options.\n * @returns The P2PK payment object.\n * @throws {TypeError} If the required data is not provided or if the data is invalid.\n */\nfunction p2pk(a, opts) {\n  if (!a.input && !a.output && !a.pubkey && !a.input && !a.signature)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  valibot__WEBPACK_IMPORTED_MODULE_5__.parse(\n    valibot__WEBPACK_IMPORTED_MODULE_5__.partial(\n      valibot__WEBPACK_IMPORTED_MODULE_5__.object({\n        network: valibot__WEBPACK_IMPORTED_MODULE_5__.object({}),\n        output: _types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema,\n        pubkey: valibot__WEBPACK_IMPORTED_MODULE_5__.custom(_types_js__WEBPACK_IMPORTED_MODULE_2__.isPoint, 'invalid pubkey'),\n        signature: valibot__WEBPACK_IMPORTED_MODULE_5__.custom(\n          _script_js__WEBPACK_IMPORTED_MODULE_1__.isCanonicalScriptSignature,\n          'Expected signature to be of type isCanonicalScriptSignature',\n        ),\n        input: _types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema,\n      }),\n    ),\n    a,\n  );\n  const _chunks = _lazy_js__WEBPACK_IMPORTED_MODULE_3__.value(() => {\n    return _script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(a.input);\n  });\n  const network = a.network || _networks_js__WEBPACK_IMPORTED_MODULE_0__.bitcoin;\n  const o = { name: 'p2pk', network };\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'output', () => {\n    if (!a.pubkey) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_1__.compile([a.pubkey, OPS.OP_CHECKSIG]);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'pubkey', () => {\n    if (!a.output) return;\n    return a.output.slice(1, -1);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'signature', () => {\n    if (!a.input) return;\n    return _chunks()[0];\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'input', () => {\n    if (!a.signature) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_1__.compile([a.signature]);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      if (a.output[a.output.length - 1] !== OPS.OP_CHECKSIG)\n        throw new TypeError('Output is invalid');\n      if (!(0,_types_js__WEBPACK_IMPORTED_MODULE_2__.isPoint)(o.pubkey)) throw new TypeError('Output pubkey is invalid');\n      if (a.pubkey && uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.compare(a.pubkey, o.pubkey) !== 0)\n        throw new TypeError('Pubkey mismatch');\n    }\n    if (a.signature) {\n      if (a.input && uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.compare(a.input, o.input) !== 0)\n        throw new TypeError('Signature mismatch');\n    }\n    if (a.input) {\n      if (_chunks().length !== 1) throw new TypeError('Input is invalid');\n      if (!_script_js__WEBPACK_IMPORTED_MODULE_1__.isCanonicalScriptSignature(o.signature))\n        throw new TypeError('Input has invalid signature');\n    }\n  }\n  return Object.assign(o, a);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9wMnBrLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNEQ7QUFDcEI7QUFDWTtBQUNsQjtBQUNRO0FBQ2I7QUFDN0IsWUFBWSwyQ0FBVztBQUN2QixXQUFXO0FBQ1gsWUFBWSxRQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNPO0FBQ1A7QUFDQTtBQUNBLHlCQUF5QixnQkFBZ0IsWUFBWTtBQUNyRCxFQUFFLDBDQUFPO0FBQ1QsSUFBSSw0Q0FBUztBQUNiLE1BQU0sMkNBQVE7QUFDZCxpQkFBaUIsMkNBQVEsR0FBRztBQUM1QixnQkFBZ0IsbURBQVk7QUFDNUIsZ0JBQWdCLDJDQUFRLENBQUMsOENBQU87QUFDaEMsbUJBQW1CLDJDQUFRO0FBQzNCLFVBQVUsa0VBQWtDO0FBQzVDO0FBQ0E7QUFDQSxlQUFlLG1EQUFZO0FBQzNCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMkNBQVU7QUFDNUIsV0FBVyxpREFBaUI7QUFDNUIsR0FBRztBQUNILCtCQUErQixpREFBZTtBQUM5QyxjQUFjO0FBQ2QsRUFBRSwwQ0FBUztBQUNYO0FBQ0EsV0FBVywrQ0FBZTtBQUMxQixHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0EsV0FBVywrQ0FBZTtBQUMxQixHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0RBQU87QUFDbEIsc0JBQXNCLHFEQUFhO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixxREFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0VBQWtDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9idGMvbWlkbC14LWJpdGNvaW4tc3VtbWl0LWhhY2thdGhvbi0yMDI1L3V0eG8tcHNidC1kZW1vL25vZGVfbW9kdWxlcy8ucG5wbS9iaXRjb2luanMtbGliQDcuMC4wLXJjLjBfdHlwZXNjcmlwdEA1LjkuMi9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYi9zcmMvZXNtL3BheW1lbnRzL3AycGsuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYml0Y29pbiBhcyBCSVRDT0lOX05FVFdPUksgfSBmcm9tICcuLi9uZXR3b3Jrcy5qcyc7XG5pbXBvcnQgKiBhcyBic2NyaXB0IGZyb20gJy4uL3NjcmlwdC5qcyc7XG5pbXBvcnQgeyBCdWZmZXJTY2hlbWEsIGlzUG9pbnQgfSBmcm9tICcuLi90eXBlcy5qcyc7XG5pbXBvcnQgKiBhcyBsYXp5IGZyb20gJy4vbGF6eS5qcyc7XG5pbXBvcnQgKiBhcyB0b29scyBmcm9tICd1aW50OGFycmF5LXRvb2xzJztcbmltcG9ydCAqIGFzIHYgZnJvbSAndmFsaWJvdCc7XG5jb25zdCBPUFMgPSBic2NyaXB0Lk9QUztcbi8vIGlucHV0OiB7c2lnbmF0dXJlfVxuLy8gb3V0cHV0OiB7cHViS2V5fSBPUF9DSEVDS1NJR1xuLyoqXG4gKiBDcmVhdGVzIGEgcGF5LXRvLXB1YmxpYy1rZXkgKFAyUEspIHBheW1lbnQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBhIC0gVGhlIHBheW1lbnQgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG5lY2Vzc2FyeSBkYXRhLlxuICogQHBhcmFtIG9wdHMgLSBPcHRpb25hbCBwYXltZW50IG9wdGlvbnMuXG4gKiBAcmV0dXJucyBUaGUgUDJQSyBwYXltZW50IG9iamVjdC5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgdGhlIHJlcXVpcmVkIGRhdGEgaXMgbm90IHByb3ZpZGVkIG9yIGlmIHRoZSBkYXRhIGlzIGludmFsaWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwMnBrKGEsIG9wdHMpIHtcbiAgaWYgKCFhLmlucHV0ICYmICFhLm91dHB1dCAmJiAhYS5wdWJrZXkgJiYgIWEuaW5wdXQgJiYgIWEuc2lnbmF0dXJlKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBlbm91Z2ggZGF0YScpO1xuICBvcHRzID0gT2JqZWN0LmFzc2lnbih7IHZhbGlkYXRlOiB0cnVlIH0sIG9wdHMgfHwge30pO1xuICB2LnBhcnNlKFxuICAgIHYucGFydGlhbChcbiAgICAgIHYub2JqZWN0KHtcbiAgICAgICAgbmV0d29yazogdi5vYmplY3Qoe30pLFxuICAgICAgICBvdXRwdXQ6IEJ1ZmZlclNjaGVtYSxcbiAgICAgICAgcHVia2V5OiB2LmN1c3RvbShpc1BvaW50LCAnaW52YWxpZCBwdWJrZXknKSxcbiAgICAgICAgc2lnbmF0dXJlOiB2LmN1c3RvbShcbiAgICAgICAgICBic2NyaXB0LmlzQ2Fub25pY2FsU2NyaXB0U2lnbmF0dXJlLFxuICAgICAgICAgICdFeHBlY3RlZCBzaWduYXR1cmUgdG8gYmUgb2YgdHlwZSBpc0Nhbm9uaWNhbFNjcmlwdFNpZ25hdHVyZScsXG4gICAgICAgICksXG4gICAgICAgIGlucHV0OiBCdWZmZXJTY2hlbWEsXG4gICAgICB9KSxcbiAgICApLFxuICAgIGEsXG4gICk7XG4gIGNvbnN0IF9jaHVua3MgPSBsYXp5LnZhbHVlKCgpID0+IHtcbiAgICByZXR1cm4gYnNjcmlwdC5kZWNvbXBpbGUoYS5pbnB1dCk7XG4gIH0pO1xuICBjb25zdCBuZXR3b3JrID0gYS5uZXR3b3JrIHx8IEJJVENPSU5fTkVUV09SSztcbiAgY29uc3QgbyA9IHsgbmFtZTogJ3AycGsnLCBuZXR3b3JrIH07XG4gIGxhenkucHJvcChvLCAnb3V0cHV0JywgKCkgPT4ge1xuICAgIGlmICghYS5wdWJrZXkpIHJldHVybjtcbiAgICByZXR1cm4gYnNjcmlwdC5jb21waWxlKFthLnB1YmtleSwgT1BTLk9QX0NIRUNLU0lHXSk7XG4gIH0pO1xuICBsYXp5LnByb3AobywgJ3B1YmtleScsICgpID0+IHtcbiAgICBpZiAoIWEub3V0cHV0KSByZXR1cm47XG4gICAgcmV0dXJuIGEub3V0cHV0LnNsaWNlKDEsIC0xKTtcbiAgfSk7XG4gIGxhenkucHJvcChvLCAnc2lnbmF0dXJlJywgKCkgPT4ge1xuICAgIGlmICghYS5pbnB1dCkgcmV0dXJuO1xuICAgIHJldHVybiBfY2h1bmtzKClbMF07XG4gIH0pO1xuICBsYXp5LnByb3AobywgJ2lucHV0JywgKCkgPT4ge1xuICAgIGlmICghYS5zaWduYXR1cmUpIHJldHVybjtcbiAgICByZXR1cm4gYnNjcmlwdC5jb21waWxlKFthLnNpZ25hdHVyZV0pO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICd3aXRuZXNzJywgKCkgPT4ge1xuICAgIGlmICghby5pbnB1dCkgcmV0dXJuO1xuICAgIHJldHVybiBbXTtcbiAgfSk7XG4gIC8vIGV4dGVuZGVkIHZhbGlkYXRpb25cbiAgaWYgKG9wdHMudmFsaWRhdGUpIHtcbiAgICBpZiAoYS5vdXRwdXQpIHtcbiAgICAgIGlmIChhLm91dHB1dFthLm91dHB1dC5sZW5ndGggLSAxXSAhPT0gT1BTLk9QX0NIRUNLU0lHKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPdXRwdXQgaXMgaW52YWxpZCcpO1xuICAgICAgaWYgKCFpc1BvaW50KG8ucHVia2V5KSkgdGhyb3cgbmV3IFR5cGVFcnJvcignT3V0cHV0IHB1YmtleSBpcyBpbnZhbGlkJyk7XG4gICAgICBpZiAoYS5wdWJrZXkgJiYgdG9vbHMuY29tcGFyZShhLnB1YmtleSwgby5wdWJrZXkpICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQdWJrZXkgbWlzbWF0Y2gnKTtcbiAgICB9XG4gICAgaWYgKGEuc2lnbmF0dXJlKSB7XG4gICAgICBpZiAoYS5pbnB1dCAmJiB0b29scy5jb21wYXJlKGEuaW5wdXQsIG8uaW5wdXQpICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdTaWduYXR1cmUgbWlzbWF0Y2gnKTtcbiAgICB9XG4gICAgaWYgKGEuaW5wdXQpIHtcbiAgICAgIGlmIChfY2h1bmtzKCkubGVuZ3RoICE9PSAxKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnB1dCBpcyBpbnZhbGlkJyk7XG4gICAgICBpZiAoIWJzY3JpcHQuaXNDYW5vbmljYWxTY3JpcHRTaWduYXR1cmUoby5zaWduYXR1cmUpKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnB1dCBoYXMgaW52YWxpZCBzaWduYXR1cmUnKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24obywgYSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2pk.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2pkh.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2pkh.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   p2pkh: () => (/* binding */ p2pkh)\n/* harmony export */ });\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../crypto.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/crypto.js\");\n/* harmony import */ var _networks_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../networks.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var _lazy_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lazy.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/lazy.js\");\n/* harmony import */ var bs58check__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bs58check */ \"(ssr)/./node_modules/.pnpm/bs58check@4.0.0/node_modules/bs58check/src/esm/index.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n\n\n\n\n\n\n\n\nconst OPS = _script_js__WEBPACK_IMPORTED_MODULE_2__.OPS;\n// input: {signature} {pubkey}\n// output: OP_DUP OP_HASH160 {hash160(pubkey)} OP_EQUALVERIFY OP_CHECKSIG\n/**\n * Creates a Pay-to-Public-Key-Hash (P2PKH) payment object.\n *\n * @param a - The payment object containing the necessary data.\n * @param opts - Optional payment options.\n * @returns The P2PKH payment object.\n * @throws {TypeError} If the required data is not provided or if the data is invalid.\n */\nfunction p2pkh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.pubkey && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  valibot__WEBPACK_IMPORTED_MODULE_7__.parse(\n    valibot__WEBPACK_IMPORTED_MODULE_7__.partial(\n      valibot__WEBPACK_IMPORTED_MODULE_7__.object({\n        network: valibot__WEBPACK_IMPORTED_MODULE_7__.object({}),\n        address: valibot__WEBPACK_IMPORTED_MODULE_7__.string(),\n        hash: _types_js__WEBPACK_IMPORTED_MODULE_3__.Hash160bitSchema,\n        output: (0,_types_js__WEBPACK_IMPORTED_MODULE_3__.NBufferSchemaFactory)(25),\n        pubkey: valibot__WEBPACK_IMPORTED_MODULE_7__.custom(_types_js__WEBPACK_IMPORTED_MODULE_3__.isPoint),\n        signature: valibot__WEBPACK_IMPORTED_MODULE_7__.custom(_script_js__WEBPACK_IMPORTED_MODULE_2__.isCanonicalScriptSignature),\n        input: _types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema,\n      }),\n    ),\n    a,\n  );\n  const _address = _lazy_js__WEBPACK_IMPORTED_MODULE_4__.value(() => {\n    const payload = bs58check__WEBPACK_IMPORTED_MODULE_5__[\"default\"].decode(a.address);\n    const version = uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.readUInt8(payload, 0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = _lazy_js__WEBPACK_IMPORTED_MODULE_4__.value(() => {\n    return _script_js__WEBPACK_IMPORTED_MODULE_2__.decompile(a.input);\n  });\n  const network = a.network || _networks_js__WEBPACK_IMPORTED_MODULE_1__.bitcoin;\n  const o = { name: 'p2pkh', network };\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = new Uint8Array(21);\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.writeUInt8(payload, 0, network.pubKeyHash);\n    payload.set(o.hash, 1);\n    return bs58check__WEBPACK_IMPORTED_MODULE_5__[\"default\"].encode(payload);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(3, 23);\n    if (a.address) return _address().hash;\n    if (a.pubkey || o.pubkey) return _crypto_js__WEBPACK_IMPORTED_MODULE_0__.hash160(a.pubkey || o.pubkey);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_2__.compile([\n      OPS.OP_DUP,\n      OPS.OP_HASH160,\n      o.hash,\n      OPS.OP_EQUALVERIFY,\n      OPS.OP_CHECKSIG,\n    ]);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'pubkey', () => {\n    if (!a.input) return;\n    return _chunks()[1];\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'signature', () => {\n    if (!a.input) return;\n    return _chunks()[0];\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'input', () => {\n    if (!a.pubkey) return;\n    if (!a.signature) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_2__.compile([a.signature, a.pubkey]);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Uint8Array.from([]);\n    if (a.address) {\n      if (_address().version !== network.pubKeyHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(hash, a.hash) !== 0)\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 25 ||\n        a.output[0] !== OPS.OP_DUP ||\n        a.output[1] !== OPS.OP_HASH160 ||\n        a.output[2] !== 0x14 ||\n        a.output[23] !== OPS.OP_EQUALVERIFY ||\n        a.output[24] !== OPS.OP_CHECKSIG\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(3, 23);\n      if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(hash, hash2) !== 0)\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    if (a.pubkey) {\n      const pkh = _crypto_js__WEBPACK_IMPORTED_MODULE_0__.hash160(a.pubkey);\n      if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(hash, pkh) !== 0)\n        throw new TypeError('Hash mismatch');\n      else hash = pkh;\n    }\n    if (a.input) {\n      const chunks = _chunks();\n      if (chunks.length !== 2) throw new TypeError('Input is invalid');\n      if (!_script_js__WEBPACK_IMPORTED_MODULE_2__.isCanonicalScriptSignature(chunks[0]))\n        throw new TypeError('Input has invalid signature');\n      if (!(0,_types_js__WEBPACK_IMPORTED_MODULE_3__.isPoint)(chunks[1])) throw new TypeError('Input has invalid pubkey');\n      if (a.signature && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(a.signature, chunks[0]) !== 0)\n        throw new TypeError('Signature mismatch');\n      if (a.pubkey && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(a.pubkey, chunks[1]) !== 0)\n        throw new TypeError('Pubkey mismatch');\n      const pkh = _crypto_js__WEBPACK_IMPORTED_MODULE_0__.hash160(chunks[1]);\n      if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(hash, pkh) !== 0)\n        throw new TypeError('Hash mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9wMnBraC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBd0M7QUFDb0I7QUFDcEI7QUFNbkI7QUFDYTtBQUNBO0FBQ1E7QUFDYjtBQUM3QixZQUFZLDJDQUFXO0FBQ3ZCLFdBQVcsWUFBWTtBQUN2Qiw4QkFBOEIsaUJBQWlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNPO0FBQ1A7QUFDQTtBQUNBLHlCQUF5QixnQkFBZ0IsWUFBWTtBQUNyRCxFQUFFLDBDQUFPO0FBQ1QsSUFBSSw0Q0FBUztBQUNiLE1BQU0sMkNBQVE7QUFDZCxpQkFBaUIsMkNBQVEsR0FBRztBQUM1QixpQkFBaUIsMkNBQVE7QUFDekIsY0FBYyx1REFBZ0I7QUFDOUIsZ0JBQWdCLCtEQUFvQjtBQUNwQyxnQkFBZ0IsMkNBQVEsQ0FBQyw4Q0FBTztBQUNoQyxtQkFBbUIsMkNBQVEsQ0FBQyxrRUFBa0M7QUFDOUQsZUFBZSxtREFBWTtBQUMzQixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDJDQUFVO0FBQzdCLG9CQUFvQixpREFBUztBQUM3QixvQkFBb0IsdURBQWU7QUFDbkM7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNILGtCQUFrQiwyQ0FBVTtBQUM1QixXQUFXLGlEQUFpQjtBQUM1QixHQUFHO0FBQ0gsK0JBQStCLGlEQUFlO0FBQzlDLGNBQWM7QUFDZCxFQUFFLDBDQUFTO0FBQ1g7QUFDQTtBQUNBLElBQUksd0RBQWdCO0FBQ3BCO0FBQ0EsV0FBVyxpREFBUztBQUNwQixHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0E7QUFDQSxxQ0FBcUMsK0NBQWU7QUFDcEQsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBLFdBQVcsK0NBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0EsV0FBVywrQ0FBZTtBQUMxQixHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIscURBQWE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixxREFBYTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwrQ0FBZTtBQUNqQyw2QkFBNkIscURBQWE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxrRUFBa0M7QUFDN0M7QUFDQSxXQUFXLGtEQUFPO0FBQ2xCLHlCQUF5QixxREFBYTtBQUN0QztBQUNBLHNCQUFzQixxREFBYTtBQUNuQztBQUNBLGtCQUFrQiwrQ0FBZTtBQUNqQyw2QkFBNkIscURBQWE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2J0Yy9taWRsLXgtYml0Y29pbi1zdW1taXQtaGFja2F0aG9uLTIwMjUvdXR4by1wc2J0LWRlbW8vbm9kZV9tb2R1bGVzLy5wbnBtL2JpdGNvaW5qcy1saWJANy4wLjAtcmMuMF90eXBlc2NyaXB0QDUuOS4yL25vZGVfbW9kdWxlcy9iaXRjb2luanMtbGliL3NyYy9lc20vcGF5bWVudHMvcDJwa2guanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgYmNyeXB0byBmcm9tICcuLi9jcnlwdG8uanMnO1xuaW1wb3J0IHsgYml0Y29pbiBhcyBCSVRDT0lOX05FVFdPUksgfSBmcm9tICcuLi9uZXR3b3Jrcy5qcyc7XG5pbXBvcnQgKiBhcyBic2NyaXB0IGZyb20gJy4uL3NjcmlwdC5qcyc7XG5pbXBvcnQge1xuICBpc1BvaW50LFxuICBIYXNoMTYwYml0U2NoZW1hLFxuICBOQnVmZmVyU2NoZW1hRmFjdG9yeSxcbiAgQnVmZmVyU2NoZW1hLFxufSBmcm9tICcuLi90eXBlcy5qcyc7XG5pbXBvcnQgKiBhcyBsYXp5IGZyb20gJy4vbGF6eS5qcyc7XG5pbXBvcnQgYnM1OGNoZWNrIGZyb20gJ2JzNThjaGVjayc7XG5pbXBvcnQgKiBhcyB0b29scyBmcm9tICd1aW50OGFycmF5LXRvb2xzJztcbmltcG9ydCAqIGFzIHYgZnJvbSAndmFsaWJvdCc7XG5jb25zdCBPUFMgPSBic2NyaXB0Lk9QUztcbi8vIGlucHV0OiB7c2lnbmF0dXJlfSB7cHVia2V5fVxuLy8gb3V0cHV0OiBPUF9EVVAgT1BfSEFTSDE2MCB7aGFzaDE2MChwdWJrZXkpfSBPUF9FUVVBTFZFUklGWSBPUF9DSEVDS1NJR1xuLyoqXG4gKiBDcmVhdGVzIGEgUGF5LXRvLVB1YmxpYy1LZXktSGFzaCAoUDJQS0gpIHBheW1lbnQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBhIC0gVGhlIHBheW1lbnQgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG5lY2Vzc2FyeSBkYXRhLlxuICogQHBhcmFtIG9wdHMgLSBPcHRpb25hbCBwYXltZW50IG9wdGlvbnMuXG4gKiBAcmV0dXJucyBUaGUgUDJQS0ggcGF5bWVudCBvYmplY3QuXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIHRoZSByZXF1aXJlZCBkYXRhIGlzIG5vdCBwcm92aWRlZCBvciBpZiB0aGUgZGF0YSBpcyBpbnZhbGlkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcDJwa2goYSwgb3B0cykge1xuICBpZiAoIWEuYWRkcmVzcyAmJiAhYS5oYXNoICYmICFhLm91dHB1dCAmJiAhYS5wdWJrZXkgJiYgIWEuaW5wdXQpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTm90IGVub3VnaCBkYXRhJyk7XG4gIG9wdHMgPSBPYmplY3QuYXNzaWduKHsgdmFsaWRhdGU6IHRydWUgfSwgb3B0cyB8fCB7fSk7XG4gIHYucGFyc2UoXG4gICAgdi5wYXJ0aWFsKFxuICAgICAgdi5vYmplY3Qoe1xuICAgICAgICBuZXR3b3JrOiB2Lm9iamVjdCh7fSksXG4gICAgICAgIGFkZHJlc3M6IHYuc3RyaW5nKCksXG4gICAgICAgIGhhc2g6IEhhc2gxNjBiaXRTY2hlbWEsXG4gICAgICAgIG91dHB1dDogTkJ1ZmZlclNjaGVtYUZhY3RvcnkoMjUpLFxuICAgICAgICBwdWJrZXk6IHYuY3VzdG9tKGlzUG9pbnQpLFxuICAgICAgICBzaWduYXR1cmU6IHYuY3VzdG9tKGJzY3JpcHQuaXNDYW5vbmljYWxTY3JpcHRTaWduYXR1cmUpLFxuICAgICAgICBpbnB1dDogQnVmZmVyU2NoZW1hLFxuICAgICAgfSksXG4gICAgKSxcbiAgICBhLFxuICApO1xuICBjb25zdCBfYWRkcmVzcyA9IGxhenkudmFsdWUoKCkgPT4ge1xuICAgIGNvbnN0IHBheWxvYWQgPSBiczU4Y2hlY2suZGVjb2RlKGEuYWRkcmVzcyk7XG4gICAgY29uc3QgdmVyc2lvbiA9IHRvb2xzLnJlYWRVSW50OChwYXlsb2FkLCAwKTtcbiAgICBjb25zdCBoYXNoID0gcGF5bG9hZC5zbGljZSgxKTtcbiAgICByZXR1cm4geyB2ZXJzaW9uLCBoYXNoIH07XG4gIH0pO1xuICBjb25zdCBfY2h1bmtzID0gbGF6eS52YWx1ZSgoKSA9PiB7XG4gICAgcmV0dXJuIGJzY3JpcHQuZGVjb21waWxlKGEuaW5wdXQpO1xuICB9KTtcbiAgY29uc3QgbmV0d29yayA9IGEubmV0d29yayB8fCBCSVRDT0lOX05FVFdPUks7XG4gIGNvbnN0IG8gPSB7IG5hbWU6ICdwMnBraCcsIG5ldHdvcmsgfTtcbiAgbGF6eS5wcm9wKG8sICdhZGRyZXNzJywgKCkgPT4ge1xuICAgIGlmICghby5oYXNoKSByZXR1cm47XG4gICAgY29uc3QgcGF5bG9hZCA9IG5ldyBVaW50OEFycmF5KDIxKTtcbiAgICB0b29scy53cml0ZVVJbnQ4KHBheWxvYWQsIDAsIG5ldHdvcmsucHViS2V5SGFzaCk7XG4gICAgcGF5bG9hZC5zZXQoby5oYXNoLCAxKTtcbiAgICByZXR1cm4gYnM1OGNoZWNrLmVuY29kZShwYXlsb2FkKTtcbiAgfSk7XG4gIGxhenkucHJvcChvLCAnaGFzaCcsICgpID0+IHtcbiAgICBpZiAoYS5vdXRwdXQpIHJldHVybiBhLm91dHB1dC5zbGljZSgzLCAyMyk7XG4gICAgaWYgKGEuYWRkcmVzcykgcmV0dXJuIF9hZGRyZXNzKCkuaGFzaDtcbiAgICBpZiAoYS5wdWJrZXkgfHwgby5wdWJrZXkpIHJldHVybiBiY3J5cHRvLmhhc2gxNjAoYS5wdWJrZXkgfHwgby5wdWJrZXkpO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdvdXRwdXQnLCAoKSA9PiB7XG4gICAgaWYgKCFvLmhhc2gpIHJldHVybjtcbiAgICByZXR1cm4gYnNjcmlwdC5jb21waWxlKFtcbiAgICAgIE9QUy5PUF9EVVAsXG4gICAgICBPUFMuT1BfSEFTSDE2MCxcbiAgICAgIG8uaGFzaCxcbiAgICAgIE9QUy5PUF9FUVVBTFZFUklGWSxcbiAgICAgIE9QUy5PUF9DSEVDS1NJRyxcbiAgICBdKTtcbiAgfSk7XG4gIGxhenkucHJvcChvLCAncHVia2V5JywgKCkgPT4ge1xuICAgIGlmICghYS5pbnB1dCkgcmV0dXJuO1xuICAgIHJldHVybiBfY2h1bmtzKClbMV07XG4gIH0pO1xuICBsYXp5LnByb3AobywgJ3NpZ25hdHVyZScsICgpID0+IHtcbiAgICBpZiAoIWEuaW5wdXQpIHJldHVybjtcbiAgICByZXR1cm4gX2NodW5rcygpWzBdO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdpbnB1dCcsICgpID0+IHtcbiAgICBpZiAoIWEucHVia2V5KSByZXR1cm47XG4gICAgaWYgKCFhLnNpZ25hdHVyZSkgcmV0dXJuO1xuICAgIHJldHVybiBic2NyaXB0LmNvbXBpbGUoW2Euc2lnbmF0dXJlLCBhLnB1YmtleV0pO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICd3aXRuZXNzJywgKCkgPT4ge1xuICAgIGlmICghby5pbnB1dCkgcmV0dXJuO1xuICAgIHJldHVybiBbXTtcbiAgfSk7XG4gIC8vIGV4dGVuZGVkIHZhbGlkYXRpb25cbiAgaWYgKG9wdHMudmFsaWRhdGUpIHtcbiAgICBsZXQgaGFzaCA9IFVpbnQ4QXJyYXkuZnJvbShbXSk7XG4gICAgaWYgKGEuYWRkcmVzcykge1xuICAgICAgaWYgKF9hZGRyZXNzKCkudmVyc2lvbiAhPT0gbmV0d29yay5wdWJLZXlIYXNoKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHZlcnNpb24gb3IgTmV0d29yayBtaXNtYXRjaCcpO1xuICAgICAgaWYgKF9hZGRyZXNzKCkuaGFzaC5sZW5ndGggIT09IDIwKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGFkZHJlc3MnKTtcbiAgICAgIGhhc2ggPSBfYWRkcmVzcygpLmhhc2g7XG4gICAgfVxuICAgIGlmIChhLmhhc2gpIHtcbiAgICAgIGlmIChoYXNoLmxlbmd0aCA+IDAgJiYgdG9vbHMuY29tcGFyZShoYXNoLCBhLmhhc2gpICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIYXNoIG1pc21hdGNoJyk7XG4gICAgICBlbHNlIGhhc2ggPSBhLmhhc2g7XG4gICAgfVxuICAgIGlmIChhLm91dHB1dCkge1xuICAgICAgaWYgKFxuICAgICAgICBhLm91dHB1dC5sZW5ndGggIT09IDI1IHx8XG4gICAgICAgIGEub3V0cHV0WzBdICE9PSBPUFMuT1BfRFVQIHx8XG4gICAgICAgIGEub3V0cHV0WzFdICE9PSBPUFMuT1BfSEFTSDE2MCB8fFxuICAgICAgICBhLm91dHB1dFsyXSAhPT0gMHgxNCB8fFxuICAgICAgICBhLm91dHB1dFsyM10gIT09IE9QUy5PUF9FUVVBTFZFUklGWSB8fFxuICAgICAgICBhLm91dHB1dFsyNF0gIT09IE9QUy5PUF9DSEVDS1NJR1xuICAgICAgKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPdXRwdXQgaXMgaW52YWxpZCcpO1xuICAgICAgY29uc3QgaGFzaDIgPSBhLm91dHB1dC5zbGljZSgzLCAyMyk7XG4gICAgICBpZiAoaGFzaC5sZW5ndGggPiAwICYmIHRvb2xzLmNvbXBhcmUoaGFzaCwgaGFzaDIpICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIYXNoIG1pc21hdGNoJyk7XG4gICAgICBlbHNlIGhhc2ggPSBoYXNoMjtcbiAgICB9XG4gICAgaWYgKGEucHVia2V5KSB7XG4gICAgICBjb25zdCBwa2ggPSBiY3J5cHRvLmhhc2gxNjAoYS5wdWJrZXkpO1xuICAgICAgaWYgKGhhc2gubGVuZ3RoID4gMCAmJiB0b29scy5jb21wYXJlKGhhc2gsIHBraCkgIT09IDApXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hhc2ggbWlzbWF0Y2gnKTtcbiAgICAgIGVsc2UgaGFzaCA9IHBraDtcbiAgICB9XG4gICAgaWYgKGEuaW5wdXQpIHtcbiAgICAgIGNvbnN0IGNodW5rcyA9IF9jaHVua3MoKTtcbiAgICAgIGlmIChjaHVua3MubGVuZ3RoICE9PSAyKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnB1dCBpcyBpbnZhbGlkJyk7XG4gICAgICBpZiAoIWJzY3JpcHQuaXNDYW5vbmljYWxTY3JpcHRTaWduYXR1cmUoY2h1bmtzWzBdKSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW5wdXQgaGFzIGludmFsaWQgc2lnbmF0dXJlJyk7XG4gICAgICBpZiAoIWlzUG9pbnQoY2h1bmtzWzFdKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW5wdXQgaGFzIGludmFsaWQgcHVia2V5Jyk7XG4gICAgICBpZiAoYS5zaWduYXR1cmUgJiYgdG9vbHMuY29tcGFyZShhLnNpZ25hdHVyZSwgY2h1bmtzWzBdKSAhPT0gMClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignU2lnbmF0dXJlIG1pc21hdGNoJyk7XG4gICAgICBpZiAoYS5wdWJrZXkgJiYgdG9vbHMuY29tcGFyZShhLnB1YmtleSwgY2h1bmtzWzFdKSAhPT0gMClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHVia2V5IG1pc21hdGNoJyk7XG4gICAgICBjb25zdCBwa2ggPSBiY3J5cHRvLmhhc2gxNjAoY2h1bmtzWzFdKTtcbiAgICAgIGlmIChoYXNoLmxlbmd0aCA+IDAgJiYgdG9vbHMuY29tcGFyZShoYXNoLCBwa2gpICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIYXNoIG1pc21hdGNoJyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBPYmplY3QuYXNzaWduKG8sIGEpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2pkh.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2sh.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2sh.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   p2sh: () => (/* binding */ p2sh)\n/* harmony export */ });\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../crypto.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/crypto.js\");\n/* harmony import */ var _networks_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../networks.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var _lazy_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lazy.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/lazy.js\");\n/* harmony import */ var bs58check__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bs58check */ \"(ssr)/./node_modules/.pnpm/bs58check@4.0.0/node_modules/bs58check/src/esm/index.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n\n\n\n\n\n\n\n\nconst OPS = _script_js__WEBPACK_IMPORTED_MODULE_2__.OPS;\n// input: [redeemScriptSig ...] {redeemScript}\n// witness: <?>\n// output: OP_HASH160 {hash160(redeemScript)} OP_EQUAL\n/**\n * Creates a Pay-to-Script-Hash (P2SH) payment object.\n *\n * @param a - The payment object containing the necessary data.\n * @param opts - Optional payment options.\n * @returns The P2SH payment object.\n * @throws {TypeError} If the required data is not provided or if the data is invalid.\n */\nfunction p2sh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  valibot__WEBPACK_IMPORTED_MODULE_7__.parse(\n    valibot__WEBPACK_IMPORTED_MODULE_7__.partial(\n      valibot__WEBPACK_IMPORTED_MODULE_7__.object({\n        network: valibot__WEBPACK_IMPORTED_MODULE_7__.object({}),\n        address: valibot__WEBPACK_IMPORTED_MODULE_7__.string(),\n        hash: (0,_types_js__WEBPACK_IMPORTED_MODULE_3__.NBufferSchemaFactory)(20),\n        output: (0,_types_js__WEBPACK_IMPORTED_MODULE_3__.NBufferSchemaFactory)(23),\n        redeem: valibot__WEBPACK_IMPORTED_MODULE_7__.partial(\n          valibot__WEBPACK_IMPORTED_MODULE_7__.object({\n            network: valibot__WEBPACK_IMPORTED_MODULE_7__.object({}),\n            output: _types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema,\n            input: _types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema,\n            witness: valibot__WEBPACK_IMPORTED_MODULE_7__.array(_types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema),\n          }),\n        ),\n        input: _types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema,\n        witness: valibot__WEBPACK_IMPORTED_MODULE_7__.array(_types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema),\n      }),\n    ),\n    a,\n  );\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || _networks_js__WEBPACK_IMPORTED_MODULE_1__.bitcoin;\n  }\n  const o = { network };\n  const _address = _lazy_js__WEBPACK_IMPORTED_MODULE_4__.value(() => {\n    const payload = bs58check__WEBPACK_IMPORTED_MODULE_5__[\"default\"].decode(a.address);\n    const version = uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.readUInt8(payload, 0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = _lazy_js__WEBPACK_IMPORTED_MODULE_4__.value(() => {\n    return _script_js__WEBPACK_IMPORTED_MODULE_2__.decompile(a.input);\n  });\n  const _redeem = _lazy_js__WEBPACK_IMPORTED_MODULE_4__.value(() => {\n    const chunks = _chunks();\n    const lastChunk = chunks[chunks.length - 1];\n    return {\n      network,\n      output: lastChunk === OPS.OP_FALSE ? Uint8Array.from([]) : lastChunk,\n      input: _script_js__WEBPACK_IMPORTED_MODULE_2__.compile(chunks.slice(0, -1)),\n      witness: a.witness || [],\n    };\n  });\n  // output dependents\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = new Uint8Array(21);\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.writeUInt8(payload, 0, o.network.scriptHash);\n    payload.set(o.hash, 1);\n    return bs58check__WEBPACK_IMPORTED_MODULE_5__[\"default\"].encode(payload);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'hash', () => {\n    // in order of least effort\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().hash;\n    if (o.redeem && o.redeem.output) return _crypto_js__WEBPACK_IMPORTED_MODULE_0__.hash160(o.redeem.output);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_2__.compile([OPS.OP_HASH160, o.hash, OPS.OP_EQUAL]);\n  });\n  // input dependents\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'redeem', () => {\n    if (!a.input) return;\n    return _redeem();\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'input', () => {\n    if (!a.redeem || !a.redeem.input || !a.redeem.output) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_2__.compile(\n      [].concat(_script_js__WEBPACK_IMPORTED_MODULE_2__.decompile(a.redeem.input), a.redeem.output),\n    );\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'witness', () => {\n    if (o.redeem && o.redeem.witness) return o.redeem.witness;\n    if (o.input) return [];\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'name', () => {\n    const nameParts = ['p2sh'];\n    if (o.redeem !== undefined && o.redeem.name !== undefined)\n      nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  if (opts.validate) {\n    let hash = Uint8Array.from([]);\n    if (a.address) {\n      if (_address().version !== network.scriptHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(hash, a.hash) !== 0)\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 23 ||\n        a.output[0] !== OPS.OP_HASH160 ||\n        a.output[1] !== 0x14 ||\n        a.output[22] !== OPS.OP_EQUAL\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2, 22);\n      if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(hash, hash2) !== 0)\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    // inlined to prevent 'no-inner-declarations' failing\n    const checkRedeem = redeem => {\n      // is the redeem output empty/invalid?\n      if (redeem.output) {\n        const decompile = _script_js__WEBPACK_IMPORTED_MODULE_2__.decompile(redeem.output);\n        if (!decompile || decompile.length < 1)\n          throw new TypeError('Redeem.output too short');\n        if (redeem.output.byteLength > 520)\n          throw new TypeError(\n            'Redeem.output unspendable if larger than 520 bytes',\n          );\n        if (_script_js__WEBPACK_IMPORTED_MODULE_2__.countNonPushOnlyOPs(decompile) > 201)\n          throw new TypeError(\n            'Redeem.output unspendable with more than 201 non-push ops',\n          );\n        // match hash against other sources\n        const hash2 = _crypto_js__WEBPACK_IMPORTED_MODULE_0__.hash160(redeem.output);\n        if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(hash, hash2) !== 0)\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (redeem.input) {\n        const hasInput = redeem.input.length > 0;\n        const hasWitness = redeem.witness && redeem.witness.length > 0;\n        if (!hasInput && !hasWitness) throw new TypeError('Empty input');\n        if (hasInput && hasWitness)\n          throw new TypeError('Input and witness provided');\n        if (hasInput) {\n          const richunks = _script_js__WEBPACK_IMPORTED_MODULE_2__.decompile(redeem.input);\n          if (!_script_js__WEBPACK_IMPORTED_MODULE_2__.isPushOnly(richunks))\n            throw new TypeError('Non push-only scriptSig');\n        }\n      }\n    };\n    if (a.input) {\n      const chunks = _chunks();\n      if (!chunks || chunks.length < 1) throw new TypeError('Input too short');\n      if (!(_redeem().output instanceof Uint8Array))\n        throw new TypeError('Input is invalid');\n      checkRedeem(_redeem());\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      if (a.input) {\n        const redeem = _redeem();\n        if (\n          a.redeem.output &&\n          uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(a.redeem.output, redeem.output) !== 0\n        )\n          throw new TypeError('Redeem.output mismatch');\n        if (a.redeem.input && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(a.redeem.input, redeem.input) !== 0)\n          throw new TypeError('Redeem.input mismatch');\n      }\n      checkRedeem(a.redeem);\n    }\n    if (a.witness) {\n      if (\n        a.redeem &&\n        a.redeem.witness &&\n        !(0,_types_js__WEBPACK_IMPORTED_MODULE_3__.stacksEqual)(a.redeem.witness, a.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9wMnNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUF3QztBQUNvQjtBQUNwQjtBQUNzQztBQUM1QztBQUNBO0FBQ1E7QUFDYjtBQUM3QixZQUFZLDJDQUFXO0FBQ3ZCLGlDQUFpQztBQUNqQztBQUNBLHVCQUF1Qix1QkFBdUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ087QUFDUDtBQUNBO0FBQ0EseUJBQXlCLGdCQUFnQixZQUFZO0FBQ3JELEVBQUUsMENBQU87QUFDVCxJQUFJLDRDQUFTO0FBQ2IsTUFBTSwyQ0FBUTtBQUNkLGlCQUFpQiwyQ0FBUSxHQUFHO0FBQzVCLGlCQUFpQiwyQ0FBUTtBQUN6QixjQUFjLCtEQUFvQjtBQUNsQyxnQkFBZ0IsK0RBQW9CO0FBQ3BDLGdCQUFnQiw0Q0FBUztBQUN6QixVQUFVLDJDQUFRO0FBQ2xCLHFCQUFxQiwyQ0FBUSxHQUFHO0FBQ2hDLG9CQUFvQixtREFBWTtBQUNoQyxtQkFBbUIsbURBQVk7QUFDL0IscUJBQXFCLDBDQUFPLENBQUMsbURBQVk7QUFDekMsV0FBVztBQUNYO0FBQ0EsZUFBZSxtREFBWTtBQUMzQixpQkFBaUIsMENBQU8sQ0FBQyxtREFBWTtBQUNyQyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxpREFBZTtBQUMvRDtBQUNBLGNBQWM7QUFDZCxtQkFBbUIsMkNBQVU7QUFDN0Isb0JBQW9CLGlEQUFTO0FBQzdCLG9CQUFvQix1REFBZTtBQUNuQztBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0gsa0JBQWtCLDJDQUFVO0FBQzVCLFdBQVcsaURBQWlCO0FBQzVCLEdBQUc7QUFDSCxrQkFBa0IsMkNBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsK0NBQWU7QUFDNUI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0EsSUFBSSx3REFBZ0I7QUFDcEI7QUFDQSxXQUFXLGlEQUFTO0FBQ3BCLEdBQUc7QUFDSCxFQUFFLDBDQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLCtDQUFlO0FBQzNELEdBQUc7QUFDSCxFQUFFLDBDQUFTO0FBQ1g7QUFDQSxXQUFXLCtDQUFlO0FBQzFCLEdBQUc7QUFDSDtBQUNBLEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBLFdBQVcsK0NBQWU7QUFDMUIsZ0JBQWdCLGlEQUFpQjtBQUNqQztBQUNBLEdBQUc7QUFDSCxFQUFFLDBDQUFTO0FBQ1g7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLDBDQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHFEQUFhO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixxREFBYTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixpREFBaUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwyREFBMkI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsK0NBQWU7QUFDckMsK0JBQStCLHFEQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlEQUFpQjtBQUM1QyxlQUFlLGtEQUFrQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFEQUFhO0FBQ3ZCO0FBQ0E7QUFDQSw4QkFBOEIscURBQWE7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsc0RBQVc7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvYnRjL21pZGwteC1iaXRjb2luLXN1bW1pdC1oYWNrYXRob24tMjAyNS91dHhvLXBzYnQtZGVtby9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9wMnNoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGJjcnlwdG8gZnJvbSAnLi4vY3J5cHRvLmpzJztcbmltcG9ydCB7IGJpdGNvaW4gYXMgQklUQ09JTl9ORVRXT1JLIH0gZnJvbSAnLi4vbmV0d29ya3MuanMnO1xuaW1wb3J0ICogYXMgYnNjcmlwdCBmcm9tICcuLi9zY3JpcHQuanMnO1xuaW1wb3J0IHsgQnVmZmVyU2NoZW1hLCBOQnVmZmVyU2NoZW1hRmFjdG9yeSwgc3RhY2tzRXF1YWwgfSBmcm9tICcuLi90eXBlcy5qcyc7XG5pbXBvcnQgKiBhcyBsYXp5IGZyb20gJy4vbGF6eS5qcyc7XG5pbXBvcnQgYnM1OGNoZWNrIGZyb20gJ2JzNThjaGVjayc7XG5pbXBvcnQgKiBhcyB0b29scyBmcm9tICd1aW50OGFycmF5LXRvb2xzJztcbmltcG9ydCAqIGFzIHYgZnJvbSAndmFsaWJvdCc7XG5jb25zdCBPUFMgPSBic2NyaXB0Lk9QUztcbi8vIGlucHV0OiBbcmVkZWVtU2NyaXB0U2lnIC4uLl0ge3JlZGVlbVNjcmlwdH1cbi8vIHdpdG5lc3M6IDw/PlxuLy8gb3V0cHV0OiBPUF9IQVNIMTYwIHtoYXNoMTYwKHJlZGVlbVNjcmlwdCl9IE9QX0VRVUFMXG4vKipcbiAqIENyZWF0ZXMgYSBQYXktdG8tU2NyaXB0LUhhc2ggKFAyU0gpIHBheW1lbnQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBhIC0gVGhlIHBheW1lbnQgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG5lY2Vzc2FyeSBkYXRhLlxuICogQHBhcmFtIG9wdHMgLSBPcHRpb25hbCBwYXltZW50IG9wdGlvbnMuXG4gKiBAcmV0dXJucyBUaGUgUDJTSCBwYXltZW50IG9iamVjdC5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgdGhlIHJlcXVpcmVkIGRhdGEgaXMgbm90IHByb3ZpZGVkIG9yIGlmIHRoZSBkYXRhIGlzIGludmFsaWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwMnNoKGEsIG9wdHMpIHtcbiAgaWYgKCFhLmFkZHJlc3MgJiYgIWEuaGFzaCAmJiAhYS5vdXRwdXQgJiYgIWEucmVkZWVtICYmICFhLmlucHV0KVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBlbm91Z2ggZGF0YScpO1xuICBvcHRzID0gT2JqZWN0LmFzc2lnbih7IHZhbGlkYXRlOiB0cnVlIH0sIG9wdHMgfHwge30pO1xuICB2LnBhcnNlKFxuICAgIHYucGFydGlhbChcbiAgICAgIHYub2JqZWN0KHtcbiAgICAgICAgbmV0d29yazogdi5vYmplY3Qoe30pLFxuICAgICAgICBhZGRyZXNzOiB2LnN0cmluZygpLFxuICAgICAgICBoYXNoOiBOQnVmZmVyU2NoZW1hRmFjdG9yeSgyMCksXG4gICAgICAgIG91dHB1dDogTkJ1ZmZlclNjaGVtYUZhY3RvcnkoMjMpLFxuICAgICAgICByZWRlZW06IHYucGFydGlhbChcbiAgICAgICAgICB2Lm9iamVjdCh7XG4gICAgICAgICAgICBuZXR3b3JrOiB2Lm9iamVjdCh7fSksXG4gICAgICAgICAgICBvdXRwdXQ6IEJ1ZmZlclNjaGVtYSxcbiAgICAgICAgICAgIGlucHV0OiBCdWZmZXJTY2hlbWEsXG4gICAgICAgICAgICB3aXRuZXNzOiB2LmFycmF5KEJ1ZmZlclNjaGVtYSksXG4gICAgICAgICAgfSksXG4gICAgICAgICksXG4gICAgICAgIGlucHV0OiBCdWZmZXJTY2hlbWEsXG4gICAgICAgIHdpdG5lc3M6IHYuYXJyYXkoQnVmZmVyU2NoZW1hKSxcbiAgICAgIH0pLFxuICAgICksXG4gICAgYSxcbiAgKTtcbiAgbGV0IG5ldHdvcmsgPSBhLm5ldHdvcms7XG4gIGlmICghbmV0d29yaykge1xuICAgIG5ldHdvcmsgPSAoYS5yZWRlZW0gJiYgYS5yZWRlZW0ubmV0d29yaykgfHwgQklUQ09JTl9ORVRXT1JLO1xuICB9XG4gIGNvbnN0IG8gPSB7IG5ldHdvcmsgfTtcbiAgY29uc3QgX2FkZHJlc3MgPSBsYXp5LnZhbHVlKCgpID0+IHtcbiAgICBjb25zdCBwYXlsb2FkID0gYnM1OGNoZWNrLmRlY29kZShhLmFkZHJlc3MpO1xuICAgIGNvbnN0IHZlcnNpb24gPSB0b29scy5yZWFkVUludDgocGF5bG9hZCwgMCk7XG4gICAgY29uc3QgaGFzaCA9IHBheWxvYWQuc2xpY2UoMSk7XG4gICAgcmV0dXJuIHsgdmVyc2lvbiwgaGFzaCB9O1xuICB9KTtcbiAgY29uc3QgX2NodW5rcyA9IGxhenkudmFsdWUoKCkgPT4ge1xuICAgIHJldHVybiBic2NyaXB0LmRlY29tcGlsZShhLmlucHV0KTtcbiAgfSk7XG4gIGNvbnN0IF9yZWRlZW0gPSBsYXp5LnZhbHVlKCgpID0+IHtcbiAgICBjb25zdCBjaHVua3MgPSBfY2h1bmtzKCk7XG4gICAgY29uc3QgbGFzdENodW5rID0gY2h1bmtzW2NodW5rcy5sZW5ndGggLSAxXTtcbiAgICByZXR1cm4ge1xuICAgICAgbmV0d29yayxcbiAgICAgIG91dHB1dDogbGFzdENodW5rID09PSBPUFMuT1BfRkFMU0UgPyBVaW50OEFycmF5LmZyb20oW10pIDogbGFzdENodW5rLFxuICAgICAgaW5wdXQ6IGJzY3JpcHQuY29tcGlsZShjaHVua3Muc2xpY2UoMCwgLTEpKSxcbiAgICAgIHdpdG5lc3M6IGEud2l0bmVzcyB8fCBbXSxcbiAgICB9O1xuICB9KTtcbiAgLy8gb3V0cHV0IGRlcGVuZGVudHNcbiAgbGF6eS5wcm9wKG8sICdhZGRyZXNzJywgKCkgPT4ge1xuICAgIGlmICghby5oYXNoKSByZXR1cm47XG4gICAgY29uc3QgcGF5bG9hZCA9IG5ldyBVaW50OEFycmF5KDIxKTtcbiAgICB0b29scy53cml0ZVVJbnQ4KHBheWxvYWQsIDAsIG8ubmV0d29yay5zY3JpcHRIYXNoKTtcbiAgICBwYXlsb2FkLnNldChvLmhhc2gsIDEpO1xuICAgIHJldHVybiBiczU4Y2hlY2suZW5jb2RlKHBheWxvYWQpO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdoYXNoJywgKCkgPT4ge1xuICAgIC8vIGluIG9yZGVyIG9mIGxlYXN0IGVmZm9ydFxuICAgIGlmIChhLm91dHB1dCkgcmV0dXJuIGEub3V0cHV0LnNsaWNlKDIsIDIyKTtcbiAgICBpZiAoYS5hZGRyZXNzKSByZXR1cm4gX2FkZHJlc3MoKS5oYXNoO1xuICAgIGlmIChvLnJlZGVlbSAmJiBvLnJlZGVlbS5vdXRwdXQpIHJldHVybiBiY3J5cHRvLmhhc2gxNjAoby5yZWRlZW0ub3V0cHV0KTtcbiAgfSk7XG4gIGxhenkucHJvcChvLCAnb3V0cHV0JywgKCkgPT4ge1xuICAgIGlmICghby5oYXNoKSByZXR1cm47XG4gICAgcmV0dXJuIGJzY3JpcHQuY29tcGlsZShbT1BTLk9QX0hBU0gxNjAsIG8uaGFzaCwgT1BTLk9QX0VRVUFMXSk7XG4gIH0pO1xuICAvLyBpbnB1dCBkZXBlbmRlbnRzXG4gIGxhenkucHJvcChvLCAncmVkZWVtJywgKCkgPT4ge1xuICAgIGlmICghYS5pbnB1dCkgcmV0dXJuO1xuICAgIHJldHVybiBfcmVkZWVtKCk7XG4gIH0pO1xuICBsYXp5LnByb3AobywgJ2lucHV0JywgKCkgPT4ge1xuICAgIGlmICghYS5yZWRlZW0gfHwgIWEucmVkZWVtLmlucHV0IHx8ICFhLnJlZGVlbS5vdXRwdXQpIHJldHVybjtcbiAgICByZXR1cm4gYnNjcmlwdC5jb21waWxlKFxuICAgICAgW10uY29uY2F0KGJzY3JpcHQuZGVjb21waWxlKGEucmVkZWVtLmlucHV0KSwgYS5yZWRlZW0ub3V0cHV0KSxcbiAgICApO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICd3aXRuZXNzJywgKCkgPT4ge1xuICAgIGlmIChvLnJlZGVlbSAmJiBvLnJlZGVlbS53aXRuZXNzKSByZXR1cm4gby5yZWRlZW0ud2l0bmVzcztcbiAgICBpZiAoby5pbnB1dCkgcmV0dXJuIFtdO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICduYW1lJywgKCkgPT4ge1xuICAgIGNvbnN0IG5hbWVQYXJ0cyA9IFsncDJzaCddO1xuICAgIGlmIChvLnJlZGVlbSAhPT0gdW5kZWZpbmVkICYmIG8ucmVkZWVtLm5hbWUgIT09IHVuZGVmaW5lZClcbiAgICAgIG5hbWVQYXJ0cy5wdXNoKG8ucmVkZWVtLm5hbWUpO1xuICAgIHJldHVybiBuYW1lUGFydHMuam9pbignLScpO1xuICB9KTtcbiAgaWYgKG9wdHMudmFsaWRhdGUpIHtcbiAgICBsZXQgaGFzaCA9IFVpbnQ4QXJyYXkuZnJvbShbXSk7XG4gICAgaWYgKGEuYWRkcmVzcykge1xuICAgICAgaWYgKF9hZGRyZXNzKCkudmVyc2lvbiAhPT0gbmV0d29yay5zY3JpcHRIYXNoKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHZlcnNpb24gb3IgTmV0d29yayBtaXNtYXRjaCcpO1xuICAgICAgaWYgKF9hZGRyZXNzKCkuaGFzaC5sZW5ndGggIT09IDIwKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGFkZHJlc3MnKTtcbiAgICAgIGhhc2ggPSBfYWRkcmVzcygpLmhhc2g7XG4gICAgfVxuICAgIGlmIChhLmhhc2gpIHtcbiAgICAgIGlmIChoYXNoLmxlbmd0aCA+IDAgJiYgdG9vbHMuY29tcGFyZShoYXNoLCBhLmhhc2gpICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIYXNoIG1pc21hdGNoJyk7XG4gICAgICBlbHNlIGhhc2ggPSBhLmhhc2g7XG4gICAgfVxuICAgIGlmIChhLm91dHB1dCkge1xuICAgICAgaWYgKFxuICAgICAgICBhLm91dHB1dC5sZW5ndGggIT09IDIzIHx8XG4gICAgICAgIGEub3V0cHV0WzBdICE9PSBPUFMuT1BfSEFTSDE2MCB8fFxuICAgICAgICBhLm91dHB1dFsxXSAhPT0gMHgxNCB8fFxuICAgICAgICBhLm91dHB1dFsyMl0gIT09IE9QUy5PUF9FUVVBTFxuICAgICAgKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPdXRwdXQgaXMgaW52YWxpZCcpO1xuICAgICAgY29uc3QgaGFzaDIgPSBhLm91dHB1dC5zbGljZSgyLCAyMik7XG4gICAgICBpZiAoaGFzaC5sZW5ndGggPiAwICYmIHRvb2xzLmNvbXBhcmUoaGFzaCwgaGFzaDIpICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIYXNoIG1pc21hdGNoJyk7XG4gICAgICBlbHNlIGhhc2ggPSBoYXNoMjtcbiAgICB9XG4gICAgLy8gaW5saW5lZCB0byBwcmV2ZW50ICduby1pbm5lci1kZWNsYXJhdGlvbnMnIGZhaWxpbmdcbiAgICBjb25zdCBjaGVja1JlZGVlbSA9IHJlZGVlbSA9PiB7XG4gICAgICAvLyBpcyB0aGUgcmVkZWVtIG91dHB1dCBlbXB0eS9pbnZhbGlkP1xuICAgICAgaWYgKHJlZGVlbS5vdXRwdXQpIHtcbiAgICAgICAgY29uc3QgZGVjb21waWxlID0gYnNjcmlwdC5kZWNvbXBpbGUocmVkZWVtLm91dHB1dCk7XG4gICAgICAgIGlmICghZGVjb21waWxlIHx8IGRlY29tcGlsZS5sZW5ndGggPCAxKVxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1JlZGVlbS5vdXRwdXQgdG9vIHNob3J0Jyk7XG4gICAgICAgIGlmIChyZWRlZW0ub3V0cHV0LmJ5dGVMZW5ndGggPiA1MjApXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICdSZWRlZW0ub3V0cHV0IHVuc3BlbmRhYmxlIGlmIGxhcmdlciB0aGFuIDUyMCBieXRlcycsXG4gICAgICAgICAgKTtcbiAgICAgICAgaWYgKGJzY3JpcHQuY291bnROb25QdXNoT25seU9QcyhkZWNvbXBpbGUpID4gMjAxKVxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAnUmVkZWVtLm91dHB1dCB1bnNwZW5kYWJsZSB3aXRoIG1vcmUgdGhhbiAyMDEgbm9uLXB1c2ggb3BzJyxcbiAgICAgICAgICApO1xuICAgICAgICAvLyBtYXRjaCBoYXNoIGFnYWluc3Qgb3RoZXIgc291cmNlc1xuICAgICAgICBjb25zdCBoYXNoMiA9IGJjcnlwdG8uaGFzaDE2MChyZWRlZW0ub3V0cHV0KTtcbiAgICAgICAgaWYgKGhhc2gubGVuZ3RoID4gMCAmJiB0b29scy5jb21wYXJlKGhhc2gsIGhhc2gyKSAhPT0gMClcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIYXNoIG1pc21hdGNoJyk7XG4gICAgICAgIGVsc2UgaGFzaCA9IGhhc2gyO1xuICAgICAgfVxuICAgICAgaWYgKHJlZGVlbS5pbnB1dCkge1xuICAgICAgICBjb25zdCBoYXNJbnB1dCA9IHJlZGVlbS5pbnB1dC5sZW5ndGggPiAwO1xuICAgICAgICBjb25zdCBoYXNXaXRuZXNzID0gcmVkZWVtLndpdG5lc3MgJiYgcmVkZWVtLndpdG5lc3MubGVuZ3RoID4gMDtcbiAgICAgICAgaWYgKCFoYXNJbnB1dCAmJiAhaGFzV2l0bmVzcykgdGhyb3cgbmV3IFR5cGVFcnJvcignRW1wdHkgaW5wdXQnKTtcbiAgICAgICAgaWYgKGhhc0lucHV0ICYmIGhhc1dpdG5lc3MpXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW5wdXQgYW5kIHdpdG5lc3MgcHJvdmlkZWQnKTtcbiAgICAgICAgaWYgKGhhc0lucHV0KSB7XG4gICAgICAgICAgY29uc3QgcmljaHVua3MgPSBic2NyaXB0LmRlY29tcGlsZShyZWRlZW0uaW5wdXQpO1xuICAgICAgICAgIGlmICghYnNjcmlwdC5pc1B1c2hPbmx5KHJpY2h1bmtzKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vbiBwdXNoLW9ubHkgc2NyaXB0U2lnJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChhLmlucHV0KSB7XG4gICAgICBjb25zdCBjaHVua3MgPSBfY2h1bmtzKCk7XG4gICAgICBpZiAoIWNodW5rcyB8fCBjaHVua3MubGVuZ3RoIDwgMSkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW5wdXQgdG9vIHNob3J0Jyk7XG4gICAgICBpZiAoIShfcmVkZWVtKCkub3V0cHV0IGluc3RhbmNlb2YgVWludDhBcnJheSkpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0lucHV0IGlzIGludmFsaWQnKTtcbiAgICAgIGNoZWNrUmVkZWVtKF9yZWRlZW0oKSk7XG4gICAgfVxuICAgIGlmIChhLnJlZGVlbSkge1xuICAgICAgaWYgKGEucmVkZWVtLm5ldHdvcmsgJiYgYS5yZWRlZW0ubmV0d29yayAhPT0gbmV0d29yaylcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTmV0d29yayBtaXNtYXRjaCcpO1xuICAgICAgaWYgKGEuaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVkZWVtID0gX3JlZGVlbSgpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgYS5yZWRlZW0ub3V0cHV0ICYmXG4gICAgICAgICAgdG9vbHMuY29tcGFyZShhLnJlZGVlbS5vdXRwdXQsIHJlZGVlbS5vdXRwdXQpICE9PSAwXG4gICAgICAgIClcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdSZWRlZW0ub3V0cHV0IG1pc21hdGNoJyk7XG4gICAgICAgIGlmIChhLnJlZGVlbS5pbnB1dCAmJiB0b29scy5jb21wYXJlKGEucmVkZWVtLmlucHV0LCByZWRlZW0uaW5wdXQpICE9PSAwKVxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1JlZGVlbS5pbnB1dCBtaXNtYXRjaCcpO1xuICAgICAgfVxuICAgICAgY2hlY2tSZWRlZW0oYS5yZWRlZW0pO1xuICAgIH1cbiAgICBpZiAoYS53aXRuZXNzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGEucmVkZWVtICYmXG4gICAgICAgIGEucmVkZWVtLndpdG5lc3MgJiZcbiAgICAgICAgIXN0YWNrc0VxdWFsKGEucmVkZWVtLndpdG5lc3MsIGEud2l0bmVzcylcbiAgICAgIClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignV2l0bmVzcyBhbmQgcmVkZWVtLndpdG5lc3MgbWlzbWF0Y2gnKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24obywgYSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2sh.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2tr.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2tr.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   p2tr: () => (/* binding */ p2tr)\n/* harmony export */ });\n/* harmony import */ var _networks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../networks.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var _ecc_lib_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ecc_lib.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/ecc_lib.js\");\n/* harmony import */ var _bip341_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./bip341.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/bip341.js\");\n/* harmony import */ var _lazy_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lazy.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/lazy.js\");\n/* harmony import */ var bech32__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! bech32 */ \"(ssr)/./node_modules/.pnpm/bech32@2.0.0/node_modules/bech32/dist/index.js\");\n/* harmony import */ var _address_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../address.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/address.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\nconst OPS = _script_js__WEBPACK_IMPORTED_MODULE_1__.OPS;\nconst TAPROOT_WITNESS_VERSION = 0x01;\nconst ANNEX_PREFIX = 0x50;\n/**\n * Creates a Pay-to-Taproot (P2TR) payment object.\n *\n * @param a - The payment object containing the necessary data for P2TR.\n * @param opts - Optional payment options.\n * @returns The P2TR payment object.\n * @throws {TypeError} If the provided data is invalid or insufficient.\n */\nfunction p2tr(a, opts) {\n  if (\n    !a.address &&\n    !a.output &&\n    !a.pubkey &&\n    !a.internalPubkey &&\n    !(a.witness && a.witness.length > 1)\n  )\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  valibot__WEBPACK_IMPORTED_MODULE_9__.parse(\n    valibot__WEBPACK_IMPORTED_MODULE_9__.partial(\n      valibot__WEBPACK_IMPORTED_MODULE_9__.object({\n        address: valibot__WEBPACK_IMPORTED_MODULE_9__.string(),\n        input: (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.NBufferSchemaFactory)(0),\n        network: valibot__WEBPACK_IMPORTED_MODULE_9__.object({}),\n        output: (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.NBufferSchemaFactory)(34),\n        internalPubkey: (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.NBufferSchemaFactory)(32),\n        hash: (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.NBufferSchemaFactory)(32), // merkle root hash, the tweak\n        pubkey: (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.NBufferSchemaFactory)(32), // tweaked with `hash` from `internalPubkey`\n        signature: valibot__WEBPACK_IMPORTED_MODULE_9__.union([\n          (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.NBufferSchemaFactory)(64),\n          (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.NBufferSchemaFactory)(65),\n        ]),\n        witness: valibot__WEBPACK_IMPORTED_MODULE_9__.array(_types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema),\n        scriptTree: valibot__WEBPACK_IMPORTED_MODULE_9__.custom(_types_js__WEBPACK_IMPORTED_MODULE_2__.isTaptree, 'Taptree is not of type isTaptree'),\n        redeem: valibot__WEBPACK_IMPORTED_MODULE_9__.partial(\n          valibot__WEBPACK_IMPORTED_MODULE_9__.object({\n            output: _types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema, // tapleaf script\n            redeemVersion: valibot__WEBPACK_IMPORTED_MODULE_9__.number(), // tapleaf version\n            witness: valibot__WEBPACK_IMPORTED_MODULE_9__.array(_types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema),\n          }),\n        ),\n        redeemVersion: valibot__WEBPACK_IMPORTED_MODULE_9__.number(),\n      }),\n    ),\n    a,\n  );\n  const _address = _lazy_js__WEBPACK_IMPORTED_MODULE_5__.value(() => {\n    return (0,_address_js__WEBPACK_IMPORTED_MODULE_7__.fromBech32)(a.address);\n  });\n  // remove annex if present, ignored by taproot\n  const _witness = _lazy_js__WEBPACK_IMPORTED_MODULE_5__.value(() => {\n    if (!a.witness || !a.witness.length) return;\n    if (\n      a.witness.length >= 2 &&\n      a.witness[a.witness.length - 1][0] === ANNEX_PREFIX\n    ) {\n      return a.witness.slice(0, -1);\n    }\n    return a.witness.slice();\n  });\n  const _hashTree = _lazy_js__WEBPACK_IMPORTED_MODULE_5__.value(() => {\n    if (a.scriptTree) return (0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.toHashTree)(a.scriptTree);\n    if (a.hash) return { hash: a.hash };\n    return;\n  });\n  const network = a.network || _networks_js__WEBPACK_IMPORTED_MODULE_0__.bitcoin;\n  const o = { name: 'p2tr', network };\n  _lazy_js__WEBPACK_IMPORTED_MODULE_5__.prop(o, 'address', () => {\n    if (!o.pubkey) return;\n    const words = bech32__WEBPACK_IMPORTED_MODULE_6__.bech32m.toWords(o.pubkey);\n    words.unshift(TAPROOT_WITNESS_VERSION);\n    return bech32__WEBPACK_IMPORTED_MODULE_6__.bech32m.encode(network.bech32, words);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_5__.prop(o, 'hash', () => {\n    const hashTree = _hashTree();\n    if (hashTree) return hashTree.hash;\n    const w = _witness();\n    if (w && w.length > 1) {\n      const controlBlock = w[w.length - 1];\n      const leafVersion = controlBlock[0] & _types_js__WEBPACK_IMPORTED_MODULE_2__.TAPLEAF_VERSION_MASK;\n      const script = w[w.length - 2];\n      const leafHash = (0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.tapleafHash)({ output: script, version: leafVersion });\n      return (0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.rootHashFromPath)(controlBlock, leafHash);\n    }\n    return null;\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_5__.prop(o, 'output', () => {\n    if (!o.pubkey) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_1__.compile([OPS.OP_1, o.pubkey]);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_5__.prop(o, 'redeemVersion', () => {\n    if (a.redeemVersion) return a.redeemVersion;\n    if (\n      a.redeem &&\n      a.redeem.redeemVersion !== undefined &&\n      a.redeem.redeemVersion !== null\n    ) {\n      return a.redeem.redeemVersion;\n    }\n    return _bip341_js__WEBPACK_IMPORTED_MODULE_4__.LEAF_VERSION_TAPSCRIPT;\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_5__.prop(o, 'redeem', () => {\n    const witness = _witness(); // witness without annex\n    if (!witness || witness.length < 2) return;\n    return {\n      output: witness[witness.length - 2],\n      witness: witness.slice(0, -2),\n      redeemVersion: witness[witness.length - 1][0] & _types_js__WEBPACK_IMPORTED_MODULE_2__.TAPLEAF_VERSION_MASK,\n    };\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_5__.prop(o, 'pubkey', () => {\n    if (a.pubkey) return a.pubkey;\n    if (a.output) return a.output.slice(2);\n    if (a.address) return _address().data;\n    if (o.internalPubkey) {\n      const tweakedKey = (0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.tweakKey)(o.internalPubkey, o.hash);\n      if (tweakedKey) return tweakedKey.x;\n    }\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_5__.prop(o, 'internalPubkey', () => {\n    if (a.internalPubkey) return a.internalPubkey;\n    const witness = _witness();\n    if (witness && witness.length > 1)\n      return witness[witness.length - 1].slice(1, 33);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_5__.prop(o, 'signature', () => {\n    if (a.signature) return a.signature;\n    const witness = _witness(); // witness without annex\n    if (!witness || witness.length !== 1) return;\n    return witness[0];\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_5__.prop(o, 'witness', () => {\n    if (a.witness) return a.witness;\n    const hashTree = _hashTree();\n    if (hashTree && a.redeem && a.redeem.output && a.internalPubkey) {\n      const leafHash = (0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.tapleafHash)({\n        output: a.redeem.output,\n        version: o.redeemVersion,\n      });\n      const path = (0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.findScriptPath)(hashTree, leafHash);\n      if (!path) return;\n      const outputKey = (0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.tweakKey)(a.internalPubkey, hashTree.hash);\n      if (!outputKey) return;\n      const controlBock = uint8array_tools__WEBPACK_IMPORTED_MODULE_8__.concat(\n        [\n          Uint8Array.from([o.redeemVersion | outputKey.parity]),\n          a.internalPubkey,\n        ].concat(path),\n      );\n      return [a.redeem.output, controlBock];\n    }\n    if (a.signature) return [a.signature];\n  });\n  // extended validation\n  if (opts.validate) {\n    let pubkey = Uint8Array.from([]);\n    if (a.address) {\n      if (network && network.bech32 !== _address().prefix)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== TAPROOT_WITNESS_VERSION)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 32)\n        throw new TypeError('Invalid address data');\n      pubkey = _address().data;\n    }\n    if (a.pubkey) {\n      if (pubkey.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_8__.compare(pubkey, a.pubkey) !== 0)\n        throw new TypeError('Pubkey mismatch');\n      else pubkey = a.pubkey;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 34 ||\n        a.output[0] !== OPS.OP_1 ||\n        a.output[1] !== 0x20\n      )\n        throw new TypeError('Output is invalid');\n      if (pubkey.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_8__.compare(pubkey, a.output.slice(2)) !== 0)\n        throw new TypeError('Pubkey mismatch');\n      else pubkey = a.output.slice(2);\n    }\n    if (a.internalPubkey) {\n      const tweakedKey = (0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.tweakKey)(a.internalPubkey, o.hash);\n      if (pubkey.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_8__.compare(pubkey, tweakedKey.x) !== 0)\n        throw new TypeError('Pubkey mismatch');\n      else pubkey = tweakedKey.x;\n    }\n    if (pubkey && pubkey.length) {\n      if (!(0,_ecc_lib_js__WEBPACK_IMPORTED_MODULE_3__.getEccLib)().isXOnlyPoint(pubkey))\n        throw new TypeError('Invalid pubkey for p2tr');\n    }\n    const hashTree = _hashTree();\n    if (a.hash && hashTree) {\n      if (uint8array_tools__WEBPACK_IMPORTED_MODULE_8__.compare(a.hash, hashTree.hash) !== 0)\n        throw new TypeError('Hash mismatch');\n    }\n    if (a.redeem && a.redeem.output && hashTree) {\n      const leafHash = (0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.tapleafHash)({\n        output: a.redeem.output,\n        version: o.redeemVersion,\n      });\n      if (!(0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.findScriptPath)(hashTree, leafHash))\n        throw new TypeError('Redeem script not in tree');\n    }\n    const witness = _witness();\n    // compare the provided redeem data with the one computed from witness\n    if (a.redeem && o.redeem) {\n      if (a.redeem.redeemVersion) {\n        if (a.redeem.redeemVersion !== o.redeem.redeemVersion)\n          throw new TypeError('Redeem.redeemVersion and witness mismatch');\n      }\n      if (a.redeem.output) {\n        if (_script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(a.redeem.output).length === 0)\n          throw new TypeError('Redeem.output is invalid');\n        // output redeem is constructed from the witness\n        if (\n          o.redeem.output &&\n          uint8array_tools__WEBPACK_IMPORTED_MODULE_8__.compare(a.redeem.output, o.redeem.output) !== 0\n        )\n          throw new TypeError('Redeem.output and witness mismatch');\n      }\n      if (a.redeem.witness) {\n        if (\n          o.redeem.witness &&\n          !(0,_types_js__WEBPACK_IMPORTED_MODULE_2__.stacksEqual)(a.redeem.witness, o.redeem.witness)\n        )\n          throw new TypeError('Redeem.witness and witness mismatch');\n      }\n    }\n    if (witness && witness.length) {\n      if (witness.length === 1) {\n        // key spending\n        if (a.signature && uint8array_tools__WEBPACK_IMPORTED_MODULE_8__.compare(a.signature, witness[0]) !== 0)\n          throw new TypeError('Signature mismatch');\n      } else {\n        // script path spending\n        const controlBlock = witness[witness.length - 1];\n        if (controlBlock.length < 33)\n          throw new TypeError(\n            `The control-block length is too small. Got ${controlBlock.length}, expected min 33.`,\n          );\n        if ((controlBlock.length - 33) % 32 !== 0)\n          throw new TypeError(\n            `The control-block length of ${controlBlock.length} is incorrect!`,\n          );\n        const m = (controlBlock.length - 33) / 32;\n        if (m > 128)\n          throw new TypeError(\n            `The script path is too long. Got ${m}, expected max 128.`,\n          );\n        const internalPubkey = controlBlock.slice(1, 33);\n        if (\n          a.internalPubkey &&\n          uint8array_tools__WEBPACK_IMPORTED_MODULE_8__.compare(a.internalPubkey, internalPubkey) !== 0\n        )\n          throw new TypeError('Internal pubkey mismatch');\n        if (!(0,_ecc_lib_js__WEBPACK_IMPORTED_MODULE_3__.getEccLib)().isXOnlyPoint(internalPubkey))\n          throw new TypeError('Invalid internalPubkey for p2tr witness');\n        const leafVersion = controlBlock[0] & _types_js__WEBPACK_IMPORTED_MODULE_2__.TAPLEAF_VERSION_MASK;\n        const script = witness[witness.length - 2];\n        const leafHash = (0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.tapleafHash)({ output: script, version: leafVersion });\n        const hash = (0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.rootHashFromPath)(controlBlock, leafHash);\n        const outputKey = (0,_bip341_js__WEBPACK_IMPORTED_MODULE_4__.tweakKey)(internalPubkey, hash);\n        if (!outputKey)\n          // todo: needs test data\n          throw new TypeError('Invalid outputKey for p2tr witness');\n        if (pubkey.length && uint8array_tools__WEBPACK_IMPORTED_MODULE_8__.compare(pubkey, outputKey.x) !== 0)\n          throw new TypeError('Pubkey mismatch for p2tr witness');\n        if (outputKey.parity !== (controlBlock[0] & 1))\n          throw new Error('Incorrect parity');\n      }\n    }\n  }\n  return Object.assign(o, a);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9wMnRyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQTREO0FBQ3BCO0FBT25CO0FBQ3FCO0FBUXJCO0FBQ2E7QUFDRDtBQUNVO0FBQ0Q7QUFDYjtBQUM3QixZQUFZLDJDQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsZ0JBQWdCLFlBQVk7QUFDckQsRUFBRSwwQ0FBTztBQUNULElBQUksNENBQVM7QUFDYixNQUFNLDJDQUFRO0FBQ2QsaUJBQWlCLDJDQUFRO0FBQ3pCLGVBQWUsK0RBQW9CO0FBQ25DLGlCQUFpQiwyQ0FBUSxHQUFHO0FBQzVCLGdCQUFnQiwrREFBb0I7QUFDcEMsd0JBQXdCLCtEQUFvQjtBQUM1QyxjQUFjLCtEQUFvQjtBQUNsQyxnQkFBZ0IsK0RBQW9CO0FBQ3BDLG1CQUFtQiwwQ0FBTztBQUMxQixVQUFVLCtEQUFvQjtBQUM5QixVQUFVLCtEQUFvQjtBQUM5QjtBQUNBLGlCQUFpQiwwQ0FBTyxDQUFDLG1EQUFZO0FBQ3JDLG9CQUFvQiwyQ0FBUSxDQUFDLGdEQUFTO0FBQ3RDLGdCQUFnQiw0Q0FBUztBQUN6QixVQUFVLDJDQUFRO0FBQ2xCLG9CQUFvQixtREFBWTtBQUNoQywyQkFBMkIsMkNBQVE7QUFDbkMscUJBQXFCLDBDQUFPLENBQUMsbURBQVk7QUFDekMsV0FBVztBQUNYO0FBQ0EsdUJBQXVCLDJDQUFRO0FBQy9CLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsMkNBQVU7QUFDN0IsV0FBVyx1REFBVTtBQUNyQixHQUFHO0FBQ0g7QUFDQSxtQkFBbUIsMkNBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxvQkFBb0IsMkNBQVU7QUFDOUIsNkJBQTZCLHNEQUFVO0FBQ3ZDLHlCQUF5QjtBQUN6QjtBQUNBLEdBQUc7QUFDSCwrQkFBK0IsaURBQWU7QUFDOUMsY0FBYztBQUNkLEVBQUUsMENBQVM7QUFDWDtBQUNBLGtCQUFrQiwyQ0FBTztBQUN6QjtBQUNBLFdBQVcsMkNBQU87QUFDbEIsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDJEQUFvQjtBQUNoRTtBQUNBLHVCQUF1Qix1REFBVyxHQUFHLHNDQUFzQztBQUMzRSxhQUFhLDREQUFnQjtBQUM3QjtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBLFdBQVcsK0NBQWU7QUFDMUIsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4REFBc0I7QUFDakMsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWCxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsMkRBQW9CO0FBQzFFO0FBQ0EsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixvREFBUTtBQUNqQztBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLDBDQUFTO0FBQ1g7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLDBDQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVEQUFXO0FBQ2xDO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsbUJBQW1CLDBEQUFjO0FBQ2pDO0FBQ0Esd0JBQXdCLG9EQUFRO0FBQ2hDO0FBQ0EsMEJBQTBCLG9EQUFZO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IscURBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IscURBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsb0RBQVE7QUFDakMsK0JBQStCLHFEQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxzREFBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscURBQWE7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVEQUFXO0FBQ2xDO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsV0FBVywwREFBYztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQWlCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxxREFBYTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHNEQUFXO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFEQUFhO0FBQ3hDO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELG9CQUFvQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMscUJBQXFCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELEVBQUU7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFEQUFhO0FBQ3ZCO0FBQ0E7QUFDQSxhQUFhLHNEQUFTO0FBQ3RCO0FBQ0EsOENBQThDLDJEQUFvQjtBQUNsRTtBQUNBLHlCQUF5Qix1REFBVyxHQUFHLHNDQUFzQztBQUM3RSxxQkFBcUIsNERBQWdCO0FBQ3JDLDBCQUEwQixvREFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQSw2QkFBNkIscURBQWE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2J0Yy9taWRsLXgtYml0Y29pbi1zdW1taXQtaGFja2F0aG9uLTIwMjUvdXR4by1wc2J0LWRlbW8vbm9kZV9tb2R1bGVzLy5wbnBtL2JpdGNvaW5qcy1saWJANy4wLjAtcmMuMF90eXBlc2NyaXB0QDUuOS4yL25vZGVfbW9kdWxlcy9iaXRjb2luanMtbGliL3NyYy9lc20vcGF5bWVudHMvcDJ0ci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiaXRjb2luIGFzIEJJVENPSU5fTkVUV09SSyB9IGZyb20gJy4uL25ldHdvcmtzLmpzJztcbmltcG9ydCAqIGFzIGJzY3JpcHQgZnJvbSAnLi4vc2NyaXB0LmpzJztcbmltcG9ydCB7XG4gIGlzVGFwdHJlZSxcbiAgVEFQTEVBRl9WRVJTSU9OX01BU0ssXG4gIHN0YWNrc0VxdWFsLFxuICBOQnVmZmVyU2NoZW1hRmFjdG9yeSxcbiAgQnVmZmVyU2NoZW1hLFxufSBmcm9tICcuLi90eXBlcy5qcyc7XG5pbXBvcnQgeyBnZXRFY2NMaWIgfSBmcm9tICcuLi9lY2NfbGliLmpzJztcbmltcG9ydCB7XG4gIHRvSGFzaFRyZWUsXG4gIHJvb3RIYXNoRnJvbVBhdGgsXG4gIGZpbmRTY3JpcHRQYXRoLFxuICB0YXBsZWFmSGFzaCxcbiAgdHdlYWtLZXksXG4gIExFQUZfVkVSU0lPTl9UQVBTQ1JJUFQsXG59IGZyb20gJy4vYmlwMzQxLmpzJztcbmltcG9ydCAqIGFzIGxhenkgZnJvbSAnLi9sYXp5LmpzJztcbmltcG9ydCB7IGJlY2gzMm0gfSBmcm9tICdiZWNoMzInO1xuaW1wb3J0IHsgZnJvbUJlY2gzMiB9IGZyb20gJy4uL2FkZHJlc3MuanMnO1xuaW1wb3J0ICogYXMgdG9vbHMgZnJvbSAndWludDhhcnJheS10b29scyc7XG5pbXBvcnQgKiBhcyB2IGZyb20gJ3ZhbGlib3QnO1xuY29uc3QgT1BTID0gYnNjcmlwdC5PUFM7XG5jb25zdCBUQVBST09UX1dJVE5FU1NfVkVSU0lPTiA9IDB4MDE7XG5jb25zdCBBTk5FWF9QUkVGSVggPSAweDUwO1xuLyoqXG4gKiBDcmVhdGVzIGEgUGF5LXRvLVRhcHJvb3QgKFAyVFIpIHBheW1lbnQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBhIC0gVGhlIHBheW1lbnQgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG5lY2Vzc2FyeSBkYXRhIGZvciBQMlRSLlxuICogQHBhcmFtIG9wdHMgLSBPcHRpb25hbCBwYXltZW50IG9wdGlvbnMuXG4gKiBAcmV0dXJucyBUaGUgUDJUUiBwYXltZW50IG9iamVjdC5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGRhdGEgaXMgaW52YWxpZCBvciBpbnN1ZmZpY2llbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwMnRyKGEsIG9wdHMpIHtcbiAgaWYgKFxuICAgICFhLmFkZHJlc3MgJiZcbiAgICAhYS5vdXRwdXQgJiZcbiAgICAhYS5wdWJrZXkgJiZcbiAgICAhYS5pbnRlcm5hbFB1YmtleSAmJlxuICAgICEoYS53aXRuZXNzICYmIGEud2l0bmVzcy5sZW5ndGggPiAxKVxuICApXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTm90IGVub3VnaCBkYXRhJyk7XG4gIG9wdHMgPSBPYmplY3QuYXNzaWduKHsgdmFsaWRhdGU6IHRydWUgfSwgb3B0cyB8fCB7fSk7XG4gIHYucGFyc2UoXG4gICAgdi5wYXJ0aWFsKFxuICAgICAgdi5vYmplY3Qoe1xuICAgICAgICBhZGRyZXNzOiB2LnN0cmluZygpLFxuICAgICAgICBpbnB1dDogTkJ1ZmZlclNjaGVtYUZhY3RvcnkoMCksXG4gICAgICAgIG5ldHdvcms6IHYub2JqZWN0KHt9KSxcbiAgICAgICAgb3V0cHV0OiBOQnVmZmVyU2NoZW1hRmFjdG9yeSgzNCksXG4gICAgICAgIGludGVybmFsUHVia2V5OiBOQnVmZmVyU2NoZW1hRmFjdG9yeSgzMiksXG4gICAgICAgIGhhc2g6IE5CdWZmZXJTY2hlbWFGYWN0b3J5KDMyKSwgLy8gbWVya2xlIHJvb3QgaGFzaCwgdGhlIHR3ZWFrXG4gICAgICAgIHB1YmtleTogTkJ1ZmZlclNjaGVtYUZhY3RvcnkoMzIpLCAvLyB0d2Vha2VkIHdpdGggYGhhc2hgIGZyb20gYGludGVybmFsUHVia2V5YFxuICAgICAgICBzaWduYXR1cmU6IHYudW5pb24oW1xuICAgICAgICAgIE5CdWZmZXJTY2hlbWFGYWN0b3J5KDY0KSxcbiAgICAgICAgICBOQnVmZmVyU2NoZW1hRmFjdG9yeSg2NSksXG4gICAgICAgIF0pLFxuICAgICAgICB3aXRuZXNzOiB2LmFycmF5KEJ1ZmZlclNjaGVtYSksXG4gICAgICAgIHNjcmlwdFRyZWU6IHYuY3VzdG9tKGlzVGFwdHJlZSwgJ1RhcHRyZWUgaXMgbm90IG9mIHR5cGUgaXNUYXB0cmVlJyksXG4gICAgICAgIHJlZGVlbTogdi5wYXJ0aWFsKFxuICAgICAgICAgIHYub2JqZWN0KHtcbiAgICAgICAgICAgIG91dHB1dDogQnVmZmVyU2NoZW1hLCAvLyB0YXBsZWFmIHNjcmlwdFxuICAgICAgICAgICAgcmVkZWVtVmVyc2lvbjogdi5udW1iZXIoKSwgLy8gdGFwbGVhZiB2ZXJzaW9uXG4gICAgICAgICAgICB3aXRuZXNzOiB2LmFycmF5KEJ1ZmZlclNjaGVtYSksXG4gICAgICAgICAgfSksXG4gICAgICAgICksXG4gICAgICAgIHJlZGVlbVZlcnNpb246IHYubnVtYmVyKCksXG4gICAgICB9KSxcbiAgICApLFxuICAgIGEsXG4gICk7XG4gIGNvbnN0IF9hZGRyZXNzID0gbGF6eS52YWx1ZSgoKSA9PiB7XG4gICAgcmV0dXJuIGZyb21CZWNoMzIoYS5hZGRyZXNzKTtcbiAgfSk7XG4gIC8vIHJlbW92ZSBhbm5leCBpZiBwcmVzZW50LCBpZ25vcmVkIGJ5IHRhcHJvb3RcbiAgY29uc3QgX3dpdG5lc3MgPSBsYXp5LnZhbHVlKCgpID0+IHtcbiAgICBpZiAoIWEud2l0bmVzcyB8fCAhYS53aXRuZXNzLmxlbmd0aCkgcmV0dXJuO1xuICAgIGlmIChcbiAgICAgIGEud2l0bmVzcy5sZW5ndGggPj0gMiAmJlxuICAgICAgYS53aXRuZXNzW2Eud2l0bmVzcy5sZW5ndGggLSAxXVswXSA9PT0gQU5ORVhfUFJFRklYXG4gICAgKSB7XG4gICAgICByZXR1cm4gYS53aXRuZXNzLnNsaWNlKDAsIC0xKTtcbiAgICB9XG4gICAgcmV0dXJuIGEud2l0bmVzcy5zbGljZSgpO1xuICB9KTtcbiAgY29uc3QgX2hhc2hUcmVlID0gbGF6eS52YWx1ZSgoKSA9PiB7XG4gICAgaWYgKGEuc2NyaXB0VHJlZSkgcmV0dXJuIHRvSGFzaFRyZWUoYS5zY3JpcHRUcmVlKTtcbiAgICBpZiAoYS5oYXNoKSByZXR1cm4geyBoYXNoOiBhLmhhc2ggfTtcbiAgICByZXR1cm47XG4gIH0pO1xuICBjb25zdCBuZXR3b3JrID0gYS5uZXR3b3JrIHx8IEJJVENPSU5fTkVUV09SSztcbiAgY29uc3QgbyA9IHsgbmFtZTogJ3AydHInLCBuZXR3b3JrIH07XG4gIGxhenkucHJvcChvLCAnYWRkcmVzcycsICgpID0+IHtcbiAgICBpZiAoIW8ucHVia2V5KSByZXR1cm47XG4gICAgY29uc3Qgd29yZHMgPSBiZWNoMzJtLnRvV29yZHMoby5wdWJrZXkpO1xuICAgIHdvcmRzLnVuc2hpZnQoVEFQUk9PVF9XSVRORVNTX1ZFUlNJT04pO1xuICAgIHJldHVybiBiZWNoMzJtLmVuY29kZShuZXR3b3JrLmJlY2gzMiwgd29yZHMpO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdoYXNoJywgKCkgPT4ge1xuICAgIGNvbnN0IGhhc2hUcmVlID0gX2hhc2hUcmVlKCk7XG4gICAgaWYgKGhhc2hUcmVlKSByZXR1cm4gaGFzaFRyZWUuaGFzaDtcbiAgICBjb25zdCB3ID0gX3dpdG5lc3MoKTtcbiAgICBpZiAodyAmJiB3Lmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IGNvbnRyb2xCbG9jayA9IHdbdy5sZW5ndGggLSAxXTtcbiAgICAgIGNvbnN0IGxlYWZWZXJzaW9uID0gY29udHJvbEJsb2NrWzBdICYgVEFQTEVBRl9WRVJTSU9OX01BU0s7XG4gICAgICBjb25zdCBzY3JpcHQgPSB3W3cubGVuZ3RoIC0gMl07XG4gICAgICBjb25zdCBsZWFmSGFzaCA9IHRhcGxlYWZIYXNoKHsgb3V0cHV0OiBzY3JpcHQsIHZlcnNpb246IGxlYWZWZXJzaW9uIH0pO1xuICAgICAgcmV0dXJuIHJvb3RIYXNoRnJvbVBhdGgoY29udHJvbEJsb2NrLCBsZWFmSGFzaCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdvdXRwdXQnLCAoKSA9PiB7XG4gICAgaWYgKCFvLnB1YmtleSkgcmV0dXJuO1xuICAgIHJldHVybiBic2NyaXB0LmNvbXBpbGUoW09QUy5PUF8xLCBvLnB1YmtleV0pO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdyZWRlZW1WZXJzaW9uJywgKCkgPT4ge1xuICAgIGlmIChhLnJlZGVlbVZlcnNpb24pIHJldHVybiBhLnJlZGVlbVZlcnNpb247XG4gICAgaWYgKFxuICAgICAgYS5yZWRlZW0gJiZcbiAgICAgIGEucmVkZWVtLnJlZGVlbVZlcnNpb24gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgYS5yZWRlZW0ucmVkZWVtVmVyc2lvbiAhPT0gbnVsbFxuICAgICkge1xuICAgICAgcmV0dXJuIGEucmVkZWVtLnJlZGVlbVZlcnNpb247XG4gICAgfVxuICAgIHJldHVybiBMRUFGX1ZFUlNJT05fVEFQU0NSSVBUO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdyZWRlZW0nLCAoKSA9PiB7XG4gICAgY29uc3Qgd2l0bmVzcyA9IF93aXRuZXNzKCk7IC8vIHdpdG5lc3Mgd2l0aG91dCBhbm5leFxuICAgIGlmICghd2l0bmVzcyB8fCB3aXRuZXNzLmxlbmd0aCA8IDIpIHJldHVybjtcbiAgICByZXR1cm4ge1xuICAgICAgb3V0cHV0OiB3aXRuZXNzW3dpdG5lc3MubGVuZ3RoIC0gMl0sXG4gICAgICB3aXRuZXNzOiB3aXRuZXNzLnNsaWNlKDAsIC0yKSxcbiAgICAgIHJlZGVlbVZlcnNpb246IHdpdG5lc3Nbd2l0bmVzcy5sZW5ndGggLSAxXVswXSAmIFRBUExFQUZfVkVSU0lPTl9NQVNLLFxuICAgIH07XG4gIH0pO1xuICBsYXp5LnByb3AobywgJ3B1YmtleScsICgpID0+IHtcbiAgICBpZiAoYS5wdWJrZXkpIHJldHVybiBhLnB1YmtleTtcbiAgICBpZiAoYS5vdXRwdXQpIHJldHVybiBhLm91dHB1dC5zbGljZSgyKTtcbiAgICBpZiAoYS5hZGRyZXNzKSByZXR1cm4gX2FkZHJlc3MoKS5kYXRhO1xuICAgIGlmIChvLmludGVybmFsUHVia2V5KSB7XG4gICAgICBjb25zdCB0d2Vha2VkS2V5ID0gdHdlYWtLZXkoby5pbnRlcm5hbFB1YmtleSwgby5oYXNoKTtcbiAgICAgIGlmICh0d2Vha2VkS2V5KSByZXR1cm4gdHdlYWtlZEtleS54O1xuICAgIH1cbiAgfSk7XG4gIGxhenkucHJvcChvLCAnaW50ZXJuYWxQdWJrZXknLCAoKSA9PiB7XG4gICAgaWYgKGEuaW50ZXJuYWxQdWJrZXkpIHJldHVybiBhLmludGVybmFsUHVia2V5O1xuICAgIGNvbnN0IHdpdG5lc3MgPSBfd2l0bmVzcygpO1xuICAgIGlmICh3aXRuZXNzICYmIHdpdG5lc3MubGVuZ3RoID4gMSlcbiAgICAgIHJldHVybiB3aXRuZXNzW3dpdG5lc3MubGVuZ3RoIC0gMV0uc2xpY2UoMSwgMzMpO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdzaWduYXR1cmUnLCAoKSA9PiB7XG4gICAgaWYgKGEuc2lnbmF0dXJlKSByZXR1cm4gYS5zaWduYXR1cmU7XG4gICAgY29uc3Qgd2l0bmVzcyA9IF93aXRuZXNzKCk7IC8vIHdpdG5lc3Mgd2l0aG91dCBhbm5leFxuICAgIGlmICghd2l0bmVzcyB8fCB3aXRuZXNzLmxlbmd0aCAhPT0gMSkgcmV0dXJuO1xuICAgIHJldHVybiB3aXRuZXNzWzBdO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICd3aXRuZXNzJywgKCkgPT4ge1xuICAgIGlmIChhLndpdG5lc3MpIHJldHVybiBhLndpdG5lc3M7XG4gICAgY29uc3QgaGFzaFRyZWUgPSBfaGFzaFRyZWUoKTtcbiAgICBpZiAoaGFzaFRyZWUgJiYgYS5yZWRlZW0gJiYgYS5yZWRlZW0ub3V0cHV0ICYmIGEuaW50ZXJuYWxQdWJrZXkpIHtcbiAgICAgIGNvbnN0IGxlYWZIYXNoID0gdGFwbGVhZkhhc2goe1xuICAgICAgICBvdXRwdXQ6IGEucmVkZWVtLm91dHB1dCxcbiAgICAgICAgdmVyc2lvbjogby5yZWRlZW1WZXJzaW9uLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBwYXRoID0gZmluZFNjcmlwdFBhdGgoaGFzaFRyZWUsIGxlYWZIYXNoKTtcbiAgICAgIGlmICghcGF0aCkgcmV0dXJuO1xuICAgICAgY29uc3Qgb3V0cHV0S2V5ID0gdHdlYWtLZXkoYS5pbnRlcm5hbFB1YmtleSwgaGFzaFRyZWUuaGFzaCk7XG4gICAgICBpZiAoIW91dHB1dEtleSkgcmV0dXJuO1xuICAgICAgY29uc3QgY29udHJvbEJvY2sgPSB0b29scy5jb25jYXQoXG4gICAgICAgIFtcbiAgICAgICAgICBVaW50OEFycmF5LmZyb20oW28ucmVkZWVtVmVyc2lvbiB8IG91dHB1dEtleS5wYXJpdHldKSxcbiAgICAgICAgICBhLmludGVybmFsUHVia2V5LFxuICAgICAgICBdLmNvbmNhdChwYXRoKSxcbiAgICAgICk7XG4gICAgICByZXR1cm4gW2EucmVkZWVtLm91dHB1dCwgY29udHJvbEJvY2tdO1xuICAgIH1cbiAgICBpZiAoYS5zaWduYXR1cmUpIHJldHVybiBbYS5zaWduYXR1cmVdO1xuICB9KTtcbiAgLy8gZXh0ZW5kZWQgdmFsaWRhdGlvblxuICBpZiAob3B0cy52YWxpZGF0ZSkge1xuICAgIGxldCBwdWJrZXkgPSBVaW50OEFycmF5LmZyb20oW10pO1xuICAgIGlmIChhLmFkZHJlc3MpIHtcbiAgICAgIGlmIChuZXR3b3JrICYmIG5ldHdvcmsuYmVjaDMyICE9PSBfYWRkcmVzcygpLnByZWZpeClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBwcmVmaXggb3IgTmV0d29yayBtaXNtYXRjaCcpO1xuICAgICAgaWYgKF9hZGRyZXNzKCkudmVyc2lvbiAhPT0gVEFQUk9PVF9XSVRORVNTX1ZFUlNJT04pXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgYWRkcmVzcyB2ZXJzaW9uJyk7XG4gICAgICBpZiAoX2FkZHJlc3MoKS5kYXRhLmxlbmd0aCAhPT0gMzIpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgYWRkcmVzcyBkYXRhJyk7XG4gICAgICBwdWJrZXkgPSBfYWRkcmVzcygpLmRhdGE7XG4gICAgfVxuICAgIGlmIChhLnB1YmtleSkge1xuICAgICAgaWYgKHB1YmtleS5sZW5ndGggPiAwICYmIHRvb2xzLmNvbXBhcmUocHVia2V5LCBhLnB1YmtleSkgIT09IDApXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1B1YmtleSBtaXNtYXRjaCcpO1xuICAgICAgZWxzZSBwdWJrZXkgPSBhLnB1YmtleTtcbiAgICB9XG4gICAgaWYgKGEub3V0cHV0KSB7XG4gICAgICBpZiAoXG4gICAgICAgIGEub3V0cHV0Lmxlbmd0aCAhPT0gMzQgfHxcbiAgICAgICAgYS5vdXRwdXRbMF0gIT09IE9QUy5PUF8xIHx8XG4gICAgICAgIGEub3V0cHV0WzFdICE9PSAweDIwXG4gICAgICApXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ091dHB1dCBpcyBpbnZhbGlkJyk7XG4gICAgICBpZiAocHVia2V5Lmxlbmd0aCA+IDAgJiYgdG9vbHMuY29tcGFyZShwdWJrZXksIGEub3V0cHV0LnNsaWNlKDIpKSAhPT0gMClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHVia2V5IG1pc21hdGNoJyk7XG4gICAgICBlbHNlIHB1YmtleSA9IGEub3V0cHV0LnNsaWNlKDIpO1xuICAgIH1cbiAgICBpZiAoYS5pbnRlcm5hbFB1YmtleSkge1xuICAgICAgY29uc3QgdHdlYWtlZEtleSA9IHR3ZWFrS2V5KGEuaW50ZXJuYWxQdWJrZXksIG8uaGFzaCk7XG4gICAgICBpZiAocHVia2V5Lmxlbmd0aCA+IDAgJiYgdG9vbHMuY29tcGFyZShwdWJrZXksIHR3ZWFrZWRLZXkueCkgIT09IDApXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1B1YmtleSBtaXNtYXRjaCcpO1xuICAgICAgZWxzZSBwdWJrZXkgPSB0d2Vha2VkS2V5Lng7XG4gICAgfVxuICAgIGlmIChwdWJrZXkgJiYgcHVia2V5Lmxlbmd0aCkge1xuICAgICAgaWYgKCFnZXRFY2NMaWIoKS5pc1hPbmx5UG9pbnQocHVia2V5KSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBwdWJrZXkgZm9yIHAydHInKTtcbiAgICB9XG4gICAgY29uc3QgaGFzaFRyZWUgPSBfaGFzaFRyZWUoKTtcbiAgICBpZiAoYS5oYXNoICYmIGhhc2hUcmVlKSB7XG4gICAgICBpZiAodG9vbHMuY29tcGFyZShhLmhhc2gsIGhhc2hUcmVlLmhhc2gpICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIYXNoIG1pc21hdGNoJyk7XG4gICAgfVxuICAgIGlmIChhLnJlZGVlbSAmJiBhLnJlZGVlbS5vdXRwdXQgJiYgaGFzaFRyZWUpIHtcbiAgICAgIGNvbnN0IGxlYWZIYXNoID0gdGFwbGVhZkhhc2goe1xuICAgICAgICBvdXRwdXQ6IGEucmVkZWVtLm91dHB1dCxcbiAgICAgICAgdmVyc2lvbjogby5yZWRlZW1WZXJzaW9uLFxuICAgICAgfSk7XG4gICAgICBpZiAoIWZpbmRTY3JpcHRQYXRoKGhhc2hUcmVlLCBsZWFmSGFzaCkpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1JlZGVlbSBzY3JpcHQgbm90IGluIHRyZWUnKTtcbiAgICB9XG4gICAgY29uc3Qgd2l0bmVzcyA9IF93aXRuZXNzKCk7XG4gICAgLy8gY29tcGFyZSB0aGUgcHJvdmlkZWQgcmVkZWVtIGRhdGEgd2l0aCB0aGUgb25lIGNvbXB1dGVkIGZyb20gd2l0bmVzc1xuICAgIGlmIChhLnJlZGVlbSAmJiBvLnJlZGVlbSkge1xuICAgICAgaWYgKGEucmVkZWVtLnJlZGVlbVZlcnNpb24pIHtcbiAgICAgICAgaWYgKGEucmVkZWVtLnJlZGVlbVZlcnNpb24gIT09IG8ucmVkZWVtLnJlZGVlbVZlcnNpb24pXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUmVkZWVtLnJlZGVlbVZlcnNpb24gYW5kIHdpdG5lc3MgbWlzbWF0Y2gnKTtcbiAgICAgIH1cbiAgICAgIGlmIChhLnJlZGVlbS5vdXRwdXQpIHtcbiAgICAgICAgaWYgKGJzY3JpcHQuZGVjb21waWxlKGEucmVkZWVtLm91dHB1dCkubGVuZ3RoID09PSAwKVxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1JlZGVlbS5vdXRwdXQgaXMgaW52YWxpZCcpO1xuICAgICAgICAvLyBvdXRwdXQgcmVkZWVtIGlzIGNvbnN0cnVjdGVkIGZyb20gdGhlIHdpdG5lc3NcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG8ucmVkZWVtLm91dHB1dCAmJlxuICAgICAgICAgIHRvb2xzLmNvbXBhcmUoYS5yZWRlZW0ub3V0cHV0LCBvLnJlZGVlbS5vdXRwdXQpICE9PSAwXG4gICAgICAgIClcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdSZWRlZW0ub3V0cHV0IGFuZCB3aXRuZXNzIG1pc21hdGNoJyk7XG4gICAgICB9XG4gICAgICBpZiAoYS5yZWRlZW0ud2l0bmVzcykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgby5yZWRlZW0ud2l0bmVzcyAmJlxuICAgICAgICAgICFzdGFja3NFcXVhbChhLnJlZGVlbS53aXRuZXNzLCBvLnJlZGVlbS53aXRuZXNzKVxuICAgICAgICApXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUmVkZWVtLndpdG5lc3MgYW5kIHdpdG5lc3MgbWlzbWF0Y2gnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHdpdG5lc3MgJiYgd2l0bmVzcy5sZW5ndGgpIHtcbiAgICAgIGlmICh3aXRuZXNzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBrZXkgc3BlbmRpbmdcbiAgICAgICAgaWYgKGEuc2lnbmF0dXJlICYmIHRvb2xzLmNvbXBhcmUoYS5zaWduYXR1cmUsIHdpdG5lc3NbMF0pICE9PSAwKVxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1NpZ25hdHVyZSBtaXNtYXRjaCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc2NyaXB0IHBhdGggc3BlbmRpbmdcbiAgICAgICAgY29uc3QgY29udHJvbEJsb2NrID0gd2l0bmVzc1t3aXRuZXNzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoY29udHJvbEJsb2NrLmxlbmd0aCA8IDMzKVxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICBgVGhlIGNvbnRyb2wtYmxvY2sgbGVuZ3RoIGlzIHRvbyBzbWFsbC4gR290ICR7Y29udHJvbEJsb2NrLmxlbmd0aH0sIGV4cGVjdGVkIG1pbiAzMy5gLFxuICAgICAgICAgICk7XG4gICAgICAgIGlmICgoY29udHJvbEJsb2NrLmxlbmd0aCAtIDMzKSAlIDMyICE9PSAwKVxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICBgVGhlIGNvbnRyb2wtYmxvY2sgbGVuZ3RoIG9mICR7Y29udHJvbEJsb2NrLmxlbmd0aH0gaXMgaW5jb3JyZWN0IWAsXG4gICAgICAgICAgKTtcbiAgICAgICAgY29uc3QgbSA9IChjb250cm9sQmxvY2subGVuZ3RoIC0gMzMpIC8gMzI7XG4gICAgICAgIGlmIChtID4gMTI4KVxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICBgVGhlIHNjcmlwdCBwYXRoIGlzIHRvbyBsb25nLiBHb3QgJHttfSwgZXhwZWN0ZWQgbWF4IDEyOC5gLFxuICAgICAgICAgICk7XG4gICAgICAgIGNvbnN0IGludGVybmFsUHVia2V5ID0gY29udHJvbEJsb2NrLnNsaWNlKDEsIDMzKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGEuaW50ZXJuYWxQdWJrZXkgJiZcbiAgICAgICAgICB0b29scy5jb21wYXJlKGEuaW50ZXJuYWxQdWJrZXksIGludGVybmFsUHVia2V5KSAhPT0gMFxuICAgICAgICApXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW50ZXJuYWwgcHVia2V5IG1pc21hdGNoJyk7XG4gICAgICAgIGlmICghZ2V0RWNjTGliKCkuaXNYT25seVBvaW50KGludGVybmFsUHVia2V5KSlcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGludGVybmFsUHVia2V5IGZvciBwMnRyIHdpdG5lc3MnKTtcbiAgICAgICAgY29uc3QgbGVhZlZlcnNpb24gPSBjb250cm9sQmxvY2tbMF0gJiBUQVBMRUFGX1ZFUlNJT05fTUFTSztcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gd2l0bmVzc1t3aXRuZXNzLmxlbmd0aCAtIDJdO1xuICAgICAgICBjb25zdCBsZWFmSGFzaCA9IHRhcGxlYWZIYXNoKHsgb3V0cHV0OiBzY3JpcHQsIHZlcnNpb246IGxlYWZWZXJzaW9uIH0pO1xuICAgICAgICBjb25zdCBoYXNoID0gcm9vdEhhc2hGcm9tUGF0aChjb250cm9sQmxvY2ssIGxlYWZIYXNoKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0S2V5ID0gdHdlYWtLZXkoaW50ZXJuYWxQdWJrZXksIGhhc2gpO1xuICAgICAgICBpZiAoIW91dHB1dEtleSlcbiAgICAgICAgICAvLyB0b2RvOiBuZWVkcyB0ZXN0IGRhdGFcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG91dHB1dEtleSBmb3IgcDJ0ciB3aXRuZXNzJyk7XG4gICAgICAgIGlmIChwdWJrZXkubGVuZ3RoICYmIHRvb2xzLmNvbXBhcmUocHVia2V5LCBvdXRwdXRLZXkueCkgIT09IDApXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHVia2V5IG1pc21hdGNoIGZvciBwMnRyIHdpdG5lc3MnKTtcbiAgICAgICAgaWYgKG91dHB1dEtleS5wYXJpdHkgIT09IChjb250cm9sQmxvY2tbMF0gJiAxKSlcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29ycmVjdCBwYXJpdHknKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24obywgYSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2tr.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2wpkh.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2wpkh.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   p2wpkh: () => (/* binding */ p2wpkh)\n/* harmony export */ });\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../crypto.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/crypto.js\");\n/* harmony import */ var _networks_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../networks.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var _lazy_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lazy.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/lazy.js\");\n/* harmony import */ var bech32__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bech32 */ \"(ssr)/./node_modules/.pnpm/bech32@2.0.0/node_modules/bech32/dist/index.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n\n\n\n\n\n\n\n\nconst OPS = _script_js__WEBPACK_IMPORTED_MODULE_2__.OPS;\nconst EMPTY_BUFFER = new Uint8Array(0);\n// witness: {signature} {pubKey}\n// input: <>\n// output: OP_0 {pubKeyHash}\n/**\n * Creates a pay-to-witness-public-key-hash (p2wpkh) payment object.\n *\n * @param a - The payment object containing the necessary data.\n * @param opts - Optional payment options.\n * @returns The p2wpkh payment object.\n * @throws {TypeError} If the required data is missing or invalid.\n */\nfunction p2wpkh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.pubkey && !a.witness)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  valibot__WEBPACK_IMPORTED_MODULE_7__.parse(\n    valibot__WEBPACK_IMPORTED_MODULE_7__.partial(\n      valibot__WEBPACK_IMPORTED_MODULE_7__.object({\n        address: valibot__WEBPACK_IMPORTED_MODULE_7__.string(),\n        hash: (0,_types_js__WEBPACK_IMPORTED_MODULE_3__.NBufferSchemaFactory)(20),\n        input: (0,_types_js__WEBPACK_IMPORTED_MODULE_3__.NBufferSchemaFactory)(0),\n        network: valibot__WEBPACK_IMPORTED_MODULE_7__.object({}),\n        output: (0,_types_js__WEBPACK_IMPORTED_MODULE_3__.NBufferSchemaFactory)(22),\n        pubkey: valibot__WEBPACK_IMPORTED_MODULE_7__.custom(_types_js__WEBPACK_IMPORTED_MODULE_3__.isPoint, 'Not a valid pubkey'),\n        signature: valibot__WEBPACK_IMPORTED_MODULE_7__.custom(_script_js__WEBPACK_IMPORTED_MODULE_2__.isCanonicalScriptSignature),\n        witness: valibot__WEBPACK_IMPORTED_MODULE_7__.array(_types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema),\n      }),\n    ),\n    a,\n  );\n  const _address = _lazy_js__WEBPACK_IMPORTED_MODULE_4__.value(() => {\n    const result = bech32__WEBPACK_IMPORTED_MODULE_5__.bech32.decode(a.address);\n    const version = result.words.shift();\n    const data = bech32__WEBPACK_IMPORTED_MODULE_5__.bech32.fromWords(result.words);\n    return {\n      version,\n      prefix: result.prefix,\n      data: Uint8Array.from(data),\n    };\n  });\n  const network = a.network || _networks_js__WEBPACK_IMPORTED_MODULE_1__.bitcoin;\n  const o = { name: 'p2wpkh', network };\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const words = bech32__WEBPACK_IMPORTED_MODULE_5__.bech32.toWords(o.hash);\n    words.unshift(0x00);\n    return bech32__WEBPACK_IMPORTED_MODULE_5__.bech32.encode(network.bech32, words);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().data;\n    if (a.pubkey || o.pubkey) return _crypto_js__WEBPACK_IMPORTED_MODULE_0__.hash160(a.pubkey || o.pubkey);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_2__.compile([OPS.OP_0, o.hash]);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'pubkey', () => {\n    if (a.pubkey) return a.pubkey;\n    if (!a.witness) return;\n    return a.witness[1];\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'signature', () => {\n    if (!a.witness) return;\n    return a.witness[0];\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'input', () => {\n    if (!o.witness) return;\n    return EMPTY_BUFFER;\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_4__.prop(o, 'witness', () => {\n    if (!a.pubkey) return;\n    if (!a.signature) return;\n    return [a.signature, a.pubkey];\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Uint8Array.from([]);\n    if (a.address) {\n      if (network && network.bech32 !== _address().prefix)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== 0x00)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 20)\n        throw new TypeError('Invalid address data');\n      hash = _address().data;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(hash, a.hash) !== 0)\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 22 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x14\n      )\n        throw new TypeError('Output is invalid');\n      if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(hash, a.output.slice(2)) !== 0)\n        throw new TypeError('Hash mismatch');\n      else hash = a.output.slice(2);\n    }\n    if (a.pubkey) {\n      const pkh = _crypto_js__WEBPACK_IMPORTED_MODULE_0__.hash160(a.pubkey);\n      if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(hash, pkh) !== 0)\n        throw new TypeError('Hash mismatch');\n      else hash = pkh;\n      if (!(0,_types_js__WEBPACK_IMPORTED_MODULE_3__.isPoint)(a.pubkey) || a.pubkey.length !== 33)\n        throw new TypeError('Invalid pubkey for p2wpkh');\n    }\n    if (a.witness) {\n      if (a.witness.length !== 2) throw new TypeError('Witness is invalid');\n      if (!_script_js__WEBPACK_IMPORTED_MODULE_2__.isCanonicalScriptSignature(a.witness[0]))\n        throw new TypeError('Witness has invalid signature');\n      if (!(0,_types_js__WEBPACK_IMPORTED_MODULE_3__.isPoint)(a.witness[1]) || a.witness[1].length !== 33)\n        throw new TypeError('Witness has invalid pubkey');\n      if (a.signature && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(a.signature, a.witness[0]) !== 0)\n        throw new TypeError('Signature mismatch');\n      // if (a.pubkey && !a.pubkey.equals(a.witness[1]))\n      if (a.pubkey && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(a.pubkey, a.witness[1]) !== 0)\n        throw new TypeError('Pubkey mismatch');\n      const pkh = _crypto_js__WEBPACK_IMPORTED_MODULE_0__.hash160(a.witness[1]);\n      if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.compare(hash, pkh) !== 0)\n        throw new TypeError('Hash mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9wMndwa2guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdDO0FBQ29CO0FBQ3BCO0FBQ2tDO0FBQ3hDO0FBQ0Y7QUFDVTtBQUNiO0FBQzdCLFlBQVksMkNBQVc7QUFDdkI7QUFDQSxhQUFhLFlBQVk7QUFDekI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ087QUFDUDtBQUNBO0FBQ0EseUJBQXlCLGdCQUFnQixZQUFZO0FBQ3JELEVBQUUsMENBQU87QUFDVCxJQUFJLDRDQUFTO0FBQ2IsTUFBTSwyQ0FBUTtBQUNkLGlCQUFpQiwyQ0FBUTtBQUN6QixjQUFjLCtEQUFvQjtBQUNsQyxlQUFlLCtEQUFvQjtBQUNuQyxpQkFBaUIsMkNBQVEsR0FBRztBQUM1QixnQkFBZ0IsK0RBQW9CO0FBQ3BDLGdCQUFnQiwyQ0FBUSxDQUFDLDhDQUFPO0FBQ2hDLG1CQUFtQiwyQ0FBUSxDQUFDLGtFQUFrQztBQUM5RCxpQkFBaUIsMENBQU8sQ0FBQyxtREFBWTtBQUNyQyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDJDQUFVO0FBQzdCLG1CQUFtQiwwQ0FBTTtBQUN6QjtBQUNBLGlCQUFpQiwwQ0FBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILCtCQUErQixpREFBZTtBQUM5QyxjQUFjO0FBQ2QsRUFBRSwwQ0FBUztBQUNYO0FBQ0Esa0JBQWtCLDBDQUFNO0FBQ3hCO0FBQ0EsV0FBVywwQ0FBTTtBQUNqQixHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0E7QUFDQSxxQ0FBcUMsK0NBQWU7QUFDcEQsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBLFdBQVcsK0NBQWU7QUFDMUIsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSwwQ0FBUztBQUNYO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixxREFBYTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixxREFBYTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwrQ0FBZTtBQUNqQyw2QkFBNkIscURBQWE7QUFDMUM7QUFDQTtBQUNBLFdBQVcsa0RBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtFQUFrQztBQUM3QztBQUNBLFdBQVcsa0RBQU87QUFDbEI7QUFDQSx5QkFBeUIscURBQWE7QUFDdEM7QUFDQTtBQUNBLHNCQUFzQixxREFBYTtBQUNuQztBQUNBLGtCQUFrQiwrQ0FBZTtBQUNqQyw2QkFBNkIscURBQWE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2J0Yy9taWRsLXgtYml0Y29pbi1zdW1taXQtaGFja2F0aG9uLTIwMjUvdXR4by1wc2J0LWRlbW8vbm9kZV9tb2R1bGVzLy5wbnBtL2JpdGNvaW5qcy1saWJANy4wLjAtcmMuMF90eXBlc2NyaXB0QDUuOS4yL25vZGVfbW9kdWxlcy9iaXRjb2luanMtbGliL3NyYy9lc20vcGF5bWVudHMvcDJ3cGtoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGJjcnlwdG8gZnJvbSAnLi4vY3J5cHRvLmpzJztcbmltcG9ydCB7IGJpdGNvaW4gYXMgQklUQ09JTl9ORVRXT1JLIH0gZnJvbSAnLi4vbmV0d29ya3MuanMnO1xuaW1wb3J0ICogYXMgYnNjcmlwdCBmcm9tICcuLi9zY3JpcHQuanMnO1xuaW1wb3J0IHsgQnVmZmVyU2NoZW1hLCBpc1BvaW50LCBOQnVmZmVyU2NoZW1hRmFjdG9yeSB9IGZyb20gJy4uL3R5cGVzLmpzJztcbmltcG9ydCAqIGFzIGxhenkgZnJvbSAnLi9sYXp5LmpzJztcbmltcG9ydCB7IGJlY2gzMiB9IGZyb20gJ2JlY2gzMic7XG5pbXBvcnQgKiBhcyB0b29scyBmcm9tICd1aW50OGFycmF5LXRvb2xzJztcbmltcG9ydCAqIGFzIHYgZnJvbSAndmFsaWJvdCc7XG5jb25zdCBPUFMgPSBic2NyaXB0Lk9QUztcbmNvbnN0IEVNUFRZX0JVRkZFUiA9IG5ldyBVaW50OEFycmF5KDApO1xuLy8gd2l0bmVzczoge3NpZ25hdHVyZX0ge3B1YktleX1cbi8vIGlucHV0OiA8PlxuLy8gb3V0cHV0OiBPUF8wIHtwdWJLZXlIYXNofVxuLyoqXG4gKiBDcmVhdGVzIGEgcGF5LXRvLXdpdG5lc3MtcHVibGljLWtleS1oYXNoIChwMndwa2gpIHBheW1lbnQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBhIC0gVGhlIHBheW1lbnQgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG5lY2Vzc2FyeSBkYXRhLlxuICogQHBhcmFtIG9wdHMgLSBPcHRpb25hbCBwYXltZW50IG9wdGlvbnMuXG4gKiBAcmV0dXJucyBUaGUgcDJ3cGtoIHBheW1lbnQgb2JqZWN0LlxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiB0aGUgcmVxdWlyZWQgZGF0YSBpcyBtaXNzaW5nIG9yIGludmFsaWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwMndwa2goYSwgb3B0cykge1xuICBpZiAoIWEuYWRkcmVzcyAmJiAhYS5oYXNoICYmICFhLm91dHB1dCAmJiAhYS5wdWJrZXkgJiYgIWEud2l0bmVzcylcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdOb3QgZW5vdWdoIGRhdGEnKTtcbiAgb3B0cyA9IE9iamVjdC5hc3NpZ24oeyB2YWxpZGF0ZTogdHJ1ZSB9LCBvcHRzIHx8IHt9KTtcbiAgdi5wYXJzZShcbiAgICB2LnBhcnRpYWwoXG4gICAgICB2Lm9iamVjdCh7XG4gICAgICAgIGFkZHJlc3M6IHYuc3RyaW5nKCksXG4gICAgICAgIGhhc2g6IE5CdWZmZXJTY2hlbWFGYWN0b3J5KDIwKSxcbiAgICAgICAgaW5wdXQ6IE5CdWZmZXJTY2hlbWFGYWN0b3J5KDApLFxuICAgICAgICBuZXR3b3JrOiB2Lm9iamVjdCh7fSksXG4gICAgICAgIG91dHB1dDogTkJ1ZmZlclNjaGVtYUZhY3RvcnkoMjIpLFxuICAgICAgICBwdWJrZXk6IHYuY3VzdG9tKGlzUG9pbnQsICdOb3QgYSB2YWxpZCBwdWJrZXknKSxcbiAgICAgICAgc2lnbmF0dXJlOiB2LmN1c3RvbShic2NyaXB0LmlzQ2Fub25pY2FsU2NyaXB0U2lnbmF0dXJlKSxcbiAgICAgICAgd2l0bmVzczogdi5hcnJheShCdWZmZXJTY2hlbWEpLFxuICAgICAgfSksXG4gICAgKSxcbiAgICBhLFxuICApO1xuICBjb25zdCBfYWRkcmVzcyA9IGxhenkudmFsdWUoKCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGJlY2gzMi5kZWNvZGUoYS5hZGRyZXNzKTtcbiAgICBjb25zdCB2ZXJzaW9uID0gcmVzdWx0LndvcmRzLnNoaWZ0KCk7XG4gICAgY29uc3QgZGF0YSA9IGJlY2gzMi5mcm9tV29yZHMocmVzdWx0LndvcmRzKTtcbiAgICByZXR1cm4ge1xuICAgICAgdmVyc2lvbixcbiAgICAgIHByZWZpeDogcmVzdWx0LnByZWZpeCxcbiAgICAgIGRhdGE6IFVpbnQ4QXJyYXkuZnJvbShkYXRhKSxcbiAgICB9O1xuICB9KTtcbiAgY29uc3QgbmV0d29yayA9IGEubmV0d29yayB8fCBCSVRDT0lOX05FVFdPUks7XG4gIGNvbnN0IG8gPSB7IG5hbWU6ICdwMndwa2gnLCBuZXR3b3JrIH07XG4gIGxhenkucHJvcChvLCAnYWRkcmVzcycsICgpID0+IHtcbiAgICBpZiAoIW8uaGFzaCkgcmV0dXJuO1xuICAgIGNvbnN0IHdvcmRzID0gYmVjaDMyLnRvV29yZHMoby5oYXNoKTtcbiAgICB3b3Jkcy51bnNoaWZ0KDB4MDApO1xuICAgIHJldHVybiBiZWNoMzIuZW5jb2RlKG5ldHdvcmsuYmVjaDMyLCB3b3Jkcyk7XG4gIH0pO1xuICBsYXp5LnByb3AobywgJ2hhc2gnLCAoKSA9PiB7XG4gICAgaWYgKGEub3V0cHV0KSByZXR1cm4gYS5vdXRwdXQuc2xpY2UoMiwgMjIpO1xuICAgIGlmIChhLmFkZHJlc3MpIHJldHVybiBfYWRkcmVzcygpLmRhdGE7XG4gICAgaWYgKGEucHVia2V5IHx8IG8ucHVia2V5KSByZXR1cm4gYmNyeXB0by5oYXNoMTYwKGEucHVia2V5IHx8IG8ucHVia2V5KTtcbiAgfSk7XG4gIGxhenkucHJvcChvLCAnb3V0cHV0JywgKCkgPT4ge1xuICAgIGlmICghby5oYXNoKSByZXR1cm47XG4gICAgcmV0dXJuIGJzY3JpcHQuY29tcGlsZShbT1BTLk9QXzAsIG8uaGFzaF0pO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdwdWJrZXknLCAoKSA9PiB7XG4gICAgaWYgKGEucHVia2V5KSByZXR1cm4gYS5wdWJrZXk7XG4gICAgaWYgKCFhLndpdG5lc3MpIHJldHVybjtcbiAgICByZXR1cm4gYS53aXRuZXNzWzFdO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdzaWduYXR1cmUnLCAoKSA9PiB7XG4gICAgaWYgKCFhLndpdG5lc3MpIHJldHVybjtcbiAgICByZXR1cm4gYS53aXRuZXNzWzBdO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdpbnB1dCcsICgpID0+IHtcbiAgICBpZiAoIW8ud2l0bmVzcykgcmV0dXJuO1xuICAgIHJldHVybiBFTVBUWV9CVUZGRVI7XG4gIH0pO1xuICBsYXp5LnByb3AobywgJ3dpdG5lc3MnLCAoKSA9PiB7XG4gICAgaWYgKCFhLnB1YmtleSkgcmV0dXJuO1xuICAgIGlmICghYS5zaWduYXR1cmUpIHJldHVybjtcbiAgICByZXR1cm4gW2Euc2lnbmF0dXJlLCBhLnB1YmtleV07XG4gIH0pO1xuICAvLyBleHRlbmRlZCB2YWxpZGF0aW9uXG4gIGlmIChvcHRzLnZhbGlkYXRlKSB7XG4gICAgbGV0IGhhc2ggPSBVaW50OEFycmF5LmZyb20oW10pO1xuICAgIGlmIChhLmFkZHJlc3MpIHtcbiAgICAgIGlmIChuZXR3b3JrICYmIG5ldHdvcmsuYmVjaDMyICE9PSBfYWRkcmVzcygpLnByZWZpeClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBwcmVmaXggb3IgTmV0d29yayBtaXNtYXRjaCcpO1xuICAgICAgaWYgKF9hZGRyZXNzKCkudmVyc2lvbiAhPT0gMHgwMClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhZGRyZXNzIHZlcnNpb24nKTtcbiAgICAgIGlmIChfYWRkcmVzcygpLmRhdGEubGVuZ3RoICE9PSAyMClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhZGRyZXNzIGRhdGEnKTtcbiAgICAgIGhhc2ggPSBfYWRkcmVzcygpLmRhdGE7XG4gICAgfVxuICAgIGlmIChhLmhhc2gpIHtcbiAgICAgIGlmIChoYXNoLmxlbmd0aCA+IDAgJiYgdG9vbHMuY29tcGFyZShoYXNoLCBhLmhhc2gpICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIYXNoIG1pc21hdGNoJyk7XG4gICAgICBlbHNlIGhhc2ggPSBhLmhhc2g7XG4gICAgfVxuICAgIGlmIChhLm91dHB1dCkge1xuICAgICAgaWYgKFxuICAgICAgICBhLm91dHB1dC5sZW5ndGggIT09IDIyIHx8XG4gICAgICAgIGEub3V0cHV0WzBdICE9PSBPUFMuT1BfMCB8fFxuICAgICAgICBhLm91dHB1dFsxXSAhPT0gMHgxNFxuICAgICAgKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPdXRwdXQgaXMgaW52YWxpZCcpO1xuICAgICAgaWYgKGhhc2gubGVuZ3RoID4gMCAmJiB0b29scy5jb21wYXJlKGhhc2gsIGEub3V0cHV0LnNsaWNlKDIpKSAhPT0gMClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSGFzaCBtaXNtYXRjaCcpO1xuICAgICAgZWxzZSBoYXNoID0gYS5vdXRwdXQuc2xpY2UoMik7XG4gICAgfVxuICAgIGlmIChhLnB1YmtleSkge1xuICAgICAgY29uc3QgcGtoID0gYmNyeXB0by5oYXNoMTYwKGEucHVia2V5KTtcbiAgICAgIGlmIChoYXNoLmxlbmd0aCA+IDAgJiYgdG9vbHMuY29tcGFyZShoYXNoLCBwa2gpICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIYXNoIG1pc21hdGNoJyk7XG4gICAgICBlbHNlIGhhc2ggPSBwa2g7XG4gICAgICBpZiAoIWlzUG9pbnQoYS5wdWJrZXkpIHx8IGEucHVia2V5Lmxlbmd0aCAhPT0gMzMpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgcHVia2V5IGZvciBwMndwa2gnKTtcbiAgICB9XG4gICAgaWYgKGEud2l0bmVzcykge1xuICAgICAgaWYgKGEud2l0bmVzcy5sZW5ndGggIT09IDIpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1dpdG5lc3MgaXMgaW52YWxpZCcpO1xuICAgICAgaWYgKCFic2NyaXB0LmlzQ2Fub25pY2FsU2NyaXB0U2lnbmF0dXJlKGEud2l0bmVzc1swXSkpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1dpdG5lc3MgaGFzIGludmFsaWQgc2lnbmF0dXJlJyk7XG4gICAgICBpZiAoIWlzUG9pbnQoYS53aXRuZXNzWzFdKSB8fCBhLndpdG5lc3NbMV0ubGVuZ3RoICE9PSAzMylcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignV2l0bmVzcyBoYXMgaW52YWxpZCBwdWJrZXknKTtcbiAgICAgIGlmIChhLnNpZ25hdHVyZSAmJiB0b29scy5jb21wYXJlKGEuc2lnbmF0dXJlLCBhLndpdG5lc3NbMF0pICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdTaWduYXR1cmUgbWlzbWF0Y2gnKTtcbiAgICAgIC8vIGlmIChhLnB1YmtleSAmJiAhYS5wdWJrZXkuZXF1YWxzKGEud2l0bmVzc1sxXSkpXG4gICAgICBpZiAoYS5wdWJrZXkgJiYgdG9vbHMuY29tcGFyZShhLnB1YmtleSwgYS53aXRuZXNzWzFdKSAhPT0gMClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHVia2V5IG1pc21hdGNoJyk7XG4gICAgICBjb25zdCBwa2ggPSBiY3J5cHRvLmhhc2gxNjAoYS53aXRuZXNzWzFdKTtcbiAgICAgIGlmIChoYXNoLmxlbmd0aCA+IDAgJiYgdG9vbHMuY29tcGFyZShoYXNoLCBwa2gpICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIYXNoIG1pc21hdGNoJyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBPYmplY3QuYXNzaWduKG8sIGEpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2wpkh.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2wsh.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2wsh.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   p2wsh: () => (/* binding */ p2wsh)\n/* harmony export */ });\n/* harmony import */ var _noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @noble/hashes/sha256 */ \"(ssr)/./node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/esm/sha256.js\");\n/* harmony import */ var _networks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../networks.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var _lazy_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lazy.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/lazy.js\");\n/* harmony import */ var bech32__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! bech32 */ \"(ssr)/./node_modules/.pnpm/bech32@2.0.0/node_modules/bech32/dist/index.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n\n\n\n\n\n\n\n\nconst OPS = _script_js__WEBPACK_IMPORTED_MODULE_1__.OPS;\nconst EMPTY_BUFFER = new Uint8Array(0);\nfunction chunkHasUncompressedPubkey(chunk) {\n  if (\n    chunk instanceof Uint8Array &&\n    chunk.length === 65 &&\n    chunk[0] === 0x04 &&\n    (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.isPoint)(chunk)\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n// input: <>\n// witness: [redeemScriptSig ...] {redeemScript}\n// output: OP_0 {sha256(redeemScript)}\n/**\n * Creates a Pay-to-Witness-Script-Hash (P2WSH) payment object.\n *\n * @param a - The payment object containing the necessary data.\n * @param opts - Optional payment options.\n * @returns The P2WSH payment object.\n * @throws {TypeError} If the required data is missing or invalid.\n */\nfunction p2wsh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.witness)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  valibot__WEBPACK_IMPORTED_MODULE_6__.parse(\n    (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.NullablePartial)({\n      network: valibot__WEBPACK_IMPORTED_MODULE_6__.object({}),\n      address: valibot__WEBPACK_IMPORTED_MODULE_6__.string(),\n      hash: _types_js__WEBPACK_IMPORTED_MODULE_2__.Buffer256bitSchema,\n      output: (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.NBufferSchemaFactory)(34),\n      redeem: (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.NullablePartial)({\n        input: _types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema,\n        network: valibot__WEBPACK_IMPORTED_MODULE_6__.object({}),\n        output: _types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema,\n        witness: valibot__WEBPACK_IMPORTED_MODULE_6__.array(_types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema),\n      }),\n      input: (0,_types_js__WEBPACK_IMPORTED_MODULE_2__.NBufferSchemaFactory)(0),\n      witness: valibot__WEBPACK_IMPORTED_MODULE_6__.array(_types_js__WEBPACK_IMPORTED_MODULE_2__.BufferSchema),\n    }),\n    a,\n  );\n  const _address = _lazy_js__WEBPACK_IMPORTED_MODULE_3__.value(() => {\n    const result = bech32__WEBPACK_IMPORTED_MODULE_4__.bech32.decode(a.address);\n    const version = result.words.shift();\n    const data = bech32__WEBPACK_IMPORTED_MODULE_4__.bech32.fromWords(result.words);\n    return {\n      version,\n      prefix: result.prefix,\n      data: Uint8Array.from(data),\n    };\n  });\n  const _rchunks = _lazy_js__WEBPACK_IMPORTED_MODULE_3__.value(() => {\n    return _script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(a.redeem.input);\n  });\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || _networks_js__WEBPACK_IMPORTED_MODULE_0__.bitcoin;\n  }\n  const o = { network };\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const words = bech32__WEBPACK_IMPORTED_MODULE_4__.bech32.toWords(o.hash);\n    words.unshift(0x00);\n    return bech32__WEBPACK_IMPORTED_MODULE_4__.bech32.encode(network.bech32, words);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(2);\n    if (a.address) return _address().data;\n    if (o.redeem && o.redeem.output) return (0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_7__.sha256)(o.redeem.output);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return _script_js__WEBPACK_IMPORTED_MODULE_1__.compile([OPS.OP_0, o.hash]);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'redeem', () => {\n    if (!a.witness) return;\n    return {\n      output: a.witness[a.witness.length - 1],\n      input: EMPTY_BUFFER,\n      witness: a.witness.slice(0, -1),\n    };\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'input', () => {\n    if (!o.witness) return;\n    return EMPTY_BUFFER;\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'witness', () => {\n    // transform redeem input to witness stack?\n    if (\n      a.redeem &&\n      a.redeem.input &&\n      a.redeem.input.length > 0 &&\n      a.redeem.output &&\n      a.redeem.output.length > 0\n    ) {\n      const stack = _script_js__WEBPACK_IMPORTED_MODULE_1__.toStack(_rchunks());\n      // assign, and blank the existing input\n      o.redeem = Object.assign({ witness: stack }, a.redeem);\n      o.redeem.input = EMPTY_BUFFER;\n      return [].concat(stack, a.redeem.output);\n    }\n    if (!a.redeem) return;\n    if (!a.redeem.output) return;\n    if (!a.redeem.witness) return;\n    return [].concat(a.redeem.witness, a.redeem.output);\n  });\n  _lazy_js__WEBPACK_IMPORTED_MODULE_3__.prop(o, 'name', () => {\n    const nameParts = ['p2wsh'];\n    if (o.redeem !== undefined && o.redeem.name !== undefined)\n      nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Uint8Array.from([]);\n    if (a.address) {\n      if (_address().prefix !== network.bech32)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== 0x00)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 32)\n        throw new TypeError('Invalid address data');\n      hash = _address().data;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.compare(hash, a.hash) !== 0)\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 34 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x20\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2);\n      if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.compare(hash, hash2) !== 0)\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      // is there two redeem sources?\n      if (\n        a.redeem.input &&\n        a.redeem.input.length > 0 &&\n        a.redeem.witness &&\n        a.redeem.witness.length > 0\n      )\n        throw new TypeError('Ambiguous witness source');\n      // is the redeem output non-empty/valid?\n      if (a.redeem.output) {\n        const decompile = _script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(a.redeem.output);\n        if (!decompile || decompile.length < 1)\n          throw new TypeError('Redeem.output is invalid');\n        if (a.redeem.output.byteLength > 3600)\n          throw new TypeError(\n            'Redeem.output unspendable if larger than 3600 bytes',\n          );\n        if (_script_js__WEBPACK_IMPORTED_MODULE_1__.countNonPushOnlyOPs(decompile) > 201)\n          throw new TypeError(\n            'Redeem.output unspendable with more than 201 non-push ops',\n          );\n        // match hash against other sources\n        const hash2 = (0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_7__.sha256)(a.redeem.output);\n        if (hash.length > 0 && uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.compare(hash, hash2) !== 0)\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (a.redeem.input && !_script_js__WEBPACK_IMPORTED_MODULE_1__.isPushOnly(_rchunks()))\n        throw new TypeError('Non push-only scriptSig');\n      if (\n        a.witness &&\n        a.redeem.witness &&\n        !(0,_types_js__WEBPACK_IMPORTED_MODULE_2__.stacksEqual)(a.witness, a.redeem.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n      if (\n        (a.redeem.input && _rchunks().some(chunkHasUncompressedPubkey)) ||\n        (a.redeem.output &&\n          (_script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(a.redeem.output) || []).some(\n            chunkHasUncompressedPubkey,\n          ))\n      ) {\n        throw new TypeError(\n          'redeem.input or redeem.output contains uncompressed pubkey',\n        );\n      }\n    }\n    if (a.witness && a.witness.length > 0) {\n      const wScript = a.witness[a.witness.length - 1];\n      if (\n        a.redeem &&\n        a.redeem.output &&\n        uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.compare(a.redeem.output, wScript) !== 0\n      )\n        throw new TypeError('Witness and redeem.output mismatch');\n      if (\n        a.witness.some(chunkHasUncompressedPubkey) ||\n        (_script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(wScript) || []).some(chunkHasUncompressedPubkey)\n      )\n        throw new TypeError('Witness contains uncompressed pubkey');\n    }\n  }\n  return Object.assign(o, a);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wYXltZW50cy9wMndzaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBOEM7QUFDYztBQUNwQjtBQVFuQjtBQUNhO0FBQ0Y7QUFDVTtBQUNiO0FBQzdCLFlBQVksMkNBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrREFBTztBQUNYO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkMsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNPO0FBQ1A7QUFDQTtBQUNBLHlCQUF5QixnQkFBZ0IsWUFBWTtBQUNyRCxFQUFFLDBDQUFPO0FBQ1QsSUFBSSwwREFBZTtBQUNuQixlQUFlLDJDQUFRLEdBQUc7QUFDMUIsZUFBZSwyQ0FBUTtBQUN2QixZQUFZLHlEQUFrQjtBQUM5QixjQUFjLCtEQUFvQjtBQUNsQyxjQUFjLDBEQUFlO0FBQzdCLGVBQWUsbURBQVk7QUFDM0IsaUJBQWlCLDJDQUFRLEdBQUc7QUFDNUIsZ0JBQWdCLG1EQUFZO0FBQzVCLGlCQUFpQiwwQ0FBTyxDQUFDLG1EQUFZO0FBQ3JDLE9BQU87QUFDUCxhQUFhLCtEQUFvQjtBQUNqQyxlQUFlLDBDQUFPLENBQUMsbURBQVk7QUFDbkMsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQkFBbUIsMkNBQVU7QUFDN0IsbUJBQW1CLDBDQUFNO0FBQ3pCO0FBQ0EsaUJBQWlCLDBDQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsbUJBQW1CLDJDQUFVO0FBQzdCLFdBQVcsaURBQWlCO0FBQzVCLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZ0RBQWdELGlEQUFlO0FBQy9EO0FBQ0EsY0FBYztBQUNkLEVBQUUsMENBQVM7QUFDWDtBQUNBLGtCQUFrQiwwQ0FBTTtBQUN4QjtBQUNBLFdBQVcsMENBQU07QUFDakIsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0EsNENBQTRDLDREQUFNO0FBQ2xELEdBQUc7QUFDSCxFQUFFLDBDQUFTO0FBQ1g7QUFDQSxXQUFXLCtDQUFlO0FBQzFCLEdBQUc7QUFDSCxFQUFFLDBDQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsMENBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLCtDQUFlO0FBQ25DO0FBQ0EsaUNBQWlDLGdCQUFnQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLDBDQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIscURBQWE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixxREFBYTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixpREFBaUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwyREFBMkI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNERBQU07QUFDNUIsK0JBQStCLHFEQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrREFBa0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHNEQUFXO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGlEQUFpQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscURBQWE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGlEQUFpQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9idGMvbWlkbC14LWJpdGNvaW4tc3VtbWl0LWhhY2thdGhvbi0yMDI1L3V0eG8tcHNidC1kZW1vL25vZGVfbW9kdWxlcy8ucG5wbS9iaXRjb2luanMtbGliQDcuMC4wLXJjLjBfdHlwZXNjcmlwdEA1LjkuMi9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYi9zcmMvZXNtL3BheW1lbnRzL3Ayd3NoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNoYTI1NiB9IGZyb20gJ0Bub2JsZS9oYXNoZXMvc2hhMjU2JztcbmltcG9ydCB7IGJpdGNvaW4gYXMgQklUQ09JTl9ORVRXT1JLIH0gZnJvbSAnLi4vbmV0d29ya3MuanMnO1xuaW1wb3J0ICogYXMgYnNjcmlwdCBmcm9tICcuLi9zY3JpcHQuanMnO1xuaW1wb3J0IHtcbiAgQnVmZmVyMjU2Yml0U2NoZW1hLFxuICBCdWZmZXJTY2hlbWEsXG4gIGlzUG9pbnQsXG4gIE5CdWZmZXJTY2hlbWFGYWN0b3J5LFxuICBzdGFja3NFcXVhbCxcbiAgTnVsbGFibGVQYXJ0aWFsLFxufSBmcm9tICcuLi90eXBlcy5qcyc7XG5pbXBvcnQgKiBhcyBsYXp5IGZyb20gJy4vbGF6eS5qcyc7XG5pbXBvcnQgeyBiZWNoMzIgfSBmcm9tICdiZWNoMzInO1xuaW1wb3J0ICogYXMgdG9vbHMgZnJvbSAndWludDhhcnJheS10b29scyc7XG5pbXBvcnQgKiBhcyB2IGZyb20gJ3ZhbGlib3QnO1xuY29uc3QgT1BTID0gYnNjcmlwdC5PUFM7XG5jb25zdCBFTVBUWV9CVUZGRVIgPSBuZXcgVWludDhBcnJheSgwKTtcbmZ1bmN0aW9uIGNodW5rSGFzVW5jb21wcmVzc2VkUHVia2V5KGNodW5rKSB7XG4gIGlmIChcbiAgICBjaHVuayBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiZcbiAgICBjaHVuay5sZW5ndGggPT09IDY1ICYmXG4gICAgY2h1bmtbMF0gPT09IDB4MDQgJiZcbiAgICBpc1BvaW50KGNodW5rKVxuICApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbi8vIGlucHV0OiA8PlxuLy8gd2l0bmVzczogW3JlZGVlbVNjcmlwdFNpZyAuLi5dIHtyZWRlZW1TY3JpcHR9XG4vLyBvdXRwdXQ6IE9QXzAge3NoYTI1NihyZWRlZW1TY3JpcHQpfVxuLyoqXG4gKiBDcmVhdGVzIGEgUGF5LXRvLVdpdG5lc3MtU2NyaXB0LUhhc2ggKFAyV1NIKSBwYXltZW50IG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gYSAtIFRoZSBwYXltZW50IG9iamVjdCBjb250YWluaW5nIHRoZSBuZWNlc3NhcnkgZGF0YS5cbiAqIEBwYXJhbSBvcHRzIC0gT3B0aW9uYWwgcGF5bWVudCBvcHRpb25zLlxuICogQHJldHVybnMgVGhlIFAyV1NIIHBheW1lbnQgb2JqZWN0LlxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiB0aGUgcmVxdWlyZWQgZGF0YSBpcyBtaXNzaW5nIG9yIGludmFsaWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwMndzaChhLCBvcHRzKSB7XG4gIGlmICghYS5hZGRyZXNzICYmICFhLmhhc2ggJiYgIWEub3V0cHV0ICYmICFhLnJlZGVlbSAmJiAhYS53aXRuZXNzKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBlbm91Z2ggZGF0YScpO1xuICBvcHRzID0gT2JqZWN0LmFzc2lnbih7IHZhbGlkYXRlOiB0cnVlIH0sIG9wdHMgfHwge30pO1xuICB2LnBhcnNlKFxuICAgIE51bGxhYmxlUGFydGlhbCh7XG4gICAgICBuZXR3b3JrOiB2Lm9iamVjdCh7fSksXG4gICAgICBhZGRyZXNzOiB2LnN0cmluZygpLFxuICAgICAgaGFzaDogQnVmZmVyMjU2Yml0U2NoZW1hLFxuICAgICAgb3V0cHV0OiBOQnVmZmVyU2NoZW1hRmFjdG9yeSgzNCksXG4gICAgICByZWRlZW06IE51bGxhYmxlUGFydGlhbCh7XG4gICAgICAgIGlucHV0OiBCdWZmZXJTY2hlbWEsXG4gICAgICAgIG5ldHdvcms6IHYub2JqZWN0KHt9KSxcbiAgICAgICAgb3V0cHV0OiBCdWZmZXJTY2hlbWEsXG4gICAgICAgIHdpdG5lc3M6IHYuYXJyYXkoQnVmZmVyU2NoZW1hKSxcbiAgICAgIH0pLFxuICAgICAgaW5wdXQ6IE5CdWZmZXJTY2hlbWFGYWN0b3J5KDApLFxuICAgICAgd2l0bmVzczogdi5hcnJheShCdWZmZXJTY2hlbWEpLFxuICAgIH0pLFxuICAgIGEsXG4gICk7XG4gIGNvbnN0IF9hZGRyZXNzID0gbGF6eS52YWx1ZSgoKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYmVjaDMyLmRlY29kZShhLmFkZHJlc3MpO1xuICAgIGNvbnN0IHZlcnNpb24gPSByZXN1bHQud29yZHMuc2hpZnQoKTtcbiAgICBjb25zdCBkYXRhID0gYmVjaDMyLmZyb21Xb3JkcyhyZXN1bHQud29yZHMpO1xuICAgIHJldHVybiB7XG4gICAgICB2ZXJzaW9uLFxuICAgICAgcHJlZml4OiByZXN1bHQucHJlZml4LFxuICAgICAgZGF0YTogVWludDhBcnJheS5mcm9tKGRhdGEpLFxuICAgIH07XG4gIH0pO1xuICBjb25zdCBfcmNodW5rcyA9IGxhenkudmFsdWUoKCkgPT4ge1xuICAgIHJldHVybiBic2NyaXB0LmRlY29tcGlsZShhLnJlZGVlbS5pbnB1dCk7XG4gIH0pO1xuICBsZXQgbmV0d29yayA9IGEubmV0d29yaztcbiAgaWYgKCFuZXR3b3JrKSB7XG4gICAgbmV0d29yayA9IChhLnJlZGVlbSAmJiBhLnJlZGVlbS5uZXR3b3JrKSB8fCBCSVRDT0lOX05FVFdPUks7XG4gIH1cbiAgY29uc3QgbyA9IHsgbmV0d29yayB9O1xuICBsYXp5LnByb3AobywgJ2FkZHJlc3MnLCAoKSA9PiB7XG4gICAgaWYgKCFvLmhhc2gpIHJldHVybjtcbiAgICBjb25zdCB3b3JkcyA9IGJlY2gzMi50b1dvcmRzKG8uaGFzaCk7XG4gICAgd29yZHMudW5zaGlmdCgweDAwKTtcbiAgICByZXR1cm4gYmVjaDMyLmVuY29kZShuZXR3b3JrLmJlY2gzMiwgd29yZHMpO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdoYXNoJywgKCkgPT4ge1xuICAgIGlmIChhLm91dHB1dCkgcmV0dXJuIGEub3V0cHV0LnNsaWNlKDIpO1xuICAgIGlmIChhLmFkZHJlc3MpIHJldHVybiBfYWRkcmVzcygpLmRhdGE7XG4gICAgaWYgKG8ucmVkZWVtICYmIG8ucmVkZWVtLm91dHB1dCkgcmV0dXJuIHNoYTI1NihvLnJlZGVlbS5vdXRwdXQpO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdvdXRwdXQnLCAoKSA9PiB7XG4gICAgaWYgKCFvLmhhc2gpIHJldHVybjtcbiAgICByZXR1cm4gYnNjcmlwdC5jb21waWxlKFtPUFMuT1BfMCwgby5oYXNoXSk7XG4gIH0pO1xuICBsYXp5LnByb3AobywgJ3JlZGVlbScsICgpID0+IHtcbiAgICBpZiAoIWEud2l0bmVzcykgcmV0dXJuO1xuICAgIHJldHVybiB7XG4gICAgICBvdXRwdXQ6IGEud2l0bmVzc1thLndpdG5lc3MubGVuZ3RoIC0gMV0sXG4gICAgICBpbnB1dDogRU1QVFlfQlVGRkVSLFxuICAgICAgd2l0bmVzczogYS53aXRuZXNzLnNsaWNlKDAsIC0xKSxcbiAgICB9O1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICdpbnB1dCcsICgpID0+IHtcbiAgICBpZiAoIW8ud2l0bmVzcykgcmV0dXJuO1xuICAgIHJldHVybiBFTVBUWV9CVUZGRVI7XG4gIH0pO1xuICBsYXp5LnByb3AobywgJ3dpdG5lc3MnLCAoKSA9PiB7XG4gICAgLy8gdHJhbnNmb3JtIHJlZGVlbSBpbnB1dCB0byB3aXRuZXNzIHN0YWNrP1xuICAgIGlmIChcbiAgICAgIGEucmVkZWVtICYmXG4gICAgICBhLnJlZGVlbS5pbnB1dCAmJlxuICAgICAgYS5yZWRlZW0uaW5wdXQubGVuZ3RoID4gMCAmJlxuICAgICAgYS5yZWRlZW0ub3V0cHV0ICYmXG4gICAgICBhLnJlZGVlbS5vdXRwdXQubGVuZ3RoID4gMFxuICAgICkge1xuICAgICAgY29uc3Qgc3RhY2sgPSBic2NyaXB0LnRvU3RhY2soX3JjaHVua3MoKSk7XG4gICAgICAvLyBhc3NpZ24sIGFuZCBibGFuayB0aGUgZXhpc3RpbmcgaW5wdXRcbiAgICAgIG8ucmVkZWVtID0gT2JqZWN0LmFzc2lnbih7IHdpdG5lc3M6IHN0YWNrIH0sIGEucmVkZWVtKTtcbiAgICAgIG8ucmVkZWVtLmlucHV0ID0gRU1QVFlfQlVGRkVSO1xuICAgICAgcmV0dXJuIFtdLmNvbmNhdChzdGFjaywgYS5yZWRlZW0ub3V0cHV0KTtcbiAgICB9XG4gICAgaWYgKCFhLnJlZGVlbSkgcmV0dXJuO1xuICAgIGlmICghYS5yZWRlZW0ub3V0cHV0KSByZXR1cm47XG4gICAgaWYgKCFhLnJlZGVlbS53aXRuZXNzKSByZXR1cm47XG4gICAgcmV0dXJuIFtdLmNvbmNhdChhLnJlZGVlbS53aXRuZXNzLCBhLnJlZGVlbS5vdXRwdXQpO1xuICB9KTtcbiAgbGF6eS5wcm9wKG8sICduYW1lJywgKCkgPT4ge1xuICAgIGNvbnN0IG5hbWVQYXJ0cyA9IFsncDJ3c2gnXTtcbiAgICBpZiAoby5yZWRlZW0gIT09IHVuZGVmaW5lZCAmJiBvLnJlZGVlbS5uYW1lICE9PSB1bmRlZmluZWQpXG4gICAgICBuYW1lUGFydHMucHVzaChvLnJlZGVlbS5uYW1lKTtcbiAgICByZXR1cm4gbmFtZVBhcnRzLmpvaW4oJy0nKTtcbiAgfSk7XG4gIC8vIGV4dGVuZGVkIHZhbGlkYXRpb25cbiAgaWYgKG9wdHMudmFsaWRhdGUpIHtcbiAgICBsZXQgaGFzaCA9IFVpbnQ4QXJyYXkuZnJvbShbXSk7XG4gICAgaWYgKGEuYWRkcmVzcykge1xuICAgICAgaWYgKF9hZGRyZXNzKCkucHJlZml4ICE9PSBuZXR3b3JrLmJlY2gzMilcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBwcmVmaXggb3IgTmV0d29yayBtaXNtYXRjaCcpO1xuICAgICAgaWYgKF9hZGRyZXNzKCkudmVyc2lvbiAhPT0gMHgwMClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhZGRyZXNzIHZlcnNpb24nKTtcbiAgICAgIGlmIChfYWRkcmVzcygpLmRhdGEubGVuZ3RoICE9PSAzMilcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhZGRyZXNzIGRhdGEnKTtcbiAgICAgIGhhc2ggPSBfYWRkcmVzcygpLmRhdGE7XG4gICAgfVxuICAgIGlmIChhLmhhc2gpIHtcbiAgICAgIGlmIChoYXNoLmxlbmd0aCA+IDAgJiYgdG9vbHMuY29tcGFyZShoYXNoLCBhLmhhc2gpICE9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIYXNoIG1pc21hdGNoJyk7XG4gICAgICBlbHNlIGhhc2ggPSBhLmhhc2g7XG4gICAgfVxuICAgIGlmIChhLm91dHB1dCkge1xuICAgICAgaWYgKFxuICAgICAgICBhLm91dHB1dC5sZW5ndGggIT09IDM0IHx8XG4gICAgICAgIGEub3V0cHV0WzBdICE9PSBPUFMuT1BfMCB8fFxuICAgICAgICBhLm91dHB1dFsxXSAhPT0gMHgyMFxuICAgICAgKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPdXRwdXQgaXMgaW52YWxpZCcpO1xuICAgICAgY29uc3QgaGFzaDIgPSBhLm91dHB1dC5zbGljZSgyKTtcbiAgICAgIGlmIChoYXNoLmxlbmd0aCA+IDAgJiYgdG9vbHMuY29tcGFyZShoYXNoLCBoYXNoMikgIT09IDApXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hhc2ggbWlzbWF0Y2gnKTtcbiAgICAgIGVsc2UgaGFzaCA9IGhhc2gyO1xuICAgIH1cbiAgICBpZiAoYS5yZWRlZW0pIHtcbiAgICAgIGlmIChhLnJlZGVlbS5uZXR3b3JrICYmIGEucmVkZWVtLm5ldHdvcmsgIT09IG5ldHdvcmspXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgbWlzbWF0Y2gnKTtcbiAgICAgIC8vIGlzIHRoZXJlIHR3byByZWRlZW0gc291cmNlcz9cbiAgICAgIGlmIChcbiAgICAgICAgYS5yZWRlZW0uaW5wdXQgJiZcbiAgICAgICAgYS5yZWRlZW0uaW5wdXQubGVuZ3RoID4gMCAmJlxuICAgICAgICBhLnJlZGVlbS53aXRuZXNzICYmXG4gICAgICAgIGEucmVkZWVtLndpdG5lc3MubGVuZ3RoID4gMFxuICAgICAgKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbWJpZ3VvdXMgd2l0bmVzcyBzb3VyY2UnKTtcbiAgICAgIC8vIGlzIHRoZSByZWRlZW0gb3V0cHV0IG5vbi1lbXB0eS92YWxpZD9cbiAgICAgIGlmIChhLnJlZGVlbS5vdXRwdXQpIHtcbiAgICAgICAgY29uc3QgZGVjb21waWxlID0gYnNjcmlwdC5kZWNvbXBpbGUoYS5yZWRlZW0ub3V0cHV0KTtcbiAgICAgICAgaWYgKCFkZWNvbXBpbGUgfHwgZGVjb21waWxlLmxlbmd0aCA8IDEpXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUmVkZWVtLm91dHB1dCBpcyBpbnZhbGlkJyk7XG4gICAgICAgIGlmIChhLnJlZGVlbS5vdXRwdXQuYnl0ZUxlbmd0aCA+IDM2MDApXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICdSZWRlZW0ub3V0cHV0IHVuc3BlbmRhYmxlIGlmIGxhcmdlciB0aGFuIDM2MDAgYnl0ZXMnLFxuICAgICAgICAgICk7XG4gICAgICAgIGlmIChic2NyaXB0LmNvdW50Tm9uUHVzaE9ubHlPUHMoZGVjb21waWxlKSA+IDIwMSlcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgJ1JlZGVlbS5vdXRwdXQgdW5zcGVuZGFibGUgd2l0aCBtb3JlIHRoYW4gMjAxIG5vbi1wdXNoIG9wcycsXG4gICAgICAgICAgKTtcbiAgICAgICAgLy8gbWF0Y2ggaGFzaCBhZ2FpbnN0IG90aGVyIHNvdXJjZXNcbiAgICAgICAgY29uc3QgaGFzaDIgPSBzaGEyNTYoYS5yZWRlZW0ub3V0cHV0KTtcbiAgICAgICAgaWYgKGhhc2gubGVuZ3RoID4gMCAmJiB0b29scy5jb21wYXJlKGhhc2gsIGhhc2gyKSAhPT0gMClcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIYXNoIG1pc21hdGNoJyk7XG4gICAgICAgIGVsc2UgaGFzaCA9IGhhc2gyO1xuICAgICAgfVxuICAgICAgaWYgKGEucmVkZWVtLmlucHV0ICYmICFic2NyaXB0LmlzUHVzaE9ubHkoX3JjaHVua3MoKSkpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vbiBwdXNoLW9ubHkgc2NyaXB0U2lnJyk7XG4gICAgICBpZiAoXG4gICAgICAgIGEud2l0bmVzcyAmJlxuICAgICAgICBhLnJlZGVlbS53aXRuZXNzICYmXG4gICAgICAgICFzdGFja3NFcXVhbChhLndpdG5lc3MsIGEucmVkZWVtLndpdG5lc3MpXG4gICAgICApXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1dpdG5lc3MgYW5kIHJlZGVlbS53aXRuZXNzIG1pc21hdGNoJyk7XG4gICAgICBpZiAoXG4gICAgICAgIChhLnJlZGVlbS5pbnB1dCAmJiBfcmNodW5rcygpLnNvbWUoY2h1bmtIYXNVbmNvbXByZXNzZWRQdWJrZXkpKSB8fFxuICAgICAgICAoYS5yZWRlZW0ub3V0cHV0ICYmXG4gICAgICAgICAgKGJzY3JpcHQuZGVjb21waWxlKGEucmVkZWVtLm91dHB1dCkgfHwgW10pLnNvbWUoXG4gICAgICAgICAgICBjaHVua0hhc1VuY29tcHJlc3NlZFB1YmtleSxcbiAgICAgICAgICApKVxuICAgICAgKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgJ3JlZGVlbS5pbnB1dCBvciByZWRlZW0ub3V0cHV0IGNvbnRhaW5zIHVuY29tcHJlc3NlZCBwdWJrZXknLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYS53aXRuZXNzICYmIGEud2l0bmVzcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB3U2NyaXB0ID0gYS53aXRuZXNzW2Eud2l0bmVzcy5sZW5ndGggLSAxXTtcbiAgICAgIGlmIChcbiAgICAgICAgYS5yZWRlZW0gJiZcbiAgICAgICAgYS5yZWRlZW0ub3V0cHV0ICYmXG4gICAgICAgIHRvb2xzLmNvbXBhcmUoYS5yZWRlZW0ub3V0cHV0LCB3U2NyaXB0KSAhPT0gMFxuICAgICAgKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdXaXRuZXNzIGFuZCByZWRlZW0ub3V0cHV0IG1pc21hdGNoJyk7XG4gICAgICBpZiAoXG4gICAgICAgIGEud2l0bmVzcy5zb21lKGNodW5rSGFzVW5jb21wcmVzc2VkUHVia2V5KSB8fFxuICAgICAgICAoYnNjcmlwdC5kZWNvbXBpbGUod1NjcmlwdCkgfHwgW10pLnNvbWUoY2h1bmtIYXNVbmNvbXByZXNzZWRQdWJrZXkpXG4gICAgICApXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1dpdG5lc3MgY29udGFpbnMgdW5jb21wcmVzc2VkIHB1YmtleScpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihvLCBhKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/p2wsh.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Psbt: () => (/* binding */ Psbt)\n/* harmony export */ });\n/* harmony import */ var bip174__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bip174 */ \"(ssr)/./node_modules/.pnpm/bip174@3.0.0-rc.1/node_modules/bip174/src/esm/lib/psbt.js\");\n/* harmony import */ var varuint_bitcoin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! varuint-bitcoin */ \"(ssr)/./node_modules/.pnpm/varuint-bitcoin@2.0.0/node_modules/varuint-bitcoin/src/esm/index.js\");\n/* harmony import */ var _address_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./address.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/address.js\");\n/* harmony import */ var _bufferutils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./bufferutils.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/bufferutils.js\");\n/* harmony import */ var _networks_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./networks.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/networks.js\");\n/* harmony import */ var _payments_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./payments/index.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/index.js\");\n/* harmony import */ var _payments_bip341_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./payments/bip341.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/bip341.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _transaction_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./transaction.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/transaction.js\");\n/* harmony import */ var _psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./psbt/bip371.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt/bip371.js\");\n/* harmony import */ var _psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./psbt/psbtutils.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt/psbtutils.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * These are the default arguments for a Psbt instance.\n */\nconst DEFAULT_OPTS = {\n  /**\n   * A bitcoinjs Network object. This is only used if you pass an `address`\n   * parameter to addOutput. Otherwise it is not needed and can be left default.\n   */\n  network: _networks_js__WEBPACK_IMPORTED_MODULE_4__.bitcoin,\n  /**\n   * When extractTransaction is called, the fee rate is checked.\n   * THIS IS NOT TO BE RELIED ON.\n   * It is only here as a last ditch effort to prevent sending a 500 BTC fee etc.\n   */\n  maximumFeeRate: 5000, // satoshi per byte\n};\n/**\n * Psbt class can parse and generate a PSBT binary based off of the BIP174.\n * There are 6 roles that this class fulfills. (Explained in BIP174)\n *\n * Creator: This can be done with `new Psbt()`\n *\n * Updater: This can be done with `psbt.addInput(input)`, `psbt.addInputs(inputs)`,\n *   `psbt.addOutput(output)`, `psbt.addOutputs(outputs)` when you are looking to\n *   add new inputs and outputs to the PSBT, and `psbt.updateGlobal(itemObject)`,\n *   `psbt.updateInput(itemObject)`, `psbt.updateOutput(itemObject)`\n *   addInput requires hash: Buffer | string; and index: number; as attributes\n *   and can also include any attributes that are used in updateInput method.\n *   addOutput requires script: Buffer; and value: number; and likewise can include\n *   data for updateOutput.\n *   For a list of what attributes should be what types. Check the bip174 library.\n *   Also, check the integration tests for some examples of usage.\n *\n * Signer: There are a few methods. signAllInputs and signAllInputsAsync, which will search all input\n *   information for your pubkey or pubkeyhash, and only sign inputs where it finds\n *   your info. Or you can explicitly sign a specific input with signInput and\n *   signInputAsync. For the async methods you can create a SignerAsync object\n *   and use something like a hardware wallet to sign with. (You must implement this)\n *\n * Combiner: psbts can be combined easily with `psbt.combine(psbt2, psbt3, psbt4 ...)`\n *   the psbt calling combine will always have precedence when a conflict occurs.\n *   Combine checks if the internal bitcoin transaction is the same, so be sure that\n *   all sequences, version, locktime, etc. are the same before combining.\n *\n * Input Finalizer: This role is fairly important. Not only does it need to construct\n *   the input scriptSigs and witnesses, but it SHOULD verify the signatures etc.\n *   Before running `psbt.finalizeAllInputs()` please run `psbt.validateSignaturesOfAllInputs()`\n *   Running any finalize method will delete any data in the input(s) that are no longer\n *   needed due to the finalized scripts containing the information.\n *\n * Transaction Extractor: This role will perform some checks before returning a\n *   Transaction object. Such as fee rate not being larger than maximumFeeRate etc.\n */\nclass Psbt {\n  data;\n  static fromBase64(data, opts = {}) {\n    const buffer = uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.fromBase64(data);\n    return this.fromBuffer(buffer, opts);\n  }\n  static fromHex(data, opts = {}) {\n    const buffer = uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.fromHex(data);\n    return this.fromBuffer(buffer, opts);\n  }\n  static fromBuffer(buffer, opts = {}) {\n    const psbtBase = bip174__WEBPACK_IMPORTED_MODULE_0__.Psbt.fromBuffer(buffer, transactionFromBuffer);\n    const psbt = new Psbt(opts, psbtBase);\n    checkTxForDupeIns(psbt.__CACHE.__TX, psbt.__CACHE);\n    return psbt;\n  }\n  __CACHE;\n  opts;\n  constructor(opts = {}, data = new bip174__WEBPACK_IMPORTED_MODULE_0__.Psbt(new PsbtTransaction())) {\n    this.data = data;\n    // set defaults\n    this.opts = Object.assign({}, DEFAULT_OPTS, opts);\n    this.__CACHE = {\n      __NON_WITNESS_UTXO_TX_CACHE: [],\n      __NON_WITNESS_UTXO_BUF_CACHE: [],\n      __TX_IN_CACHE: {},\n      __TX: this.data.globalMap.unsignedTx.tx,\n      // Psbt's predecessor (TransactionBuilder - now removed) behavior\n      // was to not confirm input values  before signing.\n      // Even though we highly encourage people to get\n      // the full parent transaction to verify values, the ability to\n      // sign non-segwit inputs without the full transaction was often\n      // requested. So the only way to activate is to use @ts-ignore.\n      // We will disable exporting the Psbt when unsafe sign is active.\n      // because it is not BIP174 compliant.\n      __UNSAFE_SIGN_NONSEGWIT: false,\n    };\n    if (this.data.inputs.length === 0) this.setVersion(2);\n    // Make data hidden when enumerating\n    const dpew = (obj, attr, enumerable, writable) =>\n      Object.defineProperty(obj, attr, {\n        enumerable,\n        writable,\n      });\n    dpew(this, '__CACHE', false, true);\n    dpew(this, 'opts', false, true);\n  }\n  get inputCount() {\n    return this.data.inputs.length;\n  }\n  get version() {\n    return this.__CACHE.__TX.version;\n  }\n  set version(version) {\n    this.setVersion(version);\n  }\n  get locktime() {\n    return this.__CACHE.__TX.locktime;\n  }\n  set locktime(locktime) {\n    this.setLocktime(locktime);\n  }\n  get txInputs() {\n    return this.__CACHE.__TX.ins.map(input => ({\n      hash: (0,_bufferutils_js__WEBPACK_IMPORTED_MODULE_3__.cloneBuffer)(input.hash),\n      index: input.index,\n      sequence: input.sequence,\n    }));\n  }\n  get txOutputs() {\n    return this.__CACHE.__TX.outs.map(output => {\n      let address;\n      try {\n        address = (0,_address_js__WEBPACK_IMPORTED_MODULE_2__.fromOutputScript)(output.script, this.opts.network);\n      } catch (_) {}\n      return {\n        script: (0,_bufferutils_js__WEBPACK_IMPORTED_MODULE_3__.cloneBuffer)(output.script),\n        value: output.value,\n        address,\n      };\n    });\n  }\n  combine(...those) {\n    this.data.combine(...those.map(o => o.data));\n    return this;\n  }\n  clone() {\n    // TODO: more efficient cloning\n    const res = Psbt.fromBuffer(this.data.toBuffer());\n    res.opts = JSON.parse(JSON.stringify(this.opts));\n    return res;\n  }\n  setMaximumFeeRate(satoshiPerByte) {\n    check32Bit(satoshiPerByte); // 42.9 BTC per byte IS excessive... so throw\n    this.opts.maximumFeeRate = satoshiPerByte;\n  }\n  setVersion(version) {\n    check32Bit(version);\n    checkInputsForPartialSig(this.data.inputs, 'setVersion');\n    const c = this.__CACHE;\n    c.__TX.version = version;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  setLocktime(locktime) {\n    check32Bit(locktime);\n    checkInputsForPartialSig(this.data.inputs, 'setLocktime');\n    const c = this.__CACHE;\n    c.__TX.locktime = locktime;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  setInputSequence(inputIndex, sequence) {\n    check32Bit(sequence);\n    checkInputsForPartialSig(this.data.inputs, 'setInputSequence');\n    const c = this.__CACHE;\n    if (c.__TX.ins.length <= inputIndex) {\n      throw new Error('Input index too high');\n    }\n    c.__TX.ins[inputIndex].sequence = sequence;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  addInputs(inputDatas) {\n    inputDatas.forEach(inputData => this.addInput(inputData));\n    return this;\n  }\n  addInput(inputData) {\n    if (\n      arguments.length > 1 ||\n      !inputData ||\n      inputData.hash === undefined ||\n      inputData.index === undefined\n    ) {\n      throw new Error(\n        `Invalid arguments for Psbt.addInput. ` +\n          `Requires single object with at least [hash] and [index]`,\n      );\n    }\n    (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.checkTaprootInputFields)(inputData, inputData, 'addInput');\n    checkInputsForPartialSig(this.data.inputs, 'addInput');\n    if (inputData.witnessScript) checkInvalidP2WSH(inputData.witnessScript);\n    const c = this.__CACHE;\n    this.data.addInput(inputData);\n    const txIn = c.__TX.ins[c.__TX.ins.length - 1];\n    checkTxInputCache(c, txIn);\n    const inputIndex = this.data.inputs.length - 1;\n    const input = this.data.inputs[inputIndex];\n    if (input.nonWitnessUtxo) {\n      addNonWitnessTxCache(this.__CACHE, input, inputIndex);\n    }\n    c.__FEE = undefined;\n    c.__FEE_RATE = undefined;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  addOutputs(outputDatas) {\n    outputDatas.forEach(outputData => this.addOutput(outputData));\n    return this;\n  }\n  addOutput(outputData) {\n    if (\n      arguments.length > 1 ||\n      !outputData ||\n      outputData.value === undefined ||\n      (outputData.address === undefined && outputData.script === undefined)\n    ) {\n      throw new Error(\n        `Invalid arguments for Psbt.addOutput. ` +\n          `Requires single object with at least [script or address] and [value]`,\n      );\n    }\n    checkInputsForPartialSig(this.data.inputs, 'addOutput');\n    const { address } = outputData;\n    if (typeof address === 'string') {\n      const { network } = this.opts;\n      const script = (0,_address_js__WEBPACK_IMPORTED_MODULE_2__.toOutputScript)(address, network);\n      outputData = Object.assign({}, outputData, { script });\n    }\n    (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.checkTaprootOutputFields)(outputData, outputData, 'addOutput');\n    const c = this.__CACHE;\n    this.data.addOutput(outputData);\n    c.__FEE = undefined;\n    c.__FEE_RATE = undefined;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  extractTransaction(disableFeeCheck) {\n    if (!this.data.inputs.every(isFinalized)) throw new Error('Not finalized');\n    const c = this.__CACHE;\n    if (!disableFeeCheck) {\n      checkFees(this, c, this.opts);\n    }\n    if (c.__EXTRACTED_TX) return c.__EXTRACTED_TX;\n    const tx = c.__TX.clone();\n    inputFinalizeGetAmts(this.data.inputs, tx, c, true);\n    return tx;\n  }\n  getFeeRate() {\n    return getTxCacheValue(\n      '__FEE_RATE',\n      'fee rate',\n      this.data.inputs,\n      this.__CACHE,\n    );\n  }\n  getFee() {\n    return getTxCacheValue('__FEE', 'fee', this.data.inputs, this.__CACHE);\n  }\n  finalizeAllInputs() {\n    (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(this.data.inputs, 0); // making sure we have at least one\n    range(this.data.inputs.length).forEach(idx => this.finalizeInput(idx));\n    return this;\n  }\n  finalizeInput(inputIndex, finalScriptsFunc) {\n    const input = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(this.data.inputs, inputIndex);\n    if ((0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.isTaprootInput)(input))\n      return this._finalizeTaprootInput(\n        inputIndex,\n        input,\n        undefined,\n        finalScriptsFunc,\n      );\n    return this._finalizeInput(inputIndex, input, finalScriptsFunc);\n  }\n  finalizeTaprootInput(\n    inputIndex,\n    tapLeafHashToFinalize,\n    finalScriptsFunc = _psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.tapScriptFinalizer,\n  ) {\n    const input = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(this.data.inputs, inputIndex);\n    if ((0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.isTaprootInput)(input))\n      return this._finalizeTaprootInput(\n        inputIndex,\n        input,\n        tapLeafHashToFinalize,\n        finalScriptsFunc,\n      );\n    throw new Error(`Cannot finalize input #${inputIndex}. Not Taproot.`);\n  }\n  _finalizeInput(inputIndex, input, finalScriptsFunc = getFinalScripts) {\n    const { script, isP2SH, isP2WSH, isSegwit } = getScriptFromInput(\n      inputIndex,\n      input,\n      this.__CACHE,\n    );\n    if (!script) throw new Error(`No script found for input #${inputIndex}`);\n    checkPartialSigSighashes(input);\n    const { finalScriptSig, finalScriptWitness } = finalScriptsFunc(\n      inputIndex,\n      input,\n      script,\n      isSegwit,\n      isP2SH,\n      isP2WSH,\n    );\n    if (finalScriptSig) this.data.updateInput(inputIndex, { finalScriptSig });\n    if (finalScriptWitness)\n      this.data.updateInput(inputIndex, { finalScriptWitness });\n    if (!finalScriptSig && !finalScriptWitness)\n      throw new Error(`Unknown error finalizing input #${inputIndex}`);\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n  _finalizeTaprootInput(\n    inputIndex,\n    input,\n    tapLeafHashToFinalize,\n    finalScriptsFunc = _psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.tapScriptFinalizer,\n  ) {\n    if (!input.witnessUtxo)\n      throw new Error(\n        `Cannot finalize input #${inputIndex}. Missing withness utxo.`,\n      );\n    // Check key spend first. Increased privacy and reduced block space.\n    if (input.tapKeySig) {\n      const payment = _payments_index_js__WEBPACK_IMPORTED_MODULE_5__.p2tr({\n        output: input.witnessUtxo.script,\n        signature: input.tapKeySig,\n      });\n      const finalScriptWitness = (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.witnessStackToScriptWitness)(payment.witness);\n      this.data.updateInput(inputIndex, { finalScriptWitness });\n    } else {\n      const { finalScriptWitness } = finalScriptsFunc(\n        inputIndex,\n        input,\n        tapLeafHashToFinalize,\n      );\n      this.data.updateInput(inputIndex, { finalScriptWitness });\n    }\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n  getInputType(inputIndex) {\n    const input = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(this.data.inputs, inputIndex);\n    const script = getScriptFromUtxo(inputIndex, input, this.__CACHE);\n    const result = getMeaningfulScript(\n      script,\n      inputIndex,\n      'input',\n      input.redeemScript || redeemFromFinalScriptSig(input.finalScriptSig),\n      input.witnessScript ||\n        redeemFromFinalWitnessScript(input.finalScriptWitness),\n    );\n    const type = result.type === 'raw' ? '' : result.type + '-';\n    const mainType = classifyScript(result.meaningfulScript);\n    return type + mainType;\n  }\n  inputHasPubkey(inputIndex, pubkey) {\n    const input = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(this.data.inputs, inputIndex);\n    return pubkeyInInput(pubkey, input, inputIndex, this.__CACHE);\n  }\n  inputHasHDKey(inputIndex, root) {\n    const input = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(this.data.inputs, inputIndex);\n    const derivationIsMine = bip32DerivationIsMine(root);\n    return (\n      !!input.bip32Derivation && input.bip32Derivation.some(derivationIsMine)\n    );\n  }\n  outputHasPubkey(outputIndex, pubkey) {\n    const output = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForOutput)(this.data.outputs, outputIndex);\n    return pubkeyInOutput(pubkey, output, outputIndex, this.__CACHE);\n  }\n  outputHasHDKey(outputIndex, root) {\n    const output = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForOutput)(this.data.outputs, outputIndex);\n    const derivationIsMine = bip32DerivationIsMine(root);\n    return (\n      !!output.bip32Derivation && output.bip32Derivation.some(derivationIsMine)\n    );\n  }\n  validateSignaturesOfAllInputs(validator) {\n    (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(this.data.inputs, 0); // making sure we have at least one\n    const results = range(this.data.inputs.length).map(idx =>\n      this.validateSignaturesOfInput(idx, validator),\n    );\n    return results.reduce((final, res) => res === true && final, true);\n  }\n  validateSignaturesOfInput(inputIndex, validator, pubkey) {\n    const input = this.data.inputs[inputIndex];\n    if ((0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.isTaprootInput)(input))\n      return this.validateSignaturesOfTaprootInput(\n        inputIndex,\n        validator,\n        pubkey,\n      );\n    return this._validateSignaturesOfInput(inputIndex, validator, pubkey);\n  }\n  _validateSignaturesOfInput(inputIndex, validator, pubkey) {\n    const input = this.data.inputs[inputIndex];\n    const partialSig = (input || {}).partialSig;\n    if (!input || !partialSig || partialSig.length < 1)\n      throw new Error('No signatures to validate');\n    if (typeof validator !== 'function')\n      throw new Error('Need validator function to validate signatures');\n    const mySigs = pubkey\n      ? partialSig.filter(sig => uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.compare(sig.pubkey, pubkey) === 0)\n      : partialSig;\n    if (mySigs.length < 1) throw new Error('No signatures for this pubkey');\n    const results = [];\n    let hashCache;\n    let scriptCache;\n    let sighashCache;\n    for (const pSig of mySigs) {\n      const sig = _script_js__WEBPACK_IMPORTED_MODULE_7__.signature.decode(pSig.signature);\n      const { hash, script } =\n        sighashCache !== sig.hashType\n          ? getHashForSig(\n              inputIndex,\n              Object.assign({}, input, { sighashType: sig.hashType }),\n              this.__CACHE,\n              true,\n            )\n          : { hash: hashCache, script: scriptCache };\n      sighashCache = sig.hashType;\n      hashCache = hash;\n      scriptCache = script;\n      checkScriptForPubkey(pSig.pubkey, script, 'verify');\n      results.push(validator(pSig.pubkey, hash, sig.signature));\n    }\n    return results.every(res => res === true);\n  }\n  validateSignaturesOfTaprootInput(inputIndex, validator, pubkey) {\n    const input = this.data.inputs[inputIndex];\n    const tapKeySig = (input || {}).tapKeySig;\n    const tapScriptSig = (input || {}).tapScriptSig;\n    if (!input && !tapKeySig && !(tapScriptSig && !tapScriptSig.length))\n      throw new Error('No signatures to validate');\n    if (typeof validator !== 'function')\n      throw new Error('Need validator function to validate signatures');\n    pubkey = pubkey && (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.toXOnly)(pubkey);\n    const allHashses = pubkey\n      ? getTaprootHashesForSig(\n          inputIndex,\n          input,\n          this.data.inputs,\n          pubkey,\n          this.__CACHE,\n        )\n      : getAllTaprootHashesForSig(\n          inputIndex,\n          input,\n          this.data.inputs,\n          this.__CACHE,\n        );\n    if (!allHashses.length) throw new Error('No signatures for this pubkey');\n    const tapKeyHash = allHashses.find(h => !h.leafHash);\n    let validationResultCount = 0;\n    if (tapKeySig && tapKeyHash) {\n      const isValidTapkeySig = validator(\n        tapKeyHash.pubkey,\n        tapKeyHash.hash,\n        trimTaprootSig(tapKeySig),\n      );\n      if (!isValidTapkeySig) return false;\n      validationResultCount++;\n    }\n    if (tapScriptSig) {\n      for (const tapSig of tapScriptSig) {\n        const tapSigHash = allHashses.find(\n          h => uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.compare(h.pubkey, tapSig.pubkey) === 0,\n        );\n        if (tapSigHash) {\n          const isValidTapScriptSig = validator(\n            tapSig.pubkey,\n            tapSigHash.hash,\n            trimTaprootSig(tapSig.signature),\n          );\n          if (!isValidTapScriptSig) return false;\n          validationResultCount++;\n        }\n      }\n    }\n    return validationResultCount > 0;\n  }\n  signAllInputsHD(hdKeyPair, sighashTypes = [_transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_ALL]) {\n    if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n      throw new Error('Need HDSigner to sign input');\n    }\n    const results = [];\n    for (const i of range(this.data.inputs.length)) {\n      try {\n        this.signInputHD(i, hdKeyPair, sighashTypes);\n        results.push(true);\n      } catch (err) {\n        results.push(false);\n      }\n    }\n    if (results.every(v => v === false)) {\n      throw new Error('No inputs were signed');\n    }\n    return this;\n  }\n  signAllInputsHDAsync(hdKeyPair, sighashTypes = [_transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_ALL]) {\n    return new Promise((resolve, reject) => {\n      if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n        return reject(new Error('Need HDSigner to sign input'));\n      }\n      const results = [];\n      const promises = [];\n      for (const i of range(this.data.inputs.length)) {\n        promises.push(\n          this.signInputHDAsync(i, hdKeyPair, sighashTypes).then(\n            () => {\n              results.push(true);\n            },\n            () => {\n              results.push(false);\n            },\n          ),\n        );\n      }\n      return Promise.all(promises).then(() => {\n        if (results.every(v => v === false)) {\n          return reject(new Error('No inputs were signed'));\n        }\n        resolve();\n      });\n    });\n  }\n  signInputHD(inputIndex, hdKeyPair, sighashTypes = [_transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_ALL]) {\n    if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n      throw new Error('Need HDSigner to sign input');\n    }\n    const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);\n    signers.forEach(signer => this.signInput(inputIndex, signer, sighashTypes));\n    return this;\n  }\n  signInputHDAsync(\n    inputIndex,\n    hdKeyPair,\n    sighashTypes = [_transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n        return reject(new Error('Need HDSigner to sign input'));\n      }\n      const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);\n      const promises = signers.map(signer =>\n        this.signInputAsync(inputIndex, signer, sighashTypes),\n      );\n      return Promise.all(promises)\n        .then(() => {\n          resolve();\n        })\n        .catch(reject);\n    });\n  }\n  signAllInputs(keyPair, sighashTypes) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    // TODO: Add a pubkey/pubkeyhash cache to each input\n    // as input information is added, then eventually\n    // optimize this method.\n    const results = [];\n    for (const i of range(this.data.inputs.length)) {\n      try {\n        this.signInput(i, keyPair, sighashTypes);\n        results.push(true);\n      } catch (err) {\n        results.push(false);\n      }\n    }\n    if (results.every(v => v === false)) {\n      throw new Error('No inputs were signed');\n    }\n    return this;\n  }\n  signAllInputsAsync(keyPair, sighashTypes) {\n    return new Promise((resolve, reject) => {\n      if (!keyPair || !keyPair.publicKey)\n        return reject(new Error('Need Signer to sign input'));\n      // TODO: Add a pubkey/pubkeyhash cache to each input\n      // as input information is added, then eventually\n      // optimize this method.\n      const results = [];\n      const promises = [];\n      for (const [i] of this.data.inputs.entries()) {\n        promises.push(\n          this.signInputAsync(i, keyPair, sighashTypes).then(\n            () => {\n              results.push(true);\n            },\n            () => {\n              results.push(false);\n            },\n          ),\n        );\n      }\n      return Promise.all(promises).then(() => {\n        if (results.every(v => v === false)) {\n          return reject(new Error('No inputs were signed'));\n        }\n        resolve();\n      });\n    });\n  }\n  signInput(inputIndex, keyPair, sighashTypes) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    const input = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(this.data.inputs, inputIndex);\n    if ((0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.isTaprootInput)(input)) {\n      return this._signTaprootInput(\n        inputIndex,\n        input,\n        keyPair,\n        undefined,\n        sighashTypes,\n      );\n    }\n    return this._signInput(inputIndex, keyPair, sighashTypes);\n  }\n  signTaprootInput(inputIndex, keyPair, tapLeafHashToSign, sighashTypes) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    const input = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(this.data.inputs, inputIndex);\n    if ((0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.isTaprootInput)(input))\n      return this._signTaprootInput(\n        inputIndex,\n        input,\n        keyPair,\n        tapLeafHashToSign,\n        sighashTypes,\n      );\n    throw new Error(`Input #${inputIndex} is not of type Taproot.`);\n  }\n  _signInput(inputIndex, keyPair, sighashTypes = [_transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_ALL]) {\n    const { hash, sighashType } = getHashAndSighashType(\n      this.data.inputs,\n      inputIndex,\n      keyPair.publicKey,\n      this.__CACHE,\n      sighashTypes,\n    );\n    const partialSig = [\n      {\n        pubkey: keyPair.publicKey,\n        signature: _script_js__WEBPACK_IMPORTED_MODULE_7__.signature.encode(keyPair.sign(hash), sighashType),\n      },\n    ];\n    this.data.updateInput(inputIndex, { partialSig });\n    return this;\n  }\n  _signTaprootInput(\n    inputIndex,\n    input,\n    keyPair,\n    tapLeafHashToSign,\n    allowedSighashTypes = [_transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_DEFAULT],\n  ) {\n    const hashesForSig = this.checkTaprootHashesForSig(\n      inputIndex,\n      input,\n      keyPair,\n      tapLeafHashToSign,\n      allowedSighashTypes,\n    );\n    const tapKeySig = hashesForSig\n      .filter(h => !h.leafHash)\n      .map(h =>\n        (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.serializeTaprootSignature)(\n          keyPair.signSchnorr(h.hash),\n          input.sighashType,\n        ),\n      )[0];\n    const tapScriptSig = hashesForSig\n      .filter(h => !!h.leafHash)\n      .map(h => ({\n        pubkey: (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.toXOnly)(keyPair.publicKey),\n        signature: (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.serializeTaprootSignature)(\n          keyPair.signSchnorr(h.hash),\n          input.sighashType,\n        ),\n        leafHash: h.leafHash,\n      }));\n    if (tapKeySig) {\n      this.data.updateInput(inputIndex, { tapKeySig });\n    }\n    if (tapScriptSig.length) {\n      this.data.updateInput(inputIndex, { tapScriptSig });\n    }\n    return this;\n  }\n  signInputAsync(inputIndex, keyPair, sighashTypes) {\n    return Promise.resolve().then(() => {\n      if (!keyPair || !keyPair.publicKey)\n        throw new Error('Need Signer to sign input');\n      const input = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(this.data.inputs, inputIndex);\n      if ((0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.isTaprootInput)(input))\n        return this._signTaprootInputAsync(\n          inputIndex,\n          input,\n          keyPair,\n          undefined,\n          sighashTypes,\n        );\n      return this._signInputAsync(inputIndex, keyPair, sighashTypes);\n    });\n  }\n  signTaprootInputAsync(inputIndex, keyPair, tapLeafHash, sighashTypes) {\n    return Promise.resolve().then(() => {\n      if (!keyPair || !keyPair.publicKey)\n        throw new Error('Need Signer to sign input');\n      const input = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(this.data.inputs, inputIndex);\n      if ((0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.isTaprootInput)(input))\n        return this._signTaprootInputAsync(\n          inputIndex,\n          input,\n          keyPair,\n          tapLeafHash,\n          sighashTypes,\n        );\n      throw new Error(`Input #${inputIndex} is not of type Taproot.`);\n    });\n  }\n  _signInputAsync(\n    inputIndex,\n    keyPair,\n    sighashTypes = [_transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_ALL],\n  ) {\n    const { hash, sighashType } = getHashAndSighashType(\n      this.data.inputs,\n      inputIndex,\n      keyPair.publicKey,\n      this.__CACHE,\n      sighashTypes,\n    );\n    return Promise.resolve(keyPair.sign(hash)).then(signature => {\n      const partialSig = [\n        {\n          pubkey: keyPair.publicKey,\n          signature: _script_js__WEBPACK_IMPORTED_MODULE_7__.signature.encode(signature, sighashType),\n        },\n      ];\n      this.data.updateInput(inputIndex, { partialSig });\n    });\n  }\n  async _signTaprootInputAsync(\n    inputIndex,\n    input,\n    keyPair,\n    tapLeafHash,\n    sighashTypes = [_transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_DEFAULT],\n  ) {\n    const hashesForSig = this.checkTaprootHashesForSig(\n      inputIndex,\n      input,\n      keyPair,\n      tapLeafHash,\n      sighashTypes,\n    );\n    const signaturePromises = [];\n    const tapKeyHash = hashesForSig.filter(h => !h.leafHash)[0];\n    if (tapKeyHash) {\n      const tapKeySigPromise = Promise.resolve(\n        keyPair.signSchnorr(tapKeyHash.hash),\n      ).then(sig => {\n        return { tapKeySig: (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.serializeTaprootSignature)(sig, input.sighashType) };\n      });\n      signaturePromises.push(tapKeySigPromise);\n    }\n    const tapScriptHashes = hashesForSig.filter(h => !!h.leafHash);\n    if (tapScriptHashes.length) {\n      const tapScriptSigPromises = tapScriptHashes.map(tsh => {\n        return Promise.resolve(keyPair.signSchnorr(tsh.hash)).then(\n          signature => {\n            const tapScriptSig = [\n              {\n                pubkey: (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.toXOnly)(keyPair.publicKey),\n                signature: (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.serializeTaprootSignature)(\n                  signature,\n                  input.sighashType,\n                ),\n                leafHash: tsh.leafHash,\n              },\n            ];\n            return { tapScriptSig };\n          },\n        );\n      });\n      signaturePromises.push(...tapScriptSigPromises);\n    }\n    return Promise.all(signaturePromises).then(results => {\n      results.forEach(v => this.data.updateInput(inputIndex, v));\n    });\n  }\n  checkTaprootHashesForSig(\n    inputIndex,\n    input,\n    keyPair,\n    tapLeafHashToSign,\n    allowedSighashTypes,\n  ) {\n    if (typeof keyPair.signSchnorr !== 'function')\n      throw new Error(\n        `Need Schnorr Signer to sign taproot input #${inputIndex}.`,\n      );\n    const hashesForSig = getTaprootHashesForSig(\n      inputIndex,\n      input,\n      this.data.inputs,\n      keyPair.publicKey,\n      this.__CACHE,\n      tapLeafHashToSign,\n      allowedSighashTypes,\n    );\n    if (!hashesForSig || !hashesForSig.length)\n      throw new Error(\n        `Can not sign for input #${inputIndex} with the key ${uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.toHex(keyPair.publicKey)}`,\n      );\n    return hashesForSig;\n  }\n  toBuffer() {\n    checkCache(this.__CACHE);\n    return this.data.toBuffer();\n  }\n  toHex() {\n    checkCache(this.__CACHE);\n    return this.data.toHex();\n  }\n  toBase64() {\n    checkCache(this.__CACHE);\n    return this.data.toBase64();\n  }\n  updateGlobal(updateData) {\n    this.data.updateGlobal(updateData);\n    return this;\n  }\n  updateInput(inputIndex, updateData) {\n    if (updateData.witnessScript) checkInvalidP2WSH(updateData.witnessScript);\n    (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.checkTaprootInputFields)(\n      this.data.inputs[inputIndex],\n      updateData,\n      'updateInput',\n    );\n    this.data.updateInput(inputIndex, updateData);\n    if (updateData.nonWitnessUtxo) {\n      addNonWitnessTxCache(\n        this.__CACHE,\n        this.data.inputs[inputIndex],\n        inputIndex,\n      );\n    }\n    return this;\n  }\n  updateOutput(outputIndex, updateData) {\n    const outputData = this.data.outputs[outputIndex];\n    (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.checkTaprootOutputFields)(outputData, updateData, 'updateOutput');\n    this.data.updateOutput(outputIndex, updateData);\n    return this;\n  }\n  addUnknownKeyValToGlobal(keyVal) {\n    this.data.addUnknownKeyValToGlobal(keyVal);\n    return this;\n  }\n  addUnknownKeyValToInput(inputIndex, keyVal) {\n    this.data.addUnknownKeyValToInput(inputIndex, keyVal);\n    return this;\n  }\n  addUnknownKeyValToOutput(outputIndex, keyVal) {\n    this.data.addUnknownKeyValToOutput(outputIndex, keyVal);\n    return this;\n  }\n  clearFinalizedInput(inputIndex) {\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n}\n/**\n * This function is needed to pass to the bip174 base class's fromBuffer.\n * It takes the \"transaction buffer\" portion of the psbt buffer and returns a\n * Transaction (From the bip174 library) interface.\n */\nconst transactionFromBuffer = buffer => new PsbtTransaction(buffer);\n/**\n * This class implements the Transaction interface from bip174 library.\n * It contains a bitcoinjs-lib Transaction object.\n */\nclass PsbtTransaction {\n  tx;\n  constructor(buffer = Uint8Array.from([2, 0, 0, 0, 0, 0, 0, 0, 0, 0])) {\n    this.tx = _transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.fromBuffer(buffer);\n    checkTxEmpty(this.tx);\n    Object.defineProperty(this, 'tx', {\n      enumerable: false,\n      writable: true,\n    });\n  }\n  getInputOutputCounts() {\n    return {\n      inputCount: this.tx.ins.length,\n      outputCount: this.tx.outs.length,\n    };\n  }\n  addInput(input) {\n    if (\n      input.hash === undefined ||\n      input.index === undefined ||\n      (!(input.hash instanceof Uint8Array) && typeof input.hash !== 'string') ||\n      typeof input.index !== 'number'\n    ) {\n      throw new Error('Error adding input.');\n    }\n    const hash =\n      typeof input.hash === 'string'\n        ? (0,_bufferutils_js__WEBPACK_IMPORTED_MODULE_3__.reverseBuffer)(uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.fromHex(input.hash))\n        : input.hash;\n    this.tx.addInput(hash, input.index, input.sequence);\n  }\n  addOutput(output) {\n    if (\n      output.script === undefined ||\n      output.value === undefined ||\n      !(output.script instanceof Uint8Array) ||\n      typeof output.value !== 'bigint'\n    ) {\n      throw new Error('Error adding output.');\n    }\n    this.tx.addOutput(output.script, output.value);\n  }\n  toBuffer() {\n    return this.tx.toBuffer();\n  }\n}\nfunction canFinalize(input, script, scriptType) {\n  switch (scriptType) {\n    case 'pubkey':\n    case 'pubkeyhash':\n    case 'witnesspubkeyhash':\n      return hasSigs(1, input.partialSig);\n    case 'multisig':\n      const p2ms = _payments_index_js__WEBPACK_IMPORTED_MODULE_5__.p2ms({ output: script });\n      return hasSigs(p2ms.m, input.partialSig, p2ms.pubkeys);\n    default:\n      return false;\n  }\n}\nfunction checkCache(cache) {\n  if (cache.__UNSAFE_SIGN_NONSEGWIT !== false) {\n    throw new Error('Not BIP174 compliant, can not export');\n  }\n}\nfunction hasSigs(neededSigs, partialSig, pubkeys) {\n  if (!partialSig) return false;\n  let sigs;\n  if (pubkeys) {\n    sigs = pubkeys\n      .map(pkey => {\n        const pubkey = compressPubkey(pkey);\n        return partialSig.find(\n          pSig => uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.compare(pSig.pubkey, pubkey) === 0,\n        );\n      })\n      .filter(v => !!v);\n  } else {\n    sigs = partialSig;\n  }\n  if (sigs.length > neededSigs) throw new Error('Too many signatures');\n  return sigs.length === neededSigs;\n}\nfunction isFinalized(input) {\n  return !!input.finalScriptSig || !!input.finalScriptWitness;\n}\nfunction bip32DerivationIsMine(root) {\n  return d => {\n    if (uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.compare(root.fingerprint, d.masterFingerprint)) return false;\n    if (uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.compare(root.derivePath(d.path).publicKey, d.pubkey))\n      return false;\n    return true;\n  };\n}\nfunction check32Bit(num) {\n  if (\n    typeof num !== 'number' ||\n    num !== Math.floor(num) ||\n    num > 0xffffffff ||\n    num < 0\n  ) {\n    throw new Error('Invalid 32 bit integer');\n  }\n}\nfunction checkFees(psbt, cache, opts) {\n  const feeRate = cache.__FEE_RATE || psbt.getFeeRate();\n  const vsize = cache.__EXTRACTED_TX.virtualSize();\n  const satoshis = feeRate * vsize;\n  if (feeRate >= opts.maximumFeeRate) {\n    throw new Error(\n      `Warning: You are paying around ${(satoshis / 1e8).toFixed(8)} in ` +\n        `fees, which is ${feeRate} satoshi per byte for a transaction ` +\n        `with a VSize of ${vsize} bytes (segwit counted as 0.25 byte per ` +\n        `byte). Use setMaximumFeeRate method to raise your threshold, or ` +\n        `pass true to the first arg of extractTransaction.`,\n    );\n  }\n}\nfunction checkInputsForPartialSig(inputs, action) {\n  inputs.forEach(input => {\n    const throws = (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.isTaprootInput)(input)\n      ? (0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.checkTaprootInputForSigs)(input, action)\n      : (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.checkInputForSig)(input, action);\n    if (throws)\n      throw new Error('Can not modify transaction, signatures exist.');\n  });\n}\nfunction checkPartialSigSighashes(input) {\n  if (!input.sighashType || !input.partialSig) return;\n  const { partialSig, sighashType } = input;\n  partialSig.forEach(pSig => {\n    const { hashType } = _script_js__WEBPACK_IMPORTED_MODULE_7__.signature.decode(pSig.signature);\n    if (sighashType !== hashType) {\n      throw new Error('Signature sighash does not match input sighash type');\n    }\n  });\n}\nfunction checkScriptForPubkey(pubkey, script, action) {\n  if (!(0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.pubkeyInScript)(pubkey, script)) {\n    throw new Error(\n      `Can not ${action} for this input with the key ${uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.toHex(pubkey)}`,\n    );\n  }\n}\nfunction checkTxEmpty(tx) {\n  const isEmpty = tx.ins.every(\n    input =>\n      input.script &&\n      input.script.length === 0 &&\n      input.witness &&\n      input.witness.length === 0,\n  );\n  if (!isEmpty) {\n    throw new Error('Format Error: Transaction ScriptSigs are not empty');\n  }\n}\nfunction checkTxForDupeIns(tx, cache) {\n  tx.ins.forEach(input => {\n    checkTxInputCache(cache, input);\n  });\n}\nfunction checkTxInputCache(cache, input) {\n  const key =\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.toHex((0,_bufferutils_js__WEBPACK_IMPORTED_MODULE_3__.reverseBuffer)(Uint8Array.from(input.hash))) + ':' + input.index;\n  if (cache.__TX_IN_CACHE[key]) throw new Error('Duplicate input detected.');\n  cache.__TX_IN_CACHE[key] = 1;\n}\nfunction scriptCheckerFactory(payment, paymentScriptName) {\n  return (inputIndex, scriptPubKey, redeemScript, ioType) => {\n    const redeemScriptOutput = payment({\n      redeem: { output: redeemScript },\n    }).output;\n    if (uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.compare(scriptPubKey, redeemScriptOutput)) {\n      throw new Error(\n        `${paymentScriptName} for ${ioType} #${inputIndex} doesn't match the scriptPubKey in the prevout`,\n      );\n    }\n  };\n}\nconst checkRedeemScript = scriptCheckerFactory(_payments_index_js__WEBPACK_IMPORTED_MODULE_5__.p2sh, 'Redeem script');\nconst checkWitnessScript = scriptCheckerFactory(\n  _payments_index_js__WEBPACK_IMPORTED_MODULE_5__.p2wsh,\n  'Witness script',\n);\nfunction getTxCacheValue(key, name, inputs, c) {\n  if (!inputs.every(isFinalized))\n    throw new Error(`PSBT must be finalized to calculate ${name}`);\n  if (key === '__FEE_RATE' && c.__FEE_RATE) return c.__FEE_RATE;\n  if (key === '__FEE' && c.__FEE) return c.__FEE;\n  let tx;\n  let mustFinalize = true;\n  if (c.__EXTRACTED_TX) {\n    tx = c.__EXTRACTED_TX;\n    mustFinalize = false;\n  } else {\n    tx = c.__TX.clone();\n  }\n  inputFinalizeGetAmts(inputs, tx, c, mustFinalize);\n  if (key === '__FEE_RATE') return c.__FEE_RATE;\n  else if (key === '__FEE') return c.__FEE;\n}\nfunction getFinalScripts(inputIndex, input, script, isSegwit, isP2SH, isP2WSH) {\n  const scriptType = classifyScript(script);\n  if (!canFinalize(input, script, scriptType))\n    throw new Error(`Can not finalize input #${inputIndex}`);\n  return prepareFinalScripts(\n    script,\n    scriptType,\n    input.partialSig,\n    isSegwit,\n    isP2SH,\n    isP2WSH,\n  );\n}\nfunction prepareFinalScripts(\n  script,\n  scriptType,\n  partialSig,\n  isSegwit,\n  isP2SH,\n  isP2WSH,\n) {\n  let finalScriptSig;\n  let finalScriptWitness;\n  // Wow, the payments API is very handy\n  const payment = getPayment(script, scriptType, partialSig);\n  const p2wsh = !isP2WSH ? null : _payments_index_js__WEBPACK_IMPORTED_MODULE_5__.p2wsh({ redeem: payment });\n  const p2sh = !isP2SH ? null : _payments_index_js__WEBPACK_IMPORTED_MODULE_5__.p2sh({ redeem: p2wsh || payment });\n  if (isSegwit) {\n    if (p2wsh) {\n      finalScriptWitness = (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.witnessStackToScriptWitness)(p2wsh.witness);\n    } else {\n      finalScriptWitness = (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.witnessStackToScriptWitness)(payment.witness);\n    }\n    if (p2sh) {\n      finalScriptSig = p2sh.input;\n    }\n  } else {\n    if (p2sh) {\n      finalScriptSig = p2sh.input;\n    } else {\n      finalScriptSig = payment.input;\n    }\n  }\n  return {\n    finalScriptSig,\n    finalScriptWitness,\n  };\n}\nfunction getHashAndSighashType(\n  inputs,\n  inputIndex,\n  pubkey,\n  cache,\n  sighashTypes,\n) {\n  const input = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(inputs, inputIndex);\n  const { hash, sighashType, script } = getHashForSig(\n    inputIndex,\n    input,\n    cache,\n    false,\n    sighashTypes,\n  );\n  checkScriptForPubkey(pubkey, script, 'sign');\n  return {\n    hash,\n    sighashType,\n  };\n}\nfunction getHashForSig(inputIndex, input, cache, forValidate, sighashTypes) {\n  const unsignedTx = cache.__TX;\n  const sighashType = input.sighashType || _transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_ALL;\n  checkSighashTypeAllowed(sighashType, sighashTypes);\n  let hash;\n  let prevout;\n  if (input.nonWitnessUtxo) {\n    const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n      cache,\n      input,\n      inputIndex,\n    );\n    const prevoutHash = unsignedTx.ins[inputIndex].hash;\n    const utxoHash = nonWitnessUtxoTx.getHash();\n    // If a non-witness UTXO is provided, its hash must match the hash specified in the prevout\n    if (uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.compare(prevoutHash, utxoHash) !== 0) {\n      throw new Error(\n        `Non-witness UTXO hash for input #${inputIndex} doesn't match the hash specified in the prevout`,\n      );\n    }\n    const prevoutIndex = unsignedTx.ins[inputIndex].index;\n    prevout = nonWitnessUtxoTx.outs[prevoutIndex];\n  } else if (input.witnessUtxo) {\n    prevout = input.witnessUtxo;\n  } else {\n    throw new Error('Need a Utxo input item for signing');\n  }\n  const { meaningfulScript, type } = getMeaningfulScript(\n    prevout.script,\n    inputIndex,\n    'input',\n    input.redeemScript,\n    input.witnessScript,\n  );\n  if (['p2sh-p2wsh', 'p2wsh'].indexOf(type) >= 0) {\n    hash = unsignedTx.hashForWitnessV0(\n      inputIndex,\n      meaningfulScript,\n      prevout.value,\n      sighashType,\n    );\n  } else if ((0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.isP2WPKH)(meaningfulScript)) {\n    // P2WPKH uses the P2PKH template for prevoutScript when signing\n    const signingScript = _payments_index_js__WEBPACK_IMPORTED_MODULE_5__.p2pkh({\n      hash: meaningfulScript.slice(2),\n    }).output;\n    hash = unsignedTx.hashForWitnessV0(\n      inputIndex,\n      signingScript,\n      prevout.value,\n      sighashType,\n    );\n  } else {\n    // non-segwit\n    if (\n      input.nonWitnessUtxo === undefined &&\n      cache.__UNSAFE_SIGN_NONSEGWIT === false\n    )\n      throw new Error(\n        `Input #${inputIndex} has witnessUtxo but non-segwit script: ` +\n          `${uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.toHex(meaningfulScript)}`,\n      );\n    if (!forValidate && cache.__UNSAFE_SIGN_NONSEGWIT !== false)\n      console.warn(\n        'Warning: Signing non-segwit inputs without the full parent transaction ' +\n          'means there is a chance that a miner could feed you incorrect information ' +\n          \"to trick you into paying large fees. This behavior is the same as Psbt's predecessor \" +\n          '(TransactionBuilder - now removed) when signing non-segwit scripts. You are not ' +\n          'able to export this Psbt with toBuffer|toBase64|toHex since it is not ' +\n          'BIP174 compliant.\\n*********************\\nPROCEED WITH CAUTION!\\n' +\n          '*********************',\n      );\n    hash = unsignedTx.hashForSignature(\n      inputIndex,\n      meaningfulScript,\n      sighashType,\n    );\n  }\n  return {\n    script: meaningfulScript,\n    sighashType,\n    hash,\n  };\n}\nfunction getAllTaprootHashesForSig(inputIndex, input, inputs, cache) {\n  const allPublicKeys = [];\n  if (input.tapInternalKey) {\n    const key = getPrevoutTaprootKey(inputIndex, input, cache);\n    if (key) {\n      allPublicKeys.push(key);\n    }\n  }\n  if (input.tapScriptSig) {\n    const tapScriptPubkeys = input.tapScriptSig.map(tss => tss.pubkey);\n    allPublicKeys.push(...tapScriptPubkeys);\n  }\n  const allHashes = allPublicKeys.map(publicKey =>\n    getTaprootHashesForSig(inputIndex, input, inputs, publicKey, cache),\n  );\n  return allHashes.flat();\n}\nfunction getPrevoutTaprootKey(inputIndex, input, cache) {\n  const { script } = getScriptAndAmountFromUtxo(inputIndex, input, cache);\n  return (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.isP2TR)(script) ? script.subarray(2, 34) : null;\n}\nfunction trimTaprootSig(signature) {\n  return signature.length === 64 ? signature : signature.subarray(0, 64);\n}\nfunction getTaprootHashesForSig(\n  inputIndex,\n  input,\n  inputs,\n  pubkey,\n  cache,\n  tapLeafHashToSign,\n  allowedSighashTypes,\n) {\n  const unsignedTx = cache.__TX;\n  const sighashType = input.sighashType || _transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_DEFAULT;\n  checkSighashTypeAllowed(sighashType, allowedSighashTypes);\n  const prevOuts = inputs.map((i, index) =>\n    getScriptAndAmountFromUtxo(index, i, cache),\n  );\n  const signingScripts = prevOuts.map(o => o.script);\n  const values = prevOuts.map(o => o.value);\n  const hashes = [];\n  if (input.tapInternalKey && !tapLeafHashToSign) {\n    const outputKey =\n      getPrevoutTaprootKey(inputIndex, input, cache) || Uint8Array.from([]);\n    if (uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.compare((0,_psbt_bip371_js__WEBPACK_IMPORTED_MODULE_9__.toXOnly)(pubkey), outputKey) === 0) {\n      const tapKeyHash = unsignedTx.hashForWitnessV1(\n        inputIndex,\n        signingScripts,\n        values,\n        sighashType,\n      );\n      hashes.push({ pubkey, hash: tapKeyHash });\n    }\n  }\n  const tapLeafHashes = (input.tapLeafScript || [])\n    .filter(tapLeaf => (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.pubkeyInScript)(pubkey, tapLeaf.script))\n    .map(tapLeaf => {\n      const hash = (0,_payments_bip341_js__WEBPACK_IMPORTED_MODULE_6__.tapleafHash)({\n        output: tapLeaf.script,\n        version: tapLeaf.leafVersion,\n      });\n      return Object.assign({ hash }, tapLeaf);\n    })\n    .filter(\n      tapLeaf =>\n        !tapLeafHashToSign ||\n        uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.compare(tapLeafHashToSign, tapLeaf.hash) === 0,\n    )\n    .map(tapLeaf => {\n      const tapScriptHash = unsignedTx.hashForWitnessV1(\n        inputIndex,\n        signingScripts,\n        values,\n        sighashType,\n        tapLeaf.hash,\n      );\n      return {\n        pubkey,\n        hash: tapScriptHash,\n        leafHash: tapLeaf.hash,\n      };\n    });\n  return hashes.concat(tapLeafHashes);\n}\nfunction checkSighashTypeAllowed(sighashType, sighashTypes) {\n  if (sighashTypes && sighashTypes.indexOf(sighashType) < 0) {\n    const str = sighashTypeToString(sighashType);\n    throw new Error(\n      `Sighash type is not allowed. Retry the sign method passing the ` +\n        `sighashTypes array of whitelisted types. Sighash type: ${str}`,\n    );\n  }\n}\nfunction getPayment(script, scriptType, partialSig) {\n  let payment;\n  switch (scriptType) {\n    case 'multisig':\n      const sigs = getSortedSigs(script, partialSig);\n      payment = _payments_index_js__WEBPACK_IMPORTED_MODULE_5__.p2ms({\n        output: script,\n        signatures: sigs,\n      });\n      break;\n    case 'pubkey':\n      payment = _payments_index_js__WEBPACK_IMPORTED_MODULE_5__.p2pk({\n        output: script,\n        signature: partialSig[0].signature,\n      });\n      break;\n    case 'pubkeyhash':\n      payment = _payments_index_js__WEBPACK_IMPORTED_MODULE_5__.p2pkh({\n        output: script,\n        pubkey: partialSig[0].pubkey,\n        signature: partialSig[0].signature,\n      });\n      break;\n    case 'witnesspubkeyhash':\n      payment = _payments_index_js__WEBPACK_IMPORTED_MODULE_5__.p2wpkh({\n        output: script,\n        pubkey: partialSig[0].pubkey,\n        signature: partialSig[0].signature,\n      });\n      break;\n  }\n  return payment;\n}\nfunction getScriptFromInput(inputIndex, input, cache) {\n  const unsignedTx = cache.__TX;\n  const res = {\n    script: null,\n    isSegwit: false,\n    isP2SH: false,\n    isP2WSH: false,\n  };\n  res.isP2SH = !!input.redeemScript;\n  res.isP2WSH = !!input.witnessScript;\n  if (input.witnessScript) {\n    res.script = input.witnessScript;\n  } else if (input.redeemScript) {\n    res.script = input.redeemScript;\n  } else {\n    if (input.nonWitnessUtxo) {\n      const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n        cache,\n        input,\n        inputIndex,\n      );\n      const prevoutIndex = unsignedTx.ins[inputIndex].index;\n      res.script = nonWitnessUtxoTx.outs[prevoutIndex].script;\n    } else if (input.witnessUtxo) {\n      res.script = input.witnessUtxo.script;\n    }\n  }\n  if (input.witnessScript || (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.isP2WPKH)(res.script)) {\n    res.isSegwit = true;\n  }\n  return res;\n}\nfunction getSignersFromHD(inputIndex, inputs, hdKeyPair) {\n  const input = (0,bip174__WEBPACK_IMPORTED_MODULE_0__.checkForInput)(inputs, inputIndex);\n  if (!input.bip32Derivation || input.bip32Derivation.length === 0) {\n    throw new Error('Need bip32Derivation to sign with HD');\n  }\n  const myDerivations = input.bip32Derivation\n    .map(bipDv => {\n      if (uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.compare(bipDv.masterFingerprint, hdKeyPair.fingerprint) === 0) {\n        return bipDv;\n      } else {\n        return;\n      }\n    })\n    .filter(v => !!v);\n  if (myDerivations.length === 0) {\n    throw new Error(\n      'Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint',\n    );\n  }\n  const signers = myDerivations.map(bipDv => {\n    const node = hdKeyPair.derivePath(bipDv.path);\n    if (uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.compare(bipDv.pubkey, node.publicKey) !== 0) {\n      throw new Error('pubkey did not match bip32Derivation');\n    }\n    return node;\n  });\n  return signers;\n}\nfunction getSortedSigs(script, partialSig) {\n  const p2ms = _payments_index_js__WEBPACK_IMPORTED_MODULE_5__.p2ms({ output: script });\n  // for each pubkey in order of p2ms script\n  return p2ms.pubkeys\n    .map(pk => {\n      // filter partialSig array by pubkey being equal\n      return (\n        partialSig.filter(ps => {\n          return uint8array_tools__WEBPACK_IMPORTED_MODULE_11__.compare(ps.pubkey, pk) === 0;\n        })[0] || {}\n      ).signature;\n      // Any pubkey without a match will return undefined\n      // this last filter removes all the undefined items in the array.\n    })\n    .filter(v => !!v);\n}\nfunction scriptWitnessToWitnessStack(buffer) {\n  let offset = 0;\n  function readSlice(n) {\n    offset += n;\n    return buffer.slice(offset - n, offset);\n  }\n  function readVarInt() {\n    const vi = varuint_bitcoin__WEBPACK_IMPORTED_MODULE_1__.decode(buffer, offset);\n    offset += varuint_bitcoin__WEBPACK_IMPORTED_MODULE_1__.encodingLength(vi.bigintValue);\n    return vi.numberValue;\n  }\n  function readVarSlice() {\n    return readSlice(readVarInt());\n  }\n  function readVector() {\n    const count = readVarInt();\n    const vector = [];\n    for (let i = 0; i < count; i++) vector.push(readVarSlice());\n    return vector;\n  }\n  return readVector();\n}\nfunction sighashTypeToString(sighashType) {\n  let text =\n    sighashType & _transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_ANYONECANPAY\n      ? 'SIGHASH_ANYONECANPAY | '\n      : '';\n  const sigMod = sighashType & 0x1f;\n  switch (sigMod) {\n    case _transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_ALL:\n      text += 'SIGHASH_ALL';\n      break;\n    case _transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_SINGLE:\n      text += 'SIGHASH_SINGLE';\n      break;\n    case _transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.SIGHASH_NONE:\n      text += 'SIGHASH_NONE';\n      break;\n  }\n  return text;\n}\nfunction addNonWitnessTxCache(cache, input, inputIndex) {\n  cache.__NON_WITNESS_UTXO_BUF_CACHE[inputIndex] = input.nonWitnessUtxo;\n  const tx = _transaction_js__WEBPACK_IMPORTED_MODULE_8__.Transaction.fromBuffer(input.nonWitnessUtxo);\n  cache.__NON_WITNESS_UTXO_TX_CACHE[inputIndex] = tx;\n  const self = cache;\n  const selfIndex = inputIndex;\n  delete input.nonWitnessUtxo;\n  Object.defineProperty(input, 'nonWitnessUtxo', {\n    enumerable: true,\n    get() {\n      const buf = self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex];\n      const txCache = self.__NON_WITNESS_UTXO_TX_CACHE[selfIndex];\n      if (buf !== undefined) {\n        return buf;\n      } else {\n        const newBuf = txCache.toBuffer();\n        self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = newBuf;\n        return newBuf;\n      }\n    },\n    set(data) {\n      self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = data;\n    },\n  });\n}\nfunction inputFinalizeGetAmts(inputs, tx, cache, mustFinalize) {\n  let inputAmount = 0n;\n  inputs.forEach((input, idx) => {\n    if (mustFinalize && input.finalScriptSig)\n      tx.ins[idx].script = input.finalScriptSig;\n    if (mustFinalize && input.finalScriptWitness) {\n      tx.ins[idx].witness = scriptWitnessToWitnessStack(\n        input.finalScriptWitness,\n      );\n    }\n    if (input.witnessUtxo) {\n      inputAmount += input.witnessUtxo.value;\n    } else if (input.nonWitnessUtxo) {\n      const nwTx = nonWitnessUtxoTxFromCache(cache, input, idx);\n      const vout = tx.ins[idx].index;\n      const out = nwTx.outs[vout];\n      inputAmount += out.value;\n    }\n  });\n  const outputAmount = tx.outs.reduce((total, o) => total + o.value, 0n);\n  const fee = inputAmount - outputAmount;\n  if (fee < 0) {\n    throw new Error('Outputs are spending more than Inputs');\n  }\n  const bytes = tx.virtualSize();\n  cache.__FEE = fee;\n  cache.__EXTRACTED_TX = tx;\n  cache.__FEE_RATE = Math.floor(Number(fee / BigInt(bytes)));\n}\nfunction nonWitnessUtxoTxFromCache(cache, input, inputIndex) {\n  const c = cache.__NON_WITNESS_UTXO_TX_CACHE;\n  if (!c[inputIndex]) {\n    addNonWitnessTxCache(cache, input, inputIndex);\n  }\n  return c[inputIndex];\n}\nfunction getScriptFromUtxo(inputIndex, input, cache) {\n  const { script } = getScriptAndAmountFromUtxo(inputIndex, input, cache);\n  return script;\n}\nfunction getScriptAndAmountFromUtxo(inputIndex, input, cache) {\n  if (input.witnessUtxo !== undefined) {\n    return {\n      script: input.witnessUtxo.script,\n      value: input.witnessUtxo.value,\n    };\n  } else if (input.nonWitnessUtxo !== undefined) {\n    const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n      cache,\n      input,\n      inputIndex,\n    );\n    const o = nonWitnessUtxoTx.outs[cache.__TX.ins[inputIndex].index];\n    return { script: o.script, value: o.value };\n  } else {\n    throw new Error(\"Can't find pubkey in input without Utxo data\");\n  }\n}\nfunction pubkeyInInput(pubkey, input, inputIndex, cache) {\n  const script = getScriptFromUtxo(inputIndex, input, cache);\n  const { meaningfulScript } = getMeaningfulScript(\n    script,\n    inputIndex,\n    'input',\n    input.redeemScript,\n    input.witnessScript,\n  );\n  return (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.pubkeyInScript)(pubkey, meaningfulScript);\n}\nfunction pubkeyInOutput(pubkey, output, outputIndex, cache) {\n  const script = cache.__TX.outs[outputIndex].script;\n  const { meaningfulScript } = getMeaningfulScript(\n    script,\n    outputIndex,\n    'output',\n    output.redeemScript,\n    output.witnessScript,\n  );\n  return (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.pubkeyInScript)(pubkey, meaningfulScript);\n}\nfunction redeemFromFinalScriptSig(finalScript) {\n  if (!finalScript) return;\n  const decomp = _script_js__WEBPACK_IMPORTED_MODULE_7__.decompile(finalScript);\n  if (!decomp) return;\n  const lastItem = decomp[decomp.length - 1];\n  if (\n    !(lastItem instanceof Uint8Array) ||\n    isPubkeyLike(lastItem) ||\n    isSigLike(lastItem)\n  )\n    return;\n  const sDecomp = _script_js__WEBPACK_IMPORTED_MODULE_7__.decompile(lastItem);\n  if (!sDecomp) return;\n  return lastItem;\n}\nfunction redeemFromFinalWitnessScript(finalScript) {\n  if (!finalScript) return;\n  const decomp = scriptWitnessToWitnessStack(finalScript);\n  const lastItem = decomp[decomp.length - 1];\n  if (isPubkeyLike(lastItem)) return;\n  const sDecomp = _script_js__WEBPACK_IMPORTED_MODULE_7__.decompile(lastItem);\n  if (!sDecomp) return;\n  return lastItem;\n}\nfunction compressPubkey(pubkey) {\n  if (pubkey.length === 65) {\n    const parity = pubkey[64] & 1;\n    const newKey = pubkey.slice(0, 33);\n    newKey[0] = 2 | parity;\n    return newKey;\n  }\n  return pubkey.slice();\n}\nfunction isPubkeyLike(buf) {\n  return buf.length === 33 && _script_js__WEBPACK_IMPORTED_MODULE_7__.isCanonicalPubKey(buf);\n}\nfunction isSigLike(buf) {\n  return _script_js__WEBPACK_IMPORTED_MODULE_7__.isCanonicalScriptSignature(buf);\n}\nfunction getMeaningfulScript(\n  script,\n  index,\n  ioType,\n  redeemScript,\n  witnessScript,\n) {\n  const isP2SH = (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.isP2SHScript)(script);\n  const isP2SHP2WSH = isP2SH && redeemScript && (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.isP2WSHScript)(redeemScript);\n  const isP2WSH = (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.isP2WSHScript)(script);\n  if (isP2SH && redeemScript === undefined)\n    throw new Error('scriptPubkey is P2SH but redeemScript missing');\n  if ((isP2WSH || isP2SHP2WSH) && witnessScript === undefined)\n    throw new Error(\n      'scriptPubkey or redeemScript is P2WSH but witnessScript missing',\n    );\n  let meaningfulScript;\n  if (isP2SHP2WSH) {\n    meaningfulScript = witnessScript;\n    checkRedeemScript(index, script, redeemScript, ioType);\n    checkWitnessScript(index, redeemScript, witnessScript, ioType);\n    checkInvalidP2WSH(meaningfulScript);\n  } else if (isP2WSH) {\n    meaningfulScript = witnessScript;\n    checkWitnessScript(index, script, witnessScript, ioType);\n    checkInvalidP2WSH(meaningfulScript);\n  } else if (isP2SH) {\n    meaningfulScript = redeemScript;\n    checkRedeemScript(index, script, redeemScript, ioType);\n  } else {\n    meaningfulScript = script;\n  }\n  return {\n    meaningfulScript,\n    type: isP2SHP2WSH\n      ? 'p2sh-p2wsh'\n      : isP2SH\n        ? 'p2sh'\n        : isP2WSH\n          ? 'p2wsh'\n          : 'raw',\n  };\n}\nfunction checkInvalidP2WSH(script) {\n  if ((0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.isP2WPKH)(script) || (0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.isP2SHScript)(script)) {\n    throw new Error('P2WPKH or P2SH can not be contained within P2WSH');\n  }\n}\nfunction classifyScript(script) {\n  if ((0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.isP2WPKH)(script)) return 'witnesspubkeyhash';\n  if ((0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.isP2PKH)(script)) return 'pubkeyhash';\n  if ((0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.isP2MS)(script)) return 'multisig';\n  if ((0,_psbt_psbtutils_js__WEBPACK_IMPORTED_MODULE_10__.isP2PK)(script)) return 'pubkey';\n  return 'nonstandard';\n}\nfunction range(n) {\n  return [...Array(n).keys()];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wc2J0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMEM7QUFDQztBQUNZO0FBQ1M7QUFDRjtBQUNSO0FBQ047QUFDRztBQUNaO0FBQ1E7QUFTckI7QUFZRztBQUNhO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGlEQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsbUJBQW1CO0FBQ2pFO0FBQ0Esd0NBQXdDLG1CQUFtQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsbUNBQW1DO0FBQ25DLG1CQUFtQix5REFBZ0I7QUFDbkM7QUFDQTtBQUNBLGdDQUFnQztBQUNoQyxtQkFBbUIsc0RBQWE7QUFDaEM7QUFDQTtBQUNBLHFDQUFxQztBQUNyQyxxQkFBcUIsd0NBQVE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGFBQWEsd0NBQVE7QUFDNUM7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw0REFBVztBQUN2QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNkRBQWdCO0FBQ2xDLFFBQVE7QUFDUjtBQUNBLGdCQUFnQiw0REFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksd0VBQXVCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksVUFBVTtBQUN0QjtBQUNBLGNBQWMsVUFBVTtBQUN4QixxQkFBcUIsMkRBQWM7QUFDbkMsbUNBQW1DLGdCQUFnQixRQUFRO0FBQzNEO0FBQ0EsSUFBSSx5RUFBd0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBYSx1QkFBdUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscURBQWE7QUFDL0IsUUFBUSwrREFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtEQUFrQjtBQUN6QztBQUNBLGtCQUFrQixxREFBYTtBQUMvQixRQUFRLCtEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxXQUFXO0FBQ3pEO0FBQ0E7QUFDQSxZQUFZLG9DQUFvQztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxXQUFXO0FBQzFFO0FBQ0EsWUFBWSxxQ0FBcUM7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsZ0JBQWdCO0FBQzVFO0FBQ0EsMENBQTBDLG9CQUFvQjtBQUM5RDtBQUNBLHlEQUF5RCxXQUFXO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtEQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsV0FBVztBQUM3QztBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isb0RBQWE7QUFDbkM7QUFDQTtBQUNBLE9BQU87QUFDUCxpQ0FBaUMsZ0ZBQTJCO0FBQzVELDBDQUEwQyxvQkFBb0I7QUFDOUQsTUFBTTtBQUNOLGNBQWMscUJBQXFCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLG9CQUFvQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFEQUFhO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscURBQWE7QUFDL0I7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFEQUFhO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixzREFBYztBQUNqQztBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0RBQWM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBYSx1QkFBdUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLCtEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHNEQUFhO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlEQUFpQjtBQUNuQyxjQUFjLGVBQWU7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLFdBQVcsMkJBQTJCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQyxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0RBQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyx3REFBVztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsd0RBQVc7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EscURBQXFELHdEQUFXO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdEQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixxREFBYTtBQUMvQixRQUFRLCtEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFEQUFhO0FBQy9CLFFBQVEsK0RBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsWUFBWTtBQUMxQztBQUNBLGtEQUFrRCx3REFBVztBQUM3RCxZQUFZLG9CQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaURBQWlCO0FBQ3BDLE9BQU87QUFDUDtBQUNBLHdDQUF3QyxZQUFZO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHdEQUFXO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBFQUF5QjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3REFBTztBQUN2QixtQkFBbUIsMEVBQXlCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsMENBQTBDLFdBQVc7QUFDckQ7QUFDQTtBQUNBLDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFEQUFhO0FBQ2pDLFVBQVUsK0RBQWM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFEQUFhO0FBQ2pDLFVBQVUsK0RBQWM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsWUFBWTtBQUM1QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isd0RBQVc7QUFDL0I7QUFDQSxZQUFZLG9CQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixpREFBaUI7QUFDdEMsU0FBUztBQUNUO0FBQ0EsMENBQTBDLFlBQVk7QUFDdEQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3REFBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFdBQVcsMEVBQXlCO0FBQ3JELE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0RBQU87QUFDL0IsMkJBQTJCLDBFQUF5QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLHFCQUFxQjtBQUNyQixXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsV0FBVztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsWUFBWSxlQUFlLG9EQUFXLG9CQUFvQjtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdFQUF1QjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkseUVBQXdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsd0RBQVc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw4REFBYSxDQUFDLHNEQUFhO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9EQUFhLEdBQUcsZ0JBQWdCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzREFBYTtBQUMvQjtBQUNBLE9BQU87QUFDUDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQWE7QUFDckIsUUFBUSxzREFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDZCQUE2QjtBQUNyRSwwQkFBMEIsU0FBUztBQUNuQywyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwrREFBYztBQUNqQyxRQUFRLHlFQUF3QjtBQUNoQyxRQUFRLHFFQUFnQjtBQUN4QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMEJBQTBCO0FBQ3BDO0FBQ0EsWUFBWSxXQUFXLEVBQUUsaURBQWlCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsT0FBTyxtRUFBYztBQUNyQjtBQUNBLGlCQUFpQixRQUFRLDhCQUE4QixvREFBVyxTQUFTO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxJQUFJLG9EQUFXLENBQUMsOERBQWE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNCQUFzQjtBQUN0QyxLQUFLO0FBQ0wsUUFBUSxzREFBYTtBQUNyQjtBQUNBLFdBQVcsbUJBQW1CLE1BQU0sUUFBUSxHQUFHLFlBQVk7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msb0RBQWE7QUFDNUQ7QUFDQSxFQUFFLHFEQUFjO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELEtBQUs7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFdBQVc7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHFEQUFjLEdBQUcsaUJBQWlCO0FBQ3BFLGdDQUFnQyxvREFBYSxHQUFHLDBCQUEwQjtBQUMxRTtBQUNBO0FBQ0EsMkJBQTJCLGdGQUEyQjtBQUN0RCxNQUFNO0FBQ04sMkJBQTJCLGdGQUEyQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxREFBYTtBQUM3QixVQUFVLDRCQUE0QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHdEQUFXO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQWE7QUFDckI7QUFDQSw0Q0FBNEMsWUFBWTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsVUFBVSx5QkFBeUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLFNBQVMsNkRBQVE7QUFDckI7QUFDQSwwQkFBMEIscURBQWM7QUFDeEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixZQUFZO0FBQzlCLGFBQWEsb0RBQVcsbUJBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFNBQVM7QUFDbkIsU0FBUywyREFBTTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsd0RBQVc7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFhLENBQUMsd0RBQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBCQUEwQjtBQUM5QztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsbUVBQWM7QUFDckM7QUFDQSxtQkFBbUIsZ0VBQVc7QUFDOUI7QUFDQTtBQUNBLE9BQU87QUFDUCw2QkFBNkIsTUFBTTtBQUNuQyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLElBQUk7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvREFBYTtBQUM3QjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxnQkFBZ0Isb0RBQWE7QUFDN0I7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsZ0JBQWdCLHFEQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsZ0JBQWdCLHNEQUFlO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw2REFBUTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFEQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHNEQUFhO0FBQ3ZCO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQWE7QUFDckI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0RBQWEsR0FBRyxnQkFBZ0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNEQUFhO0FBQzlCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtREFBYztBQUM3QixjQUFjLDJEQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdEQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx3REFBVztBQUNwQjtBQUNBO0FBQ0EsU0FBUyx3REFBVztBQUNwQjtBQUNBO0FBQ0EsU0FBUyx3REFBVztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsd0RBQVc7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsU0FBUztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbUJBQW1CO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsbUVBQWM7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsVUFBVSxtQkFBbUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtRUFBYztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsaURBQWlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaURBQWlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaURBQWlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHlEQUF5QjtBQUN2RDtBQUNBO0FBQ0EsU0FBUyxrRUFBa0M7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixpRUFBWTtBQUM3QixnREFBZ0Qsa0VBQWE7QUFDN0Qsa0JBQWtCLGtFQUFhO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSw2REFBUSxZQUFZLGlFQUFZO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSw2REFBUTtBQUNkLE1BQU0sNERBQU87QUFDYixNQUFNLDJEQUFNO0FBQ1osTUFBTSwyREFBTTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9idGMvbWlkbC14LWJpdGNvaW4tc3VtbWl0LWhhY2thdGhvbi0yMDI1L3V0eG8tcHNidC1kZW1vL25vZGVfbW9kdWxlcy8ucG5wbS9iaXRjb2luanMtbGliQDcuMC4wLXJjLjBfdHlwZXNjcmlwdEA1LjkuMi9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYi9zcmMvZXNtL3BzYnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHNidCBhcyBQc2J0QmFzZSB9IGZyb20gJ2JpcDE3NCc7XG5pbXBvcnQgKiBhcyB2YXJ1aW50IGZyb20gJ3ZhcnVpbnQtYml0Y29pbic7XG5pbXBvcnQgeyBjaGVja0ZvcklucHV0LCBjaGVja0Zvck91dHB1dCB9IGZyb20gJ2JpcDE3NCc7XG5pbXBvcnQgeyBmcm9tT3V0cHV0U2NyaXB0LCB0b091dHB1dFNjcmlwdCB9IGZyb20gJy4vYWRkcmVzcy5qcyc7XG5pbXBvcnQgeyBjbG9uZUJ1ZmZlciwgcmV2ZXJzZUJ1ZmZlciB9IGZyb20gJy4vYnVmZmVydXRpbHMuanMnO1xuaW1wb3J0IHsgYml0Y29pbiBhcyBidGNOZXR3b3JrIH0gZnJvbSAnLi9uZXR3b3Jrcy5qcyc7XG5pbXBvcnQgKiBhcyBwYXltZW50cyBmcm9tICcuL3BheW1lbnRzL2luZGV4LmpzJztcbmltcG9ydCB7IHRhcGxlYWZIYXNoIH0gZnJvbSAnLi9wYXltZW50cy9iaXAzNDEuanMnO1xuaW1wb3J0ICogYXMgYnNjcmlwdCBmcm9tICcuL3NjcmlwdC5qcyc7XG5pbXBvcnQgeyBUcmFuc2FjdGlvbiB9IGZyb20gJy4vdHJhbnNhY3Rpb24uanMnO1xuaW1wb3J0IHtcbiAgdG9YT25seSxcbiAgdGFwU2NyaXB0RmluYWxpemVyLFxuICBzZXJpYWxpemVUYXByb290U2lnbmF0dXJlLFxuICBpc1RhcHJvb3RJbnB1dCxcbiAgY2hlY2tUYXByb290SW5wdXRGaWVsZHMsXG4gIGNoZWNrVGFwcm9vdE91dHB1dEZpZWxkcyxcbiAgY2hlY2tUYXByb290SW5wdXRGb3JTaWdzLFxufSBmcm9tICcuL3BzYnQvYmlwMzcxLmpzJztcbmltcG9ydCB7XG4gIHdpdG5lc3NTdGFja1RvU2NyaXB0V2l0bmVzcyxcbiAgY2hlY2tJbnB1dEZvclNpZyxcbiAgcHVia2V5SW5TY3JpcHQsXG4gIGlzUDJNUyxcbiAgaXNQMlBLLFxuICBpc1AyUEtILFxuICBpc1AyV1BLSCxcbiAgaXNQMldTSFNjcmlwdCxcbiAgaXNQMlNIU2NyaXB0LFxuICBpc1AyVFIsXG59IGZyb20gJy4vcHNidC9wc2J0dXRpbHMuanMnO1xuaW1wb3J0ICogYXMgdG9vbHMgZnJvbSAndWludDhhcnJheS10b29scyc7XG4vKipcbiAqIFRoZXNlIGFyZSB0aGUgZGVmYXVsdCBhcmd1bWVudHMgZm9yIGEgUHNidCBpbnN0YW5jZS5cbiAqL1xuY29uc3QgREVGQVVMVF9PUFRTID0ge1xuICAvKipcbiAgICogQSBiaXRjb2luanMgTmV0d29yayBvYmplY3QuIFRoaXMgaXMgb25seSB1c2VkIGlmIHlvdSBwYXNzIGFuIGBhZGRyZXNzYFxuICAgKiBwYXJhbWV0ZXIgdG8gYWRkT3V0cHV0LiBPdGhlcndpc2UgaXQgaXMgbm90IG5lZWRlZCBhbmQgY2FuIGJlIGxlZnQgZGVmYXVsdC5cbiAgICovXG4gIG5ldHdvcms6IGJ0Y05ldHdvcmssXG4gIC8qKlxuICAgKiBXaGVuIGV4dHJhY3RUcmFuc2FjdGlvbiBpcyBjYWxsZWQsIHRoZSBmZWUgcmF0ZSBpcyBjaGVja2VkLlxuICAgKiBUSElTIElTIE5PVCBUTyBCRSBSRUxJRUQgT04uXG4gICAqIEl0IGlzIG9ubHkgaGVyZSBhcyBhIGxhc3QgZGl0Y2ggZWZmb3J0IHRvIHByZXZlbnQgc2VuZGluZyBhIDUwMCBCVEMgZmVlIGV0Yy5cbiAgICovXG4gIG1heGltdW1GZWVSYXRlOiA1MDAwLCAvLyBzYXRvc2hpIHBlciBieXRlXG59O1xuLyoqXG4gKiBQc2J0IGNsYXNzIGNhbiBwYXJzZSBhbmQgZ2VuZXJhdGUgYSBQU0JUIGJpbmFyeSBiYXNlZCBvZmYgb2YgdGhlIEJJUDE3NC5cbiAqIFRoZXJlIGFyZSA2IHJvbGVzIHRoYXQgdGhpcyBjbGFzcyBmdWxmaWxscy4gKEV4cGxhaW5lZCBpbiBCSVAxNzQpXG4gKlxuICogQ3JlYXRvcjogVGhpcyBjYW4gYmUgZG9uZSB3aXRoIGBuZXcgUHNidCgpYFxuICpcbiAqIFVwZGF0ZXI6IFRoaXMgY2FuIGJlIGRvbmUgd2l0aCBgcHNidC5hZGRJbnB1dChpbnB1dClgLCBgcHNidC5hZGRJbnB1dHMoaW5wdXRzKWAsXG4gKiAgIGBwc2J0LmFkZE91dHB1dChvdXRwdXQpYCwgYHBzYnQuYWRkT3V0cHV0cyhvdXRwdXRzKWAgd2hlbiB5b3UgYXJlIGxvb2tpbmcgdG9cbiAqICAgYWRkIG5ldyBpbnB1dHMgYW5kIG91dHB1dHMgdG8gdGhlIFBTQlQsIGFuZCBgcHNidC51cGRhdGVHbG9iYWwoaXRlbU9iamVjdClgLFxuICogICBgcHNidC51cGRhdGVJbnB1dChpdGVtT2JqZWN0KWAsIGBwc2J0LnVwZGF0ZU91dHB1dChpdGVtT2JqZWN0KWBcbiAqICAgYWRkSW5wdXQgcmVxdWlyZXMgaGFzaDogQnVmZmVyIHwgc3RyaW5nOyBhbmQgaW5kZXg6IG51bWJlcjsgYXMgYXR0cmlidXRlc1xuICogICBhbmQgY2FuIGFsc28gaW5jbHVkZSBhbnkgYXR0cmlidXRlcyB0aGF0IGFyZSB1c2VkIGluIHVwZGF0ZUlucHV0IG1ldGhvZC5cbiAqICAgYWRkT3V0cHV0IHJlcXVpcmVzIHNjcmlwdDogQnVmZmVyOyBhbmQgdmFsdWU6IG51bWJlcjsgYW5kIGxpa2V3aXNlIGNhbiBpbmNsdWRlXG4gKiAgIGRhdGEgZm9yIHVwZGF0ZU91dHB1dC5cbiAqICAgRm9yIGEgbGlzdCBvZiB3aGF0IGF0dHJpYnV0ZXMgc2hvdWxkIGJlIHdoYXQgdHlwZXMuIENoZWNrIHRoZSBiaXAxNzQgbGlicmFyeS5cbiAqICAgQWxzbywgY2hlY2sgdGhlIGludGVncmF0aW9uIHRlc3RzIGZvciBzb21lIGV4YW1wbGVzIG9mIHVzYWdlLlxuICpcbiAqIFNpZ25lcjogVGhlcmUgYXJlIGEgZmV3IG1ldGhvZHMuIHNpZ25BbGxJbnB1dHMgYW5kIHNpZ25BbGxJbnB1dHNBc3luYywgd2hpY2ggd2lsbCBzZWFyY2ggYWxsIGlucHV0XG4gKiAgIGluZm9ybWF0aW9uIGZvciB5b3VyIHB1YmtleSBvciBwdWJrZXloYXNoLCBhbmQgb25seSBzaWduIGlucHV0cyB3aGVyZSBpdCBmaW5kc1xuICogICB5b3VyIGluZm8uIE9yIHlvdSBjYW4gZXhwbGljaXRseSBzaWduIGEgc3BlY2lmaWMgaW5wdXQgd2l0aCBzaWduSW5wdXQgYW5kXG4gKiAgIHNpZ25JbnB1dEFzeW5jLiBGb3IgdGhlIGFzeW5jIG1ldGhvZHMgeW91IGNhbiBjcmVhdGUgYSBTaWduZXJBc3luYyBvYmplY3RcbiAqICAgYW5kIHVzZSBzb21ldGhpbmcgbGlrZSBhIGhhcmR3YXJlIHdhbGxldCB0byBzaWduIHdpdGguIChZb3UgbXVzdCBpbXBsZW1lbnQgdGhpcylcbiAqXG4gKiBDb21iaW5lcjogcHNidHMgY2FuIGJlIGNvbWJpbmVkIGVhc2lseSB3aXRoIGBwc2J0LmNvbWJpbmUocHNidDIsIHBzYnQzLCBwc2J0NCAuLi4pYFxuICogICB0aGUgcHNidCBjYWxsaW5nIGNvbWJpbmUgd2lsbCBhbHdheXMgaGF2ZSBwcmVjZWRlbmNlIHdoZW4gYSBjb25mbGljdCBvY2N1cnMuXG4gKiAgIENvbWJpbmUgY2hlY2tzIGlmIHRoZSBpbnRlcm5hbCBiaXRjb2luIHRyYW5zYWN0aW9uIGlzIHRoZSBzYW1lLCBzbyBiZSBzdXJlIHRoYXRcbiAqICAgYWxsIHNlcXVlbmNlcywgdmVyc2lvbiwgbG9ja3RpbWUsIGV0Yy4gYXJlIHRoZSBzYW1lIGJlZm9yZSBjb21iaW5pbmcuXG4gKlxuICogSW5wdXQgRmluYWxpemVyOiBUaGlzIHJvbGUgaXMgZmFpcmx5IGltcG9ydGFudC4gTm90IG9ubHkgZG9lcyBpdCBuZWVkIHRvIGNvbnN0cnVjdFxuICogICB0aGUgaW5wdXQgc2NyaXB0U2lncyBhbmQgd2l0bmVzc2VzLCBidXQgaXQgU0hPVUxEIHZlcmlmeSB0aGUgc2lnbmF0dXJlcyBldGMuXG4gKiAgIEJlZm9yZSBydW5uaW5nIGBwc2J0LmZpbmFsaXplQWxsSW5wdXRzKClgIHBsZWFzZSBydW4gYHBzYnQudmFsaWRhdGVTaWduYXR1cmVzT2ZBbGxJbnB1dHMoKWBcbiAqICAgUnVubmluZyBhbnkgZmluYWxpemUgbWV0aG9kIHdpbGwgZGVsZXRlIGFueSBkYXRhIGluIHRoZSBpbnB1dChzKSB0aGF0IGFyZSBubyBsb25nZXJcbiAqICAgbmVlZGVkIGR1ZSB0byB0aGUgZmluYWxpemVkIHNjcmlwdHMgY29udGFpbmluZyB0aGUgaW5mb3JtYXRpb24uXG4gKlxuICogVHJhbnNhY3Rpb24gRXh0cmFjdG9yOiBUaGlzIHJvbGUgd2lsbCBwZXJmb3JtIHNvbWUgY2hlY2tzIGJlZm9yZSByZXR1cm5pbmcgYVxuICogICBUcmFuc2FjdGlvbiBvYmplY3QuIFN1Y2ggYXMgZmVlIHJhdGUgbm90IGJlaW5nIGxhcmdlciB0aGFuIG1heGltdW1GZWVSYXRlIGV0Yy5cbiAqL1xuZXhwb3J0IGNsYXNzIFBzYnQge1xuICBkYXRhO1xuICBzdGF0aWMgZnJvbUJhc2U2NChkYXRhLCBvcHRzID0ge30pIHtcbiAgICBjb25zdCBidWZmZXIgPSB0b29scy5mcm9tQmFzZTY0KGRhdGEpO1xuICAgIHJldHVybiB0aGlzLmZyb21CdWZmZXIoYnVmZmVyLCBvcHRzKTtcbiAgfVxuICBzdGF0aWMgZnJvbUhleChkYXRhLCBvcHRzID0ge30pIHtcbiAgICBjb25zdCBidWZmZXIgPSB0b29scy5mcm9tSGV4KGRhdGEpO1xuICAgIHJldHVybiB0aGlzLmZyb21CdWZmZXIoYnVmZmVyLCBvcHRzKTtcbiAgfVxuICBzdGF0aWMgZnJvbUJ1ZmZlcihidWZmZXIsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IHBzYnRCYXNlID0gUHNidEJhc2UuZnJvbUJ1ZmZlcihidWZmZXIsIHRyYW5zYWN0aW9uRnJvbUJ1ZmZlcik7XG4gICAgY29uc3QgcHNidCA9IG5ldyBQc2J0KG9wdHMsIHBzYnRCYXNlKTtcbiAgICBjaGVja1R4Rm9yRHVwZUlucyhwc2J0Ll9fQ0FDSEUuX19UWCwgcHNidC5fX0NBQ0hFKTtcbiAgICByZXR1cm4gcHNidDtcbiAgfVxuICBfX0NBQ0hFO1xuICBvcHRzO1xuICBjb25zdHJ1Y3RvcihvcHRzID0ge30sIGRhdGEgPSBuZXcgUHNidEJhc2UobmV3IFBzYnRUcmFuc2FjdGlvbigpKSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgLy8gc2V0IGRlZmF1bHRzXG4gICAgdGhpcy5vcHRzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9PUFRTLCBvcHRzKTtcbiAgICB0aGlzLl9fQ0FDSEUgPSB7XG4gICAgICBfX05PTl9XSVRORVNTX1VUWE9fVFhfQ0FDSEU6IFtdLFxuICAgICAgX19OT05fV0lUTkVTU19VVFhPX0JVRl9DQUNIRTogW10sXG4gICAgICBfX1RYX0lOX0NBQ0hFOiB7fSxcbiAgICAgIF9fVFg6IHRoaXMuZGF0YS5nbG9iYWxNYXAudW5zaWduZWRUeC50eCxcbiAgICAgIC8vIFBzYnQncyBwcmVkZWNlc3NvciAoVHJhbnNhY3Rpb25CdWlsZGVyIC0gbm93IHJlbW92ZWQpIGJlaGF2aW9yXG4gICAgICAvLyB3YXMgdG8gbm90IGNvbmZpcm0gaW5wdXQgdmFsdWVzICBiZWZvcmUgc2lnbmluZy5cbiAgICAgIC8vIEV2ZW4gdGhvdWdoIHdlIGhpZ2hseSBlbmNvdXJhZ2UgcGVvcGxlIHRvIGdldFxuICAgICAgLy8gdGhlIGZ1bGwgcGFyZW50IHRyYW5zYWN0aW9uIHRvIHZlcmlmeSB2YWx1ZXMsIHRoZSBhYmlsaXR5IHRvXG4gICAgICAvLyBzaWduIG5vbi1zZWd3aXQgaW5wdXRzIHdpdGhvdXQgdGhlIGZ1bGwgdHJhbnNhY3Rpb24gd2FzIG9mdGVuXG4gICAgICAvLyByZXF1ZXN0ZWQuIFNvIHRoZSBvbmx5IHdheSB0byBhY3RpdmF0ZSBpcyB0byB1c2UgQHRzLWlnbm9yZS5cbiAgICAgIC8vIFdlIHdpbGwgZGlzYWJsZSBleHBvcnRpbmcgdGhlIFBzYnQgd2hlbiB1bnNhZmUgc2lnbiBpcyBhY3RpdmUuXG4gICAgICAvLyBiZWNhdXNlIGl0IGlzIG5vdCBCSVAxNzQgY29tcGxpYW50LlxuICAgICAgX19VTlNBRkVfU0lHTl9OT05TRUdXSVQ6IGZhbHNlLFxuICAgIH07XG4gICAgaWYgKHRoaXMuZGF0YS5pbnB1dHMubGVuZ3RoID09PSAwKSB0aGlzLnNldFZlcnNpb24oMik7XG4gICAgLy8gTWFrZSBkYXRhIGhpZGRlbiB3aGVuIGVudW1lcmF0aW5nXG4gICAgY29uc3QgZHBldyA9IChvYmosIGF0dHIsIGVudW1lcmFibGUsIHdyaXRhYmxlKSA9PlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgYXR0ciwge1xuICAgICAgICBlbnVtZXJhYmxlLFxuICAgICAgICB3cml0YWJsZSxcbiAgICAgIH0pO1xuICAgIGRwZXcodGhpcywgJ19fQ0FDSEUnLCBmYWxzZSwgdHJ1ZSk7XG4gICAgZHBldyh0aGlzLCAnb3B0cycsIGZhbHNlLCB0cnVlKTtcbiAgfVxuICBnZXQgaW5wdXRDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmlucHV0cy5sZW5ndGg7XG4gIH1cbiAgZ2V0IHZlcnNpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX19DQUNIRS5fX1RYLnZlcnNpb247XG4gIH1cbiAgc2V0IHZlcnNpb24odmVyc2lvbikge1xuICAgIHRoaXMuc2V0VmVyc2lvbih2ZXJzaW9uKTtcbiAgfVxuICBnZXQgbG9ja3RpbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19DQUNIRS5fX1RYLmxvY2t0aW1lO1xuICB9XG4gIHNldCBsb2NrdGltZShsb2NrdGltZSkge1xuICAgIHRoaXMuc2V0TG9ja3RpbWUobG9ja3RpbWUpO1xuICB9XG4gIGdldCB0eElucHV0cygpIHtcbiAgICByZXR1cm4gdGhpcy5fX0NBQ0hFLl9fVFguaW5zLm1hcChpbnB1dCA9PiAoe1xuICAgICAgaGFzaDogY2xvbmVCdWZmZXIoaW5wdXQuaGFzaCksXG4gICAgICBpbmRleDogaW5wdXQuaW5kZXgsXG4gICAgICBzZXF1ZW5jZTogaW5wdXQuc2VxdWVuY2UsXG4gICAgfSkpO1xuICB9XG4gIGdldCB0eE91dHB1dHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19DQUNIRS5fX1RYLm91dHMubWFwKG91dHB1dCA9PiB7XG4gICAgICBsZXQgYWRkcmVzcztcbiAgICAgIHRyeSB7XG4gICAgICAgIGFkZHJlc3MgPSBmcm9tT3V0cHV0U2NyaXB0KG91dHB1dC5zY3JpcHQsIHRoaXMub3B0cy5uZXR3b3JrKTtcbiAgICAgIH0gY2F0Y2ggKF8pIHt9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzY3JpcHQ6IGNsb25lQnVmZmVyKG91dHB1dC5zY3JpcHQpLFxuICAgICAgICB2YWx1ZTogb3V0cHV0LnZhbHVlLFxuICAgICAgICBhZGRyZXNzLFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuICBjb21iaW5lKC4uLnRob3NlKSB7XG4gICAgdGhpcy5kYXRhLmNvbWJpbmUoLi4udGhvc2UubWFwKG8gPT4gby5kYXRhKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY2xvbmUoKSB7XG4gICAgLy8gVE9ETzogbW9yZSBlZmZpY2llbnQgY2xvbmluZ1xuICAgIGNvbnN0IHJlcyA9IFBzYnQuZnJvbUJ1ZmZlcih0aGlzLmRhdGEudG9CdWZmZXIoKSk7XG4gICAgcmVzLm9wdHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMub3B0cykpO1xuICAgIHJldHVybiByZXM7XG4gIH1cbiAgc2V0TWF4aW11bUZlZVJhdGUoc2F0b3NoaVBlckJ5dGUpIHtcbiAgICBjaGVjazMyQml0KHNhdG9zaGlQZXJCeXRlKTsgLy8gNDIuOSBCVEMgcGVyIGJ5dGUgSVMgZXhjZXNzaXZlLi4uIHNvIHRocm93XG4gICAgdGhpcy5vcHRzLm1heGltdW1GZWVSYXRlID0gc2F0b3NoaVBlckJ5dGU7XG4gIH1cbiAgc2V0VmVyc2lvbih2ZXJzaW9uKSB7XG4gICAgY2hlY2szMkJpdCh2ZXJzaW9uKTtcbiAgICBjaGVja0lucHV0c0ZvclBhcnRpYWxTaWcodGhpcy5kYXRhLmlucHV0cywgJ3NldFZlcnNpb24nKTtcbiAgICBjb25zdCBjID0gdGhpcy5fX0NBQ0hFO1xuICAgIGMuX19UWC52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICBjLl9fRVhUUkFDVEVEX1RYID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNldExvY2t0aW1lKGxvY2t0aW1lKSB7XG4gICAgY2hlY2szMkJpdChsb2NrdGltZSk7XG4gICAgY2hlY2tJbnB1dHNGb3JQYXJ0aWFsU2lnKHRoaXMuZGF0YS5pbnB1dHMsICdzZXRMb2NrdGltZScpO1xuICAgIGNvbnN0IGMgPSB0aGlzLl9fQ0FDSEU7XG4gICAgYy5fX1RYLmxvY2t0aW1lID0gbG9ja3RpbWU7XG4gICAgYy5fX0VYVFJBQ1RFRF9UWCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXRJbnB1dFNlcXVlbmNlKGlucHV0SW5kZXgsIHNlcXVlbmNlKSB7XG4gICAgY2hlY2szMkJpdChzZXF1ZW5jZSk7XG4gICAgY2hlY2tJbnB1dHNGb3JQYXJ0aWFsU2lnKHRoaXMuZGF0YS5pbnB1dHMsICdzZXRJbnB1dFNlcXVlbmNlJyk7XG4gICAgY29uc3QgYyA9IHRoaXMuX19DQUNIRTtcbiAgICBpZiAoYy5fX1RYLmlucy5sZW5ndGggPD0gaW5wdXRJbmRleCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnB1dCBpbmRleCB0b28gaGlnaCcpO1xuICAgIH1cbiAgICBjLl9fVFguaW5zW2lucHV0SW5kZXhdLnNlcXVlbmNlID0gc2VxdWVuY2U7XG4gICAgYy5fX0VYVFJBQ1RFRF9UWCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhZGRJbnB1dHMoaW5wdXREYXRhcykge1xuICAgIGlucHV0RGF0YXMuZm9yRWFjaChpbnB1dERhdGEgPT4gdGhpcy5hZGRJbnB1dChpbnB1dERhdGEpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhZGRJbnB1dChpbnB1dERhdGEpIHtcbiAgICBpZiAoXG4gICAgICBhcmd1bWVudHMubGVuZ3RoID4gMSB8fFxuICAgICAgIWlucHV0RGF0YSB8fFxuICAgICAgaW5wdXREYXRhLmhhc2ggPT09IHVuZGVmaW5lZCB8fFxuICAgICAgaW5wdXREYXRhLmluZGV4ID09PSB1bmRlZmluZWRcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEludmFsaWQgYXJndW1lbnRzIGZvciBQc2J0LmFkZElucHV0LiBgICtcbiAgICAgICAgICBgUmVxdWlyZXMgc2luZ2xlIG9iamVjdCB3aXRoIGF0IGxlYXN0IFtoYXNoXSBhbmQgW2luZGV4XWAsXG4gICAgICApO1xuICAgIH1cbiAgICBjaGVja1RhcHJvb3RJbnB1dEZpZWxkcyhpbnB1dERhdGEsIGlucHV0RGF0YSwgJ2FkZElucHV0Jyk7XG4gICAgY2hlY2tJbnB1dHNGb3JQYXJ0aWFsU2lnKHRoaXMuZGF0YS5pbnB1dHMsICdhZGRJbnB1dCcpO1xuICAgIGlmIChpbnB1dERhdGEud2l0bmVzc1NjcmlwdCkgY2hlY2tJbnZhbGlkUDJXU0goaW5wdXREYXRhLndpdG5lc3NTY3JpcHQpO1xuICAgIGNvbnN0IGMgPSB0aGlzLl9fQ0FDSEU7XG4gICAgdGhpcy5kYXRhLmFkZElucHV0KGlucHV0RGF0YSk7XG4gICAgY29uc3QgdHhJbiA9IGMuX19UWC5pbnNbYy5fX1RYLmlucy5sZW5ndGggLSAxXTtcbiAgICBjaGVja1R4SW5wdXRDYWNoZShjLCB0eEluKTtcbiAgICBjb25zdCBpbnB1dEluZGV4ID0gdGhpcy5kYXRhLmlucHV0cy5sZW5ndGggLSAxO1xuICAgIGNvbnN0IGlucHV0ID0gdGhpcy5kYXRhLmlucHV0c1tpbnB1dEluZGV4XTtcbiAgICBpZiAoaW5wdXQubm9uV2l0bmVzc1V0eG8pIHtcbiAgICAgIGFkZE5vbldpdG5lc3NUeENhY2hlKHRoaXMuX19DQUNIRSwgaW5wdXQsIGlucHV0SW5kZXgpO1xuICAgIH1cbiAgICBjLl9fRkVFID0gdW5kZWZpbmVkO1xuICAgIGMuX19GRUVfUkFURSA9IHVuZGVmaW5lZDtcbiAgICBjLl9fRVhUUkFDVEVEX1RYID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGFkZE91dHB1dHMob3V0cHV0RGF0YXMpIHtcbiAgICBvdXRwdXREYXRhcy5mb3JFYWNoKG91dHB1dERhdGEgPT4gdGhpcy5hZGRPdXRwdXQob3V0cHV0RGF0YSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGFkZE91dHB1dChvdXRwdXREYXRhKSB7XG4gICAgaWYgKFxuICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgfHxcbiAgICAgICFvdXRwdXREYXRhIHx8XG4gICAgICBvdXRwdXREYXRhLnZhbHVlID09PSB1bmRlZmluZWQgfHxcbiAgICAgIChvdXRwdXREYXRhLmFkZHJlc3MgPT09IHVuZGVmaW5lZCAmJiBvdXRwdXREYXRhLnNjcmlwdCA9PT0gdW5kZWZpbmVkKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW52YWxpZCBhcmd1bWVudHMgZm9yIFBzYnQuYWRkT3V0cHV0LiBgICtcbiAgICAgICAgICBgUmVxdWlyZXMgc2luZ2xlIG9iamVjdCB3aXRoIGF0IGxlYXN0IFtzY3JpcHQgb3IgYWRkcmVzc10gYW5kIFt2YWx1ZV1gLFxuICAgICAgKTtcbiAgICB9XG4gICAgY2hlY2tJbnB1dHNGb3JQYXJ0aWFsU2lnKHRoaXMuZGF0YS5pbnB1dHMsICdhZGRPdXRwdXQnKTtcbiAgICBjb25zdCB7IGFkZHJlc3MgfSA9IG91dHB1dERhdGE7XG4gICAgaWYgKHR5cGVvZiBhZGRyZXNzID09PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgeyBuZXR3b3JrIH0gPSB0aGlzLm9wdHM7XG4gICAgICBjb25zdCBzY3JpcHQgPSB0b091dHB1dFNjcmlwdChhZGRyZXNzLCBuZXR3b3JrKTtcbiAgICAgIG91dHB1dERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBvdXRwdXREYXRhLCB7IHNjcmlwdCB9KTtcbiAgICB9XG4gICAgY2hlY2tUYXByb290T3V0cHV0RmllbGRzKG91dHB1dERhdGEsIG91dHB1dERhdGEsICdhZGRPdXRwdXQnKTtcbiAgICBjb25zdCBjID0gdGhpcy5fX0NBQ0hFO1xuICAgIHRoaXMuZGF0YS5hZGRPdXRwdXQob3V0cHV0RGF0YSk7XG4gICAgYy5fX0ZFRSA9IHVuZGVmaW5lZDtcbiAgICBjLl9fRkVFX1JBVEUgPSB1bmRlZmluZWQ7XG4gICAgYy5fX0VYVFJBQ1RFRF9UWCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBleHRyYWN0VHJhbnNhY3Rpb24oZGlzYWJsZUZlZUNoZWNrKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuaW5wdXRzLmV2ZXJ5KGlzRmluYWxpemVkKSkgdGhyb3cgbmV3IEVycm9yKCdOb3QgZmluYWxpemVkJyk7XG4gICAgY29uc3QgYyA9IHRoaXMuX19DQUNIRTtcbiAgICBpZiAoIWRpc2FibGVGZWVDaGVjaykge1xuICAgICAgY2hlY2tGZWVzKHRoaXMsIGMsIHRoaXMub3B0cyk7XG4gICAgfVxuICAgIGlmIChjLl9fRVhUUkFDVEVEX1RYKSByZXR1cm4gYy5fX0VYVFJBQ1RFRF9UWDtcbiAgICBjb25zdCB0eCA9IGMuX19UWC5jbG9uZSgpO1xuICAgIGlucHV0RmluYWxpemVHZXRBbXRzKHRoaXMuZGF0YS5pbnB1dHMsIHR4LCBjLCB0cnVlKTtcbiAgICByZXR1cm4gdHg7XG4gIH1cbiAgZ2V0RmVlUmF0ZSgpIHtcbiAgICByZXR1cm4gZ2V0VHhDYWNoZVZhbHVlKFxuICAgICAgJ19fRkVFX1JBVEUnLFxuICAgICAgJ2ZlZSByYXRlJyxcbiAgICAgIHRoaXMuZGF0YS5pbnB1dHMsXG4gICAgICB0aGlzLl9fQ0FDSEUsXG4gICAgKTtcbiAgfVxuICBnZXRGZWUoKSB7XG4gICAgcmV0dXJuIGdldFR4Q2FjaGVWYWx1ZSgnX19GRUUnLCAnZmVlJywgdGhpcy5kYXRhLmlucHV0cywgdGhpcy5fX0NBQ0hFKTtcbiAgfVxuICBmaW5hbGl6ZUFsbElucHV0cygpIHtcbiAgICBjaGVja0ZvcklucHV0KHRoaXMuZGF0YS5pbnB1dHMsIDApOyAvLyBtYWtpbmcgc3VyZSB3ZSBoYXZlIGF0IGxlYXN0IG9uZVxuICAgIHJhbmdlKHRoaXMuZGF0YS5pbnB1dHMubGVuZ3RoKS5mb3JFYWNoKGlkeCA9PiB0aGlzLmZpbmFsaXplSW5wdXQoaWR4KSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZmluYWxpemVJbnB1dChpbnB1dEluZGV4LCBmaW5hbFNjcmlwdHNGdW5jKSB7XG4gICAgY29uc3QgaW5wdXQgPSBjaGVja0ZvcklucHV0KHRoaXMuZGF0YS5pbnB1dHMsIGlucHV0SW5kZXgpO1xuICAgIGlmIChpc1RhcHJvb3RJbnB1dChpbnB1dCkpXG4gICAgICByZXR1cm4gdGhpcy5fZmluYWxpemVUYXByb290SW5wdXQoXG4gICAgICAgIGlucHV0SW5kZXgsXG4gICAgICAgIGlucHV0LFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIGZpbmFsU2NyaXB0c0Z1bmMsXG4gICAgICApO1xuICAgIHJldHVybiB0aGlzLl9maW5hbGl6ZUlucHV0KGlucHV0SW5kZXgsIGlucHV0LCBmaW5hbFNjcmlwdHNGdW5jKTtcbiAgfVxuICBmaW5hbGl6ZVRhcHJvb3RJbnB1dChcbiAgICBpbnB1dEluZGV4LFxuICAgIHRhcExlYWZIYXNoVG9GaW5hbGl6ZSxcbiAgICBmaW5hbFNjcmlwdHNGdW5jID0gdGFwU2NyaXB0RmluYWxpemVyLFxuICApIHtcbiAgICBjb25zdCBpbnB1dCA9IGNoZWNrRm9ySW5wdXQodGhpcy5kYXRhLmlucHV0cywgaW5wdXRJbmRleCk7XG4gICAgaWYgKGlzVGFwcm9vdElucHV0KGlucHV0KSlcbiAgICAgIHJldHVybiB0aGlzLl9maW5hbGl6ZVRhcHJvb3RJbnB1dChcbiAgICAgICAgaW5wdXRJbmRleCxcbiAgICAgICAgaW5wdXQsXG4gICAgICAgIHRhcExlYWZIYXNoVG9GaW5hbGl6ZSxcbiAgICAgICAgZmluYWxTY3JpcHRzRnVuYyxcbiAgICAgICk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZmluYWxpemUgaW5wdXQgIyR7aW5wdXRJbmRleH0uIE5vdCBUYXByb290LmApO1xuICB9XG4gIF9maW5hbGl6ZUlucHV0KGlucHV0SW5kZXgsIGlucHV0LCBmaW5hbFNjcmlwdHNGdW5jID0gZ2V0RmluYWxTY3JpcHRzKSB7XG4gICAgY29uc3QgeyBzY3JpcHQsIGlzUDJTSCwgaXNQMldTSCwgaXNTZWd3aXQgfSA9IGdldFNjcmlwdEZyb21JbnB1dChcbiAgICAgIGlucHV0SW5kZXgsXG4gICAgICBpbnB1dCxcbiAgICAgIHRoaXMuX19DQUNIRSxcbiAgICApO1xuICAgIGlmICghc2NyaXB0KSB0aHJvdyBuZXcgRXJyb3IoYE5vIHNjcmlwdCBmb3VuZCBmb3IgaW5wdXQgIyR7aW5wdXRJbmRleH1gKTtcbiAgICBjaGVja1BhcnRpYWxTaWdTaWdoYXNoZXMoaW5wdXQpO1xuICAgIGNvbnN0IHsgZmluYWxTY3JpcHRTaWcsIGZpbmFsU2NyaXB0V2l0bmVzcyB9ID0gZmluYWxTY3JpcHRzRnVuYyhcbiAgICAgIGlucHV0SW5kZXgsXG4gICAgICBpbnB1dCxcbiAgICAgIHNjcmlwdCxcbiAgICAgIGlzU2Vnd2l0LFxuICAgICAgaXNQMlNILFxuICAgICAgaXNQMldTSCxcbiAgICApO1xuICAgIGlmIChmaW5hbFNjcmlwdFNpZykgdGhpcy5kYXRhLnVwZGF0ZUlucHV0KGlucHV0SW5kZXgsIHsgZmluYWxTY3JpcHRTaWcgfSk7XG4gICAgaWYgKGZpbmFsU2NyaXB0V2l0bmVzcylcbiAgICAgIHRoaXMuZGF0YS51cGRhdGVJbnB1dChpbnB1dEluZGV4LCB7IGZpbmFsU2NyaXB0V2l0bmVzcyB9KTtcbiAgICBpZiAoIWZpbmFsU2NyaXB0U2lnICYmICFmaW5hbFNjcmlwdFdpdG5lc3MpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZXJyb3IgZmluYWxpemluZyBpbnB1dCAjJHtpbnB1dEluZGV4fWApO1xuICAgIHRoaXMuZGF0YS5jbGVhckZpbmFsaXplZElucHV0KGlucHV0SW5kZXgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIF9maW5hbGl6ZVRhcHJvb3RJbnB1dChcbiAgICBpbnB1dEluZGV4LFxuICAgIGlucHV0LFxuICAgIHRhcExlYWZIYXNoVG9GaW5hbGl6ZSxcbiAgICBmaW5hbFNjcmlwdHNGdW5jID0gdGFwU2NyaXB0RmluYWxpemVyLFxuICApIHtcbiAgICBpZiAoIWlucHV0LndpdG5lc3NVdHhvKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGZpbmFsaXplIGlucHV0ICMke2lucHV0SW5kZXh9LiBNaXNzaW5nIHdpdGhuZXNzIHV0eG8uYCxcbiAgICAgICk7XG4gICAgLy8gQ2hlY2sga2V5IHNwZW5kIGZpcnN0LiBJbmNyZWFzZWQgcHJpdmFjeSBhbmQgcmVkdWNlZCBibG9jayBzcGFjZS5cbiAgICBpZiAoaW5wdXQudGFwS2V5U2lnKSB7XG4gICAgICBjb25zdCBwYXltZW50ID0gcGF5bWVudHMucDJ0cih7XG4gICAgICAgIG91dHB1dDogaW5wdXQud2l0bmVzc1V0eG8uc2NyaXB0LFxuICAgICAgICBzaWduYXR1cmU6IGlucHV0LnRhcEtleVNpZyxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZmluYWxTY3JpcHRXaXRuZXNzID0gd2l0bmVzc1N0YWNrVG9TY3JpcHRXaXRuZXNzKHBheW1lbnQud2l0bmVzcyk7XG4gICAgICB0aGlzLmRhdGEudXBkYXRlSW5wdXQoaW5wdXRJbmRleCwgeyBmaW5hbFNjcmlwdFdpdG5lc3MgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHsgZmluYWxTY3JpcHRXaXRuZXNzIH0gPSBmaW5hbFNjcmlwdHNGdW5jKFxuICAgICAgICBpbnB1dEluZGV4LFxuICAgICAgICBpbnB1dCxcbiAgICAgICAgdGFwTGVhZkhhc2hUb0ZpbmFsaXplLFxuICAgICAgKTtcbiAgICAgIHRoaXMuZGF0YS51cGRhdGVJbnB1dChpbnB1dEluZGV4LCB7IGZpbmFsU2NyaXB0V2l0bmVzcyB9KTtcbiAgICB9XG4gICAgdGhpcy5kYXRhLmNsZWFyRmluYWxpemVkSW5wdXQoaW5wdXRJbmRleCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ2V0SW5wdXRUeXBlKGlucHV0SW5kZXgpIHtcbiAgICBjb25zdCBpbnB1dCA9IGNoZWNrRm9ySW5wdXQodGhpcy5kYXRhLmlucHV0cywgaW5wdXRJbmRleCk7XG4gICAgY29uc3Qgc2NyaXB0ID0gZ2V0U2NyaXB0RnJvbVV0eG8oaW5wdXRJbmRleCwgaW5wdXQsIHRoaXMuX19DQUNIRSk7XG4gICAgY29uc3QgcmVzdWx0ID0gZ2V0TWVhbmluZ2Z1bFNjcmlwdChcbiAgICAgIHNjcmlwdCxcbiAgICAgIGlucHV0SW5kZXgsXG4gICAgICAnaW5wdXQnLFxuICAgICAgaW5wdXQucmVkZWVtU2NyaXB0IHx8IHJlZGVlbUZyb21GaW5hbFNjcmlwdFNpZyhpbnB1dC5maW5hbFNjcmlwdFNpZyksXG4gICAgICBpbnB1dC53aXRuZXNzU2NyaXB0IHx8XG4gICAgICAgIHJlZGVlbUZyb21GaW5hbFdpdG5lc3NTY3JpcHQoaW5wdXQuZmluYWxTY3JpcHRXaXRuZXNzKSxcbiAgICApO1xuICAgIGNvbnN0IHR5cGUgPSByZXN1bHQudHlwZSA9PT0gJ3JhdycgPyAnJyA6IHJlc3VsdC50eXBlICsgJy0nO1xuICAgIGNvbnN0IG1haW5UeXBlID0gY2xhc3NpZnlTY3JpcHQocmVzdWx0Lm1lYW5pbmdmdWxTY3JpcHQpO1xuICAgIHJldHVybiB0eXBlICsgbWFpblR5cGU7XG4gIH1cbiAgaW5wdXRIYXNQdWJrZXkoaW5wdXRJbmRleCwgcHVia2V5KSB7XG4gICAgY29uc3QgaW5wdXQgPSBjaGVja0ZvcklucHV0KHRoaXMuZGF0YS5pbnB1dHMsIGlucHV0SW5kZXgpO1xuICAgIHJldHVybiBwdWJrZXlJbklucHV0KHB1YmtleSwgaW5wdXQsIGlucHV0SW5kZXgsIHRoaXMuX19DQUNIRSk7XG4gIH1cbiAgaW5wdXRIYXNIREtleShpbnB1dEluZGV4LCByb290KSB7XG4gICAgY29uc3QgaW5wdXQgPSBjaGVja0ZvcklucHV0KHRoaXMuZGF0YS5pbnB1dHMsIGlucHV0SW5kZXgpO1xuICAgIGNvbnN0IGRlcml2YXRpb25Jc01pbmUgPSBiaXAzMkRlcml2YXRpb25Jc01pbmUocm9vdCk7XG4gICAgcmV0dXJuIChcbiAgICAgICEhaW5wdXQuYmlwMzJEZXJpdmF0aW9uICYmIGlucHV0LmJpcDMyRGVyaXZhdGlvbi5zb21lKGRlcml2YXRpb25Jc01pbmUpXG4gICAgKTtcbiAgfVxuICBvdXRwdXRIYXNQdWJrZXkob3V0cHV0SW5kZXgsIHB1YmtleSkge1xuICAgIGNvbnN0IG91dHB1dCA9IGNoZWNrRm9yT3V0cHV0KHRoaXMuZGF0YS5vdXRwdXRzLCBvdXRwdXRJbmRleCk7XG4gICAgcmV0dXJuIHB1YmtleUluT3V0cHV0KHB1YmtleSwgb3V0cHV0LCBvdXRwdXRJbmRleCwgdGhpcy5fX0NBQ0hFKTtcbiAgfVxuICBvdXRwdXRIYXNIREtleShvdXRwdXRJbmRleCwgcm9vdCkge1xuICAgIGNvbnN0IG91dHB1dCA9IGNoZWNrRm9yT3V0cHV0KHRoaXMuZGF0YS5vdXRwdXRzLCBvdXRwdXRJbmRleCk7XG4gICAgY29uc3QgZGVyaXZhdGlvbklzTWluZSA9IGJpcDMyRGVyaXZhdGlvbklzTWluZShyb290KTtcbiAgICByZXR1cm4gKFxuICAgICAgISFvdXRwdXQuYmlwMzJEZXJpdmF0aW9uICYmIG91dHB1dC5iaXAzMkRlcml2YXRpb24uc29tZShkZXJpdmF0aW9uSXNNaW5lKVxuICAgICk7XG4gIH1cbiAgdmFsaWRhdGVTaWduYXR1cmVzT2ZBbGxJbnB1dHModmFsaWRhdG9yKSB7XG4gICAgY2hlY2tGb3JJbnB1dCh0aGlzLmRhdGEuaW5wdXRzLCAwKTsgLy8gbWFraW5nIHN1cmUgd2UgaGF2ZSBhdCBsZWFzdCBvbmVcbiAgICBjb25zdCByZXN1bHRzID0gcmFuZ2UodGhpcy5kYXRhLmlucHV0cy5sZW5ndGgpLm1hcChpZHggPT5cbiAgICAgIHRoaXMudmFsaWRhdGVTaWduYXR1cmVzT2ZJbnB1dChpZHgsIHZhbGlkYXRvciksXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0cy5yZWR1Y2UoKGZpbmFsLCByZXMpID0+IHJlcyA9PT0gdHJ1ZSAmJiBmaW5hbCwgdHJ1ZSk7XG4gIH1cbiAgdmFsaWRhdGVTaWduYXR1cmVzT2ZJbnB1dChpbnB1dEluZGV4LCB2YWxpZGF0b3IsIHB1YmtleSkge1xuICAgIGNvbnN0IGlucHV0ID0gdGhpcy5kYXRhLmlucHV0c1tpbnB1dEluZGV4XTtcbiAgICBpZiAoaXNUYXByb290SW5wdXQoaW5wdXQpKVxuICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGVTaWduYXR1cmVzT2ZUYXByb290SW5wdXQoXG4gICAgICAgIGlucHV0SW5kZXgsXG4gICAgICAgIHZhbGlkYXRvcixcbiAgICAgICAgcHVia2V5LFxuICAgICAgKTtcbiAgICByZXR1cm4gdGhpcy5fdmFsaWRhdGVTaWduYXR1cmVzT2ZJbnB1dChpbnB1dEluZGV4LCB2YWxpZGF0b3IsIHB1YmtleSk7XG4gIH1cbiAgX3ZhbGlkYXRlU2lnbmF0dXJlc09mSW5wdXQoaW5wdXRJbmRleCwgdmFsaWRhdG9yLCBwdWJrZXkpIHtcbiAgICBjb25zdCBpbnB1dCA9IHRoaXMuZGF0YS5pbnB1dHNbaW5wdXRJbmRleF07XG4gICAgY29uc3QgcGFydGlhbFNpZyA9IChpbnB1dCB8fCB7fSkucGFydGlhbFNpZztcbiAgICBpZiAoIWlucHV0IHx8ICFwYXJ0aWFsU2lnIHx8IHBhcnRpYWxTaWcubGVuZ3RoIDwgMSlcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc2lnbmF0dXJlcyB0byB2YWxpZGF0ZScpO1xuICAgIGlmICh0eXBlb2YgdmFsaWRhdG9yICE9PSAnZnVuY3Rpb24nKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZWVkIHZhbGlkYXRvciBmdW5jdGlvbiB0byB2YWxpZGF0ZSBzaWduYXR1cmVzJyk7XG4gICAgY29uc3QgbXlTaWdzID0gcHVia2V5XG4gICAgICA/IHBhcnRpYWxTaWcuZmlsdGVyKHNpZyA9PiB0b29scy5jb21wYXJlKHNpZy5wdWJrZXksIHB1YmtleSkgPT09IDApXG4gICAgICA6IHBhcnRpYWxTaWc7XG4gICAgaWYgKG15U2lncy5sZW5ndGggPCAxKSB0aHJvdyBuZXcgRXJyb3IoJ05vIHNpZ25hdHVyZXMgZm9yIHRoaXMgcHVia2V5Jyk7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGxldCBoYXNoQ2FjaGU7XG4gICAgbGV0IHNjcmlwdENhY2hlO1xuICAgIGxldCBzaWdoYXNoQ2FjaGU7XG4gICAgZm9yIChjb25zdCBwU2lnIG9mIG15U2lncykge1xuICAgICAgY29uc3Qgc2lnID0gYnNjcmlwdC5zaWduYXR1cmUuZGVjb2RlKHBTaWcuc2lnbmF0dXJlKTtcbiAgICAgIGNvbnN0IHsgaGFzaCwgc2NyaXB0IH0gPVxuICAgICAgICBzaWdoYXNoQ2FjaGUgIT09IHNpZy5oYXNoVHlwZVxuICAgICAgICAgID8gZ2V0SGFzaEZvclNpZyhcbiAgICAgICAgICAgICAgaW5wdXRJbmRleCxcbiAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgaW5wdXQsIHsgc2lnaGFzaFR5cGU6IHNpZy5oYXNoVHlwZSB9KSxcbiAgICAgICAgICAgICAgdGhpcy5fX0NBQ0hFLFxuICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgKVxuICAgICAgICAgIDogeyBoYXNoOiBoYXNoQ2FjaGUsIHNjcmlwdDogc2NyaXB0Q2FjaGUgfTtcbiAgICAgIHNpZ2hhc2hDYWNoZSA9IHNpZy5oYXNoVHlwZTtcbiAgICAgIGhhc2hDYWNoZSA9IGhhc2g7XG4gICAgICBzY3JpcHRDYWNoZSA9IHNjcmlwdDtcbiAgICAgIGNoZWNrU2NyaXB0Rm9yUHVia2V5KHBTaWcucHVia2V5LCBzY3JpcHQsICd2ZXJpZnknKTtcbiAgICAgIHJlc3VsdHMucHVzaCh2YWxpZGF0b3IocFNpZy5wdWJrZXksIGhhc2gsIHNpZy5zaWduYXR1cmUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHMuZXZlcnkocmVzID0+IHJlcyA9PT0gdHJ1ZSk7XG4gIH1cbiAgdmFsaWRhdGVTaWduYXR1cmVzT2ZUYXByb290SW5wdXQoaW5wdXRJbmRleCwgdmFsaWRhdG9yLCBwdWJrZXkpIHtcbiAgICBjb25zdCBpbnB1dCA9IHRoaXMuZGF0YS5pbnB1dHNbaW5wdXRJbmRleF07XG4gICAgY29uc3QgdGFwS2V5U2lnID0gKGlucHV0IHx8IHt9KS50YXBLZXlTaWc7XG4gICAgY29uc3QgdGFwU2NyaXB0U2lnID0gKGlucHV0IHx8IHt9KS50YXBTY3JpcHRTaWc7XG4gICAgaWYgKCFpbnB1dCAmJiAhdGFwS2V5U2lnICYmICEodGFwU2NyaXB0U2lnICYmICF0YXBTY3JpcHRTaWcubGVuZ3RoKSlcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc2lnbmF0dXJlcyB0byB2YWxpZGF0ZScpO1xuICAgIGlmICh0eXBlb2YgdmFsaWRhdG9yICE9PSAnZnVuY3Rpb24nKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZWVkIHZhbGlkYXRvciBmdW5jdGlvbiB0byB2YWxpZGF0ZSBzaWduYXR1cmVzJyk7XG4gICAgcHVia2V5ID0gcHVia2V5ICYmIHRvWE9ubHkocHVia2V5KTtcbiAgICBjb25zdCBhbGxIYXNoc2VzID0gcHVia2V5XG4gICAgICA/IGdldFRhcHJvb3RIYXNoZXNGb3JTaWcoXG4gICAgICAgICAgaW5wdXRJbmRleCxcbiAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICB0aGlzLmRhdGEuaW5wdXRzLFxuICAgICAgICAgIHB1YmtleSxcbiAgICAgICAgICB0aGlzLl9fQ0FDSEUsXG4gICAgICAgIClcbiAgICAgIDogZ2V0QWxsVGFwcm9vdEhhc2hlc0ZvclNpZyhcbiAgICAgICAgICBpbnB1dEluZGV4LFxuICAgICAgICAgIGlucHV0LFxuICAgICAgICAgIHRoaXMuZGF0YS5pbnB1dHMsXG4gICAgICAgICAgdGhpcy5fX0NBQ0hFLFxuICAgICAgICApO1xuICAgIGlmICghYWxsSGFzaHNlcy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignTm8gc2lnbmF0dXJlcyBmb3IgdGhpcyBwdWJrZXknKTtcbiAgICBjb25zdCB0YXBLZXlIYXNoID0gYWxsSGFzaHNlcy5maW5kKGggPT4gIWgubGVhZkhhc2gpO1xuICAgIGxldCB2YWxpZGF0aW9uUmVzdWx0Q291bnQgPSAwO1xuICAgIGlmICh0YXBLZXlTaWcgJiYgdGFwS2V5SGFzaCkge1xuICAgICAgY29uc3QgaXNWYWxpZFRhcGtleVNpZyA9IHZhbGlkYXRvcihcbiAgICAgICAgdGFwS2V5SGFzaC5wdWJrZXksXG4gICAgICAgIHRhcEtleUhhc2guaGFzaCxcbiAgICAgICAgdHJpbVRhcHJvb3RTaWcodGFwS2V5U2lnKSxcbiAgICAgICk7XG4gICAgICBpZiAoIWlzVmFsaWRUYXBrZXlTaWcpIHJldHVybiBmYWxzZTtcbiAgICAgIHZhbGlkYXRpb25SZXN1bHRDb3VudCsrO1xuICAgIH1cbiAgICBpZiAodGFwU2NyaXB0U2lnKSB7XG4gICAgICBmb3IgKGNvbnN0IHRhcFNpZyBvZiB0YXBTY3JpcHRTaWcpIHtcbiAgICAgICAgY29uc3QgdGFwU2lnSGFzaCA9IGFsbEhhc2hzZXMuZmluZChcbiAgICAgICAgICBoID0+IHRvb2xzLmNvbXBhcmUoaC5wdWJrZXksIHRhcFNpZy5wdWJrZXkpID09PSAwLFxuICAgICAgICApO1xuICAgICAgICBpZiAodGFwU2lnSGFzaCkge1xuICAgICAgICAgIGNvbnN0IGlzVmFsaWRUYXBTY3JpcHRTaWcgPSB2YWxpZGF0b3IoXG4gICAgICAgICAgICB0YXBTaWcucHVia2V5LFxuICAgICAgICAgICAgdGFwU2lnSGFzaC5oYXNoLFxuICAgICAgICAgICAgdHJpbVRhcHJvb3RTaWcodGFwU2lnLnNpZ25hdHVyZSksXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoIWlzVmFsaWRUYXBTY3JpcHRTaWcpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB2YWxpZGF0aW9uUmVzdWx0Q291bnQrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdENvdW50ID4gMDtcbiAgfVxuICBzaWduQWxsSW5wdXRzSEQoaGRLZXlQYWlyLCBzaWdoYXNoVHlwZXMgPSBbVHJhbnNhY3Rpb24uU0lHSEFTSF9BTExdKSB7XG4gICAgaWYgKCFoZEtleVBhaXIgfHwgIWhkS2V5UGFpci5wdWJsaWNLZXkgfHwgIWhkS2V5UGFpci5maW5nZXJwcmludCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZWVkIEhEU2lnbmVyIHRvIHNpZ24gaW5wdXQnKTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoY29uc3QgaSBvZiByYW5nZSh0aGlzLmRhdGEuaW5wdXRzLmxlbmd0aCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuc2lnbklucHV0SEQoaSwgaGRLZXlQYWlyLCBzaWdoYXNoVHlwZXMpO1xuICAgICAgICByZXN1bHRzLnB1c2godHJ1ZSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJlc3VsdHMuZXZlcnkodiA9PiB2ID09PSBmYWxzZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gaW5wdXRzIHdlcmUgc2lnbmVkJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNpZ25BbGxJbnB1dHNIREFzeW5jKGhkS2V5UGFpciwgc2lnaGFzaFR5cGVzID0gW1RyYW5zYWN0aW9uLlNJR0hBU0hfQUxMXSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAoIWhkS2V5UGFpciB8fCAhaGRLZXlQYWlyLnB1YmxpY0tleSB8fCAhaGRLZXlQYWlyLmZpbmdlcnByaW50KSB7XG4gICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKCdOZWVkIEhEU2lnbmVyIHRvIHNpZ24gaW5wdXQnKSk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgICAgZm9yIChjb25zdCBpIG9mIHJhbmdlKHRoaXMuZGF0YS5pbnB1dHMubGVuZ3RoKSkge1xuICAgICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICAgIHRoaXMuc2lnbklucHV0SERBc3luYyhpLCBoZEtleVBhaXIsIHNpZ2hhc2hUeXBlcykudGhlbihcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHRydWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGZhbHNlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgKSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7XG4gICAgICAgIGlmIChyZXN1bHRzLmV2ZXJ5KHYgPT4gdiA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoJ05vIGlucHV0cyB3ZXJlIHNpZ25lZCcpKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBzaWduSW5wdXRIRChpbnB1dEluZGV4LCBoZEtleVBhaXIsIHNpZ2hhc2hUeXBlcyA9IFtUcmFuc2FjdGlvbi5TSUdIQVNIX0FMTF0pIHtcbiAgICBpZiAoIWhkS2V5UGFpciB8fCAhaGRLZXlQYWlyLnB1YmxpY0tleSB8fCAhaGRLZXlQYWlyLmZpbmdlcnByaW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05lZWQgSERTaWduZXIgdG8gc2lnbiBpbnB1dCcpO1xuICAgIH1cbiAgICBjb25zdCBzaWduZXJzID0gZ2V0U2lnbmVyc0Zyb21IRChpbnB1dEluZGV4LCB0aGlzLmRhdGEuaW5wdXRzLCBoZEtleVBhaXIpO1xuICAgIHNpZ25lcnMuZm9yRWFjaChzaWduZXIgPT4gdGhpcy5zaWduSW5wdXQoaW5wdXRJbmRleCwgc2lnbmVyLCBzaWdoYXNoVHlwZXMpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzaWduSW5wdXRIREFzeW5jKFxuICAgIGlucHV0SW5kZXgsXG4gICAgaGRLZXlQYWlyLFxuICAgIHNpZ2hhc2hUeXBlcyA9IFtUcmFuc2FjdGlvbi5TSUdIQVNIX0FMTF0sXG4gICkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAoIWhkS2V5UGFpciB8fCAhaGRLZXlQYWlyLnB1YmxpY0tleSB8fCAhaGRLZXlQYWlyLmZpbmdlcnByaW50KSB7XG4gICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKCdOZWVkIEhEU2lnbmVyIHRvIHNpZ24gaW5wdXQnKSk7XG4gICAgICB9XG4gICAgICBjb25zdCBzaWduZXJzID0gZ2V0U2lnbmVyc0Zyb21IRChpbnB1dEluZGV4LCB0aGlzLmRhdGEuaW5wdXRzLCBoZEtleVBhaXIpO1xuICAgICAgY29uc3QgcHJvbWlzZXMgPSBzaWduZXJzLm1hcChzaWduZXIgPT5cbiAgICAgICAgdGhpcy5zaWduSW5wdXRBc3luYyhpbnB1dEluZGV4LCBzaWduZXIsIHNpZ2hhc2hUeXBlcyksXG4gICAgICApO1xuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICB9KTtcbiAgfVxuICBzaWduQWxsSW5wdXRzKGtleVBhaXIsIHNpZ2hhc2hUeXBlcykge1xuICAgIGlmICgha2V5UGFpciB8fCAha2V5UGFpci5wdWJsaWNLZXkpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05lZWQgU2lnbmVyIHRvIHNpZ24gaW5wdXQnKTtcbiAgICAvLyBUT0RPOiBBZGQgYSBwdWJrZXkvcHVia2V5aGFzaCBjYWNoZSB0byBlYWNoIGlucHV0XG4gICAgLy8gYXMgaW5wdXQgaW5mb3JtYXRpb24gaXMgYWRkZWQsIHRoZW4gZXZlbnR1YWxseVxuICAgIC8vIG9wdGltaXplIHRoaXMgbWV0aG9kLlxuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGkgb2YgcmFuZ2UodGhpcy5kYXRhLmlucHV0cy5sZW5ndGgpKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLnNpZ25JbnB1dChpLCBrZXlQYWlyLCBzaWdoYXNoVHlwZXMpO1xuICAgICAgICByZXN1bHRzLnB1c2godHJ1ZSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJlc3VsdHMuZXZlcnkodiA9PiB2ID09PSBmYWxzZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gaW5wdXRzIHdlcmUgc2lnbmVkJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNpZ25BbGxJbnB1dHNBc3luYyhrZXlQYWlyLCBzaWdoYXNoVHlwZXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKCFrZXlQYWlyIHx8ICFrZXlQYWlyLnB1YmxpY0tleSlcbiAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoJ05lZWQgU2lnbmVyIHRvIHNpZ24gaW5wdXQnKSk7XG4gICAgICAvLyBUT0RPOiBBZGQgYSBwdWJrZXkvcHVia2V5aGFzaCBjYWNoZSB0byBlYWNoIGlucHV0XG4gICAgICAvLyBhcyBpbnB1dCBpbmZvcm1hdGlvbiBpcyBhZGRlZCwgdGhlbiBldmVudHVhbGx5XG4gICAgICAvLyBvcHRpbWl6ZSB0aGlzIG1ldGhvZC5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgICBmb3IgKGNvbnN0IFtpXSBvZiB0aGlzLmRhdGEuaW5wdXRzLmVudHJpZXMoKSkge1xuICAgICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICAgIHRoaXMuc2lnbklucHV0QXN5bmMoaSwga2V5UGFpciwgc2lnaGFzaFR5cGVzKS50aGVuKFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICByZXN1bHRzLnB1c2godHJ1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICByZXN1bHRzLnB1c2goZmFsc2UpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICApLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdHMuZXZlcnkodiA9PiB2ID09PSBmYWxzZSkpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcignTm8gaW5wdXRzIHdlcmUgc2lnbmVkJykpO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHNpZ25JbnB1dChpbnB1dEluZGV4LCBrZXlQYWlyLCBzaWdoYXNoVHlwZXMpIHtcbiAgICBpZiAoIWtleVBhaXIgfHwgIWtleVBhaXIucHVibGljS2V5KVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZWVkIFNpZ25lciB0byBzaWduIGlucHV0Jyk7XG4gICAgY29uc3QgaW5wdXQgPSBjaGVja0ZvcklucHV0KHRoaXMuZGF0YS5pbnB1dHMsIGlucHV0SW5kZXgpO1xuICAgIGlmIChpc1RhcHJvb3RJbnB1dChpbnB1dCkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zaWduVGFwcm9vdElucHV0KFxuICAgICAgICBpbnB1dEluZGV4LFxuICAgICAgICBpbnB1dCxcbiAgICAgICAga2V5UGFpcixcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICBzaWdoYXNoVHlwZXMsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc2lnbklucHV0KGlucHV0SW5kZXgsIGtleVBhaXIsIHNpZ2hhc2hUeXBlcyk7XG4gIH1cbiAgc2lnblRhcHJvb3RJbnB1dChpbnB1dEluZGV4LCBrZXlQYWlyLCB0YXBMZWFmSGFzaFRvU2lnbiwgc2lnaGFzaFR5cGVzKSB7XG4gICAgaWYgKCFrZXlQYWlyIHx8ICFrZXlQYWlyLnB1YmxpY0tleSlcbiAgICAgIHRocm93IG5ldyBFcnJvcignTmVlZCBTaWduZXIgdG8gc2lnbiBpbnB1dCcpO1xuICAgIGNvbnN0IGlucHV0ID0gY2hlY2tGb3JJbnB1dCh0aGlzLmRhdGEuaW5wdXRzLCBpbnB1dEluZGV4KTtcbiAgICBpZiAoaXNUYXByb290SW5wdXQoaW5wdXQpKVxuICAgICAgcmV0dXJuIHRoaXMuX3NpZ25UYXByb290SW5wdXQoXG4gICAgICAgIGlucHV0SW5kZXgsXG4gICAgICAgIGlucHV0LFxuICAgICAgICBrZXlQYWlyLFxuICAgICAgICB0YXBMZWFmSGFzaFRvU2lnbixcbiAgICAgICAgc2lnaGFzaFR5cGVzLFxuICAgICAgKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYElucHV0ICMke2lucHV0SW5kZXh9IGlzIG5vdCBvZiB0eXBlIFRhcHJvb3QuYCk7XG4gIH1cbiAgX3NpZ25JbnB1dChpbnB1dEluZGV4LCBrZXlQYWlyLCBzaWdoYXNoVHlwZXMgPSBbVHJhbnNhY3Rpb24uU0lHSEFTSF9BTExdKSB7XG4gICAgY29uc3QgeyBoYXNoLCBzaWdoYXNoVHlwZSB9ID0gZ2V0SGFzaEFuZFNpZ2hhc2hUeXBlKFxuICAgICAgdGhpcy5kYXRhLmlucHV0cyxcbiAgICAgIGlucHV0SW5kZXgsXG4gICAgICBrZXlQYWlyLnB1YmxpY0tleSxcbiAgICAgIHRoaXMuX19DQUNIRSxcbiAgICAgIHNpZ2hhc2hUeXBlcyxcbiAgICApO1xuICAgIGNvbnN0IHBhcnRpYWxTaWcgPSBbXG4gICAgICB7XG4gICAgICAgIHB1YmtleToga2V5UGFpci5wdWJsaWNLZXksXG4gICAgICAgIHNpZ25hdHVyZTogYnNjcmlwdC5zaWduYXR1cmUuZW5jb2RlKGtleVBhaXIuc2lnbihoYXNoKSwgc2lnaGFzaFR5cGUpLFxuICAgICAgfSxcbiAgICBdO1xuICAgIHRoaXMuZGF0YS51cGRhdGVJbnB1dChpbnB1dEluZGV4LCB7IHBhcnRpYWxTaWcgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgX3NpZ25UYXByb290SW5wdXQoXG4gICAgaW5wdXRJbmRleCxcbiAgICBpbnB1dCxcbiAgICBrZXlQYWlyLFxuICAgIHRhcExlYWZIYXNoVG9TaWduLFxuICAgIGFsbG93ZWRTaWdoYXNoVHlwZXMgPSBbVHJhbnNhY3Rpb24uU0lHSEFTSF9ERUZBVUxUXSxcbiAgKSB7XG4gICAgY29uc3QgaGFzaGVzRm9yU2lnID0gdGhpcy5jaGVja1RhcHJvb3RIYXNoZXNGb3JTaWcoXG4gICAgICBpbnB1dEluZGV4LFxuICAgICAgaW5wdXQsXG4gICAgICBrZXlQYWlyLFxuICAgICAgdGFwTGVhZkhhc2hUb1NpZ24sXG4gICAgICBhbGxvd2VkU2lnaGFzaFR5cGVzLFxuICAgICk7XG4gICAgY29uc3QgdGFwS2V5U2lnID0gaGFzaGVzRm9yU2lnXG4gICAgICAuZmlsdGVyKGggPT4gIWgubGVhZkhhc2gpXG4gICAgICAubWFwKGggPT5cbiAgICAgICAgc2VyaWFsaXplVGFwcm9vdFNpZ25hdHVyZShcbiAgICAgICAgICBrZXlQYWlyLnNpZ25TY2hub3JyKGguaGFzaCksXG4gICAgICAgICAgaW5wdXQuc2lnaGFzaFR5cGUsXG4gICAgICAgICksXG4gICAgICApWzBdO1xuICAgIGNvbnN0IHRhcFNjcmlwdFNpZyA9IGhhc2hlc0ZvclNpZ1xuICAgICAgLmZpbHRlcihoID0+ICEhaC5sZWFmSGFzaClcbiAgICAgIC5tYXAoaCA9PiAoe1xuICAgICAgICBwdWJrZXk6IHRvWE9ubHkoa2V5UGFpci5wdWJsaWNLZXkpLFxuICAgICAgICBzaWduYXR1cmU6IHNlcmlhbGl6ZVRhcHJvb3RTaWduYXR1cmUoXG4gICAgICAgICAga2V5UGFpci5zaWduU2Nobm9ycihoLmhhc2gpLFxuICAgICAgICAgIGlucHV0LnNpZ2hhc2hUeXBlLFxuICAgICAgICApLFxuICAgICAgICBsZWFmSGFzaDogaC5sZWFmSGFzaCxcbiAgICAgIH0pKTtcbiAgICBpZiAodGFwS2V5U2lnKSB7XG4gICAgICB0aGlzLmRhdGEudXBkYXRlSW5wdXQoaW5wdXRJbmRleCwgeyB0YXBLZXlTaWcgfSk7XG4gICAgfVxuICAgIGlmICh0YXBTY3JpcHRTaWcubGVuZ3RoKSB7XG4gICAgICB0aGlzLmRhdGEudXBkYXRlSW5wdXQoaW5wdXRJbmRleCwgeyB0YXBTY3JpcHRTaWcgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNpZ25JbnB1dEFzeW5jKGlucHV0SW5kZXgsIGtleVBhaXIsIHNpZ2hhc2hUeXBlcykge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgIGlmICgha2V5UGFpciB8fCAha2V5UGFpci5wdWJsaWNLZXkpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTmVlZCBTaWduZXIgdG8gc2lnbiBpbnB1dCcpO1xuICAgICAgY29uc3QgaW5wdXQgPSBjaGVja0ZvcklucHV0KHRoaXMuZGF0YS5pbnB1dHMsIGlucHV0SW5kZXgpO1xuICAgICAgaWYgKGlzVGFwcm9vdElucHV0KGlucHV0KSlcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NpZ25UYXByb290SW5wdXRBc3luYyhcbiAgICAgICAgICBpbnB1dEluZGV4LFxuICAgICAgICAgIGlucHV0LFxuICAgICAgICAgIGtleVBhaXIsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHNpZ2hhc2hUeXBlcyxcbiAgICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzLl9zaWduSW5wdXRBc3luYyhpbnB1dEluZGV4LCBrZXlQYWlyLCBzaWdoYXNoVHlwZXMpO1xuICAgIH0pO1xuICB9XG4gIHNpZ25UYXByb290SW5wdXRBc3luYyhpbnB1dEluZGV4LCBrZXlQYWlyLCB0YXBMZWFmSGFzaCwgc2lnaGFzaFR5cGVzKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgaWYgKCFrZXlQYWlyIHx8ICFrZXlQYWlyLnB1YmxpY0tleSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZWVkIFNpZ25lciB0byBzaWduIGlucHV0Jyk7XG4gICAgICBjb25zdCBpbnB1dCA9IGNoZWNrRm9ySW5wdXQodGhpcy5kYXRhLmlucHV0cywgaW5wdXRJbmRleCk7XG4gICAgICBpZiAoaXNUYXByb290SW5wdXQoaW5wdXQpKVxuICAgICAgICByZXR1cm4gdGhpcy5fc2lnblRhcHJvb3RJbnB1dEFzeW5jKFxuICAgICAgICAgIGlucHV0SW5kZXgsXG4gICAgICAgICAgaW5wdXQsXG4gICAgICAgICAga2V5UGFpcixcbiAgICAgICAgICB0YXBMZWFmSGFzaCxcbiAgICAgICAgICBzaWdoYXNoVHlwZXMsXG4gICAgICAgICk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYElucHV0ICMke2lucHV0SW5kZXh9IGlzIG5vdCBvZiB0eXBlIFRhcHJvb3QuYCk7XG4gICAgfSk7XG4gIH1cbiAgX3NpZ25JbnB1dEFzeW5jKFxuICAgIGlucHV0SW5kZXgsXG4gICAga2V5UGFpcixcbiAgICBzaWdoYXNoVHlwZXMgPSBbVHJhbnNhY3Rpb24uU0lHSEFTSF9BTExdLFxuICApIHtcbiAgICBjb25zdCB7IGhhc2gsIHNpZ2hhc2hUeXBlIH0gPSBnZXRIYXNoQW5kU2lnaGFzaFR5cGUoXG4gICAgICB0aGlzLmRhdGEuaW5wdXRzLFxuICAgICAgaW5wdXRJbmRleCxcbiAgICAgIGtleVBhaXIucHVibGljS2V5LFxuICAgICAgdGhpcy5fX0NBQ0hFLFxuICAgICAgc2lnaGFzaFR5cGVzLFxuICAgICk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShrZXlQYWlyLnNpZ24oaGFzaCkpLnRoZW4oc2lnbmF0dXJlID0+IHtcbiAgICAgIGNvbnN0IHBhcnRpYWxTaWcgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBwdWJrZXk6IGtleVBhaXIucHVibGljS2V5LFxuICAgICAgICAgIHNpZ25hdHVyZTogYnNjcmlwdC5zaWduYXR1cmUuZW5jb2RlKHNpZ25hdHVyZSwgc2lnaGFzaFR5cGUpLFxuICAgICAgICB9LFxuICAgICAgXTtcbiAgICAgIHRoaXMuZGF0YS51cGRhdGVJbnB1dChpbnB1dEluZGV4LCB7IHBhcnRpYWxTaWcgfSk7XG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgX3NpZ25UYXByb290SW5wdXRBc3luYyhcbiAgICBpbnB1dEluZGV4LFxuICAgIGlucHV0LFxuICAgIGtleVBhaXIsXG4gICAgdGFwTGVhZkhhc2gsXG4gICAgc2lnaGFzaFR5cGVzID0gW1RyYW5zYWN0aW9uLlNJR0hBU0hfREVGQVVMVF0sXG4gICkge1xuICAgIGNvbnN0IGhhc2hlc0ZvclNpZyA9IHRoaXMuY2hlY2tUYXByb290SGFzaGVzRm9yU2lnKFxuICAgICAgaW5wdXRJbmRleCxcbiAgICAgIGlucHV0LFxuICAgICAga2V5UGFpcixcbiAgICAgIHRhcExlYWZIYXNoLFxuICAgICAgc2lnaGFzaFR5cGVzLFxuICAgICk7XG4gICAgY29uc3Qgc2lnbmF0dXJlUHJvbWlzZXMgPSBbXTtcbiAgICBjb25zdCB0YXBLZXlIYXNoID0gaGFzaGVzRm9yU2lnLmZpbHRlcihoID0+ICFoLmxlYWZIYXNoKVswXTtcbiAgICBpZiAodGFwS2V5SGFzaCkge1xuICAgICAgY29uc3QgdGFwS2V5U2lnUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShcbiAgICAgICAga2V5UGFpci5zaWduU2Nobm9ycih0YXBLZXlIYXNoLmhhc2gpLFxuICAgICAgKS50aGVuKHNpZyA9PiB7XG4gICAgICAgIHJldHVybiB7IHRhcEtleVNpZzogc2VyaWFsaXplVGFwcm9vdFNpZ25hdHVyZShzaWcsIGlucHV0LnNpZ2hhc2hUeXBlKSB9O1xuICAgICAgfSk7XG4gICAgICBzaWduYXR1cmVQcm9taXNlcy5wdXNoKHRhcEtleVNpZ1Byb21pc2UpO1xuICAgIH1cbiAgICBjb25zdCB0YXBTY3JpcHRIYXNoZXMgPSBoYXNoZXNGb3JTaWcuZmlsdGVyKGggPT4gISFoLmxlYWZIYXNoKTtcbiAgICBpZiAodGFwU2NyaXB0SGFzaGVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgdGFwU2NyaXB0U2lnUHJvbWlzZXMgPSB0YXBTY3JpcHRIYXNoZXMubWFwKHRzaCA9PiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoa2V5UGFpci5zaWduU2Nobm9ycih0c2guaGFzaCkpLnRoZW4oXG4gICAgICAgICAgc2lnbmF0dXJlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcFNjcmlwdFNpZyA9IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHB1YmtleTogdG9YT25seShrZXlQYWlyLnB1YmxpY0tleSksXG4gICAgICAgICAgICAgICAgc2lnbmF0dXJlOiBzZXJpYWxpemVUYXByb290U2lnbmF0dXJlKFxuICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlLFxuICAgICAgICAgICAgICAgICAgaW5wdXQuc2lnaGFzaFR5cGUsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBsZWFmSGFzaDogdHNoLmxlYWZIYXNoLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHJldHVybiB7IHRhcFNjcmlwdFNpZyB9O1xuICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIHNpZ25hdHVyZVByb21pc2VzLnB1c2goLi4udGFwU2NyaXB0U2lnUHJvbWlzZXMpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoc2lnbmF0dXJlUHJvbWlzZXMpLnRoZW4ocmVzdWx0cyA9PiB7XG4gICAgICByZXN1bHRzLmZvckVhY2godiA9PiB0aGlzLmRhdGEudXBkYXRlSW5wdXQoaW5wdXRJbmRleCwgdikpO1xuICAgIH0pO1xuICB9XG4gIGNoZWNrVGFwcm9vdEhhc2hlc0ZvclNpZyhcbiAgICBpbnB1dEluZGV4LFxuICAgIGlucHV0LFxuICAgIGtleVBhaXIsXG4gICAgdGFwTGVhZkhhc2hUb1NpZ24sXG4gICAgYWxsb3dlZFNpZ2hhc2hUeXBlcyxcbiAgKSB7XG4gICAgaWYgKHR5cGVvZiBrZXlQYWlyLnNpZ25TY2hub3JyICE9PSAnZnVuY3Rpb24nKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgTmVlZCBTY2hub3JyIFNpZ25lciB0byBzaWduIHRhcHJvb3QgaW5wdXQgIyR7aW5wdXRJbmRleH0uYCxcbiAgICAgICk7XG4gICAgY29uc3QgaGFzaGVzRm9yU2lnID0gZ2V0VGFwcm9vdEhhc2hlc0ZvclNpZyhcbiAgICAgIGlucHV0SW5kZXgsXG4gICAgICBpbnB1dCxcbiAgICAgIHRoaXMuZGF0YS5pbnB1dHMsXG4gICAgICBrZXlQYWlyLnB1YmxpY0tleSxcbiAgICAgIHRoaXMuX19DQUNIRSxcbiAgICAgIHRhcExlYWZIYXNoVG9TaWduLFxuICAgICAgYWxsb3dlZFNpZ2hhc2hUeXBlcyxcbiAgICApO1xuICAgIGlmICghaGFzaGVzRm9yU2lnIHx8ICFoYXNoZXNGb3JTaWcubGVuZ3RoKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2FuIG5vdCBzaWduIGZvciBpbnB1dCAjJHtpbnB1dEluZGV4fSB3aXRoIHRoZSBrZXkgJHt0b29scy50b0hleChrZXlQYWlyLnB1YmxpY0tleSl9YCxcbiAgICAgICk7XG4gICAgcmV0dXJuIGhhc2hlc0ZvclNpZztcbiAgfVxuICB0b0J1ZmZlcigpIHtcbiAgICBjaGVja0NhY2hlKHRoaXMuX19DQUNIRSk7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS50b0J1ZmZlcigpO1xuICB9XG4gIHRvSGV4KCkge1xuICAgIGNoZWNrQ2FjaGUodGhpcy5fX0NBQ0hFKTtcbiAgICByZXR1cm4gdGhpcy5kYXRhLnRvSGV4KCk7XG4gIH1cbiAgdG9CYXNlNjQoKSB7XG4gICAgY2hlY2tDYWNoZSh0aGlzLl9fQ0FDSEUpO1xuICAgIHJldHVybiB0aGlzLmRhdGEudG9CYXNlNjQoKTtcbiAgfVxuICB1cGRhdGVHbG9iYWwodXBkYXRlRGF0YSkge1xuICAgIHRoaXMuZGF0YS51cGRhdGVHbG9iYWwodXBkYXRlRGF0YSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdXBkYXRlSW5wdXQoaW5wdXRJbmRleCwgdXBkYXRlRGF0YSkge1xuICAgIGlmICh1cGRhdGVEYXRhLndpdG5lc3NTY3JpcHQpIGNoZWNrSW52YWxpZFAyV1NIKHVwZGF0ZURhdGEud2l0bmVzc1NjcmlwdCk7XG4gICAgY2hlY2tUYXByb290SW5wdXRGaWVsZHMoXG4gICAgICB0aGlzLmRhdGEuaW5wdXRzW2lucHV0SW5kZXhdLFxuICAgICAgdXBkYXRlRGF0YSxcbiAgICAgICd1cGRhdGVJbnB1dCcsXG4gICAgKTtcbiAgICB0aGlzLmRhdGEudXBkYXRlSW5wdXQoaW5wdXRJbmRleCwgdXBkYXRlRGF0YSk7XG4gICAgaWYgKHVwZGF0ZURhdGEubm9uV2l0bmVzc1V0eG8pIHtcbiAgICAgIGFkZE5vbldpdG5lc3NUeENhY2hlKFxuICAgICAgICB0aGlzLl9fQ0FDSEUsXG4gICAgICAgIHRoaXMuZGF0YS5pbnB1dHNbaW5wdXRJbmRleF0sXG4gICAgICAgIGlucHV0SW5kZXgsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB1cGRhdGVPdXRwdXQob3V0cHV0SW5kZXgsIHVwZGF0ZURhdGEpIHtcbiAgICBjb25zdCBvdXRwdXREYXRhID0gdGhpcy5kYXRhLm91dHB1dHNbb3V0cHV0SW5kZXhdO1xuICAgIGNoZWNrVGFwcm9vdE91dHB1dEZpZWxkcyhvdXRwdXREYXRhLCB1cGRhdGVEYXRhLCAndXBkYXRlT3V0cHV0Jyk7XG4gICAgdGhpcy5kYXRhLnVwZGF0ZU91dHB1dChvdXRwdXRJbmRleCwgdXBkYXRlRGF0YSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgYWRkVW5rbm93bktleVZhbFRvR2xvYmFsKGtleVZhbCkge1xuICAgIHRoaXMuZGF0YS5hZGRVbmtub3duS2V5VmFsVG9HbG9iYWwoa2V5VmFsKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhZGRVbmtub3duS2V5VmFsVG9JbnB1dChpbnB1dEluZGV4LCBrZXlWYWwpIHtcbiAgICB0aGlzLmRhdGEuYWRkVW5rbm93bktleVZhbFRvSW5wdXQoaW5wdXRJbmRleCwga2V5VmFsKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhZGRVbmtub3duS2V5VmFsVG9PdXRwdXQob3V0cHV0SW5kZXgsIGtleVZhbCkge1xuICAgIHRoaXMuZGF0YS5hZGRVbmtub3duS2V5VmFsVG9PdXRwdXQob3V0cHV0SW5kZXgsIGtleVZhbCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY2xlYXJGaW5hbGl6ZWRJbnB1dChpbnB1dEluZGV4KSB7XG4gICAgdGhpcy5kYXRhLmNsZWFyRmluYWxpemVkSW5wdXQoaW5wdXRJbmRleCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyBuZWVkZWQgdG8gcGFzcyB0byB0aGUgYmlwMTc0IGJhc2UgY2xhc3MncyBmcm9tQnVmZmVyLlxuICogSXQgdGFrZXMgdGhlIFwidHJhbnNhY3Rpb24gYnVmZmVyXCIgcG9ydGlvbiBvZiB0aGUgcHNidCBidWZmZXIgYW5kIHJldHVybnMgYVxuICogVHJhbnNhY3Rpb24gKEZyb20gdGhlIGJpcDE3NCBsaWJyYXJ5KSBpbnRlcmZhY2UuXG4gKi9cbmNvbnN0IHRyYW5zYWN0aW9uRnJvbUJ1ZmZlciA9IGJ1ZmZlciA9PiBuZXcgUHNidFRyYW5zYWN0aW9uKGJ1ZmZlcik7XG4vKipcbiAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgVHJhbnNhY3Rpb24gaW50ZXJmYWNlIGZyb20gYmlwMTc0IGxpYnJhcnkuXG4gKiBJdCBjb250YWlucyBhIGJpdGNvaW5qcy1saWIgVHJhbnNhY3Rpb24gb2JqZWN0LlxuICovXG5jbGFzcyBQc2J0VHJhbnNhY3Rpb24ge1xuICB0eDtcbiAgY29uc3RydWN0b3IoYnVmZmVyID0gVWludDhBcnJheS5mcm9tKFsyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSkpIHtcbiAgICB0aGlzLnR4ID0gVHJhbnNhY3Rpb24uZnJvbUJ1ZmZlcihidWZmZXIpO1xuICAgIGNoZWNrVHhFbXB0eSh0aGlzLnR4KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3R4Jywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuICBnZXRJbnB1dE91dHB1dENvdW50cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW5wdXRDb3VudDogdGhpcy50eC5pbnMubGVuZ3RoLFxuICAgICAgb3V0cHV0Q291bnQ6IHRoaXMudHgub3V0cy5sZW5ndGgsXG4gICAgfTtcbiAgfVxuICBhZGRJbnB1dChpbnB1dCkge1xuICAgIGlmIChcbiAgICAgIGlucHV0Lmhhc2ggPT09IHVuZGVmaW5lZCB8fFxuICAgICAgaW5wdXQuaW5kZXggPT09IHVuZGVmaW5lZCB8fFxuICAgICAgKCEoaW5wdXQuaGFzaCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpICYmIHR5cGVvZiBpbnB1dC5oYXNoICE9PSAnc3RyaW5nJykgfHxcbiAgICAgIHR5cGVvZiBpbnB1dC5pbmRleCAhPT0gJ251bWJlcidcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgYWRkaW5nIGlucHV0LicpO1xuICAgIH1cbiAgICBjb25zdCBoYXNoID1cbiAgICAgIHR5cGVvZiBpbnB1dC5oYXNoID09PSAnc3RyaW5nJ1xuICAgICAgICA/IHJldmVyc2VCdWZmZXIodG9vbHMuZnJvbUhleChpbnB1dC5oYXNoKSlcbiAgICAgICAgOiBpbnB1dC5oYXNoO1xuICAgIHRoaXMudHguYWRkSW5wdXQoaGFzaCwgaW5wdXQuaW5kZXgsIGlucHV0LnNlcXVlbmNlKTtcbiAgfVxuICBhZGRPdXRwdXQob3V0cHV0KSB7XG4gICAgaWYgKFxuICAgICAgb3V0cHV0LnNjcmlwdCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICBvdXRwdXQudmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgIShvdXRwdXQuc2NyaXB0IGluc3RhbmNlb2YgVWludDhBcnJheSkgfHxcbiAgICAgIHR5cGVvZiBvdXRwdXQudmFsdWUgIT09ICdiaWdpbnQnXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGFkZGluZyBvdXRwdXQuJyk7XG4gICAgfVxuICAgIHRoaXMudHguYWRkT3V0cHV0KG91dHB1dC5zY3JpcHQsIG91dHB1dC52YWx1ZSk7XG4gIH1cbiAgdG9CdWZmZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMudHgudG9CdWZmZXIoKTtcbiAgfVxufVxuZnVuY3Rpb24gY2FuRmluYWxpemUoaW5wdXQsIHNjcmlwdCwgc2NyaXB0VHlwZSkge1xuICBzd2l0Y2ggKHNjcmlwdFR5cGUpIHtcbiAgICBjYXNlICdwdWJrZXknOlxuICAgIGNhc2UgJ3B1YmtleWhhc2gnOlxuICAgIGNhc2UgJ3dpdG5lc3NwdWJrZXloYXNoJzpcbiAgICAgIHJldHVybiBoYXNTaWdzKDEsIGlucHV0LnBhcnRpYWxTaWcpO1xuICAgIGNhc2UgJ211bHRpc2lnJzpcbiAgICAgIGNvbnN0IHAybXMgPSBwYXltZW50cy5wMm1zKHsgb3V0cHV0OiBzY3JpcHQgfSk7XG4gICAgICByZXR1cm4gaGFzU2lncyhwMm1zLm0sIGlucHV0LnBhcnRpYWxTaWcsIHAybXMucHVia2V5cyk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuZnVuY3Rpb24gY2hlY2tDYWNoZShjYWNoZSkge1xuICBpZiAoY2FjaGUuX19VTlNBRkVfU0lHTl9OT05TRUdXSVQgIT09IGZhbHNlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgQklQMTc0IGNvbXBsaWFudCwgY2FuIG5vdCBleHBvcnQnKTtcbiAgfVxufVxuZnVuY3Rpb24gaGFzU2lncyhuZWVkZWRTaWdzLCBwYXJ0aWFsU2lnLCBwdWJrZXlzKSB7XG4gIGlmICghcGFydGlhbFNpZykgcmV0dXJuIGZhbHNlO1xuICBsZXQgc2lncztcbiAgaWYgKHB1YmtleXMpIHtcbiAgICBzaWdzID0gcHVia2V5c1xuICAgICAgLm1hcChwa2V5ID0+IHtcbiAgICAgICAgY29uc3QgcHVia2V5ID0gY29tcHJlc3NQdWJrZXkocGtleSk7XG4gICAgICAgIHJldHVybiBwYXJ0aWFsU2lnLmZpbmQoXG4gICAgICAgICAgcFNpZyA9PiB0b29scy5jb21wYXJlKHBTaWcucHVia2V5LCBwdWJrZXkpID09PSAwLFxuICAgICAgICApO1xuICAgICAgfSlcbiAgICAgIC5maWx0ZXIodiA9PiAhIXYpO1xuICB9IGVsc2Uge1xuICAgIHNpZ3MgPSBwYXJ0aWFsU2lnO1xuICB9XG4gIGlmIChzaWdzLmxlbmd0aCA+IG5lZWRlZFNpZ3MpIHRocm93IG5ldyBFcnJvcignVG9vIG1hbnkgc2lnbmF0dXJlcycpO1xuICByZXR1cm4gc2lncy5sZW5ndGggPT09IG5lZWRlZFNpZ3M7XG59XG5mdW5jdGlvbiBpc0ZpbmFsaXplZChpbnB1dCkge1xuICByZXR1cm4gISFpbnB1dC5maW5hbFNjcmlwdFNpZyB8fCAhIWlucHV0LmZpbmFsU2NyaXB0V2l0bmVzcztcbn1cbmZ1bmN0aW9uIGJpcDMyRGVyaXZhdGlvbklzTWluZShyb290KSB7XG4gIHJldHVybiBkID0+IHtcbiAgICBpZiAodG9vbHMuY29tcGFyZShyb290LmZpbmdlcnByaW50LCBkLm1hc3RlckZpbmdlcnByaW50KSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0b29scy5jb21wYXJlKHJvb3QuZGVyaXZlUGF0aChkLnBhdGgpLnB1YmxpY0tleSwgZC5wdWJrZXkpKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xufVxuZnVuY3Rpb24gY2hlY2szMkJpdChudW0pIHtcbiAgaWYgKFxuICAgIHR5cGVvZiBudW0gIT09ICdudW1iZXInIHx8XG4gICAgbnVtICE9PSBNYXRoLmZsb29yKG51bSkgfHxcbiAgICBudW0gPiAweGZmZmZmZmZmIHx8XG4gICAgbnVtIDwgMFxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgMzIgYml0IGludGVnZXInKTtcbiAgfVxufVxuZnVuY3Rpb24gY2hlY2tGZWVzKHBzYnQsIGNhY2hlLCBvcHRzKSB7XG4gIGNvbnN0IGZlZVJhdGUgPSBjYWNoZS5fX0ZFRV9SQVRFIHx8IHBzYnQuZ2V0RmVlUmF0ZSgpO1xuICBjb25zdCB2c2l6ZSA9IGNhY2hlLl9fRVhUUkFDVEVEX1RYLnZpcnR1YWxTaXplKCk7XG4gIGNvbnN0IHNhdG9zaGlzID0gZmVlUmF0ZSAqIHZzaXplO1xuICBpZiAoZmVlUmF0ZSA+PSBvcHRzLm1heGltdW1GZWVSYXRlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFdhcm5pbmc6IFlvdSBhcmUgcGF5aW5nIGFyb3VuZCAkeyhzYXRvc2hpcyAvIDFlOCkudG9GaXhlZCg4KX0gaW4gYCArXG4gICAgICAgIGBmZWVzLCB3aGljaCBpcyAke2ZlZVJhdGV9IHNhdG9zaGkgcGVyIGJ5dGUgZm9yIGEgdHJhbnNhY3Rpb24gYCArXG4gICAgICAgIGB3aXRoIGEgVlNpemUgb2YgJHt2c2l6ZX0gYnl0ZXMgKHNlZ3dpdCBjb3VudGVkIGFzIDAuMjUgYnl0ZSBwZXIgYCArXG4gICAgICAgIGBieXRlKS4gVXNlIHNldE1heGltdW1GZWVSYXRlIG1ldGhvZCB0byByYWlzZSB5b3VyIHRocmVzaG9sZCwgb3IgYCArXG4gICAgICAgIGBwYXNzIHRydWUgdG8gdGhlIGZpcnN0IGFyZyBvZiBleHRyYWN0VHJhbnNhY3Rpb24uYCxcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiBjaGVja0lucHV0c0ZvclBhcnRpYWxTaWcoaW5wdXRzLCBhY3Rpb24pIHtcbiAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgIGNvbnN0IHRocm93cyA9IGlzVGFwcm9vdElucHV0KGlucHV0KVxuICAgICAgPyBjaGVja1RhcHJvb3RJbnB1dEZvclNpZ3MoaW5wdXQsIGFjdGlvbilcbiAgICAgIDogY2hlY2tJbnB1dEZvclNpZyhpbnB1dCwgYWN0aW9uKTtcbiAgICBpZiAodGhyb3dzKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW4gbm90IG1vZGlmeSB0cmFuc2FjdGlvbiwgc2lnbmF0dXJlcyBleGlzdC4nKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBjaGVja1BhcnRpYWxTaWdTaWdoYXNoZXMoaW5wdXQpIHtcbiAgaWYgKCFpbnB1dC5zaWdoYXNoVHlwZSB8fCAhaW5wdXQucGFydGlhbFNpZykgcmV0dXJuO1xuICBjb25zdCB7IHBhcnRpYWxTaWcsIHNpZ2hhc2hUeXBlIH0gPSBpbnB1dDtcbiAgcGFydGlhbFNpZy5mb3JFYWNoKHBTaWcgPT4ge1xuICAgIGNvbnN0IHsgaGFzaFR5cGUgfSA9IGJzY3JpcHQuc2lnbmF0dXJlLmRlY29kZShwU2lnLnNpZ25hdHVyZSk7XG4gICAgaWYgKHNpZ2hhc2hUeXBlICE9PSBoYXNoVHlwZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTaWduYXR1cmUgc2lnaGFzaCBkb2VzIG5vdCBtYXRjaCBpbnB1dCBzaWdoYXNoIHR5cGUnKTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gY2hlY2tTY3JpcHRGb3JQdWJrZXkocHVia2V5LCBzY3JpcHQsIGFjdGlvbikge1xuICBpZiAoIXB1YmtleUluU2NyaXB0KHB1YmtleSwgc2NyaXB0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBDYW4gbm90ICR7YWN0aW9ufSBmb3IgdGhpcyBpbnB1dCB3aXRoIHRoZSBrZXkgJHt0b29scy50b0hleChwdWJrZXkpfWAsXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gY2hlY2tUeEVtcHR5KHR4KSB7XG4gIGNvbnN0IGlzRW1wdHkgPSB0eC5pbnMuZXZlcnkoXG4gICAgaW5wdXQgPT5cbiAgICAgIGlucHV0LnNjcmlwdCAmJlxuICAgICAgaW5wdXQuc2NyaXB0Lmxlbmd0aCA9PT0gMCAmJlxuICAgICAgaW5wdXQud2l0bmVzcyAmJlxuICAgICAgaW5wdXQud2l0bmVzcy5sZW5ndGggPT09IDAsXG4gICk7XG4gIGlmICghaXNFbXB0eSkge1xuICAgIHRocm93IG5ldyBFcnJvcignRm9ybWF0IEVycm9yOiBUcmFuc2FjdGlvbiBTY3JpcHRTaWdzIGFyZSBub3QgZW1wdHknKTtcbiAgfVxufVxuZnVuY3Rpb24gY2hlY2tUeEZvckR1cGVJbnModHgsIGNhY2hlKSB7XG4gIHR4Lmlucy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICBjaGVja1R4SW5wdXRDYWNoZShjYWNoZSwgaW5wdXQpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGNoZWNrVHhJbnB1dENhY2hlKGNhY2hlLCBpbnB1dCkge1xuICBjb25zdCBrZXkgPVxuICAgIHRvb2xzLnRvSGV4KHJldmVyc2VCdWZmZXIoVWludDhBcnJheS5mcm9tKGlucHV0Lmhhc2gpKSkgKyAnOicgKyBpbnB1dC5pbmRleDtcbiAgaWYgKGNhY2hlLl9fVFhfSU5fQ0FDSEVba2V5XSkgdGhyb3cgbmV3IEVycm9yKCdEdXBsaWNhdGUgaW5wdXQgZGV0ZWN0ZWQuJyk7XG4gIGNhY2hlLl9fVFhfSU5fQ0FDSEVba2V5XSA9IDE7XG59XG5mdW5jdGlvbiBzY3JpcHRDaGVja2VyRmFjdG9yeShwYXltZW50LCBwYXltZW50U2NyaXB0TmFtZSkge1xuICByZXR1cm4gKGlucHV0SW5kZXgsIHNjcmlwdFB1YktleSwgcmVkZWVtU2NyaXB0LCBpb1R5cGUpID0+IHtcbiAgICBjb25zdCByZWRlZW1TY3JpcHRPdXRwdXQgPSBwYXltZW50KHtcbiAgICAgIHJlZGVlbTogeyBvdXRwdXQ6IHJlZGVlbVNjcmlwdCB9LFxuICAgIH0pLm91dHB1dDtcbiAgICBpZiAodG9vbHMuY29tcGFyZShzY3JpcHRQdWJLZXksIHJlZGVlbVNjcmlwdE91dHB1dCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYCR7cGF5bWVudFNjcmlwdE5hbWV9IGZvciAke2lvVHlwZX0gIyR7aW5wdXRJbmRleH0gZG9lc24ndCBtYXRjaCB0aGUgc2NyaXB0UHViS2V5IGluIHRoZSBwcmV2b3V0YCxcbiAgICAgICk7XG4gICAgfVxuICB9O1xufVxuY29uc3QgY2hlY2tSZWRlZW1TY3JpcHQgPSBzY3JpcHRDaGVja2VyRmFjdG9yeShwYXltZW50cy5wMnNoLCAnUmVkZWVtIHNjcmlwdCcpO1xuY29uc3QgY2hlY2tXaXRuZXNzU2NyaXB0ID0gc2NyaXB0Q2hlY2tlckZhY3RvcnkoXG4gIHBheW1lbnRzLnAyd3NoLFxuICAnV2l0bmVzcyBzY3JpcHQnLFxuKTtcbmZ1bmN0aW9uIGdldFR4Q2FjaGVWYWx1ZShrZXksIG5hbWUsIGlucHV0cywgYykge1xuICBpZiAoIWlucHV0cy5ldmVyeShpc0ZpbmFsaXplZCkpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBQU0JUIG11c3QgYmUgZmluYWxpemVkIHRvIGNhbGN1bGF0ZSAke25hbWV9YCk7XG4gIGlmIChrZXkgPT09ICdfX0ZFRV9SQVRFJyAmJiBjLl9fRkVFX1JBVEUpIHJldHVybiBjLl9fRkVFX1JBVEU7XG4gIGlmIChrZXkgPT09ICdfX0ZFRScgJiYgYy5fX0ZFRSkgcmV0dXJuIGMuX19GRUU7XG4gIGxldCB0eDtcbiAgbGV0IG11c3RGaW5hbGl6ZSA9IHRydWU7XG4gIGlmIChjLl9fRVhUUkFDVEVEX1RYKSB7XG4gICAgdHggPSBjLl9fRVhUUkFDVEVEX1RYO1xuICAgIG11c3RGaW5hbGl6ZSA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHR4ID0gYy5fX1RYLmNsb25lKCk7XG4gIH1cbiAgaW5wdXRGaW5hbGl6ZUdldEFtdHMoaW5wdXRzLCB0eCwgYywgbXVzdEZpbmFsaXplKTtcbiAgaWYgKGtleSA9PT0gJ19fRkVFX1JBVEUnKSByZXR1cm4gYy5fX0ZFRV9SQVRFO1xuICBlbHNlIGlmIChrZXkgPT09ICdfX0ZFRScpIHJldHVybiBjLl9fRkVFO1xufVxuZnVuY3Rpb24gZ2V0RmluYWxTY3JpcHRzKGlucHV0SW5kZXgsIGlucHV0LCBzY3JpcHQsIGlzU2Vnd2l0LCBpc1AyU0gsIGlzUDJXU0gpIHtcbiAgY29uc3Qgc2NyaXB0VHlwZSA9IGNsYXNzaWZ5U2NyaXB0KHNjcmlwdCk7XG4gIGlmICghY2FuRmluYWxpemUoaW5wdXQsIHNjcmlwdCwgc2NyaXB0VHlwZSkpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IGZpbmFsaXplIGlucHV0ICMke2lucHV0SW5kZXh9YCk7XG4gIHJldHVybiBwcmVwYXJlRmluYWxTY3JpcHRzKFxuICAgIHNjcmlwdCxcbiAgICBzY3JpcHRUeXBlLFxuICAgIGlucHV0LnBhcnRpYWxTaWcsXG4gICAgaXNTZWd3aXQsXG4gICAgaXNQMlNILFxuICAgIGlzUDJXU0gsXG4gICk7XG59XG5mdW5jdGlvbiBwcmVwYXJlRmluYWxTY3JpcHRzKFxuICBzY3JpcHQsXG4gIHNjcmlwdFR5cGUsXG4gIHBhcnRpYWxTaWcsXG4gIGlzU2Vnd2l0LFxuICBpc1AyU0gsXG4gIGlzUDJXU0gsXG4pIHtcbiAgbGV0IGZpbmFsU2NyaXB0U2lnO1xuICBsZXQgZmluYWxTY3JpcHRXaXRuZXNzO1xuICAvLyBXb3csIHRoZSBwYXltZW50cyBBUEkgaXMgdmVyeSBoYW5keVxuICBjb25zdCBwYXltZW50ID0gZ2V0UGF5bWVudChzY3JpcHQsIHNjcmlwdFR5cGUsIHBhcnRpYWxTaWcpO1xuICBjb25zdCBwMndzaCA9ICFpc1AyV1NIID8gbnVsbCA6IHBheW1lbnRzLnAyd3NoKHsgcmVkZWVtOiBwYXltZW50IH0pO1xuICBjb25zdCBwMnNoID0gIWlzUDJTSCA/IG51bGwgOiBwYXltZW50cy5wMnNoKHsgcmVkZWVtOiBwMndzaCB8fCBwYXltZW50IH0pO1xuICBpZiAoaXNTZWd3aXQpIHtcbiAgICBpZiAocDJ3c2gpIHtcbiAgICAgIGZpbmFsU2NyaXB0V2l0bmVzcyA9IHdpdG5lc3NTdGFja1RvU2NyaXB0V2l0bmVzcyhwMndzaC53aXRuZXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmluYWxTY3JpcHRXaXRuZXNzID0gd2l0bmVzc1N0YWNrVG9TY3JpcHRXaXRuZXNzKHBheW1lbnQud2l0bmVzcyk7XG4gICAgfVxuICAgIGlmIChwMnNoKSB7XG4gICAgICBmaW5hbFNjcmlwdFNpZyA9IHAyc2guaW5wdXQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChwMnNoKSB7XG4gICAgICBmaW5hbFNjcmlwdFNpZyA9IHAyc2guaW5wdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbmFsU2NyaXB0U2lnID0gcGF5bWVudC5pbnB1dDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBmaW5hbFNjcmlwdFNpZyxcbiAgICBmaW5hbFNjcmlwdFdpdG5lc3MsXG4gIH07XG59XG5mdW5jdGlvbiBnZXRIYXNoQW5kU2lnaGFzaFR5cGUoXG4gIGlucHV0cyxcbiAgaW5wdXRJbmRleCxcbiAgcHVia2V5LFxuICBjYWNoZSxcbiAgc2lnaGFzaFR5cGVzLFxuKSB7XG4gIGNvbnN0IGlucHV0ID0gY2hlY2tGb3JJbnB1dChpbnB1dHMsIGlucHV0SW5kZXgpO1xuICBjb25zdCB7IGhhc2gsIHNpZ2hhc2hUeXBlLCBzY3JpcHQgfSA9IGdldEhhc2hGb3JTaWcoXG4gICAgaW5wdXRJbmRleCxcbiAgICBpbnB1dCxcbiAgICBjYWNoZSxcbiAgICBmYWxzZSxcbiAgICBzaWdoYXNoVHlwZXMsXG4gICk7XG4gIGNoZWNrU2NyaXB0Rm9yUHVia2V5KHB1YmtleSwgc2NyaXB0LCAnc2lnbicpO1xuICByZXR1cm4ge1xuICAgIGhhc2gsXG4gICAgc2lnaGFzaFR5cGUsXG4gIH07XG59XG5mdW5jdGlvbiBnZXRIYXNoRm9yU2lnKGlucHV0SW5kZXgsIGlucHV0LCBjYWNoZSwgZm9yVmFsaWRhdGUsIHNpZ2hhc2hUeXBlcykge1xuICBjb25zdCB1bnNpZ25lZFR4ID0gY2FjaGUuX19UWDtcbiAgY29uc3Qgc2lnaGFzaFR5cGUgPSBpbnB1dC5zaWdoYXNoVHlwZSB8fCBUcmFuc2FjdGlvbi5TSUdIQVNIX0FMTDtcbiAgY2hlY2tTaWdoYXNoVHlwZUFsbG93ZWQoc2lnaGFzaFR5cGUsIHNpZ2hhc2hUeXBlcyk7XG4gIGxldCBoYXNoO1xuICBsZXQgcHJldm91dDtcbiAgaWYgKGlucHV0Lm5vbldpdG5lc3NVdHhvKSB7XG4gICAgY29uc3Qgbm9uV2l0bmVzc1V0eG9UeCA9IG5vbldpdG5lc3NVdHhvVHhGcm9tQ2FjaGUoXG4gICAgICBjYWNoZSxcbiAgICAgIGlucHV0LFxuICAgICAgaW5wdXRJbmRleCxcbiAgICApO1xuICAgIGNvbnN0IHByZXZvdXRIYXNoID0gdW5zaWduZWRUeC5pbnNbaW5wdXRJbmRleF0uaGFzaDtcbiAgICBjb25zdCB1dHhvSGFzaCA9IG5vbldpdG5lc3NVdHhvVHguZ2V0SGFzaCgpO1xuICAgIC8vIElmIGEgbm9uLXdpdG5lc3MgVVRYTyBpcyBwcm92aWRlZCwgaXRzIGhhc2ggbXVzdCBtYXRjaCB0aGUgaGFzaCBzcGVjaWZpZWQgaW4gdGhlIHByZXZvdXRcbiAgICBpZiAodG9vbHMuY29tcGFyZShwcmV2b3V0SGFzaCwgdXR4b0hhc2gpICE9PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBOb24td2l0bmVzcyBVVFhPIGhhc2ggZm9yIGlucHV0ICMke2lucHV0SW5kZXh9IGRvZXNuJ3QgbWF0Y2ggdGhlIGhhc2ggc3BlY2lmaWVkIGluIHRoZSBwcmV2b3V0YCxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHByZXZvdXRJbmRleCA9IHVuc2lnbmVkVHguaW5zW2lucHV0SW5kZXhdLmluZGV4O1xuICAgIHByZXZvdXQgPSBub25XaXRuZXNzVXR4b1R4Lm91dHNbcHJldm91dEluZGV4XTtcbiAgfSBlbHNlIGlmIChpbnB1dC53aXRuZXNzVXR4bykge1xuICAgIHByZXZvdXQgPSBpbnB1dC53aXRuZXNzVXR4bztcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05lZWQgYSBVdHhvIGlucHV0IGl0ZW0gZm9yIHNpZ25pbmcnKTtcbiAgfVxuICBjb25zdCB7IG1lYW5pbmdmdWxTY3JpcHQsIHR5cGUgfSA9IGdldE1lYW5pbmdmdWxTY3JpcHQoXG4gICAgcHJldm91dC5zY3JpcHQsXG4gICAgaW5wdXRJbmRleCxcbiAgICAnaW5wdXQnLFxuICAgIGlucHV0LnJlZGVlbVNjcmlwdCxcbiAgICBpbnB1dC53aXRuZXNzU2NyaXB0LFxuICApO1xuICBpZiAoWydwMnNoLXAyd3NoJywgJ3Ayd3NoJ10uaW5kZXhPZih0eXBlKSA+PSAwKSB7XG4gICAgaGFzaCA9IHVuc2lnbmVkVHguaGFzaEZvcldpdG5lc3NWMChcbiAgICAgIGlucHV0SW5kZXgsXG4gICAgICBtZWFuaW5nZnVsU2NyaXB0LFxuICAgICAgcHJldm91dC52YWx1ZSxcbiAgICAgIHNpZ2hhc2hUeXBlLFxuICAgICk7XG4gIH0gZWxzZSBpZiAoaXNQMldQS0gobWVhbmluZ2Z1bFNjcmlwdCkpIHtcbiAgICAvLyBQMldQS0ggdXNlcyB0aGUgUDJQS0ggdGVtcGxhdGUgZm9yIHByZXZvdXRTY3JpcHQgd2hlbiBzaWduaW5nXG4gICAgY29uc3Qgc2lnbmluZ1NjcmlwdCA9IHBheW1lbnRzLnAycGtoKHtcbiAgICAgIGhhc2g6IG1lYW5pbmdmdWxTY3JpcHQuc2xpY2UoMiksXG4gICAgfSkub3V0cHV0O1xuICAgIGhhc2ggPSB1bnNpZ25lZFR4Lmhhc2hGb3JXaXRuZXNzVjAoXG4gICAgICBpbnB1dEluZGV4LFxuICAgICAgc2lnbmluZ1NjcmlwdCxcbiAgICAgIHByZXZvdXQudmFsdWUsXG4gICAgICBzaWdoYXNoVHlwZSxcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIC8vIG5vbi1zZWd3aXRcbiAgICBpZiAoXG4gICAgICBpbnB1dC5ub25XaXRuZXNzVXR4byA9PT0gdW5kZWZpbmVkICYmXG4gICAgICBjYWNoZS5fX1VOU0FGRV9TSUdOX05PTlNFR1dJVCA9PT0gZmFsc2VcbiAgICApXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbnB1dCAjJHtpbnB1dEluZGV4fSBoYXMgd2l0bmVzc1V0eG8gYnV0IG5vbi1zZWd3aXQgc2NyaXB0OiBgICtcbiAgICAgICAgICBgJHt0b29scy50b0hleChtZWFuaW5nZnVsU2NyaXB0KX1gLFxuICAgICAgKTtcbiAgICBpZiAoIWZvclZhbGlkYXRlICYmIGNhY2hlLl9fVU5TQUZFX1NJR05fTk9OU0VHV0lUICE9PSBmYWxzZSlcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ1dhcm5pbmc6IFNpZ25pbmcgbm9uLXNlZ3dpdCBpbnB1dHMgd2l0aG91dCB0aGUgZnVsbCBwYXJlbnQgdHJhbnNhY3Rpb24gJyArXG4gICAgICAgICAgJ21lYW5zIHRoZXJlIGlzIGEgY2hhbmNlIHRoYXQgYSBtaW5lciBjb3VsZCBmZWVkIHlvdSBpbmNvcnJlY3QgaW5mb3JtYXRpb24gJyArXG4gICAgICAgICAgXCJ0byB0cmljayB5b3UgaW50byBwYXlpbmcgbGFyZ2UgZmVlcy4gVGhpcyBiZWhhdmlvciBpcyB0aGUgc2FtZSBhcyBQc2J0J3MgcHJlZGVjZXNzb3IgXCIgK1xuICAgICAgICAgICcoVHJhbnNhY3Rpb25CdWlsZGVyIC0gbm93IHJlbW92ZWQpIHdoZW4gc2lnbmluZyBub24tc2Vnd2l0IHNjcmlwdHMuIFlvdSBhcmUgbm90ICcgK1xuICAgICAgICAgICdhYmxlIHRvIGV4cG9ydCB0aGlzIFBzYnQgd2l0aCB0b0J1ZmZlcnx0b0Jhc2U2NHx0b0hleCBzaW5jZSBpdCBpcyBub3QgJyArXG4gICAgICAgICAgJ0JJUDE3NCBjb21wbGlhbnQuXFxuKioqKioqKioqKioqKioqKioqKioqXFxuUFJPQ0VFRCBXSVRIIENBVVRJT04hXFxuJyArXG4gICAgICAgICAgJyoqKioqKioqKioqKioqKioqKioqKicsXG4gICAgICApO1xuICAgIGhhc2ggPSB1bnNpZ25lZFR4Lmhhc2hGb3JTaWduYXR1cmUoXG4gICAgICBpbnB1dEluZGV4LFxuICAgICAgbWVhbmluZ2Z1bFNjcmlwdCxcbiAgICAgIHNpZ2hhc2hUeXBlLFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBzY3JpcHQ6IG1lYW5pbmdmdWxTY3JpcHQsXG4gICAgc2lnaGFzaFR5cGUsXG4gICAgaGFzaCxcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldEFsbFRhcHJvb3RIYXNoZXNGb3JTaWcoaW5wdXRJbmRleCwgaW5wdXQsIGlucHV0cywgY2FjaGUpIHtcbiAgY29uc3QgYWxsUHVibGljS2V5cyA9IFtdO1xuICBpZiAoaW5wdXQudGFwSW50ZXJuYWxLZXkpIHtcbiAgICBjb25zdCBrZXkgPSBnZXRQcmV2b3V0VGFwcm9vdEtleShpbnB1dEluZGV4LCBpbnB1dCwgY2FjaGUpO1xuICAgIGlmIChrZXkpIHtcbiAgICAgIGFsbFB1YmxpY0tleXMucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICBpZiAoaW5wdXQudGFwU2NyaXB0U2lnKSB7XG4gICAgY29uc3QgdGFwU2NyaXB0UHVia2V5cyA9IGlucHV0LnRhcFNjcmlwdFNpZy5tYXAodHNzID0+IHRzcy5wdWJrZXkpO1xuICAgIGFsbFB1YmxpY0tleXMucHVzaCguLi50YXBTY3JpcHRQdWJrZXlzKTtcbiAgfVxuICBjb25zdCBhbGxIYXNoZXMgPSBhbGxQdWJsaWNLZXlzLm1hcChwdWJsaWNLZXkgPT5cbiAgICBnZXRUYXByb290SGFzaGVzRm9yU2lnKGlucHV0SW5kZXgsIGlucHV0LCBpbnB1dHMsIHB1YmxpY0tleSwgY2FjaGUpLFxuICApO1xuICByZXR1cm4gYWxsSGFzaGVzLmZsYXQoKTtcbn1cbmZ1bmN0aW9uIGdldFByZXZvdXRUYXByb290S2V5KGlucHV0SW5kZXgsIGlucHV0LCBjYWNoZSkge1xuICBjb25zdCB7IHNjcmlwdCB9ID0gZ2V0U2NyaXB0QW5kQW1vdW50RnJvbVV0eG8oaW5wdXRJbmRleCwgaW5wdXQsIGNhY2hlKTtcbiAgcmV0dXJuIGlzUDJUUihzY3JpcHQpID8gc2NyaXB0LnN1YmFycmF5KDIsIDM0KSA6IG51bGw7XG59XG5mdW5jdGlvbiB0cmltVGFwcm9vdFNpZyhzaWduYXR1cmUpIHtcbiAgcmV0dXJuIHNpZ25hdHVyZS5sZW5ndGggPT09IDY0ID8gc2lnbmF0dXJlIDogc2lnbmF0dXJlLnN1YmFycmF5KDAsIDY0KTtcbn1cbmZ1bmN0aW9uIGdldFRhcHJvb3RIYXNoZXNGb3JTaWcoXG4gIGlucHV0SW5kZXgsXG4gIGlucHV0LFxuICBpbnB1dHMsXG4gIHB1YmtleSxcbiAgY2FjaGUsXG4gIHRhcExlYWZIYXNoVG9TaWduLFxuICBhbGxvd2VkU2lnaGFzaFR5cGVzLFxuKSB7XG4gIGNvbnN0IHVuc2lnbmVkVHggPSBjYWNoZS5fX1RYO1xuICBjb25zdCBzaWdoYXNoVHlwZSA9IGlucHV0LnNpZ2hhc2hUeXBlIHx8IFRyYW5zYWN0aW9uLlNJR0hBU0hfREVGQVVMVDtcbiAgY2hlY2tTaWdoYXNoVHlwZUFsbG93ZWQoc2lnaGFzaFR5cGUsIGFsbG93ZWRTaWdoYXNoVHlwZXMpO1xuICBjb25zdCBwcmV2T3V0cyA9IGlucHV0cy5tYXAoKGksIGluZGV4KSA9PlxuICAgIGdldFNjcmlwdEFuZEFtb3VudEZyb21VdHhvKGluZGV4LCBpLCBjYWNoZSksXG4gICk7XG4gIGNvbnN0IHNpZ25pbmdTY3JpcHRzID0gcHJldk91dHMubWFwKG8gPT4gby5zY3JpcHQpO1xuICBjb25zdCB2YWx1ZXMgPSBwcmV2T3V0cy5tYXAobyA9PiBvLnZhbHVlKTtcbiAgY29uc3QgaGFzaGVzID0gW107XG4gIGlmIChpbnB1dC50YXBJbnRlcm5hbEtleSAmJiAhdGFwTGVhZkhhc2hUb1NpZ24pIHtcbiAgICBjb25zdCBvdXRwdXRLZXkgPVxuICAgICAgZ2V0UHJldm91dFRhcHJvb3RLZXkoaW5wdXRJbmRleCwgaW5wdXQsIGNhY2hlKSB8fCBVaW50OEFycmF5LmZyb20oW10pO1xuICAgIGlmICh0b29scy5jb21wYXJlKHRvWE9ubHkocHVia2V5KSwgb3V0cHV0S2V5KSA9PT0gMCkge1xuICAgICAgY29uc3QgdGFwS2V5SGFzaCA9IHVuc2lnbmVkVHguaGFzaEZvcldpdG5lc3NWMShcbiAgICAgICAgaW5wdXRJbmRleCxcbiAgICAgICAgc2lnbmluZ1NjcmlwdHMsXG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgc2lnaGFzaFR5cGUsXG4gICAgICApO1xuICAgICAgaGFzaGVzLnB1c2goeyBwdWJrZXksIGhhc2g6IHRhcEtleUhhc2ggfSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IHRhcExlYWZIYXNoZXMgPSAoaW5wdXQudGFwTGVhZlNjcmlwdCB8fCBbXSlcbiAgICAuZmlsdGVyKHRhcExlYWYgPT4gcHVia2V5SW5TY3JpcHQocHVia2V5LCB0YXBMZWFmLnNjcmlwdCkpXG4gICAgLm1hcCh0YXBMZWFmID0+IHtcbiAgICAgIGNvbnN0IGhhc2ggPSB0YXBsZWFmSGFzaCh7XG4gICAgICAgIG91dHB1dDogdGFwTGVhZi5zY3JpcHQsXG4gICAgICAgIHZlcnNpb246IHRhcExlYWYubGVhZlZlcnNpb24sXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHsgaGFzaCB9LCB0YXBMZWFmKTtcbiAgICB9KVxuICAgIC5maWx0ZXIoXG4gICAgICB0YXBMZWFmID0+XG4gICAgICAgICF0YXBMZWFmSGFzaFRvU2lnbiB8fFxuICAgICAgICB0b29scy5jb21wYXJlKHRhcExlYWZIYXNoVG9TaWduLCB0YXBMZWFmLmhhc2gpID09PSAwLFxuICAgIClcbiAgICAubWFwKHRhcExlYWYgPT4ge1xuICAgICAgY29uc3QgdGFwU2NyaXB0SGFzaCA9IHVuc2lnbmVkVHguaGFzaEZvcldpdG5lc3NWMShcbiAgICAgICAgaW5wdXRJbmRleCxcbiAgICAgICAgc2lnbmluZ1NjcmlwdHMsXG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgc2lnaGFzaFR5cGUsXG4gICAgICAgIHRhcExlYWYuaGFzaCxcbiAgICAgICk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwdWJrZXksXG4gICAgICAgIGhhc2g6IHRhcFNjcmlwdEhhc2gsXG4gICAgICAgIGxlYWZIYXNoOiB0YXBMZWFmLmhhc2gsXG4gICAgICB9O1xuICAgIH0pO1xuICByZXR1cm4gaGFzaGVzLmNvbmNhdCh0YXBMZWFmSGFzaGVzKTtcbn1cbmZ1bmN0aW9uIGNoZWNrU2lnaGFzaFR5cGVBbGxvd2VkKHNpZ2hhc2hUeXBlLCBzaWdoYXNoVHlwZXMpIHtcbiAgaWYgKHNpZ2hhc2hUeXBlcyAmJiBzaWdoYXNoVHlwZXMuaW5kZXhPZihzaWdoYXNoVHlwZSkgPCAwKSB7XG4gICAgY29uc3Qgc3RyID0gc2lnaGFzaFR5cGVUb1N0cmluZyhzaWdoYXNoVHlwZSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFNpZ2hhc2ggdHlwZSBpcyBub3QgYWxsb3dlZC4gUmV0cnkgdGhlIHNpZ24gbWV0aG9kIHBhc3NpbmcgdGhlIGAgK1xuICAgICAgICBgc2lnaGFzaFR5cGVzIGFycmF5IG9mIHdoaXRlbGlzdGVkIHR5cGVzLiBTaWdoYXNoIHR5cGU6ICR7c3RyfWAsXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0UGF5bWVudChzY3JpcHQsIHNjcmlwdFR5cGUsIHBhcnRpYWxTaWcpIHtcbiAgbGV0IHBheW1lbnQ7XG4gIHN3aXRjaCAoc2NyaXB0VHlwZSkge1xuICAgIGNhc2UgJ211bHRpc2lnJzpcbiAgICAgIGNvbnN0IHNpZ3MgPSBnZXRTb3J0ZWRTaWdzKHNjcmlwdCwgcGFydGlhbFNpZyk7XG4gICAgICBwYXltZW50ID0gcGF5bWVudHMucDJtcyh7XG4gICAgICAgIG91dHB1dDogc2NyaXB0LFxuICAgICAgICBzaWduYXR1cmVzOiBzaWdzLFxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdwdWJrZXknOlxuICAgICAgcGF5bWVudCA9IHBheW1lbnRzLnAycGsoe1xuICAgICAgICBvdXRwdXQ6IHNjcmlwdCxcbiAgICAgICAgc2lnbmF0dXJlOiBwYXJ0aWFsU2lnWzBdLnNpZ25hdHVyZSxcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAncHVia2V5aGFzaCc6XG4gICAgICBwYXltZW50ID0gcGF5bWVudHMucDJwa2goe1xuICAgICAgICBvdXRwdXQ6IHNjcmlwdCxcbiAgICAgICAgcHVia2V5OiBwYXJ0aWFsU2lnWzBdLnB1YmtleSxcbiAgICAgICAgc2lnbmF0dXJlOiBwYXJ0aWFsU2lnWzBdLnNpZ25hdHVyZSxcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnd2l0bmVzc3B1YmtleWhhc2gnOlxuICAgICAgcGF5bWVudCA9IHBheW1lbnRzLnAyd3BraCh7XG4gICAgICAgIG91dHB1dDogc2NyaXB0LFxuICAgICAgICBwdWJrZXk6IHBhcnRpYWxTaWdbMF0ucHVia2V5LFxuICAgICAgICBzaWduYXR1cmU6IHBhcnRpYWxTaWdbMF0uc2lnbmF0dXJlLFxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgfVxuICByZXR1cm4gcGF5bWVudDtcbn1cbmZ1bmN0aW9uIGdldFNjcmlwdEZyb21JbnB1dChpbnB1dEluZGV4LCBpbnB1dCwgY2FjaGUpIHtcbiAgY29uc3QgdW5zaWduZWRUeCA9IGNhY2hlLl9fVFg7XG4gIGNvbnN0IHJlcyA9IHtcbiAgICBzY3JpcHQ6IG51bGwsXG4gICAgaXNTZWd3aXQ6IGZhbHNlLFxuICAgIGlzUDJTSDogZmFsc2UsXG4gICAgaXNQMldTSDogZmFsc2UsXG4gIH07XG4gIHJlcy5pc1AyU0ggPSAhIWlucHV0LnJlZGVlbVNjcmlwdDtcbiAgcmVzLmlzUDJXU0ggPSAhIWlucHV0LndpdG5lc3NTY3JpcHQ7XG4gIGlmIChpbnB1dC53aXRuZXNzU2NyaXB0KSB7XG4gICAgcmVzLnNjcmlwdCA9IGlucHV0LndpdG5lc3NTY3JpcHQ7XG4gIH0gZWxzZSBpZiAoaW5wdXQucmVkZWVtU2NyaXB0KSB7XG4gICAgcmVzLnNjcmlwdCA9IGlucHV0LnJlZGVlbVNjcmlwdDtcbiAgfSBlbHNlIHtcbiAgICBpZiAoaW5wdXQubm9uV2l0bmVzc1V0eG8pIHtcbiAgICAgIGNvbnN0IG5vbldpdG5lc3NVdHhvVHggPSBub25XaXRuZXNzVXR4b1R4RnJvbUNhY2hlKFxuICAgICAgICBjYWNoZSxcbiAgICAgICAgaW5wdXQsXG4gICAgICAgIGlucHV0SW5kZXgsXG4gICAgICApO1xuICAgICAgY29uc3QgcHJldm91dEluZGV4ID0gdW5zaWduZWRUeC5pbnNbaW5wdXRJbmRleF0uaW5kZXg7XG4gICAgICByZXMuc2NyaXB0ID0gbm9uV2l0bmVzc1V0eG9UeC5vdXRzW3ByZXZvdXRJbmRleF0uc2NyaXB0O1xuICAgIH0gZWxzZSBpZiAoaW5wdXQud2l0bmVzc1V0eG8pIHtcbiAgICAgIHJlcy5zY3JpcHQgPSBpbnB1dC53aXRuZXNzVXR4by5zY3JpcHQ7XG4gICAgfVxuICB9XG4gIGlmIChpbnB1dC53aXRuZXNzU2NyaXB0IHx8IGlzUDJXUEtIKHJlcy5zY3JpcHQpKSB7XG4gICAgcmVzLmlzU2Vnd2l0ID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gZ2V0U2lnbmVyc0Zyb21IRChpbnB1dEluZGV4LCBpbnB1dHMsIGhkS2V5UGFpcikge1xuICBjb25zdCBpbnB1dCA9IGNoZWNrRm9ySW5wdXQoaW5wdXRzLCBpbnB1dEluZGV4KTtcbiAgaWYgKCFpbnB1dC5iaXAzMkRlcml2YXRpb24gfHwgaW5wdXQuYmlwMzJEZXJpdmF0aW9uLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTmVlZCBiaXAzMkRlcml2YXRpb24gdG8gc2lnbiB3aXRoIEhEJyk7XG4gIH1cbiAgY29uc3QgbXlEZXJpdmF0aW9ucyA9IGlucHV0LmJpcDMyRGVyaXZhdGlvblxuICAgIC5tYXAoYmlwRHYgPT4ge1xuICAgICAgaWYgKHRvb2xzLmNvbXBhcmUoYmlwRHYubWFzdGVyRmluZ2VycHJpbnQsIGhkS2V5UGFpci5maW5nZXJwcmludCkgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGJpcER2O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0pXG4gICAgLmZpbHRlcih2ID0+ICEhdik7XG4gIGlmIChteURlcml2YXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdOZWVkIG9uZSBiaXAzMkRlcml2YXRpb24gbWFzdGVyRmluZ2VycHJpbnQgdG8gbWF0Y2ggdGhlIEhEU2lnbmVyIGZpbmdlcnByaW50JyxcbiAgICApO1xuICB9XG4gIGNvbnN0IHNpZ25lcnMgPSBteURlcml2YXRpb25zLm1hcChiaXBEdiA9PiB7XG4gICAgY29uc3Qgbm9kZSA9IGhkS2V5UGFpci5kZXJpdmVQYXRoKGJpcER2LnBhdGgpO1xuICAgIGlmICh0b29scy5jb21wYXJlKGJpcER2LnB1YmtleSwgbm9kZS5wdWJsaWNLZXkpICE9PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3B1YmtleSBkaWQgbm90IG1hdGNoIGJpcDMyRGVyaXZhdGlvbicpO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfSk7XG4gIHJldHVybiBzaWduZXJzO1xufVxuZnVuY3Rpb24gZ2V0U29ydGVkU2lncyhzY3JpcHQsIHBhcnRpYWxTaWcpIHtcbiAgY29uc3QgcDJtcyA9IHBheW1lbnRzLnAybXMoeyBvdXRwdXQ6IHNjcmlwdCB9KTtcbiAgLy8gZm9yIGVhY2ggcHVia2V5IGluIG9yZGVyIG9mIHAybXMgc2NyaXB0XG4gIHJldHVybiBwMm1zLnB1YmtleXNcbiAgICAubWFwKHBrID0+IHtcbiAgICAgIC8vIGZpbHRlciBwYXJ0aWFsU2lnIGFycmF5IGJ5IHB1YmtleSBiZWluZyBlcXVhbFxuICAgICAgcmV0dXJuIChcbiAgICAgICAgcGFydGlhbFNpZy5maWx0ZXIocHMgPT4ge1xuICAgICAgICAgIHJldHVybiB0b29scy5jb21wYXJlKHBzLnB1YmtleSwgcGspID09PSAwO1xuICAgICAgICB9KVswXSB8fCB7fVxuICAgICAgKS5zaWduYXR1cmU7XG4gICAgICAvLyBBbnkgcHVia2V5IHdpdGhvdXQgYSBtYXRjaCB3aWxsIHJldHVybiB1bmRlZmluZWRcbiAgICAgIC8vIHRoaXMgbGFzdCBmaWx0ZXIgcmVtb3ZlcyBhbGwgdGhlIHVuZGVmaW5lZCBpdGVtcyBpbiB0aGUgYXJyYXkuXG4gICAgfSlcbiAgICAuZmlsdGVyKHYgPT4gISF2KTtcbn1cbmZ1bmN0aW9uIHNjcmlwdFdpdG5lc3NUb1dpdG5lc3NTdGFjayhidWZmZXIpIHtcbiAgbGV0IG9mZnNldCA9IDA7XG4gIGZ1bmN0aW9uIHJlYWRTbGljZShuKSB7XG4gICAgb2Zmc2V0ICs9IG47XG4gICAgcmV0dXJuIGJ1ZmZlci5zbGljZShvZmZzZXQgLSBuLCBvZmZzZXQpO1xuICB9XG4gIGZ1bmN0aW9uIHJlYWRWYXJJbnQoKSB7XG4gICAgY29uc3QgdmkgPSB2YXJ1aW50LmRlY29kZShidWZmZXIsIG9mZnNldCk7XG4gICAgb2Zmc2V0ICs9IHZhcnVpbnQuZW5jb2RpbmdMZW5ndGgodmkuYmlnaW50VmFsdWUpO1xuICAgIHJldHVybiB2aS5udW1iZXJWYWx1ZTtcbiAgfVxuICBmdW5jdGlvbiByZWFkVmFyU2xpY2UoKSB7XG4gICAgcmV0dXJuIHJlYWRTbGljZShyZWFkVmFySW50KCkpO1xuICB9XG4gIGZ1bmN0aW9uIHJlYWRWZWN0b3IoKSB7XG4gICAgY29uc3QgY291bnQgPSByZWFkVmFySW50KCk7XG4gICAgY29uc3QgdmVjdG9yID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB2ZWN0b3IucHVzaChyZWFkVmFyU2xpY2UoKSk7XG4gICAgcmV0dXJuIHZlY3RvcjtcbiAgfVxuICByZXR1cm4gcmVhZFZlY3RvcigpO1xufVxuZnVuY3Rpb24gc2lnaGFzaFR5cGVUb1N0cmluZyhzaWdoYXNoVHlwZSkge1xuICBsZXQgdGV4dCA9XG4gICAgc2lnaGFzaFR5cGUgJiBUcmFuc2FjdGlvbi5TSUdIQVNIX0FOWU9ORUNBTlBBWVxuICAgICAgPyAnU0lHSEFTSF9BTllPTkVDQU5QQVkgfCAnXG4gICAgICA6ICcnO1xuICBjb25zdCBzaWdNb2QgPSBzaWdoYXNoVHlwZSAmIDB4MWY7XG4gIHN3aXRjaCAoc2lnTW9kKSB7XG4gICAgY2FzZSBUcmFuc2FjdGlvbi5TSUdIQVNIX0FMTDpcbiAgICAgIHRleHQgKz0gJ1NJR0hBU0hfQUxMJztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVHJhbnNhY3Rpb24uU0lHSEFTSF9TSU5HTEU6XG4gICAgICB0ZXh0ICs9ICdTSUdIQVNIX1NJTkdMRSc7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFRyYW5zYWN0aW9uLlNJR0hBU0hfTk9ORTpcbiAgICAgIHRleHQgKz0gJ1NJR0hBU0hfTk9ORSc7XG4gICAgICBicmVhaztcbiAgfVxuICByZXR1cm4gdGV4dDtcbn1cbmZ1bmN0aW9uIGFkZE5vbldpdG5lc3NUeENhY2hlKGNhY2hlLCBpbnB1dCwgaW5wdXRJbmRleCkge1xuICBjYWNoZS5fX05PTl9XSVRORVNTX1VUWE9fQlVGX0NBQ0hFW2lucHV0SW5kZXhdID0gaW5wdXQubm9uV2l0bmVzc1V0eG87XG4gIGNvbnN0IHR4ID0gVHJhbnNhY3Rpb24uZnJvbUJ1ZmZlcihpbnB1dC5ub25XaXRuZXNzVXR4byk7XG4gIGNhY2hlLl9fTk9OX1dJVE5FU1NfVVRYT19UWF9DQUNIRVtpbnB1dEluZGV4XSA9IHR4O1xuICBjb25zdCBzZWxmID0gY2FjaGU7XG4gIGNvbnN0IHNlbGZJbmRleCA9IGlucHV0SW5kZXg7XG4gIGRlbGV0ZSBpbnB1dC5ub25XaXRuZXNzVXR4bztcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGlucHV0LCAnbm9uV2l0bmVzc1V0eG8nLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQoKSB7XG4gICAgICBjb25zdCBidWYgPSBzZWxmLl9fTk9OX1dJVE5FU1NfVVRYT19CVUZfQ0FDSEVbc2VsZkluZGV4XTtcbiAgICAgIGNvbnN0IHR4Q2FjaGUgPSBzZWxmLl9fTk9OX1dJVE5FU1NfVVRYT19UWF9DQUNIRVtzZWxmSW5kZXhdO1xuICAgICAgaWYgKGJ1ZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBidWY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBuZXdCdWYgPSB0eENhY2hlLnRvQnVmZmVyKCk7XG4gICAgICAgIHNlbGYuX19OT05fV0lUTkVTU19VVFhPX0JVRl9DQUNIRVtzZWxmSW5kZXhdID0gbmV3QnVmO1xuICAgICAgICByZXR1cm4gbmV3QnVmO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2V0KGRhdGEpIHtcbiAgICAgIHNlbGYuX19OT05fV0lUTkVTU19VVFhPX0JVRl9DQUNIRVtzZWxmSW5kZXhdID0gZGF0YTtcbiAgICB9LFxuICB9KTtcbn1cbmZ1bmN0aW9uIGlucHV0RmluYWxpemVHZXRBbXRzKGlucHV0cywgdHgsIGNhY2hlLCBtdXN0RmluYWxpemUpIHtcbiAgbGV0IGlucHV0QW1vdW50ID0gMG47XG4gIGlucHV0cy5mb3JFYWNoKChpbnB1dCwgaWR4KSA9PiB7XG4gICAgaWYgKG11c3RGaW5hbGl6ZSAmJiBpbnB1dC5maW5hbFNjcmlwdFNpZylcbiAgICAgIHR4Lmluc1tpZHhdLnNjcmlwdCA9IGlucHV0LmZpbmFsU2NyaXB0U2lnO1xuICAgIGlmIChtdXN0RmluYWxpemUgJiYgaW5wdXQuZmluYWxTY3JpcHRXaXRuZXNzKSB7XG4gICAgICB0eC5pbnNbaWR4XS53aXRuZXNzID0gc2NyaXB0V2l0bmVzc1RvV2l0bmVzc1N0YWNrKFxuICAgICAgICBpbnB1dC5maW5hbFNjcmlwdFdpdG5lc3MsXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoaW5wdXQud2l0bmVzc1V0eG8pIHtcbiAgICAgIGlucHV0QW1vdW50ICs9IGlucHV0LndpdG5lc3NVdHhvLnZhbHVlO1xuICAgIH0gZWxzZSBpZiAoaW5wdXQubm9uV2l0bmVzc1V0eG8pIHtcbiAgICAgIGNvbnN0IG53VHggPSBub25XaXRuZXNzVXR4b1R4RnJvbUNhY2hlKGNhY2hlLCBpbnB1dCwgaWR4KTtcbiAgICAgIGNvbnN0IHZvdXQgPSB0eC5pbnNbaWR4XS5pbmRleDtcbiAgICAgIGNvbnN0IG91dCA9IG53VHgub3V0c1t2b3V0XTtcbiAgICAgIGlucHV0QW1vdW50ICs9IG91dC52YWx1ZTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCBvdXRwdXRBbW91bnQgPSB0eC5vdXRzLnJlZHVjZSgodG90YWwsIG8pID0+IHRvdGFsICsgby52YWx1ZSwgMG4pO1xuICBjb25zdCBmZWUgPSBpbnB1dEFtb3VudCAtIG91dHB1dEFtb3VudDtcbiAgaWYgKGZlZSA8IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ091dHB1dHMgYXJlIHNwZW5kaW5nIG1vcmUgdGhhbiBJbnB1dHMnKTtcbiAgfVxuICBjb25zdCBieXRlcyA9IHR4LnZpcnR1YWxTaXplKCk7XG4gIGNhY2hlLl9fRkVFID0gZmVlO1xuICBjYWNoZS5fX0VYVFJBQ1RFRF9UWCA9IHR4O1xuICBjYWNoZS5fX0ZFRV9SQVRFID0gTWF0aC5mbG9vcihOdW1iZXIoZmVlIC8gQmlnSW50KGJ5dGVzKSkpO1xufVxuZnVuY3Rpb24gbm9uV2l0bmVzc1V0eG9UeEZyb21DYWNoZShjYWNoZSwgaW5wdXQsIGlucHV0SW5kZXgpIHtcbiAgY29uc3QgYyA9IGNhY2hlLl9fTk9OX1dJVE5FU1NfVVRYT19UWF9DQUNIRTtcbiAgaWYgKCFjW2lucHV0SW5kZXhdKSB7XG4gICAgYWRkTm9uV2l0bmVzc1R4Q2FjaGUoY2FjaGUsIGlucHV0LCBpbnB1dEluZGV4KTtcbiAgfVxuICByZXR1cm4gY1tpbnB1dEluZGV4XTtcbn1cbmZ1bmN0aW9uIGdldFNjcmlwdEZyb21VdHhvKGlucHV0SW5kZXgsIGlucHV0LCBjYWNoZSkge1xuICBjb25zdCB7IHNjcmlwdCB9ID0gZ2V0U2NyaXB0QW5kQW1vdW50RnJvbVV0eG8oaW5wdXRJbmRleCwgaW5wdXQsIGNhY2hlKTtcbiAgcmV0dXJuIHNjcmlwdDtcbn1cbmZ1bmN0aW9uIGdldFNjcmlwdEFuZEFtb3VudEZyb21VdHhvKGlucHV0SW5kZXgsIGlucHV0LCBjYWNoZSkge1xuICBpZiAoaW5wdXQud2l0bmVzc1V0eG8gIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB7XG4gICAgICBzY3JpcHQ6IGlucHV0LndpdG5lc3NVdHhvLnNjcmlwdCxcbiAgICAgIHZhbHVlOiBpbnB1dC53aXRuZXNzVXR4by52YWx1ZSxcbiAgICB9O1xuICB9IGVsc2UgaWYgKGlucHV0Lm5vbldpdG5lc3NVdHhvICE9PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBub25XaXRuZXNzVXR4b1R4ID0gbm9uV2l0bmVzc1V0eG9UeEZyb21DYWNoZShcbiAgICAgIGNhY2hlLFxuICAgICAgaW5wdXQsXG4gICAgICBpbnB1dEluZGV4LFxuICAgICk7XG4gICAgY29uc3QgbyA9IG5vbldpdG5lc3NVdHhvVHgub3V0c1tjYWNoZS5fX1RYLmluc1tpbnB1dEluZGV4XS5pbmRleF07XG4gICAgcmV0dXJuIHsgc2NyaXB0OiBvLnNjcmlwdCwgdmFsdWU6IG8udmFsdWUgfTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBmaW5kIHB1YmtleSBpbiBpbnB1dCB3aXRob3V0IFV0eG8gZGF0YVwiKTtcbiAgfVxufVxuZnVuY3Rpb24gcHVia2V5SW5JbnB1dChwdWJrZXksIGlucHV0LCBpbnB1dEluZGV4LCBjYWNoZSkge1xuICBjb25zdCBzY3JpcHQgPSBnZXRTY3JpcHRGcm9tVXR4byhpbnB1dEluZGV4LCBpbnB1dCwgY2FjaGUpO1xuICBjb25zdCB7IG1lYW5pbmdmdWxTY3JpcHQgfSA9IGdldE1lYW5pbmdmdWxTY3JpcHQoXG4gICAgc2NyaXB0LFxuICAgIGlucHV0SW5kZXgsXG4gICAgJ2lucHV0JyxcbiAgICBpbnB1dC5yZWRlZW1TY3JpcHQsXG4gICAgaW5wdXQud2l0bmVzc1NjcmlwdCxcbiAgKTtcbiAgcmV0dXJuIHB1YmtleUluU2NyaXB0KHB1YmtleSwgbWVhbmluZ2Z1bFNjcmlwdCk7XG59XG5mdW5jdGlvbiBwdWJrZXlJbk91dHB1dChwdWJrZXksIG91dHB1dCwgb3V0cHV0SW5kZXgsIGNhY2hlKSB7XG4gIGNvbnN0IHNjcmlwdCA9IGNhY2hlLl9fVFgub3V0c1tvdXRwdXRJbmRleF0uc2NyaXB0O1xuICBjb25zdCB7IG1lYW5pbmdmdWxTY3JpcHQgfSA9IGdldE1lYW5pbmdmdWxTY3JpcHQoXG4gICAgc2NyaXB0LFxuICAgIG91dHB1dEluZGV4LFxuICAgICdvdXRwdXQnLFxuICAgIG91dHB1dC5yZWRlZW1TY3JpcHQsXG4gICAgb3V0cHV0LndpdG5lc3NTY3JpcHQsXG4gICk7XG4gIHJldHVybiBwdWJrZXlJblNjcmlwdChwdWJrZXksIG1lYW5pbmdmdWxTY3JpcHQpO1xufVxuZnVuY3Rpb24gcmVkZWVtRnJvbUZpbmFsU2NyaXB0U2lnKGZpbmFsU2NyaXB0KSB7XG4gIGlmICghZmluYWxTY3JpcHQpIHJldHVybjtcbiAgY29uc3QgZGVjb21wID0gYnNjcmlwdC5kZWNvbXBpbGUoZmluYWxTY3JpcHQpO1xuICBpZiAoIWRlY29tcCkgcmV0dXJuO1xuICBjb25zdCBsYXN0SXRlbSA9IGRlY29tcFtkZWNvbXAubGVuZ3RoIC0gMV07XG4gIGlmIChcbiAgICAhKGxhc3RJdGVtIGluc3RhbmNlb2YgVWludDhBcnJheSkgfHxcbiAgICBpc1B1YmtleUxpa2UobGFzdEl0ZW0pIHx8XG4gICAgaXNTaWdMaWtlKGxhc3RJdGVtKVxuICApXG4gICAgcmV0dXJuO1xuICBjb25zdCBzRGVjb21wID0gYnNjcmlwdC5kZWNvbXBpbGUobGFzdEl0ZW0pO1xuICBpZiAoIXNEZWNvbXApIHJldHVybjtcbiAgcmV0dXJuIGxhc3RJdGVtO1xufVxuZnVuY3Rpb24gcmVkZWVtRnJvbUZpbmFsV2l0bmVzc1NjcmlwdChmaW5hbFNjcmlwdCkge1xuICBpZiAoIWZpbmFsU2NyaXB0KSByZXR1cm47XG4gIGNvbnN0IGRlY29tcCA9IHNjcmlwdFdpdG5lc3NUb1dpdG5lc3NTdGFjayhmaW5hbFNjcmlwdCk7XG4gIGNvbnN0IGxhc3RJdGVtID0gZGVjb21wW2RlY29tcC5sZW5ndGggLSAxXTtcbiAgaWYgKGlzUHVia2V5TGlrZShsYXN0SXRlbSkpIHJldHVybjtcbiAgY29uc3Qgc0RlY29tcCA9IGJzY3JpcHQuZGVjb21waWxlKGxhc3RJdGVtKTtcbiAgaWYgKCFzRGVjb21wKSByZXR1cm47XG4gIHJldHVybiBsYXN0SXRlbTtcbn1cbmZ1bmN0aW9uIGNvbXByZXNzUHVia2V5KHB1YmtleSkge1xuICBpZiAocHVia2V5Lmxlbmd0aCA9PT0gNjUpIHtcbiAgICBjb25zdCBwYXJpdHkgPSBwdWJrZXlbNjRdICYgMTtcbiAgICBjb25zdCBuZXdLZXkgPSBwdWJrZXkuc2xpY2UoMCwgMzMpO1xuICAgIG5ld0tleVswXSA9IDIgfCBwYXJpdHk7XG4gICAgcmV0dXJuIG5ld0tleTtcbiAgfVxuICByZXR1cm4gcHVia2V5LnNsaWNlKCk7XG59XG5mdW5jdGlvbiBpc1B1YmtleUxpa2UoYnVmKSB7XG4gIHJldHVybiBidWYubGVuZ3RoID09PSAzMyAmJiBic2NyaXB0LmlzQ2Fub25pY2FsUHViS2V5KGJ1Zik7XG59XG5mdW5jdGlvbiBpc1NpZ0xpa2UoYnVmKSB7XG4gIHJldHVybiBic2NyaXB0LmlzQ2Fub25pY2FsU2NyaXB0U2lnbmF0dXJlKGJ1Zik7XG59XG5mdW5jdGlvbiBnZXRNZWFuaW5nZnVsU2NyaXB0KFxuICBzY3JpcHQsXG4gIGluZGV4LFxuICBpb1R5cGUsXG4gIHJlZGVlbVNjcmlwdCxcbiAgd2l0bmVzc1NjcmlwdCxcbikge1xuICBjb25zdCBpc1AyU0ggPSBpc1AyU0hTY3JpcHQoc2NyaXB0KTtcbiAgY29uc3QgaXNQMlNIUDJXU0ggPSBpc1AyU0ggJiYgcmVkZWVtU2NyaXB0ICYmIGlzUDJXU0hTY3JpcHQocmVkZWVtU2NyaXB0KTtcbiAgY29uc3QgaXNQMldTSCA9IGlzUDJXU0hTY3JpcHQoc2NyaXB0KTtcbiAgaWYgKGlzUDJTSCAmJiByZWRlZW1TY3JpcHQgPT09IHVuZGVmaW5lZClcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NjcmlwdFB1YmtleSBpcyBQMlNIIGJ1dCByZWRlZW1TY3JpcHQgbWlzc2luZycpO1xuICBpZiAoKGlzUDJXU0ggfHwgaXNQMlNIUDJXU0gpICYmIHdpdG5lc3NTY3JpcHQgPT09IHVuZGVmaW5lZClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnc2NyaXB0UHVia2V5IG9yIHJlZGVlbVNjcmlwdCBpcyBQMldTSCBidXQgd2l0bmVzc1NjcmlwdCBtaXNzaW5nJyxcbiAgICApO1xuICBsZXQgbWVhbmluZ2Z1bFNjcmlwdDtcbiAgaWYgKGlzUDJTSFAyV1NIKSB7XG4gICAgbWVhbmluZ2Z1bFNjcmlwdCA9IHdpdG5lc3NTY3JpcHQ7XG4gICAgY2hlY2tSZWRlZW1TY3JpcHQoaW5kZXgsIHNjcmlwdCwgcmVkZWVtU2NyaXB0LCBpb1R5cGUpO1xuICAgIGNoZWNrV2l0bmVzc1NjcmlwdChpbmRleCwgcmVkZWVtU2NyaXB0LCB3aXRuZXNzU2NyaXB0LCBpb1R5cGUpO1xuICAgIGNoZWNrSW52YWxpZFAyV1NIKG1lYW5pbmdmdWxTY3JpcHQpO1xuICB9IGVsc2UgaWYgKGlzUDJXU0gpIHtcbiAgICBtZWFuaW5nZnVsU2NyaXB0ID0gd2l0bmVzc1NjcmlwdDtcbiAgICBjaGVja1dpdG5lc3NTY3JpcHQoaW5kZXgsIHNjcmlwdCwgd2l0bmVzc1NjcmlwdCwgaW9UeXBlKTtcbiAgICBjaGVja0ludmFsaWRQMldTSChtZWFuaW5nZnVsU2NyaXB0KTtcbiAgfSBlbHNlIGlmIChpc1AyU0gpIHtcbiAgICBtZWFuaW5nZnVsU2NyaXB0ID0gcmVkZWVtU2NyaXB0O1xuICAgIGNoZWNrUmVkZWVtU2NyaXB0KGluZGV4LCBzY3JpcHQsIHJlZGVlbVNjcmlwdCwgaW9UeXBlKTtcbiAgfSBlbHNlIHtcbiAgICBtZWFuaW5nZnVsU2NyaXB0ID0gc2NyaXB0O1xuICB9XG4gIHJldHVybiB7XG4gICAgbWVhbmluZ2Z1bFNjcmlwdCxcbiAgICB0eXBlOiBpc1AyU0hQMldTSFxuICAgICAgPyAncDJzaC1wMndzaCdcbiAgICAgIDogaXNQMlNIXG4gICAgICAgID8gJ3Ayc2gnXG4gICAgICAgIDogaXNQMldTSFxuICAgICAgICAgID8gJ3Ayd3NoJ1xuICAgICAgICAgIDogJ3JhdycsXG4gIH07XG59XG5mdW5jdGlvbiBjaGVja0ludmFsaWRQMldTSChzY3JpcHQpIHtcbiAgaWYgKGlzUDJXUEtIKHNjcmlwdCkgfHwgaXNQMlNIU2NyaXB0KHNjcmlwdCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1AyV1BLSCBvciBQMlNIIGNhbiBub3QgYmUgY29udGFpbmVkIHdpdGhpbiBQMldTSCcpO1xuICB9XG59XG5mdW5jdGlvbiBjbGFzc2lmeVNjcmlwdChzY3JpcHQpIHtcbiAgaWYgKGlzUDJXUEtIKHNjcmlwdCkpIHJldHVybiAnd2l0bmVzc3B1YmtleWhhc2gnO1xuICBpZiAoaXNQMlBLSChzY3JpcHQpKSByZXR1cm4gJ3B1YmtleWhhc2gnO1xuICBpZiAoaXNQMk1TKHNjcmlwdCkpIHJldHVybiAnbXVsdGlzaWcnO1xuICBpZiAoaXNQMlBLKHNjcmlwdCkpIHJldHVybiAncHVia2V5JztcbiAgcmV0dXJuICdub25zdGFuZGFyZCc7XG59XG5mdW5jdGlvbiByYW5nZShuKSB7XG4gIHJldHVybiBbLi4uQXJyYXkobikua2V5cygpXTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt/bip371.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt/bip371.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkTaprootInputFields: () => (/* binding */ checkTaprootInputFields),\n/* harmony export */   checkTaprootInputForSigs: () => (/* binding */ checkTaprootInputForSigs),\n/* harmony export */   checkTaprootOutputFields: () => (/* binding */ checkTaprootOutputFields),\n/* harmony export */   isTaprootInput: () => (/* binding */ isTaprootInput),\n/* harmony export */   isTaprootOutput: () => (/* binding */ isTaprootOutput),\n/* harmony export */   serializeTaprootSignature: () => (/* binding */ serializeTaprootSignature),\n/* harmony export */   tapScriptFinalizer: () => (/* binding */ tapScriptFinalizer),\n/* harmony export */   tapTreeFromList: () => (/* binding */ tapTreeFromList),\n/* harmony export */   tapTreeToList: () => (/* binding */ tapTreeToList),\n/* harmony export */   toXOnly: () => (/* binding */ toXOnly),\n/* harmony export */   tweakInternalPubKey: () => (/* binding */ tweakInternalPubKey)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var _transaction_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../transaction.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/transaction.js\");\n/* harmony import */ var _psbtutils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./psbtutils.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt/psbtutils.js\");\n/* harmony import */ var _payments_bip341_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../payments/bip341.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/bip341.js\");\n/* harmony import */ var _payments_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../payments/index.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/index.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n\n\n\n\n\n\n\n/**\n * Converts a public key to an X-only public key.\n * @param pubKey The public key to convert.\n * @returns The X-only public key.\n */\nconst toXOnly = pubKey =>\n  pubKey.length === 32 ? pubKey : pubKey.slice(1, 33);\n/**\n * Default tapscript finalizer. It searches for the `tapLeafHashToFinalize` if provided.\n * Otherwise it will search for the tapleaf that has at least one signature and has the shortest path.\n * @param inputIndex the position of the PSBT input.\n * @param input the PSBT input.\n * @param tapLeafHashToFinalize optional, if provided the finalizer will search for a tapleaf that has this hash\n *                              and will try to build the finalScriptWitness.\n * @returns the finalScriptWitness or throws an exception if no tapleaf found.\n */\nfunction tapScriptFinalizer(inputIndex, input, tapLeafHashToFinalize) {\n  const tapLeaf = findTapLeafToFinalize(\n    input,\n    inputIndex,\n    tapLeafHashToFinalize,\n  );\n  try {\n    const sigs = sortSignatures(input, tapLeaf);\n    const witness = sigs.concat(tapLeaf.script).concat(tapLeaf.controlBlock);\n    return { finalScriptWitness: (0,_psbtutils_js__WEBPACK_IMPORTED_MODULE_2__.witnessStackToScriptWitness)(witness) };\n  } catch (err) {\n    throw new Error(`Can not finalize taproot input #${inputIndex}: ${err}`);\n  }\n}\n/**\n * Serializes a taproot signature.\n * @param sig The signature to serialize.\n * @param sighashType The sighash type. Optional.\n * @returns The serialized taproot signature.\n */\nfunction serializeTaprootSignature(sig, sighashType) {\n  const sighashTypeByte = sighashType\n    ? Uint8Array.from([sighashType])\n    : Uint8Array.from([]);\n  return uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.concat([sig, sighashTypeByte]);\n}\n/**\n * Checks if a PSBT input is a taproot input.\n * @param input The PSBT input to check.\n * @returns True if the input is a taproot input, false otherwise.\n */\nfunction isTaprootInput(input) {\n  return (\n    input &&\n    !!(\n      input.tapInternalKey ||\n      input.tapMerkleRoot ||\n      (input.tapLeafScript && input.tapLeafScript.length) ||\n      (input.tapBip32Derivation && input.tapBip32Derivation.length) ||\n      (input.witnessUtxo && (0,_psbtutils_js__WEBPACK_IMPORTED_MODULE_2__.isP2TR)(input.witnessUtxo.script))\n    )\n  );\n}\n/**\n * Checks if a PSBT output is a taproot output.\n * @param output The PSBT output to check.\n * @param script The script to check. Optional.\n * @returns True if the output is a taproot output, false otherwise.\n */\nfunction isTaprootOutput(output, script) {\n  return (\n    output &&\n    !!(\n      output.tapInternalKey ||\n      output.tapTree ||\n      (output.tapBip32Derivation && output.tapBip32Derivation.length) ||\n      (script && (0,_psbtutils_js__WEBPACK_IMPORTED_MODULE_2__.isP2TR)(script))\n    )\n  );\n}\n/**\n * Checks the taproot input fields for consistency.\n * @param inputData The original input data.\n * @param newInputData The new input data.\n * @param action The action being performed.\n * @throws Throws an error if the input fields are inconsistent.\n */\nfunction checkTaprootInputFields(inputData, newInputData, action) {\n  checkMixedTaprootAndNonTaprootInputFields(inputData, newInputData, action);\n  checkIfTapLeafInTree(inputData, newInputData, action);\n}\n/**\n * Checks the taproot output fields for consistency.\n * @param outputData The original output data.\n * @param newOutputData The new output data.\n * @param action The action being performed.\n * @throws Throws an error if the output fields are inconsistent.\n */\nfunction checkTaprootOutputFields(outputData, newOutputData, action) {\n  checkMixedTaprootAndNonTaprootOutputFields(outputData, newOutputData, action);\n  checkTaprootScriptPubkey(outputData, newOutputData);\n}\nfunction checkTaprootScriptPubkey(outputData, newOutputData) {\n  if (!newOutputData.tapTree && !newOutputData.tapInternalKey) return;\n  const tapInternalKey =\n    newOutputData.tapInternalKey || outputData.tapInternalKey;\n  const tapTree = newOutputData.tapTree || outputData.tapTree;\n  if (tapInternalKey) {\n    const { script: scriptPubkey } = outputData;\n    const script = getTaprootScripPubkey(tapInternalKey, tapTree);\n    if (scriptPubkey && uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.compare(script, scriptPubkey) !== 0)\n      throw new Error('Error adding output. Script or address mismatch.');\n  }\n}\n/**\n * Returns the Taproot script public key.\n *\n * @param tapInternalKey - The Taproot internal key.\n * @param tapTree - The Taproot tree (optional).\n * @returns The Taproot script public key.\n */\nfunction getTaprootScripPubkey(tapInternalKey, tapTree) {\n  const scriptTree = tapTree && tapTreeFromList(tapTree.leaves);\n  const { output } = (0,_payments_index_js__WEBPACK_IMPORTED_MODULE_4__.p2tr)({\n    internalPubkey: tapInternalKey,\n    scriptTree,\n  });\n  return output;\n}\n/**\n * Tweak the internal public key for a specific input.\n * @param inputIndex - The index of the input.\n * @param input - The PsbtInput object representing the input.\n * @returns The tweaked internal public key.\n * @throws Error if the tap internal key cannot be tweaked.\n */\nfunction tweakInternalPubKey(inputIndex, input) {\n  const tapInternalKey = input.tapInternalKey;\n  const outputKey =\n    tapInternalKey && (0,_payments_bip341_js__WEBPACK_IMPORTED_MODULE_3__.tweakKey)(tapInternalKey, input.tapMerkleRoot);\n  if (!outputKey)\n    throw new Error(\n      `Cannot tweak tap internal key for input #${inputIndex}. Public key: ${\n        // tapInternalKey && tapInternalKey.toString('hex')\n        tapInternalKey && uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.toHex(tapInternalKey)\n      }`,\n    );\n  return outputKey.x;\n}\n/**\n * Convert a binary tree to a BIP371 type list. Each element of the list is (according to BIP371):\n * One or more tuples representing the depth, leaf version, and script for a leaf in the Taproot tree,\n * allowing the entire tree to be reconstructed. The tuples must be in depth first search order so that\n * the tree is correctly reconstructed.\n * @param tree the binary tap tree\n * @returns a list of BIP 371 tapleaves\n */\nfunction tapTreeToList(tree) {\n  if (!(0,_types_js__WEBPACK_IMPORTED_MODULE_0__.isTaptree)(tree))\n    throw new Error(\n      'Cannot convert taptree to tapleaf list. Expecting a tapree structure.',\n    );\n  return _tapTreeToList(tree);\n}\n/**\n * Convert a BIP371 TapLeaf list to a TapTree (binary).\n * @param leaves a list of tapleaves where each element of the list is (according to BIP371):\n * One or more tuples representing the depth, leaf version, and script for a leaf in the Taproot tree,\n * allowing the entire tree to be reconstructed. The tuples must be in depth first search order so that\n * the tree is correctly reconstructed.\n * @returns the corresponding taptree, or throws an exception if the tree cannot be reconstructed\n */\nfunction tapTreeFromList(leaves = []) {\n  if (leaves.length === 1 && leaves[0].depth === 0)\n    return {\n      output: leaves[0].script,\n      version: leaves[0].leafVersion,\n    };\n  return instertLeavesInTree(leaves);\n}\n/**\n * Checks the taproot input for signatures.\n * @param input The PSBT input to check.\n * @param action The action being performed.\n * @returns True if the input has taproot signatures, false otherwise.\n */\nfunction checkTaprootInputForSigs(input, action) {\n  const sigs = extractTaprootSigs(input);\n  return sigs.some(sig =>\n    (0,_psbtutils_js__WEBPACK_IMPORTED_MODULE_2__.signatureBlocksAction)(sig, decodeSchnorrSignature, action),\n  );\n}\n/**\n * Decodes a Schnorr signature.\n * @param signature The signature to decode.\n * @returns The decoded Schnorr signature.\n */\nfunction decodeSchnorrSignature(signature) {\n  return {\n    signature: signature.slice(0, 64),\n    hashType: signature.slice(64)[0] || _transaction_js__WEBPACK_IMPORTED_MODULE_1__.Transaction.SIGHASH_DEFAULT,\n  };\n}\n/**\n * Extracts taproot signatures from a PSBT input.\n * @param input The PSBT input to extract signatures from.\n * @returns An array of taproot signatures.\n */\nfunction extractTaprootSigs(input) {\n  const sigs = [];\n  if (input.tapKeySig) sigs.push(input.tapKeySig);\n  if (input.tapScriptSig)\n    sigs.push(...input.tapScriptSig.map(s => s.signature));\n  if (!sigs.length) {\n    const finalTapKeySig = getTapKeySigFromWithness(input.finalScriptWitness);\n    if (finalTapKeySig) sigs.push(finalTapKeySig);\n  }\n  return sigs;\n}\n/**\n * Gets the taproot signature from the witness.\n * @param finalScriptWitness The final script witness.\n * @returns The taproot signature, or undefined if not found.\n */\nfunction getTapKeySigFromWithness(finalScriptWitness) {\n  if (!finalScriptWitness) return;\n  const witness = finalScriptWitness.slice(2);\n  // todo: add schnorr signature validation\n  if (witness.length === 64 || witness.length === 65) return witness;\n}\n/**\n * Converts a binary tree to a BIP371 type list.\n * @param tree The binary tap tree.\n * @param leaves A list of tapleaves. Optional.\n * @param depth The current depth. Optional.\n * @returns A list of BIP 371 tapleaves.\n * @throws Throws an error if the taptree cannot be converted to a tapleaf list.\n */\nfunction _tapTreeToList(tree, leaves = [], depth = 0) {\n  if (depth > _payments_bip341_js__WEBPACK_IMPORTED_MODULE_3__.MAX_TAPTREE_DEPTH) throw new Error('Max taptree depth exceeded.');\n  if (!tree) return [];\n  if ((0,_types_js__WEBPACK_IMPORTED_MODULE_0__.isTapleaf)(tree)) {\n    leaves.push({\n      depth,\n      leafVersion: tree.version || _payments_bip341_js__WEBPACK_IMPORTED_MODULE_3__.LEAF_VERSION_TAPSCRIPT,\n      script: tree.output,\n    });\n    return leaves;\n  }\n  if (tree[0]) _tapTreeToList(tree[0], leaves, depth + 1);\n  if (tree[1]) _tapTreeToList(tree[1], leaves, depth + 1);\n  return leaves;\n}\n/**\n * Inserts the tapleaves into the taproot tree.\n * @param leaves The tapleaves to insert.\n * @returns The taproot tree.\n * @throws Throws an error if there is no room left to insert a tapleaf in the tree.\n */\nfunction instertLeavesInTree(leaves) {\n  let tree;\n  for (const leaf of leaves) {\n    tree = instertLeafInTree(leaf, tree);\n    if (!tree) throw new Error(`No room left to insert tapleaf in tree`);\n  }\n  return tree;\n}\n/**\n * Inserts a tapleaf into the taproot tree.\n * @param leaf The tapleaf to insert.\n * @param tree The taproot tree.\n * @param depth The current depth. Optional.\n * @returns The updated taproot tree.\n */\nfunction instertLeafInTree(leaf, tree, depth = 0) {\n  if (depth > _payments_bip341_js__WEBPACK_IMPORTED_MODULE_3__.MAX_TAPTREE_DEPTH) throw new Error('Max taptree depth exceeded.');\n  if (leaf.depth === depth) {\n    if (!tree)\n      return {\n        output: leaf.script,\n        version: leaf.leafVersion,\n      };\n    return;\n  }\n  if ((0,_types_js__WEBPACK_IMPORTED_MODULE_0__.isTapleaf)(tree)) return;\n  const leftSide = instertLeafInTree(leaf, tree && tree[0], depth + 1);\n  if (leftSide) return [leftSide, tree && tree[1]];\n  const rightSide = instertLeafInTree(leaf, tree && tree[1], depth + 1);\n  if (rightSide) return [tree && tree[0], rightSide];\n}\n/**\n * Checks the input fields for mixed taproot and non-taproot fields.\n * @param inputData The original input data.\n * @param newInputData The new input data.\n * @param action The action being performed.\n * @throws Throws an error if the input fields are inconsistent.\n */\nfunction checkMixedTaprootAndNonTaprootInputFields(\n  inputData,\n  newInputData,\n  action,\n) {\n  const isBadTaprootUpdate =\n    isTaprootInput(inputData) && hasNonTaprootFields(newInputData);\n  const isBadNonTaprootUpdate =\n    hasNonTaprootFields(inputData) && isTaprootInput(newInputData);\n  const hasMixedFields =\n    inputData === newInputData &&\n    isTaprootInput(newInputData) &&\n    hasNonTaprootFields(newInputData); // todo: bad? use !===\n  if (isBadTaprootUpdate || isBadNonTaprootUpdate || hasMixedFields)\n    throw new Error(\n      `Invalid arguments for Psbt.${action}. ` +\n        `Cannot use both taproot and non-taproot fields.`,\n    );\n}\n/**\n * Checks the output fields for mixed taproot and non-taproot fields.\n * @param inputData The original output data.\n * @param newInputData The new output data.\n * @param action The action being performed.\n * @throws Throws an error if the output fields are inconsistent.\n */\nfunction checkMixedTaprootAndNonTaprootOutputFields(\n  inputData,\n  newInputData,\n  action,\n) {\n  const isBadTaprootUpdate =\n    isTaprootOutput(inputData) && hasNonTaprootFields(newInputData);\n  const isBadNonTaprootUpdate =\n    hasNonTaprootFields(inputData) && isTaprootOutput(newInputData);\n  const hasMixedFields =\n    inputData === newInputData &&\n    isTaprootOutput(newInputData) &&\n    hasNonTaprootFields(newInputData);\n  if (isBadTaprootUpdate || isBadNonTaprootUpdate || hasMixedFields)\n    throw new Error(\n      `Invalid arguments for Psbt.${action}. ` +\n        `Cannot use both taproot and non-taproot fields.`,\n    );\n}\n/**\n * Checks if the tap leaf is part of the tap tree for the given input data.\n * Throws an error if the tap leaf is not part of the tap tree.\n * @param inputData - The original PsbtInput data.\n * @param newInputData - The new PsbtInput data.\n * @param action - The action being performed.\n * @throws {Error} - If the tap leaf is not part of the tap tree.\n */\nfunction checkIfTapLeafInTree(inputData, newInputData, action) {\n  if (newInputData.tapMerkleRoot) {\n    const newLeafsInTree = (newInputData.tapLeafScript || []).every(l =>\n      isTapLeafInTree(l, newInputData.tapMerkleRoot),\n    );\n    const oldLeafsInTree = (inputData.tapLeafScript || []).every(l =>\n      isTapLeafInTree(l, newInputData.tapMerkleRoot),\n    );\n    if (!newLeafsInTree || !oldLeafsInTree)\n      throw new Error(\n        `Invalid arguments for Psbt.${action}. Tapleaf not part of taptree.`,\n      );\n  } else if (inputData.tapMerkleRoot) {\n    const newLeafsInTree = (newInputData.tapLeafScript || []).every(l =>\n      isTapLeafInTree(l, inputData.tapMerkleRoot),\n    );\n    if (!newLeafsInTree)\n      throw new Error(\n        `Invalid arguments for Psbt.${action}. Tapleaf not part of taptree.`,\n      );\n  }\n}\n/**\n * Checks if a TapLeafScript is present in a Merkle tree.\n * @param tapLeaf The TapLeafScript to check.\n * @param merkleRoot The Merkle root of the tree. If not provided, the function assumes the TapLeafScript is present.\n * @returns A boolean indicating whether the TapLeafScript is present in the tree.\n */\nfunction isTapLeafInTree(tapLeaf, merkleRoot) {\n  if (!merkleRoot) return true;\n  const leafHash = (0,_payments_bip341_js__WEBPACK_IMPORTED_MODULE_3__.tapleafHash)({\n    output: tapLeaf.script,\n    version: tapLeaf.leafVersion,\n  });\n  const rootHash = (0,_payments_bip341_js__WEBPACK_IMPORTED_MODULE_3__.rootHashFromPath)(tapLeaf.controlBlock, leafHash);\n  return uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.compare(rootHash, merkleRoot) === 0;\n}\n/**\n * Sorts the signatures in the input's tapScriptSig array based on their position in the tapLeaf script.\n *\n * @param input - The PsbtInput object.\n * @param tapLeaf - The TapLeafScript object.\n * @returns An array of sorted signatures as Buffers.\n */\nfunction sortSignatures(input, tapLeaf) {\n  const leafHash = (0,_payments_bip341_js__WEBPACK_IMPORTED_MODULE_3__.tapleafHash)({\n    output: tapLeaf.script,\n    version: tapLeaf.leafVersion,\n  });\n  return (\n    (input.tapScriptSig || [])\n      // .filter(tss => tss.leafHash.equals(leafHash))\n      .filter(tss => uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.compare(tss.leafHash, leafHash) === 0)\n      .map(tss => addPubkeyPositionInScript(tapLeaf.script, tss))\n      .sort((t1, t2) => t2.positionInScript - t1.positionInScript)\n      .map(t => t.signature)\n  );\n}\n/**\n * Adds the position of a public key in a script to a TapScriptSig object.\n * @param script The script in which to find the position of the public key.\n * @param tss The TapScriptSig object to add the position to.\n * @returns A TapScriptSigWitPosition object with the added position.\n */\nfunction addPubkeyPositionInScript(script, tss) {\n  return Object.assign(\n    {\n      positionInScript: (0,_psbtutils_js__WEBPACK_IMPORTED_MODULE_2__.pubkeyPositionInScript)(tss.pubkey, script),\n    },\n    tss,\n  );\n}\n/**\n * Find tapleaf by hash, or get the signed tapleaf with the shortest path.\n */\nfunction findTapLeafToFinalize(input, inputIndex, leafHashToFinalize) {\n  if (!input.tapScriptSig || !input.tapScriptSig.length)\n    throw new Error(\n      `Can not finalize taproot input #${inputIndex}. No tapleaf script signature provided.`,\n    );\n  const tapLeaf = (input.tapLeafScript || [])\n    .sort((a, b) => a.controlBlock.length - b.controlBlock.length)\n    .find(leaf =>\n      canFinalizeLeaf(leaf, input.tapScriptSig, leafHashToFinalize),\n    );\n  if (!tapLeaf)\n    throw new Error(\n      `Can not finalize taproot input #${inputIndex}. Signature for tapleaf script not found.`,\n    );\n  return tapLeaf;\n}\n/**\n * Determines whether a TapLeafScript can be finalized.\n *\n * @param leaf - The TapLeafScript to check.\n * @param tapScriptSig - The array of TapScriptSig objects.\n * @param hash - The optional hash to compare with the leaf hash.\n * @returns A boolean indicating whether the TapLeafScript can be finalized.\n */\nfunction canFinalizeLeaf(leaf, tapScriptSig, hash) {\n  const leafHash = (0,_payments_bip341_js__WEBPACK_IMPORTED_MODULE_3__.tapleafHash)({\n    output: leaf.script,\n    version: leaf.leafVersion,\n  });\n  const whiteListedHash = !hash || uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.compare(leafHash, hash) === 0;\n  return (\n    whiteListedHash &&\n    tapScriptSig.find(tss => uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.compare(tss.leafHash, leafHash) === 0) !==\n      undefined\n  );\n}\n/**\n * Checks if the given PsbtInput or PsbtOutput has non-taproot fields.\n * Non-taproot fields include redeemScript, witnessScript, and bip32Derivation.\n * @param io The PsbtInput or PsbtOutput to check.\n * @returns A boolean indicating whether the given input or output has non-taproot fields.\n */\nfunction hasNonTaprootFields(io) {\n  return (\n    io &&\n    !!(\n      io.redeemScript ||\n      io.witnessScript ||\n      (io.bip32Derivation && io.bip32Derivation.length)\n    )\n  );\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wc2J0L2JpcDM3MS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtRDtBQUNIO0FBS3hCO0FBT087QUFDYTtBQUNGO0FBQ2E7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG9CQUFvQiwwRUFBMkI7QUFDNUQsSUFBSTtBQUNKLHVEQUF1RCxXQUFXLElBQUksSUFBSTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxTQUFTLG9EQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIscURBQU07QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIscURBQU07QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVCQUF1QjtBQUNuQztBQUNBLHdCQUF3QixxREFBYTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFNBQVMsRUFBRSx3REFBSTtBQUN6QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLHNCQUFzQiw2REFBUTtBQUM5QjtBQUNBO0FBQ0Esa0RBQWtELFdBQVc7QUFDN0Q7QUFDQSwwQkFBMEIsbURBQVc7QUFDckMsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLE9BQU8sb0RBQVM7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsSUFBSSxvRUFBcUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msd0RBQVc7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsa0VBQWlCO0FBQy9CO0FBQ0EsTUFBTSxvREFBUztBQUNmO0FBQ0E7QUFDQSxtQ0FBbUMsdUVBQXNCO0FBQ3pEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxrRUFBaUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sb0RBQVM7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBLG9DQUFvQyxPQUFPO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLE9BQU87QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsT0FBTztBQUM3QztBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLE9BQU87QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnRUFBVztBQUM5QjtBQUNBO0FBQ0EsR0FBRztBQUNILG1CQUFtQixxRUFBZ0I7QUFDbkMsU0FBUyxxREFBYTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0VBQVc7QUFDOUI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIscURBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixxRUFBc0I7QUFDOUMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxXQUFXO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsV0FBVztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0VBQVc7QUFDOUI7QUFDQTtBQUNBLEdBQUc7QUFDSCxtQ0FBbUMscURBQWE7QUFDaEQ7QUFDQTtBQUNBLDZCQUE2QixxREFBYTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2J0Yy9taWRsLXgtYml0Y29pbi1zdW1taXQtaGFja2F0aG9uLTIwMjUvdXR4by1wc2J0LWRlbW8vbm9kZV9tb2R1bGVzLy5wbnBtL2JpdGNvaW5qcy1saWJANy4wLjAtcmMuMF90eXBlc2NyaXB0QDUuOS4yL25vZGVfbW9kdWxlcy9iaXRjb2luanMtbGliL3NyYy9lc20vcHNidC9iaXAzNzEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNUYXBsZWFmLCBpc1RhcHRyZWUgfSBmcm9tICcuLi90eXBlcy5qcyc7XG5pbXBvcnQgeyBUcmFuc2FjdGlvbiB9IGZyb20gJy4uL3RyYW5zYWN0aW9uLmpzJztcbmltcG9ydCB7XG4gIHdpdG5lc3NTdGFja1RvU2NyaXB0V2l0bmVzcyxcbiAgcHVia2V5UG9zaXRpb25JblNjcmlwdCxcbiAgaXNQMlRSLFxufSBmcm9tICcuL3BzYnR1dGlscy5qcyc7XG5pbXBvcnQge1xuICB0d2Vha0tleSxcbiAgdGFwbGVhZkhhc2gsXG4gIHJvb3RIYXNoRnJvbVBhdGgsXG4gIExFQUZfVkVSU0lPTl9UQVBTQ1JJUFQsXG4gIE1BWF9UQVBUUkVFX0RFUFRILFxufSBmcm9tICcuLi9wYXltZW50cy9iaXAzNDEuanMnO1xuaW1wb3J0IHsgcDJ0ciB9IGZyb20gJy4uL3BheW1lbnRzL2luZGV4LmpzJztcbmltcG9ydCAqIGFzIHRvb2xzIGZyb20gJ3VpbnQ4YXJyYXktdG9vbHMnO1xuaW1wb3J0IHsgc2lnbmF0dXJlQmxvY2tzQWN0aW9uIH0gZnJvbSAnLi9wc2J0dXRpbHMuanMnO1xuLyoqXG4gKiBDb252ZXJ0cyBhIHB1YmxpYyBrZXkgdG8gYW4gWC1vbmx5IHB1YmxpYyBrZXkuXG4gKiBAcGFyYW0gcHViS2V5IFRoZSBwdWJsaWMga2V5IHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyBUaGUgWC1vbmx5IHB1YmxpYyBrZXkuXG4gKi9cbmV4cG9ydCBjb25zdCB0b1hPbmx5ID0gcHViS2V5ID0+XG4gIHB1YktleS5sZW5ndGggPT09IDMyID8gcHViS2V5IDogcHViS2V5LnNsaWNlKDEsIDMzKTtcbi8qKlxuICogRGVmYXVsdCB0YXBzY3JpcHQgZmluYWxpemVyLiBJdCBzZWFyY2hlcyBmb3IgdGhlIGB0YXBMZWFmSGFzaFRvRmluYWxpemVgIGlmIHByb3ZpZGVkLlxuICogT3RoZXJ3aXNlIGl0IHdpbGwgc2VhcmNoIGZvciB0aGUgdGFwbGVhZiB0aGF0IGhhcyBhdCBsZWFzdCBvbmUgc2lnbmF0dXJlIGFuZCBoYXMgdGhlIHNob3J0ZXN0IHBhdGguXG4gKiBAcGFyYW0gaW5wdXRJbmRleCB0aGUgcG9zaXRpb24gb2YgdGhlIFBTQlQgaW5wdXQuXG4gKiBAcGFyYW0gaW5wdXQgdGhlIFBTQlQgaW5wdXQuXG4gKiBAcGFyYW0gdGFwTGVhZkhhc2hUb0ZpbmFsaXplIG9wdGlvbmFsLCBpZiBwcm92aWRlZCB0aGUgZmluYWxpemVyIHdpbGwgc2VhcmNoIGZvciBhIHRhcGxlYWYgdGhhdCBoYXMgdGhpcyBoYXNoXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCB3aWxsIHRyeSB0byBidWlsZCB0aGUgZmluYWxTY3JpcHRXaXRuZXNzLlxuICogQHJldHVybnMgdGhlIGZpbmFsU2NyaXB0V2l0bmVzcyBvciB0aHJvd3MgYW4gZXhjZXB0aW9uIGlmIG5vIHRhcGxlYWYgZm91bmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0YXBTY3JpcHRGaW5hbGl6ZXIoaW5wdXRJbmRleCwgaW5wdXQsIHRhcExlYWZIYXNoVG9GaW5hbGl6ZSkge1xuICBjb25zdCB0YXBMZWFmID0gZmluZFRhcExlYWZUb0ZpbmFsaXplKFxuICAgIGlucHV0LFxuICAgIGlucHV0SW5kZXgsXG4gICAgdGFwTGVhZkhhc2hUb0ZpbmFsaXplLFxuICApO1xuICB0cnkge1xuICAgIGNvbnN0IHNpZ3MgPSBzb3J0U2lnbmF0dXJlcyhpbnB1dCwgdGFwTGVhZik7XG4gICAgY29uc3Qgd2l0bmVzcyA9IHNpZ3MuY29uY2F0KHRhcExlYWYuc2NyaXB0KS5jb25jYXQodGFwTGVhZi5jb250cm9sQmxvY2spO1xuICAgIHJldHVybiB7IGZpbmFsU2NyaXB0V2l0bmVzczogd2l0bmVzc1N0YWNrVG9TY3JpcHRXaXRuZXNzKHdpdG5lc3MpIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2FuIG5vdCBmaW5hbGl6ZSB0YXByb290IGlucHV0ICMke2lucHV0SW5kZXh9OiAke2Vycn1gKTtcbiAgfVxufVxuLyoqXG4gKiBTZXJpYWxpemVzIGEgdGFwcm9vdCBzaWduYXR1cmUuXG4gKiBAcGFyYW0gc2lnIFRoZSBzaWduYXR1cmUgdG8gc2VyaWFsaXplLlxuICogQHBhcmFtIHNpZ2hhc2hUeXBlIFRoZSBzaWdoYXNoIHR5cGUuIE9wdGlvbmFsLlxuICogQHJldHVybnMgVGhlIHNlcmlhbGl6ZWQgdGFwcm9vdCBzaWduYXR1cmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVUYXByb290U2lnbmF0dXJlKHNpZywgc2lnaGFzaFR5cGUpIHtcbiAgY29uc3Qgc2lnaGFzaFR5cGVCeXRlID0gc2lnaGFzaFR5cGVcbiAgICA/IFVpbnQ4QXJyYXkuZnJvbShbc2lnaGFzaFR5cGVdKVxuICAgIDogVWludDhBcnJheS5mcm9tKFtdKTtcbiAgcmV0dXJuIHRvb2xzLmNvbmNhdChbc2lnLCBzaWdoYXNoVHlwZUJ5dGVdKTtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIGEgUFNCVCBpbnB1dCBpcyBhIHRhcHJvb3QgaW5wdXQuXG4gKiBAcGFyYW0gaW5wdXQgVGhlIFBTQlQgaW5wdXQgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBpbnB1dCBpcyBhIHRhcHJvb3QgaW5wdXQsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVGFwcm9vdElucHV0KGlucHV0KSB7XG4gIHJldHVybiAoXG4gICAgaW5wdXQgJiZcbiAgICAhIShcbiAgICAgIGlucHV0LnRhcEludGVybmFsS2V5IHx8XG4gICAgICBpbnB1dC50YXBNZXJrbGVSb290IHx8XG4gICAgICAoaW5wdXQudGFwTGVhZlNjcmlwdCAmJiBpbnB1dC50YXBMZWFmU2NyaXB0Lmxlbmd0aCkgfHxcbiAgICAgIChpbnB1dC50YXBCaXAzMkRlcml2YXRpb24gJiYgaW5wdXQudGFwQmlwMzJEZXJpdmF0aW9uLmxlbmd0aCkgfHxcbiAgICAgIChpbnB1dC53aXRuZXNzVXR4byAmJiBpc1AyVFIoaW5wdXQud2l0bmVzc1V0eG8uc2NyaXB0KSlcbiAgICApXG4gICk7XG59XG4vKipcbiAqIENoZWNrcyBpZiBhIFBTQlQgb3V0cHV0IGlzIGEgdGFwcm9vdCBvdXRwdXQuXG4gKiBAcGFyYW0gb3V0cHV0IFRoZSBQU0JUIG91dHB1dCB0byBjaGVjay5cbiAqIEBwYXJhbSBzY3JpcHQgVGhlIHNjcmlwdCB0byBjaGVjay4gT3B0aW9uYWwuXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBvdXRwdXQgaXMgYSB0YXByb290IG91dHB1dCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUYXByb290T3V0cHV0KG91dHB1dCwgc2NyaXB0KSB7XG4gIHJldHVybiAoXG4gICAgb3V0cHV0ICYmXG4gICAgISEoXG4gICAgICBvdXRwdXQudGFwSW50ZXJuYWxLZXkgfHxcbiAgICAgIG91dHB1dC50YXBUcmVlIHx8XG4gICAgICAob3V0cHV0LnRhcEJpcDMyRGVyaXZhdGlvbiAmJiBvdXRwdXQudGFwQmlwMzJEZXJpdmF0aW9uLmxlbmd0aCkgfHxcbiAgICAgIChzY3JpcHQgJiYgaXNQMlRSKHNjcmlwdCkpXG4gICAgKVxuICApO1xufVxuLyoqXG4gKiBDaGVja3MgdGhlIHRhcHJvb3QgaW5wdXQgZmllbGRzIGZvciBjb25zaXN0ZW5jeS5cbiAqIEBwYXJhbSBpbnB1dERhdGEgVGhlIG9yaWdpbmFsIGlucHV0IGRhdGEuXG4gKiBAcGFyYW0gbmV3SW5wdXREYXRhIFRoZSBuZXcgaW5wdXQgZGF0YS5cbiAqIEBwYXJhbSBhY3Rpb24gVGhlIGFjdGlvbiBiZWluZyBwZXJmb3JtZWQuXG4gKiBAdGhyb3dzIFRocm93cyBhbiBlcnJvciBpZiB0aGUgaW5wdXQgZmllbGRzIGFyZSBpbmNvbnNpc3RlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1RhcHJvb3RJbnB1dEZpZWxkcyhpbnB1dERhdGEsIG5ld0lucHV0RGF0YSwgYWN0aW9uKSB7XG4gIGNoZWNrTWl4ZWRUYXByb290QW5kTm9uVGFwcm9vdElucHV0RmllbGRzKGlucHV0RGF0YSwgbmV3SW5wdXREYXRhLCBhY3Rpb24pO1xuICBjaGVja0lmVGFwTGVhZkluVHJlZShpbnB1dERhdGEsIG5ld0lucHV0RGF0YSwgYWN0aW9uKTtcbn1cbi8qKlxuICogQ2hlY2tzIHRoZSB0YXByb290IG91dHB1dCBmaWVsZHMgZm9yIGNvbnNpc3RlbmN5LlxuICogQHBhcmFtIG91dHB1dERhdGEgVGhlIG9yaWdpbmFsIG91dHB1dCBkYXRhLlxuICogQHBhcmFtIG5ld091dHB1dERhdGEgVGhlIG5ldyBvdXRwdXQgZGF0YS5cbiAqIEBwYXJhbSBhY3Rpb24gVGhlIGFjdGlvbiBiZWluZyBwZXJmb3JtZWQuXG4gKiBAdGhyb3dzIFRocm93cyBhbiBlcnJvciBpZiB0aGUgb3V0cHV0IGZpZWxkcyBhcmUgaW5jb25zaXN0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tUYXByb290T3V0cHV0RmllbGRzKG91dHB1dERhdGEsIG5ld091dHB1dERhdGEsIGFjdGlvbikge1xuICBjaGVja01peGVkVGFwcm9vdEFuZE5vblRhcHJvb3RPdXRwdXRGaWVsZHMob3V0cHV0RGF0YSwgbmV3T3V0cHV0RGF0YSwgYWN0aW9uKTtcbiAgY2hlY2tUYXByb290U2NyaXB0UHVia2V5KG91dHB1dERhdGEsIG5ld091dHB1dERhdGEpO1xufVxuZnVuY3Rpb24gY2hlY2tUYXByb290U2NyaXB0UHVia2V5KG91dHB1dERhdGEsIG5ld091dHB1dERhdGEpIHtcbiAgaWYgKCFuZXdPdXRwdXREYXRhLnRhcFRyZWUgJiYgIW5ld091dHB1dERhdGEudGFwSW50ZXJuYWxLZXkpIHJldHVybjtcbiAgY29uc3QgdGFwSW50ZXJuYWxLZXkgPVxuICAgIG5ld091dHB1dERhdGEudGFwSW50ZXJuYWxLZXkgfHwgb3V0cHV0RGF0YS50YXBJbnRlcm5hbEtleTtcbiAgY29uc3QgdGFwVHJlZSA9IG5ld091dHB1dERhdGEudGFwVHJlZSB8fCBvdXRwdXREYXRhLnRhcFRyZWU7XG4gIGlmICh0YXBJbnRlcm5hbEtleSkge1xuICAgIGNvbnN0IHsgc2NyaXB0OiBzY3JpcHRQdWJrZXkgfSA9IG91dHB1dERhdGE7XG4gICAgY29uc3Qgc2NyaXB0ID0gZ2V0VGFwcm9vdFNjcmlwUHVia2V5KHRhcEludGVybmFsS2V5LCB0YXBUcmVlKTtcbiAgICBpZiAoc2NyaXB0UHVia2V5ICYmIHRvb2xzLmNvbXBhcmUoc2NyaXB0LCBzY3JpcHRQdWJrZXkpICE9PSAwKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBhZGRpbmcgb3V0cHV0LiBTY3JpcHQgb3IgYWRkcmVzcyBtaXNtYXRjaC4nKTtcbiAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBUYXByb290IHNjcmlwdCBwdWJsaWMga2V5LlxuICpcbiAqIEBwYXJhbSB0YXBJbnRlcm5hbEtleSAtIFRoZSBUYXByb290IGludGVybmFsIGtleS5cbiAqIEBwYXJhbSB0YXBUcmVlIC0gVGhlIFRhcHJvb3QgdHJlZSAob3B0aW9uYWwpLlxuICogQHJldHVybnMgVGhlIFRhcHJvb3Qgc2NyaXB0IHB1YmxpYyBrZXkuXG4gKi9cbmZ1bmN0aW9uIGdldFRhcHJvb3RTY3JpcFB1YmtleSh0YXBJbnRlcm5hbEtleSwgdGFwVHJlZSkge1xuICBjb25zdCBzY3JpcHRUcmVlID0gdGFwVHJlZSAmJiB0YXBUcmVlRnJvbUxpc3QodGFwVHJlZS5sZWF2ZXMpO1xuICBjb25zdCB7IG91dHB1dCB9ID0gcDJ0cih7XG4gICAgaW50ZXJuYWxQdWJrZXk6IHRhcEludGVybmFsS2V5LFxuICAgIHNjcmlwdFRyZWUsXG4gIH0pO1xuICByZXR1cm4gb3V0cHV0O1xufVxuLyoqXG4gKiBUd2VhayB0aGUgaW50ZXJuYWwgcHVibGljIGtleSBmb3IgYSBzcGVjaWZpYyBpbnB1dC5cbiAqIEBwYXJhbSBpbnB1dEluZGV4IC0gVGhlIGluZGV4IG9mIHRoZSBpbnB1dC5cbiAqIEBwYXJhbSBpbnB1dCAtIFRoZSBQc2J0SW5wdXQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgaW5wdXQuXG4gKiBAcmV0dXJucyBUaGUgdHdlYWtlZCBpbnRlcm5hbCBwdWJsaWMga2V5LlxuICogQHRocm93cyBFcnJvciBpZiB0aGUgdGFwIGludGVybmFsIGtleSBjYW5ub3QgYmUgdHdlYWtlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR3ZWFrSW50ZXJuYWxQdWJLZXkoaW5wdXRJbmRleCwgaW5wdXQpIHtcbiAgY29uc3QgdGFwSW50ZXJuYWxLZXkgPSBpbnB1dC50YXBJbnRlcm5hbEtleTtcbiAgY29uc3Qgb3V0cHV0S2V5ID1cbiAgICB0YXBJbnRlcm5hbEtleSAmJiB0d2Vha0tleSh0YXBJbnRlcm5hbEtleSwgaW5wdXQudGFwTWVya2xlUm9vdCk7XG4gIGlmICghb3V0cHV0S2V5KVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBDYW5ub3QgdHdlYWsgdGFwIGludGVybmFsIGtleSBmb3IgaW5wdXQgIyR7aW5wdXRJbmRleH0uIFB1YmxpYyBrZXk6ICR7XG4gICAgICAgIC8vIHRhcEludGVybmFsS2V5ICYmIHRhcEludGVybmFsS2V5LnRvU3RyaW5nKCdoZXgnKVxuICAgICAgICB0YXBJbnRlcm5hbEtleSAmJiB0b29scy50b0hleCh0YXBJbnRlcm5hbEtleSlcbiAgICAgIH1gLFxuICAgICk7XG4gIHJldHVybiBvdXRwdXRLZXkueDtcbn1cbi8qKlxuICogQ29udmVydCBhIGJpbmFyeSB0cmVlIHRvIGEgQklQMzcxIHR5cGUgbGlzdC4gRWFjaCBlbGVtZW50IG9mIHRoZSBsaXN0IGlzIChhY2NvcmRpbmcgdG8gQklQMzcxKTpcbiAqIE9uZSBvciBtb3JlIHR1cGxlcyByZXByZXNlbnRpbmcgdGhlIGRlcHRoLCBsZWFmIHZlcnNpb24sIGFuZCBzY3JpcHQgZm9yIGEgbGVhZiBpbiB0aGUgVGFwcm9vdCB0cmVlLFxuICogYWxsb3dpbmcgdGhlIGVudGlyZSB0cmVlIHRvIGJlIHJlY29uc3RydWN0ZWQuIFRoZSB0dXBsZXMgbXVzdCBiZSBpbiBkZXB0aCBmaXJzdCBzZWFyY2ggb3JkZXIgc28gdGhhdFxuICogdGhlIHRyZWUgaXMgY29ycmVjdGx5IHJlY29uc3RydWN0ZWQuXG4gKiBAcGFyYW0gdHJlZSB0aGUgYmluYXJ5IHRhcCB0cmVlXG4gKiBAcmV0dXJucyBhIGxpc3Qgb2YgQklQIDM3MSB0YXBsZWF2ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRhcFRyZWVUb0xpc3QodHJlZSkge1xuICBpZiAoIWlzVGFwdHJlZSh0cmVlKSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnQ2Fubm90IGNvbnZlcnQgdGFwdHJlZSB0byB0YXBsZWFmIGxpc3QuIEV4cGVjdGluZyBhIHRhcHJlZSBzdHJ1Y3R1cmUuJyxcbiAgICApO1xuICByZXR1cm4gX3RhcFRyZWVUb0xpc3QodHJlZSk7XG59XG4vKipcbiAqIENvbnZlcnQgYSBCSVAzNzEgVGFwTGVhZiBsaXN0IHRvIGEgVGFwVHJlZSAoYmluYXJ5KS5cbiAqIEBwYXJhbSBsZWF2ZXMgYSBsaXN0IG9mIHRhcGxlYXZlcyB3aGVyZSBlYWNoIGVsZW1lbnQgb2YgdGhlIGxpc3QgaXMgKGFjY29yZGluZyB0byBCSVAzNzEpOlxuICogT25lIG9yIG1vcmUgdHVwbGVzIHJlcHJlc2VudGluZyB0aGUgZGVwdGgsIGxlYWYgdmVyc2lvbiwgYW5kIHNjcmlwdCBmb3IgYSBsZWFmIGluIHRoZSBUYXByb290IHRyZWUsXG4gKiBhbGxvd2luZyB0aGUgZW50aXJlIHRyZWUgdG8gYmUgcmVjb25zdHJ1Y3RlZC4gVGhlIHR1cGxlcyBtdXN0IGJlIGluIGRlcHRoIGZpcnN0IHNlYXJjaCBvcmRlciBzbyB0aGF0XG4gKiB0aGUgdHJlZSBpcyBjb3JyZWN0bHkgcmVjb25zdHJ1Y3RlZC5cbiAqIEByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHRhcHRyZWUsIG9yIHRocm93cyBhbiBleGNlcHRpb24gaWYgdGhlIHRyZWUgY2Fubm90IGJlIHJlY29uc3RydWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRhcFRyZWVGcm9tTGlzdChsZWF2ZXMgPSBbXSkge1xuICBpZiAobGVhdmVzLmxlbmd0aCA9PT0gMSAmJiBsZWF2ZXNbMF0uZGVwdGggPT09IDApXG4gICAgcmV0dXJuIHtcbiAgICAgIG91dHB1dDogbGVhdmVzWzBdLnNjcmlwdCxcbiAgICAgIHZlcnNpb246IGxlYXZlc1swXS5sZWFmVmVyc2lvbixcbiAgICB9O1xuICByZXR1cm4gaW5zdGVydExlYXZlc0luVHJlZShsZWF2ZXMpO1xufVxuLyoqXG4gKiBDaGVja3MgdGhlIHRhcHJvb3QgaW5wdXQgZm9yIHNpZ25hdHVyZXMuXG4gKiBAcGFyYW0gaW5wdXQgVGhlIFBTQlQgaW5wdXQgdG8gY2hlY2suXG4gKiBAcGFyYW0gYWN0aW9uIFRoZSBhY3Rpb24gYmVpbmcgcGVyZm9ybWVkLlxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgaW5wdXQgaGFzIHRhcHJvb3Qgc2lnbmF0dXJlcywgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tUYXByb290SW5wdXRGb3JTaWdzKGlucHV0LCBhY3Rpb24pIHtcbiAgY29uc3Qgc2lncyA9IGV4dHJhY3RUYXByb290U2lncyhpbnB1dCk7XG4gIHJldHVybiBzaWdzLnNvbWUoc2lnID0+XG4gICAgc2lnbmF0dXJlQmxvY2tzQWN0aW9uKHNpZywgZGVjb2RlU2Nobm9yclNpZ25hdHVyZSwgYWN0aW9uKSxcbiAgKTtcbn1cbi8qKlxuICogRGVjb2RlcyBhIFNjaG5vcnIgc2lnbmF0dXJlLlxuICogQHBhcmFtIHNpZ25hdHVyZSBUaGUgc2lnbmF0dXJlIHRvIGRlY29kZS5cbiAqIEByZXR1cm5zIFRoZSBkZWNvZGVkIFNjaG5vcnIgc2lnbmF0dXJlLlxuICovXG5mdW5jdGlvbiBkZWNvZGVTY2hub3JyU2lnbmF0dXJlKHNpZ25hdHVyZSkge1xuICByZXR1cm4ge1xuICAgIHNpZ25hdHVyZTogc2lnbmF0dXJlLnNsaWNlKDAsIDY0KSxcbiAgICBoYXNoVHlwZTogc2lnbmF0dXJlLnNsaWNlKDY0KVswXSB8fCBUcmFuc2FjdGlvbi5TSUdIQVNIX0RFRkFVTFQsXG4gIH07XG59XG4vKipcbiAqIEV4dHJhY3RzIHRhcHJvb3Qgc2lnbmF0dXJlcyBmcm9tIGEgUFNCVCBpbnB1dC5cbiAqIEBwYXJhbSBpbnB1dCBUaGUgUFNCVCBpbnB1dCB0byBleHRyYWN0IHNpZ25hdHVyZXMgZnJvbS5cbiAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHRhcHJvb3Qgc2lnbmF0dXJlcy5cbiAqL1xuZnVuY3Rpb24gZXh0cmFjdFRhcHJvb3RTaWdzKGlucHV0KSB7XG4gIGNvbnN0IHNpZ3MgPSBbXTtcbiAgaWYgKGlucHV0LnRhcEtleVNpZykgc2lncy5wdXNoKGlucHV0LnRhcEtleVNpZyk7XG4gIGlmIChpbnB1dC50YXBTY3JpcHRTaWcpXG4gICAgc2lncy5wdXNoKC4uLmlucHV0LnRhcFNjcmlwdFNpZy5tYXAocyA9PiBzLnNpZ25hdHVyZSkpO1xuICBpZiAoIXNpZ3MubGVuZ3RoKSB7XG4gICAgY29uc3QgZmluYWxUYXBLZXlTaWcgPSBnZXRUYXBLZXlTaWdGcm9tV2l0aG5lc3MoaW5wdXQuZmluYWxTY3JpcHRXaXRuZXNzKTtcbiAgICBpZiAoZmluYWxUYXBLZXlTaWcpIHNpZ3MucHVzaChmaW5hbFRhcEtleVNpZyk7XG4gIH1cbiAgcmV0dXJuIHNpZ3M7XG59XG4vKipcbiAqIEdldHMgdGhlIHRhcHJvb3Qgc2lnbmF0dXJlIGZyb20gdGhlIHdpdG5lc3MuXG4gKiBAcGFyYW0gZmluYWxTY3JpcHRXaXRuZXNzIFRoZSBmaW5hbCBzY3JpcHQgd2l0bmVzcy5cbiAqIEByZXR1cm5zIFRoZSB0YXByb290IHNpZ25hdHVyZSwgb3IgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZC5cbiAqL1xuZnVuY3Rpb24gZ2V0VGFwS2V5U2lnRnJvbVdpdGhuZXNzKGZpbmFsU2NyaXB0V2l0bmVzcykge1xuICBpZiAoIWZpbmFsU2NyaXB0V2l0bmVzcykgcmV0dXJuO1xuICBjb25zdCB3aXRuZXNzID0gZmluYWxTY3JpcHRXaXRuZXNzLnNsaWNlKDIpO1xuICAvLyB0b2RvOiBhZGQgc2Nobm9yciBzaWduYXR1cmUgdmFsaWRhdGlvblxuICBpZiAod2l0bmVzcy5sZW5ndGggPT09IDY0IHx8IHdpdG5lc3MubGVuZ3RoID09PSA2NSkgcmV0dXJuIHdpdG5lc3M7XG59XG4vKipcbiAqIENvbnZlcnRzIGEgYmluYXJ5IHRyZWUgdG8gYSBCSVAzNzEgdHlwZSBsaXN0LlxuICogQHBhcmFtIHRyZWUgVGhlIGJpbmFyeSB0YXAgdHJlZS5cbiAqIEBwYXJhbSBsZWF2ZXMgQSBsaXN0IG9mIHRhcGxlYXZlcy4gT3B0aW9uYWwuXG4gKiBAcGFyYW0gZGVwdGggVGhlIGN1cnJlbnQgZGVwdGguIE9wdGlvbmFsLlxuICogQHJldHVybnMgQSBsaXN0IG9mIEJJUCAzNzEgdGFwbGVhdmVzLlxuICogQHRocm93cyBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIHRhcHRyZWUgY2Fubm90IGJlIGNvbnZlcnRlZCB0byBhIHRhcGxlYWYgbGlzdC5cbiAqL1xuZnVuY3Rpb24gX3RhcFRyZWVUb0xpc3QodHJlZSwgbGVhdmVzID0gW10sIGRlcHRoID0gMCkge1xuICBpZiAoZGVwdGggPiBNQVhfVEFQVFJFRV9ERVBUSCkgdGhyb3cgbmV3IEVycm9yKCdNYXggdGFwdHJlZSBkZXB0aCBleGNlZWRlZC4nKTtcbiAgaWYgKCF0cmVlKSByZXR1cm4gW107XG4gIGlmIChpc1RhcGxlYWYodHJlZSkpIHtcbiAgICBsZWF2ZXMucHVzaCh7XG4gICAgICBkZXB0aCxcbiAgICAgIGxlYWZWZXJzaW9uOiB0cmVlLnZlcnNpb24gfHwgTEVBRl9WRVJTSU9OX1RBUFNDUklQVCxcbiAgICAgIHNjcmlwdDogdHJlZS5vdXRwdXQsXG4gICAgfSk7XG4gICAgcmV0dXJuIGxlYXZlcztcbiAgfVxuICBpZiAodHJlZVswXSkgX3RhcFRyZWVUb0xpc3QodHJlZVswXSwgbGVhdmVzLCBkZXB0aCArIDEpO1xuICBpZiAodHJlZVsxXSkgX3RhcFRyZWVUb0xpc3QodHJlZVsxXSwgbGVhdmVzLCBkZXB0aCArIDEpO1xuICByZXR1cm4gbGVhdmVzO1xufVxuLyoqXG4gKiBJbnNlcnRzIHRoZSB0YXBsZWF2ZXMgaW50byB0aGUgdGFwcm9vdCB0cmVlLlxuICogQHBhcmFtIGxlYXZlcyBUaGUgdGFwbGVhdmVzIHRvIGluc2VydC5cbiAqIEByZXR1cm5zIFRoZSB0YXByb290IHRyZWUuXG4gKiBAdGhyb3dzIFRocm93cyBhbiBlcnJvciBpZiB0aGVyZSBpcyBubyByb29tIGxlZnQgdG8gaW5zZXJ0IGEgdGFwbGVhZiBpbiB0aGUgdHJlZS5cbiAqL1xuZnVuY3Rpb24gaW5zdGVydExlYXZlc0luVHJlZShsZWF2ZXMpIHtcbiAgbGV0IHRyZWU7XG4gIGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXMpIHtcbiAgICB0cmVlID0gaW5zdGVydExlYWZJblRyZWUobGVhZiwgdHJlZSk7XG4gICAgaWYgKCF0cmVlKSB0aHJvdyBuZXcgRXJyb3IoYE5vIHJvb20gbGVmdCB0byBpbnNlcnQgdGFwbGVhZiBpbiB0cmVlYCk7XG4gIH1cbiAgcmV0dXJuIHRyZWU7XG59XG4vKipcbiAqIEluc2VydHMgYSB0YXBsZWFmIGludG8gdGhlIHRhcHJvb3QgdHJlZS5cbiAqIEBwYXJhbSBsZWFmIFRoZSB0YXBsZWFmIHRvIGluc2VydC5cbiAqIEBwYXJhbSB0cmVlIFRoZSB0YXByb290IHRyZWUuXG4gKiBAcGFyYW0gZGVwdGggVGhlIGN1cnJlbnQgZGVwdGguIE9wdGlvbmFsLlxuICogQHJldHVybnMgVGhlIHVwZGF0ZWQgdGFwcm9vdCB0cmVlLlxuICovXG5mdW5jdGlvbiBpbnN0ZXJ0TGVhZkluVHJlZShsZWFmLCB0cmVlLCBkZXB0aCA9IDApIHtcbiAgaWYgKGRlcHRoID4gTUFYX1RBUFRSRUVfREVQVEgpIHRocm93IG5ldyBFcnJvcignTWF4IHRhcHRyZWUgZGVwdGggZXhjZWVkZWQuJyk7XG4gIGlmIChsZWFmLmRlcHRoID09PSBkZXB0aCkge1xuICAgIGlmICghdHJlZSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG91dHB1dDogbGVhZi5zY3JpcHQsXG4gICAgICAgIHZlcnNpb246IGxlYWYubGVhZlZlcnNpb24sXG4gICAgICB9O1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoaXNUYXBsZWFmKHRyZWUpKSByZXR1cm47XG4gIGNvbnN0IGxlZnRTaWRlID0gaW5zdGVydExlYWZJblRyZWUobGVhZiwgdHJlZSAmJiB0cmVlWzBdLCBkZXB0aCArIDEpO1xuICBpZiAobGVmdFNpZGUpIHJldHVybiBbbGVmdFNpZGUsIHRyZWUgJiYgdHJlZVsxXV07XG4gIGNvbnN0IHJpZ2h0U2lkZSA9IGluc3RlcnRMZWFmSW5UcmVlKGxlYWYsIHRyZWUgJiYgdHJlZVsxXSwgZGVwdGggKyAxKTtcbiAgaWYgKHJpZ2h0U2lkZSkgcmV0dXJuIFt0cmVlICYmIHRyZWVbMF0sIHJpZ2h0U2lkZV07XG59XG4vKipcbiAqIENoZWNrcyB0aGUgaW5wdXQgZmllbGRzIGZvciBtaXhlZCB0YXByb290IGFuZCBub24tdGFwcm9vdCBmaWVsZHMuXG4gKiBAcGFyYW0gaW5wdXREYXRhIFRoZSBvcmlnaW5hbCBpbnB1dCBkYXRhLlxuICogQHBhcmFtIG5ld0lucHV0RGF0YSBUaGUgbmV3IGlucHV0IGRhdGEuXG4gKiBAcGFyYW0gYWN0aW9uIFRoZSBhY3Rpb24gYmVpbmcgcGVyZm9ybWVkLlxuICogQHRocm93cyBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGlucHV0IGZpZWxkcyBhcmUgaW5jb25zaXN0ZW50LlxuICovXG5mdW5jdGlvbiBjaGVja01peGVkVGFwcm9vdEFuZE5vblRhcHJvb3RJbnB1dEZpZWxkcyhcbiAgaW5wdXREYXRhLFxuICBuZXdJbnB1dERhdGEsXG4gIGFjdGlvbixcbikge1xuICBjb25zdCBpc0JhZFRhcHJvb3RVcGRhdGUgPVxuICAgIGlzVGFwcm9vdElucHV0KGlucHV0RGF0YSkgJiYgaGFzTm9uVGFwcm9vdEZpZWxkcyhuZXdJbnB1dERhdGEpO1xuICBjb25zdCBpc0JhZE5vblRhcHJvb3RVcGRhdGUgPVxuICAgIGhhc05vblRhcHJvb3RGaWVsZHMoaW5wdXREYXRhKSAmJiBpc1RhcHJvb3RJbnB1dChuZXdJbnB1dERhdGEpO1xuICBjb25zdCBoYXNNaXhlZEZpZWxkcyA9XG4gICAgaW5wdXREYXRhID09PSBuZXdJbnB1dERhdGEgJiZcbiAgICBpc1RhcHJvb3RJbnB1dChuZXdJbnB1dERhdGEpICYmXG4gICAgaGFzTm9uVGFwcm9vdEZpZWxkcyhuZXdJbnB1dERhdGEpOyAvLyB0b2RvOiBiYWQ/IHVzZSAhPT09XG4gIGlmIChpc0JhZFRhcHJvb3RVcGRhdGUgfHwgaXNCYWROb25UYXByb290VXBkYXRlIHx8IGhhc01peGVkRmllbGRzKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIGFyZ3VtZW50cyBmb3IgUHNidC4ke2FjdGlvbn0uIGAgK1xuICAgICAgICBgQ2Fubm90IHVzZSBib3RoIHRhcHJvb3QgYW5kIG5vbi10YXByb290IGZpZWxkcy5gLFxuICAgICk7XG59XG4vKipcbiAqIENoZWNrcyB0aGUgb3V0cHV0IGZpZWxkcyBmb3IgbWl4ZWQgdGFwcm9vdCBhbmQgbm9uLXRhcHJvb3QgZmllbGRzLlxuICogQHBhcmFtIGlucHV0RGF0YSBUaGUgb3JpZ2luYWwgb3V0cHV0IGRhdGEuXG4gKiBAcGFyYW0gbmV3SW5wdXREYXRhIFRoZSBuZXcgb3V0cHV0IGRhdGEuXG4gKiBAcGFyYW0gYWN0aW9uIFRoZSBhY3Rpb24gYmVpbmcgcGVyZm9ybWVkLlxuICogQHRocm93cyBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIG91dHB1dCBmaWVsZHMgYXJlIGluY29uc2lzdGVudC5cbiAqL1xuZnVuY3Rpb24gY2hlY2tNaXhlZFRhcHJvb3RBbmROb25UYXByb290T3V0cHV0RmllbGRzKFxuICBpbnB1dERhdGEsXG4gIG5ld0lucHV0RGF0YSxcbiAgYWN0aW9uLFxuKSB7XG4gIGNvbnN0IGlzQmFkVGFwcm9vdFVwZGF0ZSA9XG4gICAgaXNUYXByb290T3V0cHV0KGlucHV0RGF0YSkgJiYgaGFzTm9uVGFwcm9vdEZpZWxkcyhuZXdJbnB1dERhdGEpO1xuICBjb25zdCBpc0JhZE5vblRhcHJvb3RVcGRhdGUgPVxuICAgIGhhc05vblRhcHJvb3RGaWVsZHMoaW5wdXREYXRhKSAmJiBpc1RhcHJvb3RPdXRwdXQobmV3SW5wdXREYXRhKTtcbiAgY29uc3QgaGFzTWl4ZWRGaWVsZHMgPVxuICAgIGlucHV0RGF0YSA9PT0gbmV3SW5wdXREYXRhICYmXG4gICAgaXNUYXByb290T3V0cHV0KG5ld0lucHV0RGF0YSkgJiZcbiAgICBoYXNOb25UYXByb290RmllbGRzKG5ld0lucHV0RGF0YSk7XG4gIGlmIChpc0JhZFRhcHJvb3RVcGRhdGUgfHwgaXNCYWROb25UYXByb290VXBkYXRlIHx8IGhhc01peGVkRmllbGRzKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIGFyZ3VtZW50cyBmb3IgUHNidC4ke2FjdGlvbn0uIGAgK1xuICAgICAgICBgQ2Fubm90IHVzZSBib3RoIHRhcHJvb3QgYW5kIG5vbi10YXByb290IGZpZWxkcy5gLFxuICAgICk7XG59XG4vKipcbiAqIENoZWNrcyBpZiB0aGUgdGFwIGxlYWYgaXMgcGFydCBvZiB0aGUgdGFwIHRyZWUgZm9yIHRoZSBnaXZlbiBpbnB1dCBkYXRhLlxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSB0YXAgbGVhZiBpcyBub3QgcGFydCBvZiB0aGUgdGFwIHRyZWUuXG4gKiBAcGFyYW0gaW5wdXREYXRhIC0gVGhlIG9yaWdpbmFsIFBzYnRJbnB1dCBkYXRhLlxuICogQHBhcmFtIG5ld0lucHV0RGF0YSAtIFRoZSBuZXcgUHNidElucHV0IGRhdGEuXG4gKiBAcGFyYW0gYWN0aW9uIC0gVGhlIGFjdGlvbiBiZWluZyBwZXJmb3JtZWQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gLSBJZiB0aGUgdGFwIGxlYWYgaXMgbm90IHBhcnQgb2YgdGhlIHRhcCB0cmVlLlxuICovXG5mdW5jdGlvbiBjaGVja0lmVGFwTGVhZkluVHJlZShpbnB1dERhdGEsIG5ld0lucHV0RGF0YSwgYWN0aW9uKSB7XG4gIGlmIChuZXdJbnB1dERhdGEudGFwTWVya2xlUm9vdCkge1xuICAgIGNvbnN0IG5ld0xlYWZzSW5UcmVlID0gKG5ld0lucHV0RGF0YS50YXBMZWFmU2NyaXB0IHx8IFtdKS5ldmVyeShsID0+XG4gICAgICBpc1RhcExlYWZJblRyZWUobCwgbmV3SW5wdXREYXRhLnRhcE1lcmtsZVJvb3QpLFxuICAgICk7XG4gICAgY29uc3Qgb2xkTGVhZnNJblRyZWUgPSAoaW5wdXREYXRhLnRhcExlYWZTY3JpcHQgfHwgW10pLmV2ZXJ5KGwgPT5cbiAgICAgIGlzVGFwTGVhZkluVHJlZShsLCBuZXdJbnB1dERhdGEudGFwTWVya2xlUm9vdCksXG4gICAgKTtcbiAgICBpZiAoIW5ld0xlYWZzSW5UcmVlIHx8ICFvbGRMZWFmc0luVHJlZSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEludmFsaWQgYXJndW1lbnRzIGZvciBQc2J0LiR7YWN0aW9ufS4gVGFwbGVhZiBub3QgcGFydCBvZiB0YXB0cmVlLmAsXG4gICAgICApO1xuICB9IGVsc2UgaWYgKGlucHV0RGF0YS50YXBNZXJrbGVSb290KSB7XG4gICAgY29uc3QgbmV3TGVhZnNJblRyZWUgPSAobmV3SW5wdXREYXRhLnRhcExlYWZTY3JpcHQgfHwgW10pLmV2ZXJ5KGwgPT5cbiAgICAgIGlzVGFwTGVhZkluVHJlZShsLCBpbnB1dERhdGEudGFwTWVya2xlUm9vdCksXG4gICAgKTtcbiAgICBpZiAoIW5ld0xlYWZzSW5UcmVlKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW52YWxpZCBhcmd1bWVudHMgZm9yIFBzYnQuJHthY3Rpb259LiBUYXBsZWFmIG5vdCBwYXJ0IG9mIHRhcHRyZWUuYCxcbiAgICAgICk7XG4gIH1cbn1cbi8qKlxuICogQ2hlY2tzIGlmIGEgVGFwTGVhZlNjcmlwdCBpcyBwcmVzZW50IGluIGEgTWVya2xlIHRyZWUuXG4gKiBAcGFyYW0gdGFwTGVhZiBUaGUgVGFwTGVhZlNjcmlwdCB0byBjaGVjay5cbiAqIEBwYXJhbSBtZXJrbGVSb290IFRoZSBNZXJrbGUgcm9vdCBvZiB0aGUgdHJlZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgZnVuY3Rpb24gYXNzdW1lcyB0aGUgVGFwTGVhZlNjcmlwdCBpcyBwcmVzZW50LlxuICogQHJldHVybnMgQSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgVGFwTGVhZlNjcmlwdCBpcyBwcmVzZW50IGluIHRoZSB0cmVlLlxuICovXG5mdW5jdGlvbiBpc1RhcExlYWZJblRyZWUodGFwTGVhZiwgbWVya2xlUm9vdCkge1xuICBpZiAoIW1lcmtsZVJvb3QpIHJldHVybiB0cnVlO1xuICBjb25zdCBsZWFmSGFzaCA9IHRhcGxlYWZIYXNoKHtcbiAgICBvdXRwdXQ6IHRhcExlYWYuc2NyaXB0LFxuICAgIHZlcnNpb246IHRhcExlYWYubGVhZlZlcnNpb24sXG4gIH0pO1xuICBjb25zdCByb290SGFzaCA9IHJvb3RIYXNoRnJvbVBhdGgodGFwTGVhZi5jb250cm9sQmxvY2ssIGxlYWZIYXNoKTtcbiAgcmV0dXJuIHRvb2xzLmNvbXBhcmUocm9vdEhhc2gsIG1lcmtsZVJvb3QpID09PSAwO1xufVxuLyoqXG4gKiBTb3J0cyB0aGUgc2lnbmF0dXJlcyBpbiB0aGUgaW5wdXQncyB0YXBTY3JpcHRTaWcgYXJyYXkgYmFzZWQgb24gdGhlaXIgcG9zaXRpb24gaW4gdGhlIHRhcExlYWYgc2NyaXB0LlxuICpcbiAqIEBwYXJhbSBpbnB1dCAtIFRoZSBQc2J0SW5wdXQgb2JqZWN0LlxuICogQHBhcmFtIHRhcExlYWYgLSBUaGUgVGFwTGVhZlNjcmlwdCBvYmplY3QuXG4gKiBAcmV0dXJucyBBbiBhcnJheSBvZiBzb3J0ZWQgc2lnbmF0dXJlcyBhcyBCdWZmZXJzLlxuICovXG5mdW5jdGlvbiBzb3J0U2lnbmF0dXJlcyhpbnB1dCwgdGFwTGVhZikge1xuICBjb25zdCBsZWFmSGFzaCA9IHRhcGxlYWZIYXNoKHtcbiAgICBvdXRwdXQ6IHRhcExlYWYuc2NyaXB0LFxuICAgIHZlcnNpb246IHRhcExlYWYubGVhZlZlcnNpb24sXG4gIH0pO1xuICByZXR1cm4gKFxuICAgIChpbnB1dC50YXBTY3JpcHRTaWcgfHwgW10pXG4gICAgICAvLyAuZmlsdGVyKHRzcyA9PiB0c3MubGVhZkhhc2guZXF1YWxzKGxlYWZIYXNoKSlcbiAgICAgIC5maWx0ZXIodHNzID0+IHRvb2xzLmNvbXBhcmUodHNzLmxlYWZIYXNoLCBsZWFmSGFzaCkgPT09IDApXG4gICAgICAubWFwKHRzcyA9PiBhZGRQdWJrZXlQb3NpdGlvbkluU2NyaXB0KHRhcExlYWYuc2NyaXB0LCB0c3MpKVxuICAgICAgLnNvcnQoKHQxLCB0MikgPT4gdDIucG9zaXRpb25JblNjcmlwdCAtIHQxLnBvc2l0aW9uSW5TY3JpcHQpXG4gICAgICAubWFwKHQgPT4gdC5zaWduYXR1cmUpXG4gICk7XG59XG4vKipcbiAqIEFkZHMgdGhlIHBvc2l0aW9uIG9mIGEgcHVibGljIGtleSBpbiBhIHNjcmlwdCB0byBhIFRhcFNjcmlwdFNpZyBvYmplY3QuXG4gKiBAcGFyYW0gc2NyaXB0IFRoZSBzY3JpcHQgaW4gd2hpY2ggdG8gZmluZCB0aGUgcG9zaXRpb24gb2YgdGhlIHB1YmxpYyBrZXkuXG4gKiBAcGFyYW0gdHNzIFRoZSBUYXBTY3JpcHRTaWcgb2JqZWN0IHRvIGFkZCB0aGUgcG9zaXRpb24gdG8uXG4gKiBAcmV0dXJucyBBIFRhcFNjcmlwdFNpZ1dpdFBvc2l0aW9uIG9iamVjdCB3aXRoIHRoZSBhZGRlZCBwb3NpdGlvbi5cbiAqL1xuZnVuY3Rpb24gYWRkUHVia2V5UG9zaXRpb25JblNjcmlwdChzY3JpcHQsIHRzcykge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihcbiAgICB7XG4gICAgICBwb3NpdGlvbkluU2NyaXB0OiBwdWJrZXlQb3NpdGlvbkluU2NyaXB0KHRzcy5wdWJrZXksIHNjcmlwdCksXG4gICAgfSxcbiAgICB0c3MsXG4gICk7XG59XG4vKipcbiAqIEZpbmQgdGFwbGVhZiBieSBoYXNoLCBvciBnZXQgdGhlIHNpZ25lZCB0YXBsZWFmIHdpdGggdGhlIHNob3J0ZXN0IHBhdGguXG4gKi9cbmZ1bmN0aW9uIGZpbmRUYXBMZWFmVG9GaW5hbGl6ZShpbnB1dCwgaW5wdXRJbmRleCwgbGVhZkhhc2hUb0ZpbmFsaXplKSB7XG4gIGlmICghaW5wdXQudGFwU2NyaXB0U2lnIHx8ICFpbnB1dC50YXBTY3JpcHRTaWcubGVuZ3RoKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBDYW4gbm90IGZpbmFsaXplIHRhcHJvb3QgaW5wdXQgIyR7aW5wdXRJbmRleH0uIE5vIHRhcGxlYWYgc2NyaXB0IHNpZ25hdHVyZSBwcm92aWRlZC5gLFxuICAgICk7XG4gIGNvbnN0IHRhcExlYWYgPSAoaW5wdXQudGFwTGVhZlNjcmlwdCB8fCBbXSlcbiAgICAuc29ydCgoYSwgYikgPT4gYS5jb250cm9sQmxvY2subGVuZ3RoIC0gYi5jb250cm9sQmxvY2subGVuZ3RoKVxuICAgIC5maW5kKGxlYWYgPT5cbiAgICAgIGNhbkZpbmFsaXplTGVhZihsZWFmLCBpbnB1dC50YXBTY3JpcHRTaWcsIGxlYWZIYXNoVG9GaW5hbGl6ZSksXG4gICAgKTtcbiAgaWYgKCF0YXBMZWFmKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBDYW4gbm90IGZpbmFsaXplIHRhcHJvb3QgaW5wdXQgIyR7aW5wdXRJbmRleH0uIFNpZ25hdHVyZSBmb3IgdGFwbGVhZiBzY3JpcHQgbm90IGZvdW5kLmAsXG4gICAgKTtcbiAgcmV0dXJuIHRhcExlYWY7XG59XG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhIFRhcExlYWZTY3JpcHQgY2FuIGJlIGZpbmFsaXplZC5cbiAqXG4gKiBAcGFyYW0gbGVhZiAtIFRoZSBUYXBMZWFmU2NyaXB0IHRvIGNoZWNrLlxuICogQHBhcmFtIHRhcFNjcmlwdFNpZyAtIFRoZSBhcnJheSBvZiBUYXBTY3JpcHRTaWcgb2JqZWN0cy5cbiAqIEBwYXJhbSBoYXNoIC0gVGhlIG9wdGlvbmFsIGhhc2ggdG8gY29tcGFyZSB3aXRoIHRoZSBsZWFmIGhhc2guXG4gKiBAcmV0dXJucyBBIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBUYXBMZWFmU2NyaXB0IGNhbiBiZSBmaW5hbGl6ZWQuXG4gKi9cbmZ1bmN0aW9uIGNhbkZpbmFsaXplTGVhZihsZWFmLCB0YXBTY3JpcHRTaWcsIGhhc2gpIHtcbiAgY29uc3QgbGVhZkhhc2ggPSB0YXBsZWFmSGFzaCh7XG4gICAgb3V0cHV0OiBsZWFmLnNjcmlwdCxcbiAgICB2ZXJzaW9uOiBsZWFmLmxlYWZWZXJzaW9uLFxuICB9KTtcbiAgY29uc3Qgd2hpdGVMaXN0ZWRIYXNoID0gIWhhc2ggfHwgdG9vbHMuY29tcGFyZShsZWFmSGFzaCwgaGFzaCkgPT09IDA7XG4gIHJldHVybiAoXG4gICAgd2hpdGVMaXN0ZWRIYXNoICYmXG4gICAgdGFwU2NyaXB0U2lnLmZpbmQodHNzID0+IHRvb2xzLmNvbXBhcmUodHNzLmxlYWZIYXNoLCBsZWFmSGFzaCkgPT09IDApICE9PVxuICAgICAgdW5kZWZpbmVkXG4gICk7XG59XG4vKipcbiAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gUHNidElucHV0IG9yIFBzYnRPdXRwdXQgaGFzIG5vbi10YXByb290IGZpZWxkcy5cbiAqIE5vbi10YXByb290IGZpZWxkcyBpbmNsdWRlIHJlZGVlbVNjcmlwdCwgd2l0bmVzc1NjcmlwdCwgYW5kIGJpcDMyRGVyaXZhdGlvbi5cbiAqIEBwYXJhbSBpbyBUaGUgUHNidElucHV0IG9yIFBzYnRPdXRwdXQgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBBIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBnaXZlbiBpbnB1dCBvciBvdXRwdXQgaGFzIG5vbi10YXByb290IGZpZWxkcy5cbiAqL1xuZnVuY3Rpb24gaGFzTm9uVGFwcm9vdEZpZWxkcyhpbykge1xuICByZXR1cm4gKFxuICAgIGlvICYmXG4gICAgISEoXG4gICAgICBpby5yZWRlZW1TY3JpcHQgfHxcbiAgICAgIGlvLndpdG5lc3NTY3JpcHQgfHxcbiAgICAgIChpby5iaXAzMkRlcml2YXRpb24gJiYgaW8uYmlwMzJEZXJpdmF0aW9uLmxlbmd0aClcbiAgICApXG4gICk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt/bip371.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt/psbtutils.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt/psbtutils.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkInputForSig: () => (/* binding */ checkInputForSig),\n/* harmony export */   isP2MS: () => (/* binding */ isP2MS),\n/* harmony export */   isP2PK: () => (/* binding */ isP2PK),\n/* harmony export */   isP2PKH: () => (/* binding */ isP2PKH),\n/* harmony export */   isP2SHScript: () => (/* binding */ isP2SHScript),\n/* harmony export */   isP2TR: () => (/* binding */ isP2TR),\n/* harmony export */   isP2WPKH: () => (/* binding */ isP2WPKH),\n/* harmony export */   isP2WSHScript: () => (/* binding */ isP2WSHScript),\n/* harmony export */   pubkeyInScript: () => (/* binding */ pubkeyInScript),\n/* harmony export */   pubkeyPositionInScript: () => (/* binding */ pubkeyPositionInScript),\n/* harmony export */   signatureBlocksAction: () => (/* binding */ signatureBlocksAction),\n/* harmony export */   witnessStackToScriptWitness: () => (/* binding */ witnessStackToScriptWitness)\n/* harmony export */ });\n/* harmony import */ var varuint_bitcoin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! varuint-bitcoin */ \"(ssr)/./node_modules/.pnpm/varuint-bitcoin@2.0.0/node_modules/varuint-bitcoin/src/esm/index.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _transaction_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../transaction.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/transaction.js\");\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../crypto.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/crypto.js\");\n/* harmony import */ var _payments_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../payments/index.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/payments/index.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n\n\n\n\n\n\n/**\n * Checks if a given payment factory can generate a payment script from a given script.\n * @param payment The payment factory to check.\n * @returns A function that takes a script and returns a boolean indicating whether the payment factory can generate a payment script from the script.\n */\nfunction isPaymentFactory(payment) {\n  return script => {\n    try {\n      payment({ output: script });\n      return true;\n    } catch (err) {\n      return false;\n    }\n  };\n}\nconst isP2MS = isPaymentFactory(_payments_index_js__WEBPACK_IMPORTED_MODULE_4__.p2ms);\nconst isP2PK = isPaymentFactory(_payments_index_js__WEBPACK_IMPORTED_MODULE_4__.p2pk);\nconst isP2PKH = isPaymentFactory(_payments_index_js__WEBPACK_IMPORTED_MODULE_4__.p2pkh);\nconst isP2WPKH = isPaymentFactory(_payments_index_js__WEBPACK_IMPORTED_MODULE_4__.p2wpkh);\nconst isP2WSHScript = isPaymentFactory(_payments_index_js__WEBPACK_IMPORTED_MODULE_4__.p2wsh);\nconst isP2SHScript = isPaymentFactory(_payments_index_js__WEBPACK_IMPORTED_MODULE_4__.p2sh);\nconst isP2TR = isPaymentFactory(_payments_index_js__WEBPACK_IMPORTED_MODULE_4__.p2tr);\n/**\n * Converts a witness stack to a script witness.\n * @param witness The witness stack to convert.\n * @returns The script witness as a Buffer.\n */\nfunction witnessStackToScriptWitness(witness) {\n  let buffer = new Uint8Array(0);\n  function writeSlice(slice) {\n    buffer = uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.concat([buffer, slice]);\n  }\n  function writeVarInt(i) {\n    const currentLen = buffer.length;\n    const varintLen = varuint_bitcoin__WEBPACK_IMPORTED_MODULE_0__.encodingLength(i);\n    buffer = uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.concat([buffer, new Uint8Array(varintLen)]);\n    varuint_bitcoin__WEBPACK_IMPORTED_MODULE_0__.encode(i, buffer, currentLen);\n  }\n  function writeVarSlice(slice) {\n    writeVarInt(slice.length);\n    writeSlice(slice);\n  }\n  function writeVector(vector) {\n    writeVarInt(vector.length);\n    vector.forEach(writeVarSlice);\n  }\n  writeVector(witness);\n  return buffer;\n}\n/**\n * Finds the position of a public key in a script.\n * @param pubkey The public key to search for.\n * @param script The script to search in.\n * @returns The index of the public key in the script, or -1 if not found.\n * @throws {Error} If there is an unknown script error.\n */\nfunction pubkeyPositionInScript(pubkey, script) {\n  const pubkeyHash = (0,_crypto_js__WEBPACK_IMPORTED_MODULE_3__.hash160)(pubkey);\n  const pubkeyXOnly = pubkey.slice(1, 33); // slice before calling?\n  const decompiled = _script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(script);\n  if (decompiled === null) throw new Error('Unknown script error');\n  return decompiled.findIndex(element => {\n    if (typeof element === 'number') return false;\n    return (\n      uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.compare(pubkey, element) === 0 ||\n      uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.compare(pubkeyHash, element) === 0 ||\n      uint8array_tools__WEBPACK_IMPORTED_MODULE_5__.compare(pubkeyXOnly, element) === 0\n    );\n  });\n}\n/**\n * Checks if a public key is present in a script.\n * @param pubkey The public key to check.\n * @param script The script to search in.\n * @returns A boolean indicating whether the public key is present in the script.\n */\nfunction pubkeyInScript(pubkey, script) {\n  return pubkeyPositionInScript(pubkey, script) !== -1;\n}\n/**\n * Checks if an input contains a signature for a specific action.\n * @param input - The input to check.\n * @param action - The action to check for.\n * @returns A boolean indicating whether the input contains a signature for the specified action.\n */\nfunction checkInputForSig(input, action) {\n  const pSigs = extractPartialSigs(input);\n  return pSigs.some(pSig =>\n    signatureBlocksAction(pSig, _script_js__WEBPACK_IMPORTED_MODULE_1__.signature.decode, action),\n  );\n}\n/**\n * Determines if a given action is allowed for a signature block.\n * @param signature - The signature block.\n * @param signatureDecodeFn - The function used to decode the signature.\n * @param action - The action to be checked.\n * @returns True if the action is allowed, false otherwise.\n */\nfunction signatureBlocksAction(signature, signatureDecodeFn, action) {\n  const { hashType } = signatureDecodeFn(signature);\n  const whitelist = [];\n  const isAnyoneCanPay = hashType & _transaction_js__WEBPACK_IMPORTED_MODULE_2__.Transaction.SIGHASH_ANYONECANPAY;\n  if (isAnyoneCanPay) whitelist.push('addInput');\n  const hashMod = hashType & 0x1f;\n  switch (hashMod) {\n    case _transaction_js__WEBPACK_IMPORTED_MODULE_2__.Transaction.SIGHASH_ALL:\n      break;\n    case _transaction_js__WEBPACK_IMPORTED_MODULE_2__.Transaction.SIGHASH_SINGLE:\n    case _transaction_js__WEBPACK_IMPORTED_MODULE_2__.Transaction.SIGHASH_NONE:\n      whitelist.push('addOutput');\n      whitelist.push('setInputSequence');\n      break;\n  }\n  if (whitelist.indexOf(action) === -1) {\n    return true;\n  }\n  return false;\n}\n/**\n * Extracts the signatures from a PsbtInput object.\n * If the input has partial signatures, it returns an array of the signatures.\n * If the input does not have partial signatures, it checks if it has a finalScriptSig or finalScriptWitness.\n * If it does, it extracts the signatures from the final scripts and returns them.\n * If none of the above conditions are met, it returns an empty array.\n *\n * @param input - The PsbtInput object from which to extract the signatures.\n * @returns An array of signatures extracted from the PsbtInput object.\n */\nfunction extractPartialSigs(input) {\n  let pSigs = [];\n  if ((input.partialSig || []).length === 0) {\n    if (!input.finalScriptSig && !input.finalScriptWitness) return [];\n    pSigs = getPsigsFromInputFinalScripts(input);\n  } else {\n    pSigs = input.partialSig;\n  }\n  return pSigs.map(p => p.signature);\n}\n/**\n * Retrieves the partial signatures (Psigs) from the input's final scripts.\n * Psigs are extracted from both the final scriptSig and final scriptWitness of the input.\n * Only canonical script signatures are considered.\n *\n * @param input - The PsbtInput object representing the input.\n * @returns An array of PartialSig objects containing the extracted Psigs.\n */\nfunction getPsigsFromInputFinalScripts(input) {\n  const scriptItems = !input.finalScriptSig\n    ? []\n    : _script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(input.finalScriptSig) || [];\n  const witnessItems = !input.finalScriptWitness\n    ? []\n    : _script_js__WEBPACK_IMPORTED_MODULE_1__.decompile(input.finalScriptWitness) || [];\n  return scriptItems\n    .concat(witnessItems)\n    .filter(item => {\n      return (\n        item instanceof Uint8Array && _script_js__WEBPACK_IMPORTED_MODULE_1__.isCanonicalScriptSignature(item)\n      );\n    })\n    .map(sig => ({ signature: sig }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wc2J0L3BzYnR1dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDSDtBQUNRO0FBQ1Q7QUFDVTtBQUNQO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0JBQWdCO0FBQ2hDO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ08sZ0NBQWdDLG9EQUFhO0FBQzdDLGdDQUFnQyxvREFBYTtBQUM3QyxpQ0FBaUMscURBQWM7QUFDL0Msa0NBQWtDLHNEQUFlO0FBQ2pELHVDQUF1QyxxREFBYztBQUNyRCxzQ0FBc0Msb0RBQWE7QUFDbkQsZ0NBQWdDLG9EQUFhO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxhQUFhLG9EQUFZO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyREFBc0I7QUFDNUMsYUFBYSxvREFBWTtBQUN6QixJQUFJLG1EQUFjO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDTztBQUNQLHFCQUFxQixtREFBTztBQUM1QiwyQ0FBMkM7QUFDM0MscUJBQXFCLGlEQUFpQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0scURBQWE7QUFDbkIsTUFBTSxxREFBYTtBQUNuQixNQUFNLHFEQUFhO0FBQ25CO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFpQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFVBQVUsV0FBVztBQUNyQjtBQUNBLG9DQUFvQyx3REFBVztBQUMvQztBQUNBO0FBQ0E7QUFDQSxTQUFTLHdEQUFXO0FBQ3BCO0FBQ0EsU0FBUyx3REFBVztBQUNwQixTQUFTLHdEQUFXO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGlEQUFpQjtBQUN2QjtBQUNBO0FBQ0EsTUFBTSxpREFBaUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msa0VBQWtDO0FBQ3hFO0FBQ0EsS0FBSztBQUNMLG1CQUFtQixnQkFBZ0I7QUFDbkMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9idGMvbWlkbC14LWJpdGNvaW4tc3VtbWl0LWhhY2thdGhvbi0yMDI1L3V0eG8tcHNidC1kZW1vL25vZGVfbW9kdWxlcy8ucG5wbS9iaXRjb2luanMtbGliQDcuMC4wLXJjLjBfdHlwZXNjcmlwdEA1LjkuMi9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYi9zcmMvZXNtL3BzYnQvcHNidHV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHZhcnVpbnQgZnJvbSAndmFydWludC1iaXRjb2luJztcbmltcG9ydCAqIGFzIGJzY3JpcHQgZnJvbSAnLi4vc2NyaXB0LmpzJztcbmltcG9ydCB7IFRyYW5zYWN0aW9uIH0gZnJvbSAnLi4vdHJhbnNhY3Rpb24uanMnO1xuaW1wb3J0IHsgaGFzaDE2MCB9IGZyb20gJy4uL2NyeXB0by5qcyc7XG5pbXBvcnQgKiBhcyBwYXltZW50cyBmcm9tICcuLi9wYXltZW50cy9pbmRleC5qcyc7XG5pbXBvcnQgKiBhcyB0b29scyBmcm9tICd1aW50OGFycmF5LXRvb2xzJztcbi8qKlxuICogQ2hlY2tzIGlmIGEgZ2l2ZW4gcGF5bWVudCBmYWN0b3J5IGNhbiBnZW5lcmF0ZSBhIHBheW1lbnQgc2NyaXB0IGZyb20gYSBnaXZlbiBzY3JpcHQuXG4gKiBAcGFyYW0gcGF5bWVudCBUaGUgcGF5bWVudCBmYWN0b3J5IHRvIGNoZWNrLlxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgc2NyaXB0IGFuZCByZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHBheW1lbnQgZmFjdG9yeSBjYW4gZ2VuZXJhdGUgYSBwYXltZW50IHNjcmlwdCBmcm9tIHRoZSBzY3JpcHQuXG4gKi9cbmZ1bmN0aW9uIGlzUGF5bWVudEZhY3RvcnkocGF5bWVudCkge1xuICByZXR1cm4gc2NyaXB0ID0+IHtcbiAgICB0cnkge1xuICAgICAgcGF5bWVudCh7IG91dHB1dDogc2NyaXB0IH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xufVxuZXhwb3J0IGNvbnN0IGlzUDJNUyA9IGlzUGF5bWVudEZhY3RvcnkocGF5bWVudHMucDJtcyk7XG5leHBvcnQgY29uc3QgaXNQMlBLID0gaXNQYXltZW50RmFjdG9yeShwYXltZW50cy5wMnBrKTtcbmV4cG9ydCBjb25zdCBpc1AyUEtIID0gaXNQYXltZW50RmFjdG9yeShwYXltZW50cy5wMnBraCk7XG5leHBvcnQgY29uc3QgaXNQMldQS0ggPSBpc1BheW1lbnRGYWN0b3J5KHBheW1lbnRzLnAyd3BraCk7XG5leHBvcnQgY29uc3QgaXNQMldTSFNjcmlwdCA9IGlzUGF5bWVudEZhY3RvcnkocGF5bWVudHMucDJ3c2gpO1xuZXhwb3J0IGNvbnN0IGlzUDJTSFNjcmlwdCA9IGlzUGF5bWVudEZhY3RvcnkocGF5bWVudHMucDJzaCk7XG5leHBvcnQgY29uc3QgaXNQMlRSID0gaXNQYXltZW50RmFjdG9yeShwYXltZW50cy5wMnRyKTtcbi8qKlxuICogQ29udmVydHMgYSB3aXRuZXNzIHN0YWNrIHRvIGEgc2NyaXB0IHdpdG5lc3MuXG4gKiBAcGFyYW0gd2l0bmVzcyBUaGUgd2l0bmVzcyBzdGFjayB0byBjb252ZXJ0LlxuICogQHJldHVybnMgVGhlIHNjcmlwdCB3aXRuZXNzIGFzIGEgQnVmZmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0bmVzc1N0YWNrVG9TY3JpcHRXaXRuZXNzKHdpdG5lc3MpIHtcbiAgbGV0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDApO1xuICBmdW5jdGlvbiB3cml0ZVNsaWNlKHNsaWNlKSB7XG4gICAgYnVmZmVyID0gdG9vbHMuY29uY2F0KFtidWZmZXIsIHNsaWNlXSk7XG4gIH1cbiAgZnVuY3Rpb24gd3JpdGVWYXJJbnQoaSkge1xuICAgIGNvbnN0IGN1cnJlbnRMZW4gPSBidWZmZXIubGVuZ3RoO1xuICAgIGNvbnN0IHZhcmludExlbiA9IHZhcnVpbnQuZW5jb2RpbmdMZW5ndGgoaSk7XG4gICAgYnVmZmVyID0gdG9vbHMuY29uY2F0KFtidWZmZXIsIG5ldyBVaW50OEFycmF5KHZhcmludExlbildKTtcbiAgICB2YXJ1aW50LmVuY29kZShpLCBidWZmZXIsIGN1cnJlbnRMZW4pO1xuICB9XG4gIGZ1bmN0aW9uIHdyaXRlVmFyU2xpY2Uoc2xpY2UpIHtcbiAgICB3cml0ZVZhckludChzbGljZS5sZW5ndGgpO1xuICAgIHdyaXRlU2xpY2Uoc2xpY2UpO1xuICB9XG4gIGZ1bmN0aW9uIHdyaXRlVmVjdG9yKHZlY3Rvcikge1xuICAgIHdyaXRlVmFySW50KHZlY3Rvci5sZW5ndGgpO1xuICAgIHZlY3Rvci5mb3JFYWNoKHdyaXRlVmFyU2xpY2UpO1xuICB9XG4gIHdyaXRlVmVjdG9yKHdpdG5lc3MpO1xuICByZXR1cm4gYnVmZmVyO1xufVxuLyoqXG4gKiBGaW5kcyB0aGUgcG9zaXRpb24gb2YgYSBwdWJsaWMga2V5IGluIGEgc2NyaXB0LlxuICogQHBhcmFtIHB1YmtleSBUaGUgcHVibGljIGtleSB0byBzZWFyY2ggZm9yLlxuICogQHBhcmFtIHNjcmlwdCBUaGUgc2NyaXB0IHRvIHNlYXJjaCBpbi5cbiAqIEByZXR1cm5zIFRoZSBpbmRleCBvZiB0aGUgcHVibGljIGtleSBpbiB0aGUgc2NyaXB0LCBvciAtMSBpZiBub3QgZm91bmQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgaXMgYW4gdW5rbm93biBzY3JpcHQgZXJyb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdWJrZXlQb3NpdGlvbkluU2NyaXB0KHB1YmtleSwgc2NyaXB0KSB7XG4gIGNvbnN0IHB1YmtleUhhc2ggPSBoYXNoMTYwKHB1YmtleSk7XG4gIGNvbnN0IHB1YmtleVhPbmx5ID0gcHVia2V5LnNsaWNlKDEsIDMzKTsgLy8gc2xpY2UgYmVmb3JlIGNhbGxpbmc/XG4gIGNvbnN0IGRlY29tcGlsZWQgPSBic2NyaXB0LmRlY29tcGlsZShzY3JpcHQpO1xuICBpZiAoZGVjb21waWxlZCA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHNjcmlwdCBlcnJvcicpO1xuICByZXR1cm4gZGVjb21waWxlZC5maW5kSW5kZXgoZWxlbWVudCA9PiB7XG4gICAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSAnbnVtYmVyJykgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAoXG4gICAgICB0b29scy5jb21wYXJlKHB1YmtleSwgZWxlbWVudCkgPT09IDAgfHxcbiAgICAgIHRvb2xzLmNvbXBhcmUocHVia2V5SGFzaCwgZWxlbWVudCkgPT09IDAgfHxcbiAgICAgIHRvb2xzLmNvbXBhcmUocHVia2V5WE9ubHksIGVsZW1lbnQpID09PSAwXG4gICAgKTtcbiAgfSk7XG59XG4vKipcbiAqIENoZWNrcyBpZiBhIHB1YmxpYyBrZXkgaXMgcHJlc2VudCBpbiBhIHNjcmlwdC5cbiAqIEBwYXJhbSBwdWJrZXkgVGhlIHB1YmxpYyBrZXkgdG8gY2hlY2suXG4gKiBAcGFyYW0gc2NyaXB0IFRoZSBzY3JpcHQgdG8gc2VhcmNoIGluLlxuICogQHJldHVybnMgQSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgcHVibGljIGtleSBpcyBwcmVzZW50IGluIHRoZSBzY3JpcHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdWJrZXlJblNjcmlwdChwdWJrZXksIHNjcmlwdCkge1xuICByZXR1cm4gcHVia2V5UG9zaXRpb25JblNjcmlwdChwdWJrZXksIHNjcmlwdCkgIT09IC0xO1xufVxuLyoqXG4gKiBDaGVja3MgaWYgYW4gaW5wdXQgY29udGFpbnMgYSBzaWduYXR1cmUgZm9yIGEgc3BlY2lmaWMgYWN0aW9uLlxuICogQHBhcmFtIGlucHV0IC0gVGhlIGlucHV0IHRvIGNoZWNrLlxuICogQHBhcmFtIGFjdGlvbiAtIFRoZSBhY3Rpb24gdG8gY2hlY2sgZm9yLlxuICogQHJldHVybnMgQSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgaW5wdXQgY29udGFpbnMgYSBzaWduYXR1cmUgZm9yIHRoZSBzcGVjaWZpZWQgYWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tJbnB1dEZvclNpZyhpbnB1dCwgYWN0aW9uKSB7XG4gIGNvbnN0IHBTaWdzID0gZXh0cmFjdFBhcnRpYWxTaWdzKGlucHV0KTtcbiAgcmV0dXJuIHBTaWdzLnNvbWUocFNpZyA9PlxuICAgIHNpZ25hdHVyZUJsb2Nrc0FjdGlvbihwU2lnLCBic2NyaXB0LnNpZ25hdHVyZS5kZWNvZGUsIGFjdGlvbiksXG4gICk7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgYSBnaXZlbiBhY3Rpb24gaXMgYWxsb3dlZCBmb3IgYSBzaWduYXR1cmUgYmxvY2suXG4gKiBAcGFyYW0gc2lnbmF0dXJlIC0gVGhlIHNpZ25hdHVyZSBibG9jay5cbiAqIEBwYXJhbSBzaWduYXR1cmVEZWNvZGVGbiAtIFRoZSBmdW5jdGlvbiB1c2VkIHRvIGRlY29kZSB0aGUgc2lnbmF0dXJlLlxuICogQHBhcmFtIGFjdGlvbiAtIFRoZSBhY3Rpb24gdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGFjdGlvbiBpcyBhbGxvd2VkLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaWduYXR1cmVCbG9ja3NBY3Rpb24oc2lnbmF0dXJlLCBzaWduYXR1cmVEZWNvZGVGbiwgYWN0aW9uKSB7XG4gIGNvbnN0IHsgaGFzaFR5cGUgfSA9IHNpZ25hdHVyZURlY29kZUZuKHNpZ25hdHVyZSk7XG4gIGNvbnN0IHdoaXRlbGlzdCA9IFtdO1xuICBjb25zdCBpc0FueW9uZUNhblBheSA9IGhhc2hUeXBlICYgVHJhbnNhY3Rpb24uU0lHSEFTSF9BTllPTkVDQU5QQVk7XG4gIGlmIChpc0FueW9uZUNhblBheSkgd2hpdGVsaXN0LnB1c2goJ2FkZElucHV0Jyk7XG4gIGNvbnN0IGhhc2hNb2QgPSBoYXNoVHlwZSAmIDB4MWY7XG4gIHN3aXRjaCAoaGFzaE1vZCkge1xuICAgIGNhc2UgVHJhbnNhY3Rpb24uU0lHSEFTSF9BTEw6XG4gICAgICBicmVhaztcbiAgICBjYXNlIFRyYW5zYWN0aW9uLlNJR0hBU0hfU0lOR0xFOlxuICAgIGNhc2UgVHJhbnNhY3Rpb24uU0lHSEFTSF9OT05FOlxuICAgICAgd2hpdGVsaXN0LnB1c2goJ2FkZE91dHB1dCcpO1xuICAgICAgd2hpdGVsaXN0LnB1c2goJ3NldElucHV0U2VxdWVuY2UnKTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIGlmICh3aGl0ZWxpc3QuaW5kZXhPZihhY3Rpb24pID09PSAtMSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogRXh0cmFjdHMgdGhlIHNpZ25hdHVyZXMgZnJvbSBhIFBzYnRJbnB1dCBvYmplY3QuXG4gKiBJZiB0aGUgaW5wdXQgaGFzIHBhcnRpYWwgc2lnbmF0dXJlcywgaXQgcmV0dXJucyBhbiBhcnJheSBvZiB0aGUgc2lnbmF0dXJlcy5cbiAqIElmIHRoZSBpbnB1dCBkb2VzIG5vdCBoYXZlIHBhcnRpYWwgc2lnbmF0dXJlcywgaXQgY2hlY2tzIGlmIGl0IGhhcyBhIGZpbmFsU2NyaXB0U2lnIG9yIGZpbmFsU2NyaXB0V2l0bmVzcy5cbiAqIElmIGl0IGRvZXMsIGl0IGV4dHJhY3RzIHRoZSBzaWduYXR1cmVzIGZyb20gdGhlIGZpbmFsIHNjcmlwdHMgYW5kIHJldHVybnMgdGhlbS5cbiAqIElmIG5vbmUgb2YgdGhlIGFib3ZlIGNvbmRpdGlvbnMgYXJlIG1ldCwgaXQgcmV0dXJucyBhbiBlbXB0eSBhcnJheS5cbiAqXG4gKiBAcGFyYW0gaW5wdXQgLSBUaGUgUHNidElucHV0IG9iamVjdCBmcm9tIHdoaWNoIHRvIGV4dHJhY3QgdGhlIHNpZ25hdHVyZXMuXG4gKiBAcmV0dXJucyBBbiBhcnJheSBvZiBzaWduYXR1cmVzIGV4dHJhY3RlZCBmcm9tIHRoZSBQc2J0SW5wdXQgb2JqZWN0LlxuICovXG5mdW5jdGlvbiBleHRyYWN0UGFydGlhbFNpZ3MoaW5wdXQpIHtcbiAgbGV0IHBTaWdzID0gW107XG4gIGlmICgoaW5wdXQucGFydGlhbFNpZyB8fCBbXSkubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKCFpbnB1dC5maW5hbFNjcmlwdFNpZyAmJiAhaW5wdXQuZmluYWxTY3JpcHRXaXRuZXNzKSByZXR1cm4gW107XG4gICAgcFNpZ3MgPSBnZXRQc2lnc0Zyb21JbnB1dEZpbmFsU2NyaXB0cyhpbnB1dCk7XG4gIH0gZWxzZSB7XG4gICAgcFNpZ3MgPSBpbnB1dC5wYXJ0aWFsU2lnO1xuICB9XG4gIHJldHVybiBwU2lncy5tYXAocCA9PiBwLnNpZ25hdHVyZSk7XG59XG4vKipcbiAqIFJldHJpZXZlcyB0aGUgcGFydGlhbCBzaWduYXR1cmVzIChQc2lncykgZnJvbSB0aGUgaW5wdXQncyBmaW5hbCBzY3JpcHRzLlxuICogUHNpZ3MgYXJlIGV4dHJhY3RlZCBmcm9tIGJvdGggdGhlIGZpbmFsIHNjcmlwdFNpZyBhbmQgZmluYWwgc2NyaXB0V2l0bmVzcyBvZiB0aGUgaW5wdXQuXG4gKiBPbmx5IGNhbm9uaWNhbCBzY3JpcHQgc2lnbmF0dXJlcyBhcmUgY29uc2lkZXJlZC5cbiAqXG4gKiBAcGFyYW0gaW5wdXQgLSBUaGUgUHNidElucHV0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGlucHV0LlxuICogQHJldHVybnMgQW4gYXJyYXkgb2YgUGFydGlhbFNpZyBvYmplY3RzIGNvbnRhaW5pbmcgdGhlIGV4dHJhY3RlZCBQc2lncy5cbiAqL1xuZnVuY3Rpb24gZ2V0UHNpZ3NGcm9tSW5wdXRGaW5hbFNjcmlwdHMoaW5wdXQpIHtcbiAgY29uc3Qgc2NyaXB0SXRlbXMgPSAhaW5wdXQuZmluYWxTY3JpcHRTaWdcbiAgICA/IFtdXG4gICAgOiBic2NyaXB0LmRlY29tcGlsZShpbnB1dC5maW5hbFNjcmlwdFNpZykgfHwgW107XG4gIGNvbnN0IHdpdG5lc3NJdGVtcyA9ICFpbnB1dC5maW5hbFNjcmlwdFdpdG5lc3NcbiAgICA/IFtdXG4gICAgOiBic2NyaXB0LmRlY29tcGlsZShpbnB1dC5maW5hbFNjcmlwdFdpdG5lc3MpIHx8IFtdO1xuICByZXR1cm4gc2NyaXB0SXRlbXNcbiAgICAuY29uY2F0KHdpdG5lc3NJdGVtcylcbiAgICAuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgaXRlbSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiYgYnNjcmlwdC5pc0Nhbm9uaWNhbFNjcmlwdFNpZ25hdHVyZShpdGVtKVxuICAgICAgKTtcbiAgICB9KVxuICAgIC5tYXAoc2lnID0+ICh7IHNpZ25hdHVyZTogc2lnIH0pKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/psbt/psbtutils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/push_data.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/push_data.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   encodingLength: () => (/* binding */ encodingLength)\n/* harmony export */ });\n/* harmony import */ var _ops_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ops.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/ops.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n\n\n/**\n * Calculates the encoding length of a number used for push data in Bitcoin transactions.\n * @param i The number to calculate the encoding length for.\n * @returns The encoding length of the number.\n */\nfunction encodingLength(i) {\n  return i < _ops_js__WEBPACK_IMPORTED_MODULE_0__.OPS.OP_PUSHDATA1 ? 1 : i <= 0xff ? 2 : i <= 0xffff ? 3 : 5;\n}\n/**\n * Encodes a number into a buffer using a variable-length encoding scheme.\n * The encoded buffer is written starting at the specified offset.\n * Returns the size of the encoded buffer.\n *\n * @param buffer - The buffer to write the encoded data into.\n * @param num - The number to encode.\n * @param offset - The offset at which to start writing the encoded buffer.\n * @returns The size of the encoded buffer.\n */\nfunction encode(buffer, num, offset) {\n  const size = encodingLength(num);\n  // ~6 bit\n  if (size === 1) {\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_1__.writeUInt8(buffer, offset, num);\n    // 8 bit\n  } else if (size === 2) {\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_1__.writeUInt8(buffer, offset, _ops_js__WEBPACK_IMPORTED_MODULE_0__.OPS.OP_PUSHDATA1);\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_1__.writeUInt8(buffer, offset + 1, num);\n    // 16 bit\n  } else if (size === 3) {\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_1__.writeUInt8(buffer, offset, _ops_js__WEBPACK_IMPORTED_MODULE_0__.OPS.OP_PUSHDATA2);\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_1__.writeUInt16(buffer, offset + 1, num, 'LE');\n    // 32 bit\n  } else {\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_1__.writeUInt8(buffer, offset, _ops_js__WEBPACK_IMPORTED_MODULE_0__.OPS.OP_PUSHDATA4);\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_1__.writeUInt32(buffer, offset + 1, num, 'LE');\n  }\n  return size;\n}\n/**\n * Decodes a buffer and returns information about the opcode, number, and size.\n * @param buffer - The buffer to decode.\n * @param offset - The offset within the buffer to start decoding.\n * @returns An object containing the opcode, number, and size, or null if decoding fails.\n */\nfunction decode(buffer, offset) {\n  const opcode = uint8array_tools__WEBPACK_IMPORTED_MODULE_1__.readUInt8(buffer, offset);\n  let num;\n  let size;\n  // ~6 bit\n  if (opcode < _ops_js__WEBPACK_IMPORTED_MODULE_0__.OPS.OP_PUSHDATA1) {\n    num = opcode;\n    size = 1;\n    // 8 bit\n  } else if (opcode === _ops_js__WEBPACK_IMPORTED_MODULE_0__.OPS.OP_PUSHDATA1) {\n    if (offset + 2 > buffer.length) return null;\n    num = uint8array_tools__WEBPACK_IMPORTED_MODULE_1__.readUInt8(buffer, offset + 1);\n    size = 2;\n    // 16 bit\n  } else if (opcode === _ops_js__WEBPACK_IMPORTED_MODULE_0__.OPS.OP_PUSHDATA2) {\n    if (offset + 3 > buffer.length) return null;\n    num = uint8array_tools__WEBPACK_IMPORTED_MODULE_1__.readUInt16(buffer, offset + 1, 'LE');\n    size = 3;\n    // 32 bit\n  } else {\n    if (offset + 5 > buffer.length) return null;\n    if (opcode !== _ops_js__WEBPACK_IMPORTED_MODULE_0__.OPS.OP_PUSHDATA4) throw new Error('Unexpected opcode');\n    num = uint8array_tools__WEBPACK_IMPORTED_MODULE_1__.readUInt32(buffer, offset + 1, 'LE');\n    size = 5;\n  }\n  return {\n    opcode,\n    number: num,\n    size,\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9wdXNoX2RhdGEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0I7QUFDVztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxhQUFhLHdDQUFHO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLElBQUksd0RBQWdCO0FBQ3BCO0FBQ0EsSUFBSTtBQUNKLElBQUksd0RBQWdCLGlCQUFpQix3Q0FBRztBQUN4QyxJQUFJLHdEQUFnQjtBQUNwQjtBQUNBLElBQUk7QUFDSixJQUFJLHdEQUFnQixpQkFBaUIsd0NBQUc7QUFDeEMsSUFBSSx5REFBaUI7QUFDckI7QUFDQSxJQUFJO0FBQ0osSUFBSSx3REFBZ0IsaUJBQWlCLHdDQUFHO0FBQ3hDLElBQUkseURBQWlCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsaUJBQWlCLHVEQUFlO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLGVBQWUsd0NBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsSUFBSSxvQkFBb0Isd0NBQUc7QUFDM0I7QUFDQSxVQUFVLHVEQUFlO0FBQ3pCO0FBQ0E7QUFDQSxJQUFJLG9CQUFvQix3Q0FBRztBQUMzQjtBQUNBLFVBQVUsd0RBQWdCO0FBQzFCO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxtQkFBbUIsd0NBQUc7QUFDdEIsVUFBVSx3REFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2J0Yy9taWRsLXgtYml0Y29pbi1zdW1taXQtaGFja2F0aG9uLTIwMjUvdXR4by1wc2J0LWRlbW8vbm9kZV9tb2R1bGVzLy5wbnBtL2JpdGNvaW5qcy1saWJANy4wLjAtcmMuMF90eXBlc2NyaXB0QDUuOS4yL25vZGVfbW9kdWxlcy9iaXRjb2luanMtbGliL3NyYy9lc20vcHVzaF9kYXRhLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9QUyB9IGZyb20gJy4vb3BzLmpzJztcbmltcG9ydCAqIGFzIHRvb2xzIGZyb20gJ3VpbnQ4YXJyYXktdG9vbHMnO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBlbmNvZGluZyBsZW5ndGggb2YgYSBudW1iZXIgdXNlZCBmb3IgcHVzaCBkYXRhIGluIEJpdGNvaW4gdHJhbnNhY3Rpb25zLlxuICogQHBhcmFtIGkgVGhlIG51bWJlciB0byBjYWxjdWxhdGUgdGhlIGVuY29kaW5nIGxlbmd0aCBmb3IuXG4gKiBAcmV0dXJucyBUaGUgZW5jb2RpbmcgbGVuZ3RoIG9mIHRoZSBudW1iZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGluZ0xlbmd0aChpKSB7XG4gIHJldHVybiBpIDwgT1BTLk9QX1BVU0hEQVRBMSA/IDEgOiBpIDw9IDB4ZmYgPyAyIDogaSA8PSAweGZmZmYgPyAzIDogNTtcbn1cbi8qKlxuICogRW5jb2RlcyBhIG51bWJlciBpbnRvIGEgYnVmZmVyIHVzaW5nIGEgdmFyaWFibGUtbGVuZ3RoIGVuY29kaW5nIHNjaGVtZS5cbiAqIFRoZSBlbmNvZGVkIGJ1ZmZlciBpcyB3cml0dGVuIHN0YXJ0aW5nIGF0IHRoZSBzcGVjaWZpZWQgb2Zmc2V0LlxuICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgZW5jb2RlZCBidWZmZXIuXG4gKlxuICogQHBhcmFtIGJ1ZmZlciAtIFRoZSBidWZmZXIgdG8gd3JpdGUgdGhlIGVuY29kZWQgZGF0YSBpbnRvLlxuICogQHBhcmFtIG51bSAtIFRoZSBudW1iZXIgdG8gZW5jb2RlLlxuICogQHBhcmFtIG9mZnNldCAtIFRoZSBvZmZzZXQgYXQgd2hpY2ggdG8gc3RhcnQgd3JpdGluZyB0aGUgZW5jb2RlZCBidWZmZXIuXG4gKiBAcmV0dXJucyBUaGUgc2l6ZSBvZiB0aGUgZW5jb2RlZCBidWZmZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGUoYnVmZmVyLCBudW0sIG9mZnNldCkge1xuICBjb25zdCBzaXplID0gZW5jb2RpbmdMZW5ndGgobnVtKTtcbiAgLy8gfjYgYml0XG4gIGlmIChzaXplID09PSAxKSB7XG4gICAgdG9vbHMud3JpdGVVSW50OChidWZmZXIsIG9mZnNldCwgbnVtKTtcbiAgICAvLyA4IGJpdFxuICB9IGVsc2UgaWYgKHNpemUgPT09IDIpIHtcbiAgICB0b29scy53cml0ZVVJbnQ4KGJ1ZmZlciwgb2Zmc2V0LCBPUFMuT1BfUFVTSERBVEExKTtcbiAgICB0b29scy53cml0ZVVJbnQ4KGJ1ZmZlciwgb2Zmc2V0ICsgMSwgbnVtKTtcbiAgICAvLyAxNiBiaXRcbiAgfSBlbHNlIGlmIChzaXplID09PSAzKSB7XG4gICAgdG9vbHMud3JpdGVVSW50OChidWZmZXIsIG9mZnNldCwgT1BTLk9QX1BVU0hEQVRBMik7XG4gICAgdG9vbHMud3JpdGVVSW50MTYoYnVmZmVyLCBvZmZzZXQgKyAxLCBudW0sICdMRScpO1xuICAgIC8vIDMyIGJpdFxuICB9IGVsc2Uge1xuICAgIHRvb2xzLndyaXRlVUludDgoYnVmZmVyLCBvZmZzZXQsIE9QUy5PUF9QVVNIREFUQTQpO1xuICAgIHRvb2xzLndyaXRlVUludDMyKGJ1ZmZlciwgb2Zmc2V0ICsgMSwgbnVtLCAnTEUnKTtcbiAgfVxuICByZXR1cm4gc2l6ZTtcbn1cbi8qKlxuICogRGVjb2RlcyBhIGJ1ZmZlciBhbmQgcmV0dXJucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgb3Bjb2RlLCBudW1iZXIsIGFuZCBzaXplLlxuICogQHBhcmFtIGJ1ZmZlciAtIFRoZSBidWZmZXIgdG8gZGVjb2RlLlxuICogQHBhcmFtIG9mZnNldCAtIFRoZSBvZmZzZXQgd2l0aGluIHRoZSBidWZmZXIgdG8gc3RhcnQgZGVjb2RpbmcuXG4gKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgb3Bjb2RlLCBudW1iZXIsIGFuZCBzaXplLCBvciBudWxsIGlmIGRlY29kaW5nIGZhaWxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlKGJ1ZmZlciwgb2Zmc2V0KSB7XG4gIGNvbnN0IG9wY29kZSA9IHRvb2xzLnJlYWRVSW50OChidWZmZXIsIG9mZnNldCk7XG4gIGxldCBudW07XG4gIGxldCBzaXplO1xuICAvLyB+NiBiaXRcbiAgaWYgKG9wY29kZSA8IE9QUy5PUF9QVVNIREFUQTEpIHtcbiAgICBudW0gPSBvcGNvZGU7XG4gICAgc2l6ZSA9IDE7XG4gICAgLy8gOCBiaXRcbiAgfSBlbHNlIGlmIChvcGNvZGUgPT09IE9QUy5PUF9QVVNIREFUQTEpIHtcbiAgICBpZiAob2Zmc2V0ICsgMiA+IGJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIG51bSA9IHRvb2xzLnJlYWRVSW50OChidWZmZXIsIG9mZnNldCArIDEpO1xuICAgIHNpemUgPSAyO1xuICAgIC8vIDE2IGJpdFxuICB9IGVsc2UgaWYgKG9wY29kZSA9PT0gT1BTLk9QX1BVU0hEQVRBMikge1xuICAgIGlmIChvZmZzZXQgKyAzID4gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgbnVtID0gdG9vbHMucmVhZFVJbnQxNihidWZmZXIsIG9mZnNldCArIDEsICdMRScpO1xuICAgIHNpemUgPSAzO1xuICAgIC8vIDMyIGJpdFxuICB9IGVsc2Uge1xuICAgIGlmIChvZmZzZXQgKyA1ID4gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgaWYgKG9wY29kZSAhPT0gT1BTLk9QX1BVU0hEQVRBNCkgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIG9wY29kZScpO1xuICAgIG51bSA9IHRvb2xzLnJlYWRVSW50MzIoYnVmZmVyLCBvZmZzZXQgKyAxLCAnTEUnKTtcbiAgICBzaXplID0gNTtcbiAgfVxuICByZXR1cm4ge1xuICAgIG9wY29kZSxcbiAgICBudW1iZXI6IG51bSxcbiAgICBzaXplLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/push_data.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OPS: () => (/* reexport safe */ _ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS),\n/* harmony export */   compile: () => (/* binding */ compile),\n/* harmony export */   countNonPushOnlyOPs: () => (/* binding */ countNonPushOnlyOPs),\n/* harmony export */   decompile: () => (/* binding */ decompile),\n/* harmony export */   fromASM: () => (/* binding */ fromASM),\n/* harmony export */   isCanonicalPubKey: () => (/* binding */ isCanonicalPubKey),\n/* harmony export */   isCanonicalScriptSignature: () => (/* binding */ isCanonicalScriptSignature),\n/* harmony export */   isDefinedHashType: () => (/* binding */ isDefinedHashType),\n/* harmony export */   isPushOnly: () => (/* binding */ isPushOnly),\n/* harmony export */   number: () => (/* binding */ number),\n/* harmony export */   signature: () => (/* binding */ signature),\n/* harmony export */   toASM: () => (/* binding */ toASM),\n/* harmony export */   toStack: () => (/* binding */ toStack)\n/* harmony export */ });\n/* harmony import */ var _bip66_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bip66.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/bip66.js\");\n/* harmony import */ var _ops_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ops.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/ops.js\");\n/* harmony import */ var _push_data_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./push_data.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/push_data.js\");\n/* harmony import */ var _script_number_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./script_number.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script_number.js\");\n/* harmony import */ var _script_signature_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./script_signature.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script_signature.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n/**\n * Script tools, including decompile, compile, toASM, fromASM, toStack, isCanonicalPubKey, isCanonicalScriptSignature\n * @packageDocumentation\n */\n\n\n\n\n\n\n\n\nconst OP_INT_BASE = _ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS.OP_RESERVED; // OP_1 - 1\n\nconst StackSchema = valibot__WEBPACK_IMPORTED_MODULE_7__.array(valibot__WEBPACK_IMPORTED_MODULE_7__.union([valibot__WEBPACK_IMPORTED_MODULE_7__.instance(Uint8Array), valibot__WEBPACK_IMPORTED_MODULE_7__.number()]));\nfunction isOPInt(value) {\n  return (\n    valibot__WEBPACK_IMPORTED_MODULE_7__.is(valibot__WEBPACK_IMPORTED_MODULE_7__.number(), value) &&\n    (value === _ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS.OP_0 ||\n      (value >= _ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS.OP_1 && value <= _ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS.OP_16) ||\n      value === _ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS.OP_1NEGATE)\n  );\n}\nfunction isPushOnlyChunk(value) {\n  return valibot__WEBPACK_IMPORTED_MODULE_7__.is(_types_js__WEBPACK_IMPORTED_MODULE_5__.BufferSchema, value) || isOPInt(value);\n}\nfunction isPushOnly(value) {\n  return valibot__WEBPACK_IMPORTED_MODULE_7__.is(valibot__WEBPACK_IMPORTED_MODULE_7__.pipe(valibot__WEBPACK_IMPORTED_MODULE_7__.any(), valibot__WEBPACK_IMPORTED_MODULE_7__.everyItem(isPushOnlyChunk)), value);\n}\nfunction countNonPushOnlyOPs(value) {\n  return value.length - value.filter(isPushOnlyChunk).length;\n}\nfunction asMinimalOP(buffer) {\n  if (buffer.length === 0) return _ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS.OP_0;\n  if (buffer.length !== 1) return;\n  if (buffer[0] >= 1 && buffer[0] <= 16) return OP_INT_BASE + buffer[0];\n  if (buffer[0] === 0x81) return _ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS.OP_1NEGATE;\n}\nfunction chunksIsBuffer(buf) {\n  return buf instanceof Uint8Array;\n}\nfunction chunksIsArray(buf) {\n  return valibot__WEBPACK_IMPORTED_MODULE_7__.is(StackSchema, buf);\n}\nfunction singleChunkIsBuffer(buf) {\n  return buf instanceof Uint8Array;\n}\n/**\n * Compiles an array of chunks into a Buffer.\n *\n * @param chunks - The array of chunks to compile.\n * @returns The compiled Buffer.\n * @throws Error if the compilation fails.\n */\nfunction compile(chunks) {\n  // TODO: remove me\n  if (chunksIsBuffer(chunks)) return chunks;\n  valibot__WEBPACK_IMPORTED_MODULE_7__.parse(StackSchema, chunks);\n  const bufferSize = chunks.reduce((accum, chunk) => {\n    // data chunk\n    if (singleChunkIsBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      if (chunk.length === 1 && asMinimalOP(chunk) !== undefined) {\n        return accum + 1;\n      }\n      return accum + _push_data_js__WEBPACK_IMPORTED_MODULE_2__.encodingLength(chunk.length) + chunk.length;\n    }\n    // opcode\n    return accum + 1;\n  }, 0.0);\n  const buffer = new Uint8Array(bufferSize);\n  let offset = 0;\n  chunks.forEach(chunk => {\n    // data chunk\n    if (singleChunkIsBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      const opcode = asMinimalOP(chunk);\n      if (opcode !== undefined) {\n        uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.writeUInt8(buffer, offset, opcode);\n        offset += 1;\n        return;\n      }\n      offset += _push_data_js__WEBPACK_IMPORTED_MODULE_2__.encode(buffer, chunk.length, offset);\n      buffer.set(chunk, offset);\n      offset += chunk.length;\n      // opcode\n    } else {\n      uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.writeUInt8(buffer, offset, chunk);\n      offset += 1;\n    }\n  });\n  if (offset !== buffer.length) throw new Error('Could not decode chunks');\n  return buffer;\n}\nfunction decompile(buffer) {\n  // TODO: remove me\n  if (chunksIsArray(buffer)) return buffer;\n  valibot__WEBPACK_IMPORTED_MODULE_7__.parse(_types_js__WEBPACK_IMPORTED_MODULE_5__.BufferSchema, buffer);\n  const chunks = [];\n  let i = 0;\n  while (i < buffer.length) {\n    const opcode = buffer[i];\n    // data chunk\n    if (opcode > _ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS.OP_0 && opcode <= _ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS.OP_PUSHDATA4) {\n      const d = _push_data_js__WEBPACK_IMPORTED_MODULE_2__.decode(buffer, i);\n      // did reading a pushDataInt fail?\n      if (d === null) return null;\n      i += d.size;\n      // attempt to read too much data?\n      if (i + d.number > buffer.length) return null;\n      const data = buffer.slice(i, i + d.number);\n      i += d.number;\n      // decompile minimally\n      const op = asMinimalOP(data);\n      if (op !== undefined) {\n        chunks.push(op);\n      } else {\n        chunks.push(data);\n      }\n      // opcode\n    } else {\n      chunks.push(opcode);\n      i += 1;\n    }\n  }\n  return chunks;\n}\n/**\n * Converts the given chunks into an ASM (Assembly) string representation.\n * If the chunks parameter is a Buffer, it will be decompiled into a Stack before conversion.\n * @param chunks - The chunks to convert into ASM.\n * @returns The ASM string representation of the chunks.\n */\nfunction toASM(chunks) {\n  if (chunksIsBuffer(chunks)) {\n    chunks = decompile(chunks);\n  }\n  if (!chunks) {\n    throw new Error('Could not convert invalid chunks to ASM');\n  }\n  return chunks\n    .map(chunk => {\n      // data?\n      if (singleChunkIsBuffer(chunk)) {\n        const op = asMinimalOP(chunk);\n        if (op === undefined) return uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.toHex(chunk);\n        chunk = op;\n      }\n      // opcode!\n      return _ops_js__WEBPACK_IMPORTED_MODULE_1__.REVERSE_OPS[chunk];\n    })\n    .join(' ');\n}\n/**\n * Converts an ASM string to a Buffer.\n * @param asm The ASM string to convert.\n * @returns The converted Buffer.\n */\nfunction fromASM(asm) {\n  valibot__WEBPACK_IMPORTED_MODULE_7__.parse(valibot__WEBPACK_IMPORTED_MODULE_7__.string(), asm);\n  return compile(\n    asm.split(' ').map(chunkStr => {\n      // opcode?\n      if (_ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS[chunkStr] !== undefined) return _ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS[chunkStr];\n      valibot__WEBPACK_IMPORTED_MODULE_7__.parse(_types_js__WEBPACK_IMPORTED_MODULE_5__.HexSchema, chunkStr);\n      // data!\n      return uint8array_tools__WEBPACK_IMPORTED_MODULE_6__.fromHex(chunkStr);\n    }),\n  );\n}\n/**\n * Converts the given chunks into a stack of buffers.\n *\n * @param chunks - The chunks to convert.\n * @returns The stack of buffers.\n */\nfunction toStack(chunks) {\n  chunks = decompile(chunks);\n  valibot__WEBPACK_IMPORTED_MODULE_7__.parse(valibot__WEBPACK_IMPORTED_MODULE_7__.custom(isPushOnly), chunks);\n  return chunks.map(op => {\n    if (singleChunkIsBuffer(op)) return op;\n    if (op === _ops_js__WEBPACK_IMPORTED_MODULE_1__.OPS.OP_0) return new Uint8Array(0);\n    return _script_number_js__WEBPACK_IMPORTED_MODULE_3__.encode(op - OP_INT_BASE);\n  });\n}\nfunction isCanonicalPubKey(buffer) {\n  return _types_js__WEBPACK_IMPORTED_MODULE_5__.isPoint(buffer);\n}\nfunction isDefinedHashType(hashType) {\n  const hashTypeMod = hashType & ~0x80;\n  return hashTypeMod > 0x00 && hashTypeMod < 0x04;\n}\nfunction isCanonicalScriptSignature(buffer) {\n  if (!(buffer instanceof Uint8Array)) return false;\n  if (!isDefinedHashType(buffer[buffer.length - 1])) return false;\n  return _bip66_js__WEBPACK_IMPORTED_MODULE_0__.check(buffer.slice(0, -1));\n}\nconst number = _script_number_js__WEBPACK_IMPORTED_MODULE_3__;\nconst signature = _script_signature_js__WEBPACK_IMPORTED_MODULE_4__;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9zY3JpcHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDb0M7QUFDUTtBQUNEO0FBQ1E7QUFDTTtBQUNyQjtBQUNNO0FBQ2I7QUFDN0Isb0JBQW9CLHdDQUFHLGNBQWM7QUFDdEI7QUFDZixvQkFBb0IsMENBQU8sQ0FBQywwQ0FBTyxFQUFFLDZDQUFVLGNBQWMsMkNBQVE7QUFDckU7QUFDQTtBQUNBLElBQUksdUNBQUksQ0FBQywyQ0FBUTtBQUNqQixlQUFlLHdDQUFHO0FBQ2xCLGdCQUFnQix3Q0FBRyxrQkFBa0Isd0NBQUc7QUFDeEMsZ0JBQWdCLHdDQUFHO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUNBQUksQ0FBQyxtREFBa0I7QUFDaEM7QUFDTztBQUNQLFNBQVMsdUNBQUksQ0FBQyx5Q0FBTSxDQUFDLHdDQUFLLElBQUksOENBQVc7QUFDekM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx3Q0FBRztBQUNyQztBQUNBO0FBQ0EsaUNBQWlDLHdDQUFHO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVDQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLEVBQUUsMENBQU87QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix5REFBdUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHdEQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaURBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU0sd0RBQWdCO0FBQ3RCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsRUFBRSwwQ0FBTyxDQUFDLG1EQUFrQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdDQUFHLG1CQUFtQix3Q0FBRztBQUMxQyxnQkFBZ0IsaURBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLG1EQUFXO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZ0RBQVc7QUFDeEIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxFQUFFLDBDQUFPLENBQUMsMkNBQVE7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsVUFBVSx3Q0FBRyxpQ0FBaUMsd0NBQUc7QUFDakQsTUFBTSwwQ0FBTyxDQUFDLGdEQUFlO0FBQzdCO0FBQ0EsYUFBYSxxREFBYTtBQUMxQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxFQUFFLDBDQUFPLENBQUMsMkNBQVE7QUFDbEI7QUFDQTtBQUNBLGVBQWUsd0NBQUc7QUFDbEIsV0FBVyxxREFBbUI7QUFDOUIsR0FBRztBQUNIO0FBQ087QUFDUCxTQUFTLDhDQUFhO0FBQ3RCO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxTQUFTLDRDQUFXO0FBQ3BCO0FBQ08sZUFBZSw4Q0FBWTtBQUMzQixrQkFBa0IsaURBQWUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9idGMvbWlkbC14LWJpdGNvaW4tc3VtbWl0LWhhY2thdGhvbi0yMDI1L3V0eG8tcHNidC1kZW1vL25vZGVfbW9kdWxlcy8ucG5wbS9iaXRjb2luanMtbGliQDcuMC4wLXJjLjBfdHlwZXNjcmlwdEA1LjkuMi9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYi9zcmMvZXNtL3NjcmlwdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNjcmlwdCB0b29scywgaW5jbHVkaW5nIGRlY29tcGlsZSwgY29tcGlsZSwgdG9BU00sIGZyb21BU00sIHRvU3RhY2ssIGlzQ2Fub25pY2FsUHViS2V5LCBpc0Nhbm9uaWNhbFNjcmlwdFNpZ25hdHVyZVxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi9cbmltcG9ydCAqIGFzIGJpcDY2IGZyb20gJy4vYmlwNjYuanMnO1xuaW1wb3J0IHsgT1BTLCBSRVZFUlNFX09QUyB9IGZyb20gJy4vb3BzLmpzJztcbmltcG9ydCAqIGFzIHB1c2hkYXRhIGZyb20gJy4vcHVzaF9kYXRhLmpzJztcbmltcG9ydCAqIGFzIHNjcmlwdE51bWJlciBmcm9tICcuL3NjcmlwdF9udW1iZXIuanMnO1xuaW1wb3J0ICogYXMgc2NyaXB0U2lnbmF0dXJlIGZyb20gJy4vc2NyaXB0X3NpZ25hdHVyZS5qcyc7XG5pbXBvcnQgKiBhcyB0eXBlcyBmcm9tICcuL3R5cGVzLmpzJztcbmltcG9ydCAqIGFzIHRvb2xzIGZyb20gJ3VpbnQ4YXJyYXktdG9vbHMnO1xuaW1wb3J0ICogYXMgdiBmcm9tICd2YWxpYm90JztcbmNvbnN0IE9QX0lOVF9CQVNFID0gT1BTLk9QX1JFU0VSVkVEOyAvLyBPUF8xIC0gMVxuZXhwb3J0IHsgT1BTIH07XG5jb25zdCBTdGFja1NjaGVtYSA9IHYuYXJyYXkodi51bmlvbihbdi5pbnN0YW5jZShVaW50OEFycmF5KSwgdi5udW1iZXIoKV0pKTtcbmZ1bmN0aW9uIGlzT1BJbnQodmFsdWUpIHtcbiAgcmV0dXJuIChcbiAgICB2LmlzKHYubnVtYmVyKCksIHZhbHVlKSAmJlxuICAgICh2YWx1ZSA9PT0gT1BTLk9QXzAgfHxcbiAgICAgICh2YWx1ZSA+PSBPUFMuT1BfMSAmJiB2YWx1ZSA8PSBPUFMuT1BfMTYpIHx8XG4gICAgICB2YWx1ZSA9PT0gT1BTLk9QXzFORUdBVEUpXG4gICk7XG59XG5mdW5jdGlvbiBpc1B1c2hPbmx5Q2h1bmsodmFsdWUpIHtcbiAgcmV0dXJuIHYuaXModHlwZXMuQnVmZmVyU2NoZW1hLCB2YWx1ZSkgfHwgaXNPUEludCh2YWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQdXNoT25seSh2YWx1ZSkge1xuICByZXR1cm4gdi5pcyh2LnBpcGUodi5hbnkoKSwgdi5ldmVyeUl0ZW0oaXNQdXNoT25seUNodW5rKSksIHZhbHVlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb3VudE5vblB1c2hPbmx5T1BzKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZS5sZW5ndGggLSB2YWx1ZS5maWx0ZXIoaXNQdXNoT25seUNodW5rKS5sZW5ndGg7XG59XG5mdW5jdGlvbiBhc01pbmltYWxPUChidWZmZXIpIHtcbiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHJldHVybiBPUFMuT1BfMDtcbiAgaWYgKGJ1ZmZlci5sZW5ndGggIT09IDEpIHJldHVybjtcbiAgaWYgKGJ1ZmZlclswXSA+PSAxICYmIGJ1ZmZlclswXSA8PSAxNikgcmV0dXJuIE9QX0lOVF9CQVNFICsgYnVmZmVyWzBdO1xuICBpZiAoYnVmZmVyWzBdID09PSAweDgxKSByZXR1cm4gT1BTLk9QXzFORUdBVEU7XG59XG5mdW5jdGlvbiBjaHVua3NJc0J1ZmZlcihidWYpIHtcbiAgcmV0dXJuIGJ1ZiBpbnN0YW5jZW9mIFVpbnQ4QXJyYXk7XG59XG5mdW5jdGlvbiBjaHVua3NJc0FycmF5KGJ1Zikge1xuICByZXR1cm4gdi5pcyhTdGFja1NjaGVtYSwgYnVmKTtcbn1cbmZ1bmN0aW9uIHNpbmdsZUNodW5rSXNCdWZmZXIoYnVmKSB7XG4gIHJldHVybiBidWYgaW5zdGFuY2VvZiBVaW50OEFycmF5O1xufVxuLyoqXG4gKiBDb21waWxlcyBhbiBhcnJheSBvZiBjaHVua3MgaW50byBhIEJ1ZmZlci5cbiAqXG4gKiBAcGFyYW0gY2h1bmtzIC0gVGhlIGFycmF5IG9mIGNodW5rcyB0byBjb21waWxlLlxuICogQHJldHVybnMgVGhlIGNvbXBpbGVkIEJ1ZmZlci5cbiAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIGNvbXBpbGF0aW9uIGZhaWxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGlsZShjaHVua3MpIHtcbiAgLy8gVE9ETzogcmVtb3ZlIG1lXG4gIGlmIChjaHVua3NJc0J1ZmZlcihjaHVua3MpKSByZXR1cm4gY2h1bmtzO1xuICB2LnBhcnNlKFN0YWNrU2NoZW1hLCBjaHVua3MpO1xuICBjb25zdCBidWZmZXJTaXplID0gY2h1bmtzLnJlZHVjZSgoYWNjdW0sIGNodW5rKSA9PiB7XG4gICAgLy8gZGF0YSBjaHVua1xuICAgIGlmIChzaW5nbGVDaHVua0lzQnVmZmVyKGNodW5rKSkge1xuICAgICAgLy8gYWRoZXJlIHRvIEJJUDYyLjMsIG1pbmltYWwgcHVzaCBwb2xpY3lcbiAgICAgIGlmIChjaHVuay5sZW5ndGggPT09IDEgJiYgYXNNaW5pbWFsT1AoY2h1bmspICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGFjY3VtICsgMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2N1bSArIHB1c2hkYXRhLmVuY29kaW5nTGVuZ3RoKGNodW5rLmxlbmd0aCkgKyBjaHVuay5sZW5ndGg7XG4gICAgfVxuICAgIC8vIG9wY29kZVxuICAgIHJldHVybiBhY2N1bSArIDE7XG4gIH0sIDAuMCk7XG4gIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlclNpemUpO1xuICBsZXQgb2Zmc2V0ID0gMDtcbiAgY2h1bmtzLmZvckVhY2goY2h1bmsgPT4ge1xuICAgIC8vIGRhdGEgY2h1bmtcbiAgICBpZiAoc2luZ2xlQ2h1bmtJc0J1ZmZlcihjaHVuaykpIHtcbiAgICAgIC8vIGFkaGVyZSB0byBCSVA2Mi4zLCBtaW5pbWFsIHB1c2ggcG9saWN5XG4gICAgICBjb25zdCBvcGNvZGUgPSBhc01pbmltYWxPUChjaHVuayk7XG4gICAgICBpZiAob3Bjb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdG9vbHMud3JpdGVVSW50OChidWZmZXIsIG9mZnNldCwgb3Bjb2RlKTtcbiAgICAgICAgb2Zmc2V0ICs9IDE7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIG9mZnNldCArPSBwdXNoZGF0YS5lbmNvZGUoYnVmZmVyLCBjaHVuay5sZW5ndGgsIG9mZnNldCk7XG4gICAgICBidWZmZXIuc2V0KGNodW5rLCBvZmZzZXQpO1xuICAgICAgb2Zmc2V0ICs9IGNodW5rLmxlbmd0aDtcbiAgICAgIC8vIG9wY29kZVxuICAgIH0gZWxzZSB7XG4gICAgICB0b29scy53cml0ZVVJbnQ4KGJ1ZmZlciwgb2Zmc2V0LCBjaHVuayk7XG4gICAgICBvZmZzZXQgKz0gMTtcbiAgICB9XG4gIH0pO1xuICBpZiAob2Zmc2V0ICE9PSBidWZmZXIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBkZWNvZGUgY2h1bmtzJyk7XG4gIHJldHVybiBidWZmZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gZGVjb21waWxlKGJ1ZmZlcikge1xuICAvLyBUT0RPOiByZW1vdmUgbWVcbiAgaWYgKGNodW5rc0lzQXJyYXkoYnVmZmVyKSkgcmV0dXJuIGJ1ZmZlcjtcbiAgdi5wYXJzZSh0eXBlcy5CdWZmZXJTY2hlbWEsIGJ1ZmZlcik7XG4gIGNvbnN0IGNodW5rcyA9IFtdO1xuICBsZXQgaSA9IDA7XG4gIHdoaWxlIChpIDwgYnVmZmVyLmxlbmd0aCkge1xuICAgIGNvbnN0IG9wY29kZSA9IGJ1ZmZlcltpXTtcbiAgICAvLyBkYXRhIGNodW5rXG4gICAgaWYgKG9wY29kZSA+IE9QUy5PUF8wICYmIG9wY29kZSA8PSBPUFMuT1BfUFVTSERBVEE0KSB7XG4gICAgICBjb25zdCBkID0gcHVzaGRhdGEuZGVjb2RlKGJ1ZmZlciwgaSk7XG4gICAgICAvLyBkaWQgcmVhZGluZyBhIHB1c2hEYXRhSW50IGZhaWw/XG4gICAgICBpZiAoZCA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgICBpICs9IGQuc2l6ZTtcbiAgICAgIC8vIGF0dGVtcHQgdG8gcmVhZCB0b28gbXVjaCBkYXRhP1xuICAgICAgaWYgKGkgKyBkLm51bWJlciA+IGJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgZGF0YSA9IGJ1ZmZlci5zbGljZShpLCBpICsgZC5udW1iZXIpO1xuICAgICAgaSArPSBkLm51bWJlcjtcbiAgICAgIC8vIGRlY29tcGlsZSBtaW5pbWFsbHlcbiAgICAgIGNvbnN0IG9wID0gYXNNaW5pbWFsT1AoZGF0YSk7XG4gICAgICBpZiAob3AgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjaHVua3MucHVzaChvcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaHVua3MucHVzaChkYXRhKTtcbiAgICAgIH1cbiAgICAgIC8vIG9wY29kZVxuICAgIH0gZWxzZSB7XG4gICAgICBjaHVua3MucHVzaChvcGNvZGUpO1xuICAgICAgaSArPSAxO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2h1bmtzO1xufVxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gY2h1bmtzIGludG8gYW4gQVNNIChBc3NlbWJseSkgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxuICogSWYgdGhlIGNodW5rcyBwYXJhbWV0ZXIgaXMgYSBCdWZmZXIsIGl0IHdpbGwgYmUgZGVjb21waWxlZCBpbnRvIGEgU3RhY2sgYmVmb3JlIGNvbnZlcnNpb24uXG4gKiBAcGFyYW0gY2h1bmtzIC0gVGhlIGNodW5rcyB0byBjb252ZXJ0IGludG8gQVNNLlxuICogQHJldHVybnMgVGhlIEFTTSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvQVNNKGNodW5rcykge1xuICBpZiAoY2h1bmtzSXNCdWZmZXIoY2h1bmtzKSkge1xuICAgIGNodW5rcyA9IGRlY29tcGlsZShjaHVua3MpO1xuICB9XG4gIGlmICghY2h1bmtzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgY29udmVydCBpbnZhbGlkIGNodW5rcyB0byBBU00nKTtcbiAgfVxuICByZXR1cm4gY2h1bmtzXG4gICAgLm1hcChjaHVuayA9PiB7XG4gICAgICAvLyBkYXRhP1xuICAgICAgaWYgKHNpbmdsZUNodW5rSXNCdWZmZXIoY2h1bmspKSB7XG4gICAgICAgIGNvbnN0IG9wID0gYXNNaW5pbWFsT1AoY2h1bmspO1xuICAgICAgICBpZiAob3AgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRvb2xzLnRvSGV4KGNodW5rKTtcbiAgICAgICAgY2h1bmsgPSBvcDtcbiAgICAgIH1cbiAgICAgIC8vIG9wY29kZSFcbiAgICAgIHJldHVybiBSRVZFUlNFX09QU1tjaHVua107XG4gICAgfSlcbiAgICAuam9pbignICcpO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhbiBBU00gc3RyaW5nIHRvIGEgQnVmZmVyLlxuICogQHBhcmFtIGFzbSBUaGUgQVNNIHN0cmluZyB0byBjb252ZXJ0LlxuICogQHJldHVybnMgVGhlIGNvbnZlcnRlZCBCdWZmZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQVNNKGFzbSkge1xuICB2LnBhcnNlKHYuc3RyaW5nKCksIGFzbSk7XG4gIHJldHVybiBjb21waWxlKFxuICAgIGFzbS5zcGxpdCgnICcpLm1hcChjaHVua1N0ciA9PiB7XG4gICAgICAvLyBvcGNvZGU/XG4gICAgICBpZiAoT1BTW2NodW5rU3RyXSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gT1BTW2NodW5rU3RyXTtcbiAgICAgIHYucGFyc2UodHlwZXMuSGV4U2NoZW1hLCBjaHVua1N0cik7XG4gICAgICAvLyBkYXRhIVxuICAgICAgcmV0dXJuIHRvb2xzLmZyb21IZXgoY2h1bmtTdHIpO1xuICAgIH0pLFxuICApO1xufVxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gY2h1bmtzIGludG8gYSBzdGFjayBvZiBidWZmZXJzLlxuICpcbiAqIEBwYXJhbSBjaHVua3MgLSBUaGUgY2h1bmtzIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyBUaGUgc3RhY2sgb2YgYnVmZmVycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RhY2soY2h1bmtzKSB7XG4gIGNodW5rcyA9IGRlY29tcGlsZShjaHVua3MpO1xuICB2LnBhcnNlKHYuY3VzdG9tKGlzUHVzaE9ubHkpLCBjaHVua3MpO1xuICByZXR1cm4gY2h1bmtzLm1hcChvcCA9PiB7XG4gICAgaWYgKHNpbmdsZUNodW5rSXNCdWZmZXIob3ApKSByZXR1cm4gb3A7XG4gICAgaWYgKG9wID09PSBPUFMuT1BfMCkgcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO1xuICAgIHJldHVybiBzY3JpcHROdW1iZXIuZW5jb2RlKG9wIC0gT1BfSU5UX0JBU0UpO1xuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Nhbm9uaWNhbFB1YktleShidWZmZXIpIHtcbiAgcmV0dXJuIHR5cGVzLmlzUG9pbnQoYnVmZmVyKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0RlZmluZWRIYXNoVHlwZShoYXNoVHlwZSkge1xuICBjb25zdCBoYXNoVHlwZU1vZCA9IGhhc2hUeXBlICYgfjB4ODA7XG4gIHJldHVybiBoYXNoVHlwZU1vZCA+IDB4MDAgJiYgaGFzaFR5cGVNb2QgPCAweDA0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2Fub25pY2FsU2NyaXB0U2lnbmF0dXJlKGJ1ZmZlcikge1xuICBpZiAoIShidWZmZXIgaW5zdGFuY2VvZiBVaW50OEFycmF5KSkgcmV0dXJuIGZhbHNlO1xuICBpZiAoIWlzRGVmaW5lZEhhc2hUeXBlKGJ1ZmZlcltidWZmZXIubGVuZ3RoIC0gMV0pKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBiaXA2Ni5jaGVjayhidWZmZXIuc2xpY2UoMCwgLTEpKTtcbn1cbmV4cG9ydCBjb25zdCBudW1iZXIgPSBzY3JpcHROdW1iZXI7XG5leHBvcnQgY29uc3Qgc2lnbmF0dXJlID0gc2NyaXB0U2lnbmF0dXJlO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script_number.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script_number.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   encode: () => (/* binding */ encode)\n/* harmony export */ });\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n\n/**\n * Decodes a script number from a buffer.\n *\n * @param buffer - The buffer containing the script number.\n * @param maxLength - The maximum length of the script number. Defaults to 4.\n * @param minimal - Whether the script number should be minimal. Defaults to true.\n * @returns The decoded script number.\n * @throws {TypeError} If the script number overflows the maximum length.\n * @throws {Error} If the script number is not minimally encoded when minimal is true.\n */\nfunction decode(buffer, maxLength, minimal) {\n  maxLength = maxLength || 4;\n  minimal = minimal === undefined ? true : minimal;\n  const length = buffer.length;\n  if (length === 0) return 0;\n  if (length > maxLength) throw new TypeError('Script number overflow');\n  if (minimal) {\n    if ((buffer[length - 1] & 0x7f) === 0) {\n      if (length <= 1 || (buffer[length - 2] & 0x80) === 0)\n        throw new Error('Non-minimally encoded script number');\n    }\n  }\n  // 40-bit\n  if (length === 5) {\n    const a = uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.readUInt32(buffer, 0, 'LE');\n    const b = uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.readUInt8(buffer, 4);\n    if (b & 0x80) return -((b & ~0x80) * 0x100000000 + a);\n    return b * 0x100000000 + a;\n  }\n  // 32-bit / 24-bit / 16-bit / 8-bit\n  let result = 0;\n  for (let i = 0; i < length; ++i) {\n    result |= buffer[i] << (8 * i);\n  }\n  if (buffer[length - 1] & 0x80)\n    return -(result & ~(0x80 << (8 * (length - 1))));\n  return result;\n}\nfunction scriptNumSize(i) {\n  return i > 0x7fffffff\n    ? 5\n    : i > 0x7fffff\n      ? 4\n      : i > 0x7fff\n        ? 3\n        : i > 0x7f\n          ? 2\n          : i > 0x00\n            ? 1\n            : 0;\n}\n/**\n * Encodes a number into a Uint8Array using a specific format.\n *\n * @param _number - The number to encode.\n * @returns The encoded number as a Uint8Array.\n */\nfunction encode(_number) {\n  let value = Math.abs(_number);\n  const size = scriptNumSize(value);\n  const buffer = new Uint8Array(size);\n  const negative = _number < 0;\n  for (let i = 0; i < size; ++i) {\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.writeUInt8(buffer, i, value & 0xff);\n    value >>= 8;\n  }\n  if (buffer[size - 1] & 0x80) {\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.writeUInt8(buffer, size - 1, negative ? 0x80 : 0x00);\n  } else if (negative) {\n    buffer[size - 1] |= 0x80;\n  }\n  return buffer;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9zY3JpcHRfbnVtYmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QixZQUFZLE9BQU87QUFDbkI7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3REFBZ0I7QUFDOUIsY0FBYyx1REFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFVBQVU7QUFDNUIsSUFBSSx3REFBZ0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3REFBZ0I7QUFDcEIsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvYnRjL21pZGwteC1iaXRjb2luLXN1bW1pdC1oYWNrYXRob24tMjAyNS91dHhvLXBzYnQtZGVtby9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9zY3JpcHRfbnVtYmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHRvb2xzIGZyb20gJ3VpbnQ4YXJyYXktdG9vbHMnO1xuLyoqXG4gKiBEZWNvZGVzIGEgc2NyaXB0IG51bWJlciBmcm9tIGEgYnVmZmVyLlxuICpcbiAqIEBwYXJhbSBidWZmZXIgLSBUaGUgYnVmZmVyIGNvbnRhaW5pbmcgdGhlIHNjcmlwdCBudW1iZXIuXG4gKiBAcGFyYW0gbWF4TGVuZ3RoIC0gVGhlIG1heGltdW0gbGVuZ3RoIG9mIHRoZSBzY3JpcHQgbnVtYmVyLiBEZWZhdWx0cyB0byA0LlxuICogQHBhcmFtIG1pbmltYWwgLSBXaGV0aGVyIHRoZSBzY3JpcHQgbnVtYmVyIHNob3VsZCBiZSBtaW5pbWFsLiBEZWZhdWx0cyB0byB0cnVlLlxuICogQHJldHVybnMgVGhlIGRlY29kZWQgc2NyaXB0IG51bWJlci5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgdGhlIHNjcmlwdCBudW1iZXIgb3ZlcmZsb3dzIHRoZSBtYXhpbXVtIGxlbmd0aC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgc2NyaXB0IG51bWJlciBpcyBub3QgbWluaW1hbGx5IGVuY29kZWQgd2hlbiBtaW5pbWFsIGlzIHRydWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGUoYnVmZmVyLCBtYXhMZW5ndGgsIG1pbmltYWwpIHtcbiAgbWF4TGVuZ3RoID0gbWF4TGVuZ3RoIHx8IDQ7XG4gIG1pbmltYWwgPSBtaW5pbWFsID09PSB1bmRlZmluZWQgPyB0cnVlIDogbWluaW1hbDtcbiAgY29uc3QgbGVuZ3RoID0gYnVmZmVyLmxlbmd0aDtcbiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XG4gIGlmIChsZW5ndGggPiBtYXhMZW5ndGgpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1NjcmlwdCBudW1iZXIgb3ZlcmZsb3cnKTtcbiAgaWYgKG1pbmltYWwpIHtcbiAgICBpZiAoKGJ1ZmZlcltsZW5ndGggLSAxXSAmIDB4N2YpID09PSAwKSB7XG4gICAgICBpZiAobGVuZ3RoIDw9IDEgfHwgKGJ1ZmZlcltsZW5ndGggLSAyXSAmIDB4ODApID09PSAwKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vbi1taW5pbWFsbHkgZW5jb2RlZCBzY3JpcHQgbnVtYmVyJyk7XG4gICAgfVxuICB9XG4gIC8vIDQwLWJpdFxuICBpZiAobGVuZ3RoID09PSA1KSB7XG4gICAgY29uc3QgYSA9IHRvb2xzLnJlYWRVSW50MzIoYnVmZmVyLCAwLCAnTEUnKTtcbiAgICBjb25zdCBiID0gdG9vbHMucmVhZFVJbnQ4KGJ1ZmZlciwgNCk7XG4gICAgaWYgKGIgJiAweDgwKSByZXR1cm4gLSgoYiAmIH4weDgwKSAqIDB4MTAwMDAwMDAwICsgYSk7XG4gICAgcmV0dXJuIGIgKiAweDEwMDAwMDAwMCArIGE7XG4gIH1cbiAgLy8gMzItYml0IC8gMjQtYml0IC8gMTYtYml0IC8gOC1iaXRcbiAgbGV0IHJlc3VsdCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICByZXN1bHQgfD0gYnVmZmVyW2ldIDw8ICg4ICogaSk7XG4gIH1cbiAgaWYgKGJ1ZmZlcltsZW5ndGggLSAxXSAmIDB4ODApXG4gICAgcmV0dXJuIC0ocmVzdWx0ICYgfigweDgwIDw8ICg4ICogKGxlbmd0aCAtIDEpKSkpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gc2NyaXB0TnVtU2l6ZShpKSB7XG4gIHJldHVybiBpID4gMHg3ZmZmZmZmZlxuICAgID8gNVxuICAgIDogaSA+IDB4N2ZmZmZmXG4gICAgICA/IDRcbiAgICAgIDogaSA+IDB4N2ZmZlxuICAgICAgICA/IDNcbiAgICAgICAgOiBpID4gMHg3ZlxuICAgICAgICAgID8gMlxuICAgICAgICAgIDogaSA+IDB4MDBcbiAgICAgICAgICAgID8gMVxuICAgICAgICAgICAgOiAwO1xufVxuLyoqXG4gKiBFbmNvZGVzIGEgbnVtYmVyIGludG8gYSBVaW50OEFycmF5IHVzaW5nIGEgc3BlY2lmaWMgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSBfbnVtYmVyIC0gVGhlIG51bWJlciB0byBlbmNvZGUuXG4gKiBAcmV0dXJucyBUaGUgZW5jb2RlZCBudW1iZXIgYXMgYSBVaW50OEFycmF5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlKF9udW1iZXIpIHtcbiAgbGV0IHZhbHVlID0gTWF0aC5hYnMoX251bWJlcik7XG4gIGNvbnN0IHNpemUgPSBzY3JpcHROdW1TaXplKHZhbHVlKTtcbiAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSk7XG4gIGNvbnN0IG5lZ2F0aXZlID0gX251bWJlciA8IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7XG4gICAgdG9vbHMud3JpdGVVSW50OChidWZmZXIsIGksIHZhbHVlICYgMHhmZik7XG4gICAgdmFsdWUgPj49IDg7XG4gIH1cbiAgaWYgKGJ1ZmZlcltzaXplIC0gMV0gJiAweDgwKSB7XG4gICAgdG9vbHMud3JpdGVVSW50OChidWZmZXIsIHNpemUgLSAxLCBuZWdhdGl2ZSA/IDB4ODAgOiAweDAwKTtcbiAgfSBlbHNlIGlmIChuZWdhdGl2ZSkge1xuICAgIGJ1ZmZlcltzaXplIC0gMV0gfD0gMHg4MDtcbiAgfVxuICByZXR1cm4gYnVmZmVyO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script_number.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script_signature.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script_signature.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   encode: () => (/* binding */ encode)\n/* harmony export */ });\n/* harmony import */ var _bip66_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bip66.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/bip66.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n\n\n\n\n\nconst ZERO = new Uint8Array(1);\n/**\n * Converts a buffer to a DER-encoded buffer.\n * @param x - The buffer to be converted.\n * @returns The DER-encoded buffer.\n */\nfunction toDER(x) {\n  let i = 0;\n  while (x[i] === 0) ++i;\n  if (i === x.length) return ZERO;\n  x = x.slice(i);\n  if (x[0] & 0x80) return uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.concat([ZERO, x]);\n  return x;\n}\n/**\n * Converts a DER-encoded signature to a buffer.\n * If the first byte of the input buffer is 0x00, it is skipped.\n * The resulting buffer is 32 bytes long, filled with zeros if necessary.\n * @param x - The DER-encoded signature.\n * @returns The converted buffer.\n */\nfunction fromDER(x) {\n  if (x[0] === 0x00) x = x.slice(1);\n  const buffer = new Uint8Array(32);\n  const bstart = Math.max(0, 32 - x.length);\n  buffer.set(x, bstart);\n  return buffer;\n}\n// BIP62: 1 byte hashType flag (only 0x01, 0x02, 0x03, 0x81, 0x82 and 0x83 are allowed)\n/**\n * Decodes a buffer into a ScriptSignature object.\n * @param buffer - The buffer to decode.\n * @returns The decoded ScriptSignature object.\n * @throws Error if the hashType is invalid.\n */\nfunction decode(buffer) {\n  const hashType = uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.readUInt8(buffer, buffer.length - 1);\n  if (!(0,_script_js__WEBPACK_IMPORTED_MODULE_1__.isDefinedHashType)(hashType)) {\n    throw new Error('Invalid hashType ' + hashType);\n  }\n  const decoded = _bip66_js__WEBPACK_IMPORTED_MODULE_0__.decode(buffer.subarray(0, -1));\n  const r = fromDER(decoded.r);\n  const s = fromDER(decoded.s);\n  const signature = uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.concat([r, s]);\n  return { signature, hashType };\n}\n/**\n * Encodes a signature and hash type into a buffer.\n * @param signature - The signature to encode.\n * @param hashType - The hash type to encode.\n * @returns The encoded buffer.\n * @throws Error if the hashType is invalid.\n */\nfunction encode(signature, hashType) {\n  valibot__WEBPACK_IMPORTED_MODULE_4__.parse(\n    valibot__WEBPACK_IMPORTED_MODULE_4__.object({\n      signature: (0,_types_js__WEBPACK_IMPORTED_MODULE_3__.NBufferSchemaFactory)(64),\n      hashType: _types_js__WEBPACK_IMPORTED_MODULE_3__.UInt8Schema,\n    }),\n    { signature, hashType },\n  );\n  if (!(0,_script_js__WEBPACK_IMPORTED_MODULE_1__.isDefinedHashType)(hashType)) {\n    throw new Error('Invalid hashType ' + hashType);\n  }\n  const hashTypeBuffer = new Uint8Array(1);\n  uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.writeUInt8(hashTypeBuffer, 0, hashType);\n  const r = toDER(signature.slice(0, 32));\n  const s = toDER(signature.slice(32, 64));\n  return uint8array_tools__WEBPACK_IMPORTED_MODULE_2__.concat([_bip66_js__WEBPACK_IMPORTED_MODULE_0__.encode(r, s), hashTypeBuffer]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9zY3JpcHRfc2lnbmF0dXJlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBb0M7QUFDWTtBQUNuQjtBQUNhO0FBQ3FCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsb0RBQVk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsbUJBQW1CLHVEQUFlO0FBQ2xDLE9BQU8sNkRBQWlCO0FBQ3hCO0FBQ0E7QUFDQSxrQkFBa0IsNkNBQVk7QUFDOUI7QUFDQTtBQUNBLG9CQUFvQixvREFBWTtBQUNoQyxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsRUFBRSwwQ0FBTztBQUNULElBQUksMkNBQVE7QUFDWixpQkFBaUIsK0RBQW9CO0FBQ3JDLGdCQUFnQixrREFBVztBQUMzQixLQUFLO0FBQ0wsTUFBTSxxQkFBcUI7QUFDM0I7QUFDQSxPQUFPLDZEQUFpQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxFQUFFLHdEQUFnQjtBQUNsQjtBQUNBO0FBQ0EsU0FBUyxvREFBWSxFQUFFLDZDQUFZO0FBQ25DIiwic291cmNlcyI6WyIvVXNlcnMvYnRjL21pZGwteC1iaXRjb2luLXN1bW1pdC1oYWNrYXRob24tMjAyNS91dHhvLXBzYnQtZGVtby9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS9zY3JpcHRfc2lnbmF0dXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGJpcDY2IGZyb20gJy4vYmlwNjYuanMnO1xuaW1wb3J0IHsgaXNEZWZpbmVkSGFzaFR5cGUgfSBmcm9tICcuL3NjcmlwdC5qcyc7XG5pbXBvcnQgKiBhcyB2IGZyb20gJ3ZhbGlib3QnO1xuaW1wb3J0ICogYXMgdG9vbHMgZnJvbSAndWludDhhcnJheS10b29scyc7XG5pbXBvcnQgeyBOQnVmZmVyU2NoZW1hRmFjdG9yeSwgVUludDhTY2hlbWEgfSBmcm9tICcuL3R5cGVzLmpzJztcbmNvbnN0IFpFUk8gPSBuZXcgVWludDhBcnJheSgxKTtcbi8qKlxuICogQ29udmVydHMgYSBidWZmZXIgdG8gYSBERVItZW5jb2RlZCBidWZmZXIuXG4gKiBAcGFyYW0geCAtIFRoZSBidWZmZXIgdG8gYmUgY29udmVydGVkLlxuICogQHJldHVybnMgVGhlIERFUi1lbmNvZGVkIGJ1ZmZlci5cbiAqL1xuZnVuY3Rpb24gdG9ERVIoeCkge1xuICBsZXQgaSA9IDA7XG4gIHdoaWxlICh4W2ldID09PSAwKSArK2k7XG4gIGlmIChpID09PSB4Lmxlbmd0aCkgcmV0dXJuIFpFUk87XG4gIHggPSB4LnNsaWNlKGkpO1xuICBpZiAoeFswXSAmIDB4ODApIHJldHVybiB0b29scy5jb25jYXQoW1pFUk8sIHhdKTtcbiAgcmV0dXJuIHg7XG59XG4vKipcbiAqIENvbnZlcnRzIGEgREVSLWVuY29kZWQgc2lnbmF0dXJlIHRvIGEgYnVmZmVyLlxuICogSWYgdGhlIGZpcnN0IGJ5dGUgb2YgdGhlIGlucHV0IGJ1ZmZlciBpcyAweDAwLCBpdCBpcyBza2lwcGVkLlxuICogVGhlIHJlc3VsdGluZyBidWZmZXIgaXMgMzIgYnl0ZXMgbG9uZywgZmlsbGVkIHdpdGggemVyb3MgaWYgbmVjZXNzYXJ5LlxuICogQHBhcmFtIHggLSBUaGUgREVSLWVuY29kZWQgc2lnbmF0dXJlLlxuICogQHJldHVybnMgVGhlIGNvbnZlcnRlZCBidWZmZXIuXG4gKi9cbmZ1bmN0aW9uIGZyb21ERVIoeCkge1xuICBpZiAoeFswXSA9PT0gMHgwMCkgeCA9IHguc2xpY2UoMSk7XG4gIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDMyKTtcbiAgY29uc3QgYnN0YXJ0ID0gTWF0aC5tYXgoMCwgMzIgLSB4Lmxlbmd0aCk7XG4gIGJ1ZmZlci5zZXQoeCwgYnN0YXJ0KTtcbiAgcmV0dXJuIGJ1ZmZlcjtcbn1cbi8vIEJJUDYyOiAxIGJ5dGUgaGFzaFR5cGUgZmxhZyAob25seSAweDAxLCAweDAyLCAweDAzLCAweDgxLCAweDgyIGFuZCAweDgzIGFyZSBhbGxvd2VkKVxuLyoqXG4gKiBEZWNvZGVzIGEgYnVmZmVyIGludG8gYSBTY3JpcHRTaWduYXR1cmUgb2JqZWN0LlxuICogQHBhcmFtIGJ1ZmZlciAtIFRoZSBidWZmZXIgdG8gZGVjb2RlLlxuICogQHJldHVybnMgVGhlIGRlY29kZWQgU2NyaXB0U2lnbmF0dXJlIG9iamVjdC5cbiAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIGhhc2hUeXBlIGlzIGludmFsaWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGUoYnVmZmVyKSB7XG4gIGNvbnN0IGhhc2hUeXBlID0gdG9vbHMucmVhZFVJbnQ4KGJ1ZmZlciwgYnVmZmVyLmxlbmd0aCAtIDEpO1xuICBpZiAoIWlzRGVmaW5lZEhhc2hUeXBlKGhhc2hUeXBlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoYXNoVHlwZSAnICsgaGFzaFR5cGUpO1xuICB9XG4gIGNvbnN0IGRlY29kZWQgPSBiaXA2Ni5kZWNvZGUoYnVmZmVyLnN1YmFycmF5KDAsIC0xKSk7XG4gIGNvbnN0IHIgPSBmcm9tREVSKGRlY29kZWQucik7XG4gIGNvbnN0IHMgPSBmcm9tREVSKGRlY29kZWQucyk7XG4gIGNvbnN0IHNpZ25hdHVyZSA9IHRvb2xzLmNvbmNhdChbciwgc10pO1xuICByZXR1cm4geyBzaWduYXR1cmUsIGhhc2hUeXBlIH07XG59XG4vKipcbiAqIEVuY29kZXMgYSBzaWduYXR1cmUgYW5kIGhhc2ggdHlwZSBpbnRvIGEgYnVmZmVyLlxuICogQHBhcmFtIHNpZ25hdHVyZSAtIFRoZSBzaWduYXR1cmUgdG8gZW5jb2RlLlxuICogQHBhcmFtIGhhc2hUeXBlIC0gVGhlIGhhc2ggdHlwZSB0byBlbmNvZGUuXG4gKiBAcmV0dXJucyBUaGUgZW5jb2RlZCBidWZmZXIuXG4gKiBAdGhyb3dzIEVycm9yIGlmIHRoZSBoYXNoVHlwZSBpcyBpbnZhbGlkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlKHNpZ25hdHVyZSwgaGFzaFR5cGUpIHtcbiAgdi5wYXJzZShcbiAgICB2Lm9iamVjdCh7XG4gICAgICBzaWduYXR1cmU6IE5CdWZmZXJTY2hlbWFGYWN0b3J5KDY0KSxcbiAgICAgIGhhc2hUeXBlOiBVSW50OFNjaGVtYSxcbiAgICB9KSxcbiAgICB7IHNpZ25hdHVyZSwgaGFzaFR5cGUgfSxcbiAgKTtcbiAgaWYgKCFpc0RlZmluZWRIYXNoVHlwZShoYXNoVHlwZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGFzaFR5cGUgJyArIGhhc2hUeXBlKTtcbiAgfVxuICBjb25zdCBoYXNoVHlwZUJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDEpO1xuICB0b29scy53cml0ZVVJbnQ4KGhhc2hUeXBlQnVmZmVyLCAwLCBoYXNoVHlwZSk7XG4gIGNvbnN0IHIgPSB0b0RFUihzaWduYXR1cmUuc2xpY2UoMCwgMzIpKTtcbiAgY29uc3QgcyA9IHRvREVSKHNpZ25hdHVyZS5zbGljZSgzMiwgNjQpKTtcbiAgcmV0dXJuIHRvb2xzLmNvbmNhdChbYmlwNjYuZW5jb2RlKHIsIHMpLCBoYXNoVHlwZUJ1ZmZlcl0pO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script_signature.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/transaction.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/transaction.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Transaction: () => (/* binding */ Transaction)\n/* harmony export */ });\n/* harmony import */ var _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bufferutils.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/bufferutils.js\");\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./crypto.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/crypto.js\");\n/* harmony import */ var _noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @noble/hashes/sha256 */ \"(ssr)/./node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/esm/sha256.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./script.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/script.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types.js */ \"(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\");\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n\n\n\n\n\n\n\n\nfunction varSliceSize(someScript) {\n  const length = someScript.length;\n  return _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.varuint.encodingLength(length) + length;\n}\nfunction vectorSize(someVector) {\n  const length = someVector.length;\n  return (\n    _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.varuint.encodingLength(length) +\n    someVector.reduce((sum, witness) => {\n      return sum + varSliceSize(witness);\n    }, 0)\n  );\n}\nconst EMPTY_BUFFER = new Uint8Array(0);\nconst EMPTY_WITNESS = [];\nconst ZERO = uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.fromHex(\n  '0000000000000000000000000000000000000000000000000000000000000000',\n);\nconst ONE = uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.fromHex(\n  '0000000000000000000000000000000000000000000000000000000000000001',\n);\nconst VALUE_UINT64_MAX = uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.fromHex('ffffffffffffffff');\nconst BLANK_OUTPUT = {\n  script: EMPTY_BUFFER,\n  valueBuffer: VALUE_UINT64_MAX,\n};\nfunction isOutput(out) {\n  return out.value !== undefined;\n}\n/**\n * Represents a Bitcoin transaction.\n */\nclass Transaction {\n  static DEFAULT_SEQUENCE = 0xffffffff;\n  static SIGHASH_DEFAULT = 0x00;\n  static SIGHASH_ALL = 0x01;\n  static SIGHASH_NONE = 0x02;\n  static SIGHASH_SINGLE = 0x03;\n  static SIGHASH_ANYONECANPAY = 0x80;\n  static SIGHASH_OUTPUT_MASK = 0x03;\n  static SIGHASH_INPUT_MASK = 0x80;\n  static ADVANCED_TRANSACTION_MARKER = 0x00;\n  static ADVANCED_TRANSACTION_FLAG = 0x01;\n  static fromBuffer(buffer, _NO_STRICT) {\n    const bufferReader = new _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferReader(buffer);\n    const tx = new Transaction();\n    tx.version = bufferReader.readInt32();\n    const marker = bufferReader.readUInt8();\n    const flag = bufferReader.readUInt8();\n    let hasWitnesses = false;\n    if (\n      marker === Transaction.ADVANCED_TRANSACTION_MARKER &&\n      flag === Transaction.ADVANCED_TRANSACTION_FLAG\n    ) {\n      hasWitnesses = true;\n    } else {\n      bufferReader.offset -= 2;\n    }\n    const vinLen = bufferReader.readVarInt();\n    for (let i = 0; i < vinLen; ++i) {\n      tx.ins.push({\n        hash: bufferReader.readSlice(32),\n        index: bufferReader.readUInt32(),\n        script: bufferReader.readVarSlice(),\n        sequence: bufferReader.readUInt32(),\n        witness: EMPTY_WITNESS,\n      });\n    }\n    const voutLen = bufferReader.readVarInt();\n    for (let i = 0; i < voutLen; ++i) {\n      tx.outs.push({\n        value: bufferReader.readInt64(),\n        script: bufferReader.readVarSlice(),\n      });\n    }\n    if (hasWitnesses) {\n      for (let i = 0; i < vinLen; ++i) {\n        tx.ins[i].witness = bufferReader.readVector();\n      }\n      // was this pointless?\n      if (!tx.hasWitnesses())\n        throw new Error('Transaction has superfluous witness data');\n    }\n    tx.locktime = bufferReader.readUInt32();\n    if (_NO_STRICT) return tx;\n    if (bufferReader.offset !== buffer.length)\n      throw new Error('Transaction has unexpected data');\n    return tx;\n  }\n  static fromHex(hex) {\n    return Transaction.fromBuffer(uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.fromHex(hex), false);\n  }\n  static isCoinbaseHash(buffer) {\n    valibot__WEBPACK_IMPORTED_MODULE_5__.parse(_types_js__WEBPACK_IMPORTED_MODULE_3__.Hash256bitSchema, buffer);\n    for (let i = 0; i < 32; ++i) {\n      if (buffer[i] !== 0) return false;\n    }\n    return true;\n  }\n  version = 1;\n  locktime = 0;\n  ins = [];\n  outs = [];\n  isCoinbase() {\n    return (\n      this.ins.length === 1 && Transaction.isCoinbaseHash(this.ins[0].hash)\n    );\n  }\n  addInput(hash, index, sequence, scriptSig) {\n    valibot__WEBPACK_IMPORTED_MODULE_5__.parse(\n      valibot__WEBPACK_IMPORTED_MODULE_5__.tuple([\n        _types_js__WEBPACK_IMPORTED_MODULE_3__.Hash256bitSchema,\n        _types_js__WEBPACK_IMPORTED_MODULE_3__.UInt32Schema,\n        valibot__WEBPACK_IMPORTED_MODULE_5__.nullable(valibot__WEBPACK_IMPORTED_MODULE_5__.optional(_types_js__WEBPACK_IMPORTED_MODULE_3__.UInt32Schema)),\n        valibot__WEBPACK_IMPORTED_MODULE_5__.nullable(valibot__WEBPACK_IMPORTED_MODULE_5__.optional(_types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema)),\n      ]),\n      [hash, index, sequence, scriptSig],\n    );\n    if (sequence === undefined || sequence === null) {\n      sequence = Transaction.DEFAULT_SEQUENCE;\n    }\n    // Add the input and return the input's index\n    return (\n      this.ins.push({\n        hash,\n        index,\n        script: scriptSig || EMPTY_BUFFER,\n        sequence: sequence,\n        witness: EMPTY_WITNESS,\n      }) - 1\n    );\n  }\n  addOutput(scriptPubKey, value) {\n    valibot__WEBPACK_IMPORTED_MODULE_5__.parse(valibot__WEBPACK_IMPORTED_MODULE_5__.tuple([_types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema, _types_js__WEBPACK_IMPORTED_MODULE_3__.SatoshiSchema]), [\n      scriptPubKey,\n      value,\n    ]);\n    // Add the output and return the output's index\n    return (\n      this.outs.push({\n        script: scriptPubKey,\n        value,\n      }) - 1\n    );\n  }\n  hasWitnesses() {\n    return this.ins.some(x => {\n      return x.witness.length !== 0;\n    });\n  }\n  weight() {\n    const base = this.byteLength(false);\n    const total = this.byteLength(true);\n    return base * 3 + total;\n  }\n  virtualSize() {\n    return Math.ceil(this.weight() / 4);\n  }\n  byteLength(_ALLOW_WITNESS = true) {\n    const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();\n    return (\n      (hasWitnesses ? 10 : 8) +\n      _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.varuint.encodingLength(this.ins.length) +\n      _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.varuint.encodingLength(this.outs.length) +\n      this.ins.reduce((sum, input) => {\n        return sum + 40 + varSliceSize(input.script);\n      }, 0) +\n      this.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n      }, 0) +\n      (hasWitnesses\n        ? this.ins.reduce((sum, input) => {\n            return sum + vectorSize(input.witness);\n          }, 0)\n        : 0)\n    );\n  }\n  clone() {\n    const newTx = new Transaction();\n    newTx.version = this.version;\n    newTx.locktime = this.locktime;\n    newTx.ins = this.ins.map(txIn => {\n      return {\n        hash: txIn.hash,\n        index: txIn.index,\n        script: txIn.script,\n        sequence: txIn.sequence,\n        witness: txIn.witness,\n      };\n    });\n    newTx.outs = this.outs.map(txOut => {\n      return {\n        script: txOut.script,\n        value: txOut.value,\n      };\n    });\n    return newTx;\n  }\n  /**\n   * Hash transaction for signing a specific input.\n   *\n   * Bitcoin uses a different hash for each signed transaction input.\n   * This method copies the transaction, makes the necessary changes based on the\n   * hashType, and then hashes the result.\n   * This hash can then be used to sign the provided transaction input.\n   */\n  hashForSignature(inIndex, prevOutScript, hashType) {\n    valibot__WEBPACK_IMPORTED_MODULE_5__.parse(valibot__WEBPACK_IMPORTED_MODULE_5__.tuple([_types_js__WEBPACK_IMPORTED_MODULE_3__.UInt32Schema, _types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema, valibot__WEBPACK_IMPORTED_MODULE_5__.number()]), [\n      inIndex,\n      prevOutScript,\n      hashType,\n    ]);\n    // https://github.com/bitcoin/bitcoin/blob/master/src/test/sighash_tests.cpp#L29\n    if (inIndex >= this.ins.length) return ONE;\n    // ignore OP_CODESEPARATOR\n    const ourScript = _script_js__WEBPACK_IMPORTED_MODULE_2__.compile(\n      _script_js__WEBPACK_IMPORTED_MODULE_2__.decompile(prevOutScript).filter(x => {\n        return x !== _script_js__WEBPACK_IMPORTED_MODULE_2__.OPS.OP_CODESEPARATOR;\n      }),\n    );\n    const txTmp = this.clone();\n    // SIGHASH_NONE: ignore all outputs? (wildcard payee)\n    if ((hashType & 0x1f) === Transaction.SIGHASH_NONE) {\n      txTmp.outs = [];\n      // ignore sequence numbers (except at inIndex)\n      txTmp.ins.forEach((input, i) => {\n        if (i === inIndex) return;\n        input.sequence = 0;\n      });\n      // SIGHASH_SINGLE: ignore all outputs, except at the same index?\n    } else if ((hashType & 0x1f) === Transaction.SIGHASH_SINGLE) {\n      // https://github.com/bitcoin/bitcoin/blob/master/src/test/sighash_tests.cpp#L60\n      if (inIndex >= this.outs.length) return ONE;\n      // truncate outputs after\n      txTmp.outs.length = inIndex + 1;\n      // \"blank\" outputs before\n      for (let i = 0; i < inIndex; i++) {\n        txTmp.outs[i] = BLANK_OUTPUT;\n      }\n      // ignore sequence numbers (except at inIndex)\n      txTmp.ins.forEach((input, y) => {\n        if (y === inIndex) return;\n        input.sequence = 0;\n      });\n    }\n    // SIGHASH_ANYONECANPAY: ignore inputs entirely?\n    if (hashType & Transaction.SIGHASH_ANYONECANPAY) {\n      txTmp.ins = [txTmp.ins[inIndex]];\n      txTmp.ins[0].script = ourScript;\n      // SIGHASH_ALL: only ignore input scripts\n    } else {\n      // \"blank\" others input scripts\n      txTmp.ins.forEach(input => {\n        input.script = EMPTY_BUFFER;\n      });\n      txTmp.ins[inIndex].script = ourScript;\n    }\n    // serialize and hash\n    const buffer = new Uint8Array(txTmp.byteLength(false) + 4);\n    uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.writeInt32(buffer, buffer.length - 4, hashType, 'LE');\n    txTmp.__toBuffer(buffer, 0, false);\n    return _crypto_js__WEBPACK_IMPORTED_MODULE_1__.hash256(buffer);\n  }\n  hashForWitnessV1(inIndex, prevOutScripts, values, hashType, leafHash, annex) {\n    // https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki#common-signature-message\n    valibot__WEBPACK_IMPORTED_MODULE_5__.parse(\n      valibot__WEBPACK_IMPORTED_MODULE_5__.tuple([\n        _types_js__WEBPACK_IMPORTED_MODULE_3__.UInt32Schema,\n        valibot__WEBPACK_IMPORTED_MODULE_5__.array(_types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema),\n        valibot__WEBPACK_IMPORTED_MODULE_5__.array(_types_js__WEBPACK_IMPORTED_MODULE_3__.SatoshiSchema),\n        _types_js__WEBPACK_IMPORTED_MODULE_3__.UInt32Schema,\n      ]),\n      [inIndex, prevOutScripts, values, hashType],\n    );\n    if (\n      values.length !== this.ins.length ||\n      prevOutScripts.length !== this.ins.length\n    ) {\n      throw new Error('Must supply prevout script and value for all inputs');\n    }\n    const outputType =\n      hashType === Transaction.SIGHASH_DEFAULT\n        ? Transaction.SIGHASH_ALL\n        : hashType & Transaction.SIGHASH_OUTPUT_MASK;\n    const inputType = hashType & Transaction.SIGHASH_INPUT_MASK;\n    const isAnyoneCanPay = inputType === Transaction.SIGHASH_ANYONECANPAY;\n    const isNone = outputType === Transaction.SIGHASH_NONE;\n    const isSingle = outputType === Transaction.SIGHASH_SINGLE;\n    let hashPrevouts = EMPTY_BUFFER;\n    let hashAmounts = EMPTY_BUFFER;\n    let hashScriptPubKeys = EMPTY_BUFFER;\n    let hashSequences = EMPTY_BUFFER;\n    let hashOutputs = EMPTY_BUFFER;\n    if (!isAnyoneCanPay) {\n      let bufferWriter = _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter.withCapacity(36 * this.ins.length);\n      this.ins.forEach(txIn => {\n        bufferWriter.writeSlice(txIn.hash);\n        bufferWriter.writeUInt32(txIn.index);\n      });\n      hashPrevouts = (0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_6__.sha256)(bufferWriter.end());\n      bufferWriter = _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter.withCapacity(8 * this.ins.length);\n      values.forEach(value => bufferWriter.writeInt64(value));\n      hashAmounts = (0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_6__.sha256)(bufferWriter.end());\n      bufferWriter = _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter.withCapacity(\n        prevOutScripts.map(varSliceSize).reduce((a, b) => a + b),\n      );\n      prevOutScripts.forEach(prevOutScript =>\n        bufferWriter.writeVarSlice(prevOutScript),\n      );\n      hashScriptPubKeys = (0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_6__.sha256)(bufferWriter.end());\n      bufferWriter = _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter.withCapacity(4 * this.ins.length);\n      this.ins.forEach(txIn => bufferWriter.writeUInt32(txIn.sequence));\n      hashSequences = (0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_6__.sha256)(bufferWriter.end());\n    }\n    if (!(isNone || isSingle)) {\n      if (!this.outs.length)\n        throw new Error('Add outputs to the transaction before signing.');\n      const txOutsSize = this.outs\n        .map(output => 8 + varSliceSize(output.script))\n        .reduce((a, b) => a + b);\n      const bufferWriter = _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter.withCapacity(txOutsSize);\n      this.outs.forEach(out => {\n        bufferWriter.writeInt64(out.value);\n        bufferWriter.writeVarSlice(out.script);\n      });\n      hashOutputs = (0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_6__.sha256)(bufferWriter.end());\n    } else if (isSingle && inIndex < this.outs.length) {\n      const output = this.outs[inIndex];\n      const bufferWriter = _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter.withCapacity(\n        8 + varSliceSize(output.script),\n      );\n      bufferWriter.writeInt64(output.value);\n      bufferWriter.writeVarSlice(output.script);\n      hashOutputs = (0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_6__.sha256)(bufferWriter.end());\n    }\n    const spendType = (leafHash ? 2 : 0) + (annex ? 1 : 0);\n    // Length calculation from:\n    // https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki#cite_note-14\n    // With extension from:\n    // https://github.com/bitcoin/bips/blob/master/bip-0342.mediawiki#signature-validation\n    const sigMsgSize =\n      174 -\n      (isAnyoneCanPay ? 49 : 0) -\n      (isNone ? 32 : 0) +\n      (annex ? 32 : 0) +\n      (leafHash ? 37 : 0);\n    const sigMsgWriter = _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter.withCapacity(sigMsgSize);\n    sigMsgWriter.writeUInt8(hashType);\n    // Transaction\n    sigMsgWriter.writeInt32(this.version);\n    sigMsgWriter.writeUInt32(this.locktime);\n    sigMsgWriter.writeSlice(hashPrevouts);\n    sigMsgWriter.writeSlice(hashAmounts);\n    sigMsgWriter.writeSlice(hashScriptPubKeys);\n    sigMsgWriter.writeSlice(hashSequences);\n    if (!(isNone || isSingle)) {\n      sigMsgWriter.writeSlice(hashOutputs);\n    }\n    // Input\n    sigMsgWriter.writeUInt8(spendType);\n    if (isAnyoneCanPay) {\n      const input = this.ins[inIndex];\n      sigMsgWriter.writeSlice(input.hash);\n      sigMsgWriter.writeUInt32(input.index);\n      sigMsgWriter.writeInt64(values[inIndex]);\n      sigMsgWriter.writeVarSlice(prevOutScripts[inIndex]);\n      sigMsgWriter.writeUInt32(input.sequence);\n    } else {\n      sigMsgWriter.writeUInt32(inIndex);\n    }\n    if (annex) {\n      const bufferWriter = _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter.withCapacity(varSliceSize(annex));\n      bufferWriter.writeVarSlice(annex);\n      sigMsgWriter.writeSlice((0,_noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_6__.sha256)(bufferWriter.end()));\n    }\n    // Output\n    if (isSingle) {\n      sigMsgWriter.writeSlice(hashOutputs);\n    }\n    // BIP342 extension\n    if (leafHash) {\n      sigMsgWriter.writeSlice(leafHash);\n      sigMsgWriter.writeUInt8(0);\n      sigMsgWriter.writeUInt32(0xffffffff);\n    }\n    // Extra zero byte because:\n    // https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki#cite_note-19\n    return _crypto_js__WEBPACK_IMPORTED_MODULE_1__.taggedHash(\n      'TapSighash',\n      uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.concat([Uint8Array.from([0x00]), sigMsgWriter.end()]),\n    );\n  }\n  hashForWitnessV0(inIndex, prevOutScript, value, hashType) {\n    valibot__WEBPACK_IMPORTED_MODULE_5__.parse(\n      valibot__WEBPACK_IMPORTED_MODULE_5__.tuple([\n        _types_js__WEBPACK_IMPORTED_MODULE_3__.UInt32Schema,\n        _types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema,\n        _types_js__WEBPACK_IMPORTED_MODULE_3__.SatoshiSchema,\n        _types_js__WEBPACK_IMPORTED_MODULE_3__.UInt32Schema,\n      ]),\n      [inIndex, prevOutScript, value, hashType],\n    );\n    let tbuffer = Uint8Array.from([]);\n    let bufferWriter;\n    let hashOutputs = ZERO;\n    let hashPrevouts = ZERO;\n    let hashSequence = ZERO;\n    if (!(hashType & Transaction.SIGHASH_ANYONECANPAY)) {\n      tbuffer = new Uint8Array(36 * this.ins.length);\n      bufferWriter = new _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter(tbuffer, 0);\n      this.ins.forEach(txIn => {\n        bufferWriter.writeSlice(txIn.hash);\n        bufferWriter.writeUInt32(txIn.index);\n      });\n      hashPrevouts = _crypto_js__WEBPACK_IMPORTED_MODULE_1__.hash256(tbuffer);\n    }\n    if (\n      !(hashType & Transaction.SIGHASH_ANYONECANPAY) &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_SINGLE &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_NONE\n    ) {\n      tbuffer = new Uint8Array(4 * this.ins.length);\n      bufferWriter = new _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter(tbuffer, 0);\n      this.ins.forEach(txIn => {\n        bufferWriter.writeUInt32(txIn.sequence);\n      });\n      hashSequence = _crypto_js__WEBPACK_IMPORTED_MODULE_1__.hash256(tbuffer);\n    }\n    if (\n      (hashType & 0x1f) !== Transaction.SIGHASH_SINGLE &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_NONE\n    ) {\n      const txOutsSize = this.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n      }, 0);\n      tbuffer = new Uint8Array(txOutsSize);\n      bufferWriter = new _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter(tbuffer, 0);\n      this.outs.forEach(out => {\n        bufferWriter.writeInt64(out.value);\n        bufferWriter.writeVarSlice(out.script);\n      });\n      hashOutputs = _crypto_js__WEBPACK_IMPORTED_MODULE_1__.hash256(tbuffer);\n    } else if (\n      (hashType & 0x1f) === Transaction.SIGHASH_SINGLE &&\n      inIndex < this.outs.length\n    ) {\n      const output = this.outs[inIndex];\n      tbuffer = new Uint8Array(8 + varSliceSize(output.script));\n      bufferWriter = new _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter(tbuffer, 0);\n      bufferWriter.writeInt64(output.value);\n      bufferWriter.writeVarSlice(output.script);\n      hashOutputs = _crypto_js__WEBPACK_IMPORTED_MODULE_1__.hash256(tbuffer);\n    }\n    tbuffer = new Uint8Array(156 + varSliceSize(prevOutScript));\n    bufferWriter = new _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter(tbuffer, 0);\n    const input = this.ins[inIndex];\n    bufferWriter.writeInt32(this.version);\n    bufferWriter.writeSlice(hashPrevouts);\n    bufferWriter.writeSlice(hashSequence);\n    bufferWriter.writeSlice(input.hash);\n    bufferWriter.writeUInt32(input.index);\n    bufferWriter.writeVarSlice(prevOutScript);\n    bufferWriter.writeInt64(value);\n    bufferWriter.writeUInt32(input.sequence);\n    bufferWriter.writeSlice(hashOutputs);\n    bufferWriter.writeUInt32(this.locktime);\n    bufferWriter.writeUInt32(hashType);\n    return _crypto_js__WEBPACK_IMPORTED_MODULE_1__.hash256(tbuffer);\n  }\n  getHash(forWitness) {\n    // wtxid for coinbase is always 32 bytes of 0x00\n    if (forWitness && this.isCoinbase()) return new Uint8Array(32);\n    return _crypto_js__WEBPACK_IMPORTED_MODULE_1__.hash256(this.__toBuffer(undefined, undefined, forWitness));\n  }\n  getId() {\n    // transaction hash's are displayed in reverse order\n    return uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.toHex((0,_bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.reverseBuffer)(this.getHash(false)));\n  }\n  toBuffer(buffer, initialOffset) {\n    return this.__toBuffer(buffer, initialOffset, true);\n  }\n  toHex() {\n    return uint8array_tools__WEBPACK_IMPORTED_MODULE_4__.toHex(this.toBuffer(undefined, undefined));\n  }\n  setInputScript(index, scriptSig) {\n    valibot__WEBPACK_IMPORTED_MODULE_5__.parse(valibot__WEBPACK_IMPORTED_MODULE_5__.tuple([valibot__WEBPACK_IMPORTED_MODULE_5__.number(), _types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema]), [index, scriptSig]);\n    this.ins[index].script = scriptSig;\n  }\n  setWitness(index, witness) {\n    valibot__WEBPACK_IMPORTED_MODULE_5__.parse(valibot__WEBPACK_IMPORTED_MODULE_5__.tuple([valibot__WEBPACK_IMPORTED_MODULE_5__.number(), valibot__WEBPACK_IMPORTED_MODULE_5__.array(_types_js__WEBPACK_IMPORTED_MODULE_3__.BufferSchema)]), [\n      index,\n      witness,\n    ]);\n    this.ins[index].witness = witness;\n  }\n  __toBuffer(buffer, initialOffset, _ALLOW_WITNESS = false) {\n    if (!buffer) buffer = new Uint8Array(this.byteLength(_ALLOW_WITNESS));\n    const bufferWriter = new _bufferutils_js__WEBPACK_IMPORTED_MODULE_0__.BufferWriter(buffer, initialOffset || 0);\n    bufferWriter.writeInt32(this.version);\n    const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();\n    if (hasWitnesses) {\n      bufferWriter.writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER);\n      bufferWriter.writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG);\n    }\n    bufferWriter.writeVarInt(this.ins.length);\n    this.ins.forEach(txIn => {\n      bufferWriter.writeSlice(txIn.hash);\n      bufferWriter.writeUInt32(txIn.index);\n      bufferWriter.writeVarSlice(txIn.script);\n      bufferWriter.writeUInt32(txIn.sequence);\n    });\n    bufferWriter.writeVarInt(this.outs.length);\n    this.outs.forEach(txOut => {\n      if (isOutput(txOut)) {\n        bufferWriter.writeInt64(txOut.value);\n      } else {\n        bufferWriter.writeSlice(txOut.valueBuffer);\n      }\n      bufferWriter.writeVarSlice(txOut.script);\n    });\n    if (hasWitnesses) {\n      this.ins.forEach(input => {\n        bufferWriter.writeVector(input.witness);\n      });\n    }\n    bufferWriter.writeUInt32(this.locktime);\n    // avoid slicing unless necessary\n    if (initialOffset !== undefined)\n      return buffer.slice(initialOffset, bufferWriter.offset);\n    return buffer;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS90cmFuc2FjdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUswQjtBQUNhO0FBQ087QUFDUDtBQUNNO0FBQ1Q7QUFDTTtBQUNiO0FBQzdCO0FBQ0E7QUFDQSxTQUFTLG1FQUFzQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksbUVBQXNCO0FBQzFCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHFEQUFhO0FBQzFCO0FBQ0E7QUFDQSxZQUFZLHFEQUFhO0FBQ3pCO0FBQ0E7QUFDQSx5QkFBeUIscURBQWE7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIseURBQVk7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxvQkFBb0IsYUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLHNCQUFzQixZQUFZO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHFEQUFhO0FBQy9DO0FBQ0E7QUFDQSxJQUFJLDBDQUFPLENBQUMsdURBQXNCO0FBQ2xDLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDBDQUFPO0FBQ1gsTUFBTSwwQ0FBTztBQUNiLFFBQVEsdURBQXNCO0FBQzlCLFFBQVEsbURBQWtCO0FBQzFCLFFBQVEsNkNBQVUsQ0FBQyw2Q0FBVSxDQUFDLG1EQUFrQjtBQUNoRCxRQUFRLDZDQUFVLENBQUMsNkNBQVUsQ0FBQyxtREFBa0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxJQUFJLDBDQUFPLENBQUMsMENBQU8sRUFBRSxtREFBa0IsRUFBRSxvREFBbUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxtRUFBc0I7QUFDNUIsTUFBTSxtRUFBc0I7QUFDNUI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwwQ0FBTyxDQUFDLDBDQUFPLEVBQUUsbURBQWtCLEVBQUUsbURBQWtCLEVBQUUsMkNBQVE7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsK0NBQWU7QUFDckMsTUFBTSxpREFBaUI7QUFDdkIscUJBQXFCLDJDQUFPO0FBQzVCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixhQUFhO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3REFBZ0I7QUFDcEI7QUFDQSxXQUFXLCtDQUFlO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLElBQUksMENBQU87QUFDWCxNQUFNLDBDQUFPO0FBQ2IsUUFBUSxtREFBa0I7QUFDMUIsUUFBUSwwQ0FBTyxDQUFDLG1EQUFrQjtBQUNsQyxRQUFRLDBDQUFPLENBQUMsb0RBQW1CO0FBQ25DLFFBQVEsbURBQWtCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIseURBQVk7QUFDckM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLHFCQUFxQiw0REFBTTtBQUMzQixxQkFBcUIseURBQVk7QUFDakM7QUFDQSxvQkFBb0IsNERBQU07QUFDMUIscUJBQXFCLHlEQUFZO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNERBQU07QUFDaEMscUJBQXFCLHlEQUFZO0FBQ2pDO0FBQ0Esc0JBQXNCLDREQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHlEQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxvQkFBb0IsNERBQU07QUFDMUIsTUFBTTtBQUNOO0FBQ0EsMkJBQTJCLHlEQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDREQUFNO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix5REFBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix5REFBWTtBQUN2QztBQUNBLDhCQUE4Qiw0REFBTTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0RBQWtCO0FBQzdCO0FBQ0EsTUFBTSxvREFBWTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxJQUFJLDBDQUFPO0FBQ1gsTUFBTSwwQ0FBTztBQUNiLFFBQVEsbURBQWtCO0FBQzFCLFFBQVEsbURBQWtCO0FBQzFCLFFBQVEsb0RBQW1CO0FBQzNCLFFBQVEsbURBQWtCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHlEQUFZO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxxQkFBcUIsK0NBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIseURBQVk7QUFDckM7QUFDQTtBQUNBLE9BQU87QUFDUCxxQkFBcUIsK0NBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx5QkFBeUIseURBQVk7QUFDckM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLG9CQUFvQiwrQ0FBZTtBQUNuQyxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix5REFBWTtBQUNyQztBQUNBO0FBQ0Esb0JBQW9CLCtDQUFlO0FBQ25DO0FBQ0E7QUFDQSx1QkFBdUIseURBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywrQ0FBZTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0NBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsV0FBVyxtREFBVyxDQUFDLDhEQUFhO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG1EQUFXO0FBQ3RCO0FBQ0E7QUFDQSxJQUFJLDBDQUFPLENBQUMsMENBQU8sRUFBRSwyQ0FBUSxJQUFJLG1EQUFrQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSxJQUFJLDBDQUFPLENBQUMsMENBQU8sRUFBRSwyQ0FBUSxJQUFJLDBDQUFPLENBQUMsbURBQWtCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHlEQUFZO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9idGMvbWlkbC14LWJpdGNvaW4tc3VtbWl0LWhhY2thdGhvbi0yMDI1L3V0eG8tcHNidC1kZW1vL25vZGVfbW9kdWxlcy8ucG5wbS9iaXRjb2luanMtbGliQDcuMC4wLXJjLjBfdHlwZXNjcmlwdEA1LjkuMi9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYi9zcmMvZXNtL3RyYW5zYWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEJ1ZmZlclJlYWRlcixcbiAgQnVmZmVyV3JpdGVyLFxuICByZXZlcnNlQnVmZmVyLFxuICB2YXJ1aW50LFxufSBmcm9tICcuL2J1ZmZlcnV0aWxzLmpzJztcbmltcG9ydCAqIGFzIGJjcnlwdG8gZnJvbSAnLi9jcnlwdG8uanMnO1xuaW1wb3J0IHsgc2hhMjU2IH0gZnJvbSAnQG5vYmxlL2hhc2hlcy9zaGEyNTYnO1xuaW1wb3J0ICogYXMgYnNjcmlwdCBmcm9tICcuL3NjcmlwdC5qcyc7XG5pbXBvcnQgeyBPUFMgYXMgb3Bjb2RlcyB9IGZyb20gJy4vc2NyaXB0LmpzJztcbmltcG9ydCAqIGFzIHR5cGVzIGZyb20gJy4vdHlwZXMuanMnO1xuaW1wb3J0ICogYXMgdG9vbHMgZnJvbSAndWludDhhcnJheS10b29scyc7XG5pbXBvcnQgKiBhcyB2IGZyb20gJ3ZhbGlib3QnO1xuZnVuY3Rpb24gdmFyU2xpY2VTaXplKHNvbWVTY3JpcHQpIHtcbiAgY29uc3QgbGVuZ3RoID0gc29tZVNjcmlwdC5sZW5ndGg7XG4gIHJldHVybiB2YXJ1aW50LmVuY29kaW5nTGVuZ3RoKGxlbmd0aCkgKyBsZW5ndGg7XG59XG5mdW5jdGlvbiB2ZWN0b3JTaXplKHNvbWVWZWN0b3IpIHtcbiAgY29uc3QgbGVuZ3RoID0gc29tZVZlY3Rvci5sZW5ndGg7XG4gIHJldHVybiAoXG4gICAgdmFydWludC5lbmNvZGluZ0xlbmd0aChsZW5ndGgpICtcbiAgICBzb21lVmVjdG9yLnJlZHVjZSgoc3VtLCB3aXRuZXNzKSA9PiB7XG4gICAgICByZXR1cm4gc3VtICsgdmFyU2xpY2VTaXplKHdpdG5lc3MpO1xuICAgIH0sIDApXG4gICk7XG59XG5jb25zdCBFTVBUWV9CVUZGRVIgPSBuZXcgVWludDhBcnJheSgwKTtcbmNvbnN0IEVNUFRZX1dJVE5FU1MgPSBbXTtcbmNvbnN0IFpFUk8gPSB0b29scy5mcm9tSGV4KFxuICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsXG4pO1xuY29uc3QgT05FID0gdG9vbHMuZnJvbUhleChcbiAgJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEnLFxuKTtcbmNvbnN0IFZBTFVFX1VJTlQ2NF9NQVggPSB0b29scy5mcm9tSGV4KCdmZmZmZmZmZmZmZmZmZmZmJyk7XG5jb25zdCBCTEFOS19PVVRQVVQgPSB7XG4gIHNjcmlwdDogRU1QVFlfQlVGRkVSLFxuICB2YWx1ZUJ1ZmZlcjogVkFMVUVfVUlOVDY0X01BWCxcbn07XG5mdW5jdGlvbiBpc091dHB1dChvdXQpIHtcbiAgcmV0dXJuIG91dC52YWx1ZSAhPT0gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgQml0Y29pbiB0cmFuc2FjdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zYWN0aW9uIHtcbiAgc3RhdGljIERFRkFVTFRfU0VRVUVOQ0UgPSAweGZmZmZmZmZmO1xuICBzdGF0aWMgU0lHSEFTSF9ERUZBVUxUID0gMHgwMDtcbiAgc3RhdGljIFNJR0hBU0hfQUxMID0gMHgwMTtcbiAgc3RhdGljIFNJR0hBU0hfTk9ORSA9IDB4MDI7XG4gIHN0YXRpYyBTSUdIQVNIX1NJTkdMRSA9IDB4MDM7XG4gIHN0YXRpYyBTSUdIQVNIX0FOWU9ORUNBTlBBWSA9IDB4ODA7XG4gIHN0YXRpYyBTSUdIQVNIX09VVFBVVF9NQVNLID0gMHgwMztcbiAgc3RhdGljIFNJR0hBU0hfSU5QVVRfTUFTSyA9IDB4ODA7XG4gIHN0YXRpYyBBRFZBTkNFRF9UUkFOU0FDVElPTl9NQVJLRVIgPSAweDAwO1xuICBzdGF0aWMgQURWQU5DRURfVFJBTlNBQ1RJT05fRkxBRyA9IDB4MDE7XG4gIHN0YXRpYyBmcm9tQnVmZmVyKGJ1ZmZlciwgX05PX1NUUklDVCkge1xuICAgIGNvbnN0IGJ1ZmZlclJlYWRlciA9IG5ldyBCdWZmZXJSZWFkZXIoYnVmZmVyKTtcbiAgICBjb25zdCB0eCA9IG5ldyBUcmFuc2FjdGlvbigpO1xuICAgIHR4LnZlcnNpb24gPSBidWZmZXJSZWFkZXIucmVhZEludDMyKCk7XG4gICAgY29uc3QgbWFya2VyID0gYnVmZmVyUmVhZGVyLnJlYWRVSW50OCgpO1xuICAgIGNvbnN0IGZsYWcgPSBidWZmZXJSZWFkZXIucmVhZFVJbnQ4KCk7XG4gICAgbGV0IGhhc1dpdG5lc3NlcyA9IGZhbHNlO1xuICAgIGlmIChcbiAgICAgIG1hcmtlciA9PT0gVHJhbnNhY3Rpb24uQURWQU5DRURfVFJBTlNBQ1RJT05fTUFSS0VSICYmXG4gICAgICBmbGFnID09PSBUcmFuc2FjdGlvbi5BRFZBTkNFRF9UUkFOU0FDVElPTl9GTEFHXG4gICAgKSB7XG4gICAgICBoYXNXaXRuZXNzZXMgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBidWZmZXJSZWFkZXIub2Zmc2V0IC09IDI7XG4gICAgfVxuICAgIGNvbnN0IHZpbkxlbiA9IGJ1ZmZlclJlYWRlci5yZWFkVmFySW50KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aW5MZW47ICsraSkge1xuICAgICAgdHguaW5zLnB1c2goe1xuICAgICAgICBoYXNoOiBidWZmZXJSZWFkZXIucmVhZFNsaWNlKDMyKSxcbiAgICAgICAgaW5kZXg6IGJ1ZmZlclJlYWRlci5yZWFkVUludDMyKCksXG4gICAgICAgIHNjcmlwdDogYnVmZmVyUmVhZGVyLnJlYWRWYXJTbGljZSgpLFxuICAgICAgICBzZXF1ZW5jZTogYnVmZmVyUmVhZGVyLnJlYWRVSW50MzIoKSxcbiAgICAgICAgd2l0bmVzczogRU1QVFlfV0lUTkVTUyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB2b3V0TGVuID0gYnVmZmVyUmVhZGVyLnJlYWRWYXJJbnQoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZvdXRMZW47ICsraSkge1xuICAgICAgdHgub3V0cy5wdXNoKHtcbiAgICAgICAgdmFsdWU6IGJ1ZmZlclJlYWRlci5yZWFkSW50NjQoKSxcbiAgICAgICAgc2NyaXB0OiBidWZmZXJSZWFkZXIucmVhZFZhclNsaWNlKCksXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGhhc1dpdG5lc3Nlcykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aW5MZW47ICsraSkge1xuICAgICAgICB0eC5pbnNbaV0ud2l0bmVzcyA9IGJ1ZmZlclJlYWRlci5yZWFkVmVjdG9yKCk7XG4gICAgICB9XG4gICAgICAvLyB3YXMgdGhpcyBwb2ludGxlc3M/XG4gICAgICBpZiAoIXR4Lmhhc1dpdG5lc3NlcygpKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGhhcyBzdXBlcmZsdW91cyB3aXRuZXNzIGRhdGEnKTtcbiAgICB9XG4gICAgdHgubG9ja3RpbWUgPSBidWZmZXJSZWFkZXIucmVhZFVJbnQzMigpO1xuICAgIGlmIChfTk9fU1RSSUNUKSByZXR1cm4gdHg7XG4gICAgaWYgKGJ1ZmZlclJlYWRlci5vZmZzZXQgIT09IGJ1ZmZlci5sZW5ndGgpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGhhcyB1bmV4cGVjdGVkIGRhdGEnKTtcbiAgICByZXR1cm4gdHg7XG4gIH1cbiAgc3RhdGljIGZyb21IZXgoaGV4KSB7XG4gICAgcmV0dXJuIFRyYW5zYWN0aW9uLmZyb21CdWZmZXIodG9vbHMuZnJvbUhleChoZXgpLCBmYWxzZSk7XG4gIH1cbiAgc3RhdGljIGlzQ29pbmJhc2VIYXNoKGJ1ZmZlcikge1xuICAgIHYucGFyc2UodHlwZXMuSGFzaDI1NmJpdFNjaGVtYSwgYnVmZmVyKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMyOyArK2kpIHtcbiAgICAgIGlmIChidWZmZXJbaV0gIT09IDApIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgdmVyc2lvbiA9IDE7XG4gIGxvY2t0aW1lID0gMDtcbiAgaW5zID0gW107XG4gIG91dHMgPSBbXTtcbiAgaXNDb2luYmFzZSgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5pbnMubGVuZ3RoID09PSAxICYmIFRyYW5zYWN0aW9uLmlzQ29pbmJhc2VIYXNoKHRoaXMuaW5zWzBdLmhhc2gpXG4gICAgKTtcbiAgfVxuICBhZGRJbnB1dChoYXNoLCBpbmRleCwgc2VxdWVuY2UsIHNjcmlwdFNpZykge1xuICAgIHYucGFyc2UoXG4gICAgICB2LnR1cGxlKFtcbiAgICAgICAgdHlwZXMuSGFzaDI1NmJpdFNjaGVtYSxcbiAgICAgICAgdHlwZXMuVUludDMyU2NoZW1hLFxuICAgICAgICB2Lm51bGxhYmxlKHYub3B0aW9uYWwodHlwZXMuVUludDMyU2NoZW1hKSksXG4gICAgICAgIHYubnVsbGFibGUodi5vcHRpb25hbCh0eXBlcy5CdWZmZXJTY2hlbWEpKSxcbiAgICAgIF0pLFxuICAgICAgW2hhc2gsIGluZGV4LCBzZXF1ZW5jZSwgc2NyaXB0U2lnXSxcbiAgICApO1xuICAgIGlmIChzZXF1ZW5jZSA9PT0gdW5kZWZpbmVkIHx8IHNlcXVlbmNlID09PSBudWxsKSB7XG4gICAgICBzZXF1ZW5jZSA9IFRyYW5zYWN0aW9uLkRFRkFVTFRfU0VRVUVOQ0U7XG4gICAgfVxuICAgIC8vIEFkZCB0aGUgaW5wdXQgYW5kIHJldHVybiB0aGUgaW5wdXQncyBpbmRleFxuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmlucy5wdXNoKHtcbiAgICAgICAgaGFzaCxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHNjcmlwdDogc2NyaXB0U2lnIHx8IEVNUFRZX0JVRkZFUixcbiAgICAgICAgc2VxdWVuY2U6IHNlcXVlbmNlLFxuICAgICAgICB3aXRuZXNzOiBFTVBUWV9XSVRORVNTLFxuICAgICAgfSkgLSAxXG4gICAgKTtcbiAgfVxuICBhZGRPdXRwdXQoc2NyaXB0UHViS2V5LCB2YWx1ZSkge1xuICAgIHYucGFyc2Uodi50dXBsZShbdHlwZXMuQnVmZmVyU2NoZW1hLCB0eXBlcy5TYXRvc2hpU2NoZW1hXSksIFtcbiAgICAgIHNjcmlwdFB1YktleSxcbiAgICAgIHZhbHVlLFxuICAgIF0pO1xuICAgIC8vIEFkZCB0aGUgb3V0cHV0IGFuZCByZXR1cm4gdGhlIG91dHB1dCdzIGluZGV4XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMub3V0cy5wdXNoKHtcbiAgICAgICAgc2NyaXB0OiBzY3JpcHRQdWJLZXksXG4gICAgICAgIHZhbHVlLFxuICAgICAgfSkgLSAxXG4gICAgKTtcbiAgfVxuICBoYXNXaXRuZXNzZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zLnNvbWUoeCA9PiB7XG4gICAgICByZXR1cm4geC53aXRuZXNzLmxlbmd0aCAhPT0gMDtcbiAgICB9KTtcbiAgfVxuICB3ZWlnaHQoKSB7XG4gICAgY29uc3QgYmFzZSA9IHRoaXMuYnl0ZUxlbmd0aChmYWxzZSk7XG4gICAgY29uc3QgdG90YWwgPSB0aGlzLmJ5dGVMZW5ndGgodHJ1ZSk7XG4gICAgcmV0dXJuIGJhc2UgKiAzICsgdG90YWw7XG4gIH1cbiAgdmlydHVhbFNpemUoKSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLndlaWdodCgpIC8gNCk7XG4gIH1cbiAgYnl0ZUxlbmd0aChfQUxMT1dfV0lUTkVTUyA9IHRydWUpIHtcbiAgICBjb25zdCBoYXNXaXRuZXNzZXMgPSBfQUxMT1dfV0lUTkVTUyAmJiB0aGlzLmhhc1dpdG5lc3NlcygpO1xuICAgIHJldHVybiAoXG4gICAgICAoaGFzV2l0bmVzc2VzID8gMTAgOiA4KSArXG4gICAgICB2YXJ1aW50LmVuY29kaW5nTGVuZ3RoKHRoaXMuaW5zLmxlbmd0aCkgK1xuICAgICAgdmFydWludC5lbmNvZGluZ0xlbmd0aCh0aGlzLm91dHMubGVuZ3RoKSArXG4gICAgICB0aGlzLmlucy5yZWR1Y2UoKHN1bSwgaW5wdXQpID0+IHtcbiAgICAgICAgcmV0dXJuIHN1bSArIDQwICsgdmFyU2xpY2VTaXplKGlucHV0LnNjcmlwdCk7XG4gICAgICB9LCAwKSArXG4gICAgICB0aGlzLm91dHMucmVkdWNlKChzdW0sIG91dHB1dCkgPT4ge1xuICAgICAgICByZXR1cm4gc3VtICsgOCArIHZhclNsaWNlU2l6ZShvdXRwdXQuc2NyaXB0KTtcbiAgICAgIH0sIDApICtcbiAgICAgIChoYXNXaXRuZXNzZXNcbiAgICAgICAgPyB0aGlzLmlucy5yZWR1Y2UoKHN1bSwgaW5wdXQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBzdW0gKyB2ZWN0b3JTaXplKGlucHV0LndpdG5lc3MpO1xuICAgICAgICAgIH0sIDApXG4gICAgICAgIDogMClcbiAgICApO1xuICB9XG4gIGNsb25lKCkge1xuICAgIGNvbnN0IG5ld1R4ID0gbmV3IFRyYW5zYWN0aW9uKCk7XG4gICAgbmV3VHgudmVyc2lvbiA9IHRoaXMudmVyc2lvbjtcbiAgICBuZXdUeC5sb2NrdGltZSA9IHRoaXMubG9ja3RpbWU7XG4gICAgbmV3VHguaW5zID0gdGhpcy5pbnMubWFwKHR4SW4gPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaGFzaDogdHhJbi5oYXNoLFxuICAgICAgICBpbmRleDogdHhJbi5pbmRleCxcbiAgICAgICAgc2NyaXB0OiB0eEluLnNjcmlwdCxcbiAgICAgICAgc2VxdWVuY2U6IHR4SW4uc2VxdWVuY2UsXG4gICAgICAgIHdpdG5lc3M6IHR4SW4ud2l0bmVzcyxcbiAgICAgIH07XG4gICAgfSk7XG4gICAgbmV3VHgub3V0cyA9IHRoaXMub3V0cy5tYXAodHhPdXQgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2NyaXB0OiB0eE91dC5zY3JpcHQsXG4gICAgICAgIHZhbHVlOiB0eE91dC52YWx1ZSxcbiAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ld1R4O1xuICB9XG4gIC8qKlxuICAgKiBIYXNoIHRyYW5zYWN0aW9uIGZvciBzaWduaW5nIGEgc3BlY2lmaWMgaW5wdXQuXG4gICAqXG4gICAqIEJpdGNvaW4gdXNlcyBhIGRpZmZlcmVudCBoYXNoIGZvciBlYWNoIHNpZ25lZCB0cmFuc2FjdGlvbiBpbnB1dC5cbiAgICogVGhpcyBtZXRob2QgY29waWVzIHRoZSB0cmFuc2FjdGlvbiwgbWFrZXMgdGhlIG5lY2Vzc2FyeSBjaGFuZ2VzIGJhc2VkIG9uIHRoZVxuICAgKiBoYXNoVHlwZSwgYW5kIHRoZW4gaGFzaGVzIHRoZSByZXN1bHQuXG4gICAqIFRoaXMgaGFzaCBjYW4gdGhlbiBiZSB1c2VkIHRvIHNpZ24gdGhlIHByb3ZpZGVkIHRyYW5zYWN0aW9uIGlucHV0LlxuICAgKi9cbiAgaGFzaEZvclNpZ25hdHVyZShpbkluZGV4LCBwcmV2T3V0U2NyaXB0LCBoYXNoVHlwZSkge1xuICAgIHYucGFyc2Uodi50dXBsZShbdHlwZXMuVUludDMyU2NoZW1hLCB0eXBlcy5CdWZmZXJTY2hlbWEsIHYubnVtYmVyKCldKSwgW1xuICAgICAgaW5JbmRleCxcbiAgICAgIHByZXZPdXRTY3JpcHQsXG4gICAgICBoYXNoVHlwZSxcbiAgICBdKTtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbi9iaXRjb2luL2Jsb2IvbWFzdGVyL3NyYy90ZXN0L3NpZ2hhc2hfdGVzdHMuY3BwI0wyOVxuICAgIGlmIChpbkluZGV4ID49IHRoaXMuaW5zLmxlbmd0aCkgcmV0dXJuIE9ORTtcbiAgICAvLyBpZ25vcmUgT1BfQ09ERVNFUEFSQVRPUlxuICAgIGNvbnN0IG91clNjcmlwdCA9IGJzY3JpcHQuY29tcGlsZShcbiAgICAgIGJzY3JpcHQuZGVjb21waWxlKHByZXZPdXRTY3JpcHQpLmZpbHRlcih4ID0+IHtcbiAgICAgICAgcmV0dXJuIHggIT09IG9wY29kZXMuT1BfQ09ERVNFUEFSQVRPUjtcbiAgICAgIH0pLFxuICAgICk7XG4gICAgY29uc3QgdHhUbXAgPSB0aGlzLmNsb25lKCk7XG4gICAgLy8gU0lHSEFTSF9OT05FOiBpZ25vcmUgYWxsIG91dHB1dHM/ICh3aWxkY2FyZCBwYXllZSlcbiAgICBpZiAoKGhhc2hUeXBlICYgMHgxZikgPT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfTk9ORSkge1xuICAgICAgdHhUbXAub3V0cyA9IFtdO1xuICAgICAgLy8gaWdub3JlIHNlcXVlbmNlIG51bWJlcnMgKGV4Y2VwdCBhdCBpbkluZGV4KVxuICAgICAgdHhUbXAuaW5zLmZvckVhY2goKGlucHV0LCBpKSA9PiB7XG4gICAgICAgIGlmIChpID09PSBpbkluZGV4KSByZXR1cm47XG4gICAgICAgIGlucHV0LnNlcXVlbmNlID0gMDtcbiAgICAgIH0pO1xuICAgICAgLy8gU0lHSEFTSF9TSU5HTEU6IGlnbm9yZSBhbGwgb3V0cHV0cywgZXhjZXB0IGF0IHRoZSBzYW1lIGluZGV4P1xuICAgIH0gZWxzZSBpZiAoKGhhc2hUeXBlICYgMHgxZikgPT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfU0lOR0xFKSB7XG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbi9iaXRjb2luL2Jsb2IvbWFzdGVyL3NyYy90ZXN0L3NpZ2hhc2hfdGVzdHMuY3BwI0w2MFxuICAgICAgaWYgKGluSW5kZXggPj0gdGhpcy5vdXRzLmxlbmd0aCkgcmV0dXJuIE9ORTtcbiAgICAgIC8vIHRydW5jYXRlIG91dHB1dHMgYWZ0ZXJcbiAgICAgIHR4VG1wLm91dHMubGVuZ3RoID0gaW5JbmRleCArIDE7XG4gICAgICAvLyBcImJsYW5rXCIgb3V0cHV0cyBiZWZvcmVcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5JbmRleDsgaSsrKSB7XG4gICAgICAgIHR4VG1wLm91dHNbaV0gPSBCTEFOS19PVVRQVVQ7XG4gICAgICB9XG4gICAgICAvLyBpZ25vcmUgc2VxdWVuY2UgbnVtYmVycyAoZXhjZXB0IGF0IGluSW5kZXgpXG4gICAgICB0eFRtcC5pbnMuZm9yRWFjaCgoaW5wdXQsIHkpID0+IHtcbiAgICAgICAgaWYgKHkgPT09IGluSW5kZXgpIHJldHVybjtcbiAgICAgICAgaW5wdXQuc2VxdWVuY2UgPSAwO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFNJR0hBU0hfQU5ZT05FQ0FOUEFZOiBpZ25vcmUgaW5wdXRzIGVudGlyZWx5P1xuICAgIGlmIChoYXNoVHlwZSAmIFRyYW5zYWN0aW9uLlNJR0hBU0hfQU5ZT05FQ0FOUEFZKSB7XG4gICAgICB0eFRtcC5pbnMgPSBbdHhUbXAuaW5zW2luSW5kZXhdXTtcbiAgICAgIHR4VG1wLmluc1swXS5zY3JpcHQgPSBvdXJTY3JpcHQ7XG4gICAgICAvLyBTSUdIQVNIX0FMTDogb25seSBpZ25vcmUgaW5wdXQgc2NyaXB0c1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcImJsYW5rXCIgb3RoZXJzIGlucHV0IHNjcmlwdHNcbiAgICAgIHR4VG1wLmlucy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgaW5wdXQuc2NyaXB0ID0gRU1QVFlfQlVGRkVSO1xuICAgICAgfSk7XG4gICAgICB0eFRtcC5pbnNbaW5JbmRleF0uc2NyaXB0ID0gb3VyU2NyaXB0O1xuICAgIH1cbiAgICAvLyBzZXJpYWxpemUgYW5kIGhhc2hcbiAgICBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheSh0eFRtcC5ieXRlTGVuZ3RoKGZhbHNlKSArIDQpO1xuICAgIHRvb2xzLndyaXRlSW50MzIoYnVmZmVyLCBidWZmZXIubGVuZ3RoIC0gNCwgaGFzaFR5cGUsICdMRScpO1xuICAgIHR4VG1wLl9fdG9CdWZmZXIoYnVmZmVyLCAwLCBmYWxzZSk7XG4gICAgcmV0dXJuIGJjcnlwdG8uaGFzaDI1NihidWZmZXIpO1xuICB9XG4gIGhhc2hGb3JXaXRuZXNzVjEoaW5JbmRleCwgcHJldk91dFNjcmlwdHMsIHZhbHVlcywgaGFzaFR5cGUsIGxlYWZIYXNoLCBhbm5leCkge1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luL2JpcHMvYmxvYi9tYXN0ZXIvYmlwLTAzNDEubWVkaWF3aWtpI2NvbW1vbi1zaWduYXR1cmUtbWVzc2FnZVxuICAgIHYucGFyc2UoXG4gICAgICB2LnR1cGxlKFtcbiAgICAgICAgdHlwZXMuVUludDMyU2NoZW1hLFxuICAgICAgICB2LmFycmF5KHR5cGVzLkJ1ZmZlclNjaGVtYSksXG4gICAgICAgIHYuYXJyYXkodHlwZXMuU2F0b3NoaVNjaGVtYSksXG4gICAgICAgIHR5cGVzLlVJbnQzMlNjaGVtYSxcbiAgICAgIF0pLFxuICAgICAgW2luSW5kZXgsIHByZXZPdXRTY3JpcHRzLCB2YWx1ZXMsIGhhc2hUeXBlXSxcbiAgICApO1xuICAgIGlmIChcbiAgICAgIHZhbHVlcy5sZW5ndGggIT09IHRoaXMuaW5zLmxlbmd0aCB8fFxuICAgICAgcHJldk91dFNjcmlwdHMubGVuZ3RoICE9PSB0aGlzLmlucy5sZW5ndGhcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBzdXBwbHkgcHJldm91dCBzY3JpcHQgYW5kIHZhbHVlIGZvciBhbGwgaW5wdXRzJyk7XG4gICAgfVxuICAgIGNvbnN0IG91dHB1dFR5cGUgPVxuICAgICAgaGFzaFR5cGUgPT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfREVGQVVMVFxuICAgICAgICA/IFRyYW5zYWN0aW9uLlNJR0hBU0hfQUxMXG4gICAgICAgIDogaGFzaFR5cGUgJiBUcmFuc2FjdGlvbi5TSUdIQVNIX09VVFBVVF9NQVNLO1xuICAgIGNvbnN0IGlucHV0VHlwZSA9IGhhc2hUeXBlICYgVHJhbnNhY3Rpb24uU0lHSEFTSF9JTlBVVF9NQVNLO1xuICAgIGNvbnN0IGlzQW55b25lQ2FuUGF5ID0gaW5wdXRUeXBlID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX0FOWU9ORUNBTlBBWTtcbiAgICBjb25zdCBpc05vbmUgPSBvdXRwdXRUeXBlID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX05PTkU7XG4gICAgY29uc3QgaXNTaW5nbGUgPSBvdXRwdXRUeXBlID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX1NJTkdMRTtcbiAgICBsZXQgaGFzaFByZXZvdXRzID0gRU1QVFlfQlVGRkVSO1xuICAgIGxldCBoYXNoQW1vdW50cyA9IEVNUFRZX0JVRkZFUjtcbiAgICBsZXQgaGFzaFNjcmlwdFB1YktleXMgPSBFTVBUWV9CVUZGRVI7XG4gICAgbGV0IGhhc2hTZXF1ZW5jZXMgPSBFTVBUWV9CVUZGRVI7XG4gICAgbGV0IGhhc2hPdXRwdXRzID0gRU1QVFlfQlVGRkVSO1xuICAgIGlmICghaXNBbnlvbmVDYW5QYXkpIHtcbiAgICAgIGxldCBidWZmZXJXcml0ZXIgPSBCdWZmZXJXcml0ZXIud2l0aENhcGFjaXR5KDM2ICogdGhpcy5pbnMubGVuZ3RoKTtcbiAgICAgIHRoaXMuaW5zLmZvckVhY2godHhJbiA9PiB7XG4gICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVNsaWNlKHR4SW4uaGFzaCk7XG4gICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQzMih0eEluLmluZGV4KTtcbiAgICAgIH0pO1xuICAgICAgaGFzaFByZXZvdXRzID0gc2hhMjU2KGJ1ZmZlcldyaXRlci5lbmQoKSk7XG4gICAgICBidWZmZXJXcml0ZXIgPSBCdWZmZXJXcml0ZXIud2l0aENhcGFjaXR5KDggKiB0aGlzLmlucy5sZW5ndGgpO1xuICAgICAgdmFsdWVzLmZvckVhY2godmFsdWUgPT4gYnVmZmVyV3JpdGVyLndyaXRlSW50NjQodmFsdWUpKTtcbiAgICAgIGhhc2hBbW91bnRzID0gc2hhMjU2KGJ1ZmZlcldyaXRlci5lbmQoKSk7XG4gICAgICBidWZmZXJXcml0ZXIgPSBCdWZmZXJXcml0ZXIud2l0aENhcGFjaXR5KFxuICAgICAgICBwcmV2T3V0U2NyaXB0cy5tYXAodmFyU2xpY2VTaXplKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKSxcbiAgICAgICk7XG4gICAgICBwcmV2T3V0U2NyaXB0cy5mb3JFYWNoKHByZXZPdXRTY3JpcHQgPT5cbiAgICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVmFyU2xpY2UocHJldk91dFNjcmlwdCksXG4gICAgICApO1xuICAgICAgaGFzaFNjcmlwdFB1YktleXMgPSBzaGEyNTYoYnVmZmVyV3JpdGVyLmVuZCgpKTtcbiAgICAgIGJ1ZmZlcldyaXRlciA9IEJ1ZmZlcldyaXRlci53aXRoQ2FwYWNpdHkoNCAqIHRoaXMuaW5zLmxlbmd0aCk7XG4gICAgICB0aGlzLmlucy5mb3JFYWNoKHR4SW4gPT4gYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKHR4SW4uc2VxdWVuY2UpKTtcbiAgICAgIGhhc2hTZXF1ZW5jZXMgPSBzaGEyNTYoYnVmZmVyV3JpdGVyLmVuZCgpKTtcbiAgICB9XG4gICAgaWYgKCEoaXNOb25lIHx8IGlzU2luZ2xlKSkge1xuICAgICAgaWYgKCF0aGlzLm91dHMubGVuZ3RoKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FkZCBvdXRwdXRzIHRvIHRoZSB0cmFuc2FjdGlvbiBiZWZvcmUgc2lnbmluZy4nKTtcbiAgICAgIGNvbnN0IHR4T3V0c1NpemUgPSB0aGlzLm91dHNcbiAgICAgICAgLm1hcChvdXRwdXQgPT4gOCArIHZhclNsaWNlU2l6ZShvdXRwdXQuc2NyaXB0KSlcbiAgICAgICAgLnJlZHVjZSgoYSwgYikgPT4gYSArIGIpO1xuICAgICAgY29uc3QgYnVmZmVyV3JpdGVyID0gQnVmZmVyV3JpdGVyLndpdGhDYXBhY2l0eSh0eE91dHNTaXplKTtcbiAgICAgIHRoaXMub3V0cy5mb3JFYWNoKG91dCA9PiB7XG4gICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZUludDY0KG91dC52YWx1ZSk7XG4gICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVZhclNsaWNlKG91dC5zY3JpcHQpO1xuICAgICAgfSk7XG4gICAgICBoYXNoT3V0cHV0cyA9IHNoYTI1NihidWZmZXJXcml0ZXIuZW5kKCkpO1xuICAgIH0gZWxzZSBpZiAoaXNTaW5nbGUgJiYgaW5JbmRleCA8IHRoaXMub3V0cy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IG91dHB1dCA9IHRoaXMub3V0c1tpbkluZGV4XTtcbiAgICAgIGNvbnN0IGJ1ZmZlcldyaXRlciA9IEJ1ZmZlcldyaXRlci53aXRoQ2FwYWNpdHkoXG4gICAgICAgIDggKyB2YXJTbGljZVNpemUob3V0cHV0LnNjcmlwdCksXG4gICAgICApO1xuICAgICAgYnVmZmVyV3JpdGVyLndyaXRlSW50NjQob3V0cHV0LnZhbHVlKTtcbiAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVZhclNsaWNlKG91dHB1dC5zY3JpcHQpO1xuICAgICAgaGFzaE91dHB1dHMgPSBzaGEyNTYoYnVmZmVyV3JpdGVyLmVuZCgpKTtcbiAgICB9XG4gICAgY29uc3Qgc3BlbmRUeXBlID0gKGxlYWZIYXNoID8gMiA6IDApICsgKGFubmV4ID8gMSA6IDApO1xuICAgIC8vIExlbmd0aCBjYWxjdWxhdGlvbiBmcm9tOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luL2JpcHMvYmxvYi9tYXN0ZXIvYmlwLTAzNDEubWVkaWF3aWtpI2NpdGVfbm90ZS0xNFxuICAgIC8vIFdpdGggZXh0ZW5zaW9uIGZyb206XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW4vYmlwcy9ibG9iL21hc3Rlci9iaXAtMDM0Mi5tZWRpYXdpa2kjc2lnbmF0dXJlLXZhbGlkYXRpb25cbiAgICBjb25zdCBzaWdNc2dTaXplID1cbiAgICAgIDE3NCAtXG4gICAgICAoaXNBbnlvbmVDYW5QYXkgPyA0OSA6IDApIC1cbiAgICAgIChpc05vbmUgPyAzMiA6IDApICtcbiAgICAgIChhbm5leCA/IDMyIDogMCkgK1xuICAgICAgKGxlYWZIYXNoID8gMzcgOiAwKTtcbiAgICBjb25zdCBzaWdNc2dXcml0ZXIgPSBCdWZmZXJXcml0ZXIud2l0aENhcGFjaXR5KHNpZ01zZ1NpemUpO1xuICAgIHNpZ01zZ1dyaXRlci53cml0ZVVJbnQ4KGhhc2hUeXBlKTtcbiAgICAvLyBUcmFuc2FjdGlvblxuICAgIHNpZ01zZ1dyaXRlci53cml0ZUludDMyKHRoaXMudmVyc2lvbik7XG4gICAgc2lnTXNnV3JpdGVyLndyaXRlVUludDMyKHRoaXMubG9ja3RpbWUpO1xuICAgIHNpZ01zZ1dyaXRlci53cml0ZVNsaWNlKGhhc2hQcmV2b3V0cyk7XG4gICAgc2lnTXNnV3JpdGVyLndyaXRlU2xpY2UoaGFzaEFtb3VudHMpO1xuICAgIHNpZ01zZ1dyaXRlci53cml0ZVNsaWNlKGhhc2hTY3JpcHRQdWJLZXlzKTtcbiAgICBzaWdNc2dXcml0ZXIud3JpdGVTbGljZShoYXNoU2VxdWVuY2VzKTtcbiAgICBpZiAoIShpc05vbmUgfHwgaXNTaW5nbGUpKSB7XG4gICAgICBzaWdNc2dXcml0ZXIud3JpdGVTbGljZShoYXNoT3V0cHV0cyk7XG4gICAgfVxuICAgIC8vIElucHV0XG4gICAgc2lnTXNnV3JpdGVyLndyaXRlVUludDgoc3BlbmRUeXBlKTtcbiAgICBpZiAoaXNBbnlvbmVDYW5QYXkpIHtcbiAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5pbnNbaW5JbmRleF07XG4gICAgICBzaWdNc2dXcml0ZXIud3JpdGVTbGljZShpbnB1dC5oYXNoKTtcbiAgICAgIHNpZ01zZ1dyaXRlci53cml0ZVVJbnQzMihpbnB1dC5pbmRleCk7XG4gICAgICBzaWdNc2dXcml0ZXIud3JpdGVJbnQ2NCh2YWx1ZXNbaW5JbmRleF0pO1xuICAgICAgc2lnTXNnV3JpdGVyLndyaXRlVmFyU2xpY2UocHJldk91dFNjcmlwdHNbaW5JbmRleF0pO1xuICAgICAgc2lnTXNnV3JpdGVyLndyaXRlVUludDMyKGlucHV0LnNlcXVlbmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2lnTXNnV3JpdGVyLndyaXRlVUludDMyKGluSW5kZXgpO1xuICAgIH1cbiAgICBpZiAoYW5uZXgpIHtcbiAgICAgIGNvbnN0IGJ1ZmZlcldyaXRlciA9IEJ1ZmZlcldyaXRlci53aXRoQ2FwYWNpdHkodmFyU2xpY2VTaXplKGFubmV4KSk7XG4gICAgICBidWZmZXJXcml0ZXIud3JpdGVWYXJTbGljZShhbm5leCk7XG4gICAgICBzaWdNc2dXcml0ZXIud3JpdGVTbGljZShzaGEyNTYoYnVmZmVyV3JpdGVyLmVuZCgpKSk7XG4gICAgfVxuICAgIC8vIE91dHB1dFxuICAgIGlmIChpc1NpbmdsZSkge1xuICAgICAgc2lnTXNnV3JpdGVyLndyaXRlU2xpY2UoaGFzaE91dHB1dHMpO1xuICAgIH1cbiAgICAvLyBCSVAzNDIgZXh0ZW5zaW9uXG4gICAgaWYgKGxlYWZIYXNoKSB7XG4gICAgICBzaWdNc2dXcml0ZXIud3JpdGVTbGljZShsZWFmSGFzaCk7XG4gICAgICBzaWdNc2dXcml0ZXIud3JpdGVVSW50OCgwKTtcbiAgICAgIHNpZ01zZ1dyaXRlci53cml0ZVVJbnQzMigweGZmZmZmZmZmKTtcbiAgICB9XG4gICAgLy8gRXh0cmEgemVybyBieXRlIGJlY2F1c2U6XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW4vYmlwcy9ibG9iL21hc3Rlci9iaXAtMDM0MS5tZWRpYXdpa2kjY2l0ZV9ub3RlLTE5XG4gICAgcmV0dXJuIGJjcnlwdG8udGFnZ2VkSGFzaChcbiAgICAgICdUYXBTaWdoYXNoJyxcbiAgICAgIHRvb2xzLmNvbmNhdChbVWludDhBcnJheS5mcm9tKFsweDAwXSksIHNpZ01zZ1dyaXRlci5lbmQoKV0pLFxuICAgICk7XG4gIH1cbiAgaGFzaEZvcldpdG5lc3NWMChpbkluZGV4LCBwcmV2T3V0U2NyaXB0LCB2YWx1ZSwgaGFzaFR5cGUpIHtcbiAgICB2LnBhcnNlKFxuICAgICAgdi50dXBsZShbXG4gICAgICAgIHR5cGVzLlVJbnQzMlNjaGVtYSxcbiAgICAgICAgdHlwZXMuQnVmZmVyU2NoZW1hLFxuICAgICAgICB0eXBlcy5TYXRvc2hpU2NoZW1hLFxuICAgICAgICB0eXBlcy5VSW50MzJTY2hlbWEsXG4gICAgICBdKSxcbiAgICAgIFtpbkluZGV4LCBwcmV2T3V0U2NyaXB0LCB2YWx1ZSwgaGFzaFR5cGVdLFxuICAgICk7XG4gICAgbGV0IHRidWZmZXIgPSBVaW50OEFycmF5LmZyb20oW10pO1xuICAgIGxldCBidWZmZXJXcml0ZXI7XG4gICAgbGV0IGhhc2hPdXRwdXRzID0gWkVSTztcbiAgICBsZXQgaGFzaFByZXZvdXRzID0gWkVSTztcbiAgICBsZXQgaGFzaFNlcXVlbmNlID0gWkVSTztcbiAgICBpZiAoIShoYXNoVHlwZSAmIFRyYW5zYWN0aW9uLlNJR0hBU0hfQU5ZT05FQ0FOUEFZKSkge1xuICAgICAgdGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDM2ICogdGhpcy5pbnMubGVuZ3RoKTtcbiAgICAgIGJ1ZmZlcldyaXRlciA9IG5ldyBCdWZmZXJXcml0ZXIodGJ1ZmZlciwgMCk7XG4gICAgICB0aGlzLmlucy5mb3JFYWNoKHR4SW4gPT4ge1xuICAgICAgICBidWZmZXJXcml0ZXIud3JpdGVTbGljZSh0eEluLmhhc2gpO1xuICAgICAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50MzIodHhJbi5pbmRleCk7XG4gICAgICB9KTtcbiAgICAgIGhhc2hQcmV2b3V0cyA9IGJjcnlwdG8uaGFzaDI1Nih0YnVmZmVyKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIShoYXNoVHlwZSAmIFRyYW5zYWN0aW9uLlNJR0hBU0hfQU5ZT05FQ0FOUEFZKSAmJlxuICAgICAgKGhhc2hUeXBlICYgMHgxZikgIT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfU0lOR0xFICYmXG4gICAgICAoaGFzaFR5cGUgJiAweDFmKSAhPT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9OT05FXG4gICAgKSB7XG4gICAgICB0YnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoNCAqIHRoaXMuaW5zLmxlbmd0aCk7XG4gICAgICBidWZmZXJXcml0ZXIgPSBuZXcgQnVmZmVyV3JpdGVyKHRidWZmZXIsIDApO1xuICAgICAgdGhpcy5pbnMuZm9yRWFjaCh0eEluID0+IHtcbiAgICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKHR4SW4uc2VxdWVuY2UpO1xuICAgICAgfSk7XG4gICAgICBoYXNoU2VxdWVuY2UgPSBiY3J5cHRvLmhhc2gyNTYodGJ1ZmZlcik7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIChoYXNoVHlwZSAmIDB4MWYpICE9PSBUcmFuc2FjdGlvbi5TSUdIQVNIX1NJTkdMRSAmJlxuICAgICAgKGhhc2hUeXBlICYgMHgxZikgIT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfTk9ORVxuICAgICkge1xuICAgICAgY29uc3QgdHhPdXRzU2l6ZSA9IHRoaXMub3V0cy5yZWR1Y2UoKHN1bSwgb3V0cHV0KSA9PiB7XG4gICAgICAgIHJldHVybiBzdW0gKyA4ICsgdmFyU2xpY2VTaXplKG91dHB1dC5zY3JpcHQpO1xuICAgICAgfSwgMCk7XG4gICAgICB0YnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkodHhPdXRzU2l6ZSk7XG4gICAgICBidWZmZXJXcml0ZXIgPSBuZXcgQnVmZmVyV3JpdGVyKHRidWZmZXIsIDApO1xuICAgICAgdGhpcy5vdXRzLmZvckVhY2gob3V0ID0+IHtcbiAgICAgICAgYnVmZmVyV3JpdGVyLndyaXRlSW50NjQob3V0LnZhbHVlKTtcbiAgICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVmFyU2xpY2Uob3V0LnNjcmlwdCk7XG4gICAgICB9KTtcbiAgICAgIGhhc2hPdXRwdXRzID0gYmNyeXB0by5oYXNoMjU2KHRidWZmZXIpO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAoaGFzaFR5cGUgJiAweDFmKSA9PT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9TSU5HTEUgJiZcbiAgICAgIGluSW5kZXggPCB0aGlzLm91dHMubGVuZ3RoXG4gICAgKSB7XG4gICAgICBjb25zdCBvdXRwdXQgPSB0aGlzLm91dHNbaW5JbmRleF07XG4gICAgICB0YnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoOCArIHZhclNsaWNlU2l6ZShvdXRwdXQuc2NyaXB0KSk7XG4gICAgICBidWZmZXJXcml0ZXIgPSBuZXcgQnVmZmVyV3JpdGVyKHRidWZmZXIsIDApO1xuICAgICAgYnVmZmVyV3JpdGVyLndyaXRlSW50NjQob3V0cHV0LnZhbHVlKTtcbiAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVZhclNsaWNlKG91dHB1dC5zY3JpcHQpO1xuICAgICAgaGFzaE91dHB1dHMgPSBiY3J5cHRvLmhhc2gyNTYodGJ1ZmZlcik7XG4gICAgfVxuICAgIHRidWZmZXIgPSBuZXcgVWludDhBcnJheSgxNTYgKyB2YXJTbGljZVNpemUocHJldk91dFNjcmlwdCkpO1xuICAgIGJ1ZmZlcldyaXRlciA9IG5ldyBCdWZmZXJXcml0ZXIodGJ1ZmZlciwgMCk7XG4gICAgY29uc3QgaW5wdXQgPSB0aGlzLmluc1tpbkluZGV4XTtcbiAgICBidWZmZXJXcml0ZXIud3JpdGVJbnQzMih0aGlzLnZlcnNpb24pO1xuICAgIGJ1ZmZlcldyaXRlci53cml0ZVNsaWNlKGhhc2hQcmV2b3V0cyk7XG4gICAgYnVmZmVyV3JpdGVyLndyaXRlU2xpY2UoaGFzaFNlcXVlbmNlKTtcbiAgICBidWZmZXJXcml0ZXIud3JpdGVTbGljZShpbnB1dC5oYXNoKTtcbiAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50MzIoaW5wdXQuaW5kZXgpO1xuICAgIGJ1ZmZlcldyaXRlci53cml0ZVZhclNsaWNlKHByZXZPdXRTY3JpcHQpO1xuICAgIGJ1ZmZlcldyaXRlci53cml0ZUludDY0KHZhbHVlKTtcbiAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50MzIoaW5wdXQuc2VxdWVuY2UpO1xuICAgIGJ1ZmZlcldyaXRlci53cml0ZVNsaWNlKGhhc2hPdXRwdXRzKTtcbiAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50MzIodGhpcy5sb2NrdGltZSk7XG4gICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKGhhc2hUeXBlKTtcbiAgICByZXR1cm4gYmNyeXB0by5oYXNoMjU2KHRidWZmZXIpO1xuICB9XG4gIGdldEhhc2goZm9yV2l0bmVzcykge1xuICAgIC8vIHd0eGlkIGZvciBjb2luYmFzZSBpcyBhbHdheXMgMzIgYnl0ZXMgb2YgMHgwMFxuICAgIGlmIChmb3JXaXRuZXNzICYmIHRoaXMuaXNDb2luYmFzZSgpKSByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoMzIpO1xuICAgIHJldHVybiBiY3J5cHRvLmhhc2gyNTYodGhpcy5fX3RvQnVmZmVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmb3JXaXRuZXNzKSk7XG4gIH1cbiAgZ2V0SWQoKSB7XG4gICAgLy8gdHJhbnNhY3Rpb24gaGFzaCdzIGFyZSBkaXNwbGF5ZWQgaW4gcmV2ZXJzZSBvcmRlclxuICAgIHJldHVybiB0b29scy50b0hleChyZXZlcnNlQnVmZmVyKHRoaXMuZ2V0SGFzaChmYWxzZSkpKTtcbiAgfVxuICB0b0J1ZmZlcihidWZmZXIsIGluaXRpYWxPZmZzZXQpIHtcbiAgICByZXR1cm4gdGhpcy5fX3RvQnVmZmVyKGJ1ZmZlciwgaW5pdGlhbE9mZnNldCwgdHJ1ZSk7XG4gIH1cbiAgdG9IZXgoKSB7XG4gICAgcmV0dXJuIHRvb2xzLnRvSGV4KHRoaXMudG9CdWZmZXIodW5kZWZpbmVkLCB1bmRlZmluZWQpKTtcbiAgfVxuICBzZXRJbnB1dFNjcmlwdChpbmRleCwgc2NyaXB0U2lnKSB7XG4gICAgdi5wYXJzZSh2LnR1cGxlKFt2Lm51bWJlcigpLCB0eXBlcy5CdWZmZXJTY2hlbWFdKSwgW2luZGV4LCBzY3JpcHRTaWddKTtcbiAgICB0aGlzLmluc1tpbmRleF0uc2NyaXB0ID0gc2NyaXB0U2lnO1xuICB9XG4gIHNldFdpdG5lc3MoaW5kZXgsIHdpdG5lc3MpIHtcbiAgICB2LnBhcnNlKHYudHVwbGUoW3YubnVtYmVyKCksIHYuYXJyYXkodHlwZXMuQnVmZmVyU2NoZW1hKV0pLCBbXG4gICAgICBpbmRleCxcbiAgICAgIHdpdG5lc3MsXG4gICAgXSk7XG4gICAgdGhpcy5pbnNbaW5kZXhdLndpdG5lc3MgPSB3aXRuZXNzO1xuICB9XG4gIF9fdG9CdWZmZXIoYnVmZmVyLCBpbml0aWFsT2Zmc2V0LCBfQUxMT1dfV0lUTkVTUyA9IGZhbHNlKSB7XG4gICAgaWYgKCFidWZmZXIpIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnl0ZUxlbmd0aChfQUxMT1dfV0lUTkVTUykpO1xuICAgIGNvbnN0IGJ1ZmZlcldyaXRlciA9IG5ldyBCdWZmZXJXcml0ZXIoYnVmZmVyLCBpbml0aWFsT2Zmc2V0IHx8IDApO1xuICAgIGJ1ZmZlcldyaXRlci53cml0ZUludDMyKHRoaXMudmVyc2lvbik7XG4gICAgY29uc3QgaGFzV2l0bmVzc2VzID0gX0FMTE9XX1dJVE5FU1MgJiYgdGhpcy5oYXNXaXRuZXNzZXMoKTtcbiAgICBpZiAoaGFzV2l0bmVzc2VzKSB7XG4gICAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50OChUcmFuc2FjdGlvbi5BRFZBTkNFRF9UUkFOU0FDVElPTl9NQVJLRVIpO1xuICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDgoVHJhbnNhY3Rpb24uQURWQU5DRURfVFJBTlNBQ1RJT05fRkxBRyk7XG4gICAgfVxuICAgIGJ1ZmZlcldyaXRlci53cml0ZVZhckludCh0aGlzLmlucy5sZW5ndGgpO1xuICAgIHRoaXMuaW5zLmZvckVhY2godHhJbiA9PiB7XG4gICAgICBidWZmZXJXcml0ZXIud3JpdGVTbGljZSh0eEluLmhhc2gpO1xuICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKHR4SW4uaW5kZXgpO1xuICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVmFyU2xpY2UodHhJbi5zY3JpcHQpO1xuICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKHR4SW4uc2VxdWVuY2UpO1xuICAgIH0pO1xuICAgIGJ1ZmZlcldyaXRlci53cml0ZVZhckludCh0aGlzLm91dHMubGVuZ3RoKTtcbiAgICB0aGlzLm91dHMuZm9yRWFjaCh0eE91dCA9PiB7XG4gICAgICBpZiAoaXNPdXRwdXQodHhPdXQpKSB7XG4gICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZUludDY0KHR4T3V0LnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVNsaWNlKHR4T3V0LnZhbHVlQnVmZmVyKTtcbiAgICAgIH1cbiAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVZhclNsaWNlKHR4T3V0LnNjcmlwdCk7XG4gICAgfSk7XG4gICAgaWYgKGhhc1dpdG5lc3Nlcykge1xuICAgICAgdGhpcy5pbnMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVZlY3RvcihpbnB1dC53aXRuZXNzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50MzIodGhpcy5sb2NrdGltZSk7XG4gICAgLy8gYXZvaWQgc2xpY2luZyB1bmxlc3MgbmVjZXNzYXJ5XG4gICAgaWYgKGluaXRpYWxPZmZzZXQgIT09IHVuZGVmaW5lZClcbiAgICAgIHJldHVybiBidWZmZXIuc2xpY2UoaW5pdGlhbE9mZnNldCwgYnVmZmVyV3JpdGVyLm9mZnNldCk7XG4gICAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/transaction.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Buffer256bitSchema: () => (/* binding */ Buffer256bitSchema),\n/* harmony export */   BufferSchema: () => (/* binding */ BufferSchema),\n/* harmony export */   Hash160bitSchema: () => (/* binding */ Hash160bitSchema),\n/* harmony export */   Hash256bitSchema: () => (/* binding */ Hash256bitSchema),\n/* harmony export */   HexSchema: () => (/* binding */ HexSchema),\n/* harmony export */   NBufferSchemaFactory: () => (/* binding */ NBufferSchemaFactory),\n/* harmony export */   NullablePartial: () => (/* binding */ NullablePartial),\n/* harmony export */   SatoshiSchema: () => (/* binding */ SatoshiSchema),\n/* harmony export */   TAPLEAF_VERSION_MASK: () => (/* binding */ TAPLEAF_VERSION_MASK),\n/* harmony export */   UInt32Schema: () => (/* binding */ UInt32Schema),\n/* harmony export */   UInt8Schema: () => (/* binding */ UInt8Schema),\n/* harmony export */   isPoint: () => (/* binding */ isPoint),\n/* harmony export */   isTapleaf: () => (/* binding */ isTapleaf),\n/* harmony export */   isTaptree: () => (/* binding */ isTaptree),\n/* harmony export */   stacksEqual: () => (/* binding */ stacksEqual)\n/* harmony export */ });\n/* harmony import */ var uint8array_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uint8array-tools */ \"(ssr)/./node_modules/.pnpm/uint8array-tools@0.0.9/node_modules/uint8array-tools/src/mjs/index.js\");\n/* harmony import */ var valibot__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! valibot */ \"(ssr)/./node_modules/.pnpm/valibot@0.38.0_typescript@5.9.2/node_modules/valibot/dist/index.js\");\n\n\nconst ZERO32 = new Uint8Array(32);\nconst EC_P = uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.fromHex(\n  'fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f',\n);\nconst NBufferSchemaFactory = size =>\n  valibot__WEBPACK_IMPORTED_MODULE_1__.pipe(valibot__WEBPACK_IMPORTED_MODULE_1__.instance(Uint8Array), valibot__WEBPACK_IMPORTED_MODULE_1__.length(size));\n/**\n * Checks if two arrays of Buffers are equal.\n * @param a - The first array of Buffers.\n * @param b - The second array of Buffers.\n * @returns True if the arrays are equal, false otherwise.\n */\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.compare(x, b[i]) === 0;\n  });\n}\n/**\n * Checks if the given value is a valid elliptic curve point.\n * @param p - The value to check.\n * @returns True if the value is a valid elliptic curve point, false otherwise.\n */\nfunction isPoint(p) {\n  if (!(p instanceof Uint8Array)) return false;\n  if (p.length < 33) return false;\n  const t = p[0];\n  const x = p.slice(1, 33);\n  if (uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.compare(ZERO32, x) === 0) return false;\n  if (uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.compare(x, EC_P) >= 0) return false;\n  if ((t === 0x02 || t === 0x03) && p.length === 33) {\n    return true;\n  }\n  const y = p.slice(33);\n  if (uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.compare(ZERO32, y) === 0) return false;\n  if (uint8array_tools__WEBPACK_IMPORTED_MODULE_0__.compare(y, EC_P) >= 0) return false;\n  if (t === 0x04 && p.length === 65) return true;\n  return false;\n}\nconst TAPLEAF_VERSION_MASK = 0xfe;\nfunction isTapleaf(o) {\n  if (!o || !('output' in o)) return false;\n  if (!(o.output instanceof Uint8Array)) return false;\n  if (o.version !== undefined)\n    return (o.version & TAPLEAF_VERSION_MASK) === o.version;\n  return true;\n}\nfunction isTaptree(scriptTree) {\n  if (!Array.isArray(scriptTree)) return isTapleaf(scriptTree);\n  if (scriptTree.length !== 2) return false;\n  return scriptTree.every(t => isTaptree(t));\n}\nconst Buffer256bitSchema = NBufferSchemaFactory(32);\nconst Hash160bitSchema = NBufferSchemaFactory(20);\nconst Hash256bitSchema = NBufferSchemaFactory(32);\nconst BufferSchema = valibot__WEBPACK_IMPORTED_MODULE_1__.instance(Uint8Array);\nconst HexSchema = valibot__WEBPACK_IMPORTED_MODULE_1__.pipe(valibot__WEBPACK_IMPORTED_MODULE_1__.string(), valibot__WEBPACK_IMPORTED_MODULE_1__.regex(/^([0-9a-f]{2})+$/i));\nconst UInt8Schema = valibot__WEBPACK_IMPORTED_MODULE_1__.pipe(\n  valibot__WEBPACK_IMPORTED_MODULE_1__.number(),\n  valibot__WEBPACK_IMPORTED_MODULE_1__.integer(),\n  valibot__WEBPACK_IMPORTED_MODULE_1__.minValue(0),\n  valibot__WEBPACK_IMPORTED_MODULE_1__.maxValue(0xff),\n);\nconst UInt32Schema = valibot__WEBPACK_IMPORTED_MODULE_1__.pipe(\n  valibot__WEBPACK_IMPORTED_MODULE_1__.number(),\n  valibot__WEBPACK_IMPORTED_MODULE_1__.integer(),\n  valibot__WEBPACK_IMPORTED_MODULE_1__.minValue(0),\n  valibot__WEBPACK_IMPORTED_MODULE_1__.maxValue(0xffffffff),\n);\nconst SatoshiSchema = valibot__WEBPACK_IMPORTED_MODULE_1__.pipe(\n  valibot__WEBPACK_IMPORTED_MODULE_1__.bigint(),\n  valibot__WEBPACK_IMPORTED_MODULE_1__.minValue(0n),\n  valibot__WEBPACK_IMPORTED_MODULE_1__.maxValue(0x7fffffffffffffffn),\n);\nconst NullablePartial = a =>\n  valibot__WEBPACK_IMPORTED_MODULE_1__.object(\n    Object.entries(a).reduce(\n      (acc, next) => ({ ...acc, [next[0]]: valibot__WEBPACK_IMPORTED_MODULE_1__.nullish(next[1]) }),\n      {},\n    ),\n  );\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYml0Y29pbmpzLWxpYkA3LjAuMC1yYy4wX3R5cGVzY3JpcHRANS45LjIvbm9kZV9tb2R1bGVzL2JpdGNvaW5qcy1saWIvc3JjL2VzbS90eXBlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwQztBQUNiO0FBQzdCO0FBQ0EsYUFBYSxxREFBYTtBQUMxQjtBQUNBO0FBQ087QUFDUCxFQUFFLHlDQUFNLENBQUMsNkNBQVUsY0FBYywyQ0FBUTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxXQUFXLHFEQUFhO0FBQ3hCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxxREFBYTtBQUNuQixNQUFNLHFEQUFhO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxxREFBYTtBQUNuQixNQUFNLHFEQUFhO0FBQ25CO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDZDQUFVO0FBQy9CLGtCQUFrQix5Q0FBTSxDQUFDLDJDQUFRLElBQUksMENBQU8sYUFBYSxFQUFFO0FBQzNELG9CQUFvQix5Q0FBTTtBQUNqQyxFQUFFLDJDQUFRO0FBQ1YsRUFBRSw0Q0FBUztBQUNYLEVBQUUsNkNBQVU7QUFDWixFQUFFLDZDQUFVO0FBQ1o7QUFDTyxxQkFBcUIseUNBQU07QUFDbEMsRUFBRSwyQ0FBUTtBQUNWLEVBQUUsNENBQVM7QUFDWCxFQUFFLDZDQUFVO0FBQ1osRUFBRSw2Q0FBVTtBQUNaO0FBQ08sc0JBQXNCLHlDQUFNO0FBQ25DLEVBQUUsMkNBQVE7QUFDVixFQUFFLDZDQUFVO0FBQ1osRUFBRSw2Q0FBVTtBQUNaO0FBQ087QUFDUCxFQUFFLDJDQUFRO0FBQ1Y7QUFDQSx3QkFBd0IsbUJBQW1CLDRDQUFTLFdBQVc7QUFDL0QsUUFBUTtBQUNSO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9idGMvbWlkbC14LWJpdGNvaW4tc3VtbWl0LWhhY2thdGhvbi0yMDI1L3V0eG8tcHNidC1kZW1vL25vZGVfbW9kdWxlcy8ucG5wbS9iaXRjb2luanMtbGliQDcuMC4wLXJjLjBfdHlwZXNjcmlwdEA1LjkuMi9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYi9zcmMvZXNtL3R5cGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHRvb2xzIGZyb20gJ3VpbnQ4YXJyYXktdG9vbHMnO1xuaW1wb3J0ICogYXMgdiBmcm9tICd2YWxpYm90JztcbmNvbnN0IFpFUk8zMiA9IG5ldyBVaW50OEFycmF5KDMyKTtcbmNvbnN0IEVDX1AgPSB0b29scy5mcm9tSGV4KFxuICAnZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmVmZmZmZmMyZicsXG4pO1xuZXhwb3J0IGNvbnN0IE5CdWZmZXJTY2hlbWFGYWN0b3J5ID0gc2l6ZSA9PlxuICB2LnBpcGUodi5pbnN0YW5jZShVaW50OEFycmF5KSwgdi5sZW5ndGgoc2l6ZSkpO1xuLyoqXG4gKiBDaGVja3MgaWYgdHdvIGFycmF5cyBvZiBCdWZmZXJzIGFyZSBlcXVhbC5cbiAqIEBwYXJhbSBhIC0gVGhlIGZpcnN0IGFycmF5IG9mIEJ1ZmZlcnMuXG4gKiBAcGFyYW0gYiAtIFRoZSBzZWNvbmQgYXJyYXkgb2YgQnVmZmVycy5cbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGFycmF5cyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YWNrc0VxdWFsKGEsIGIpIHtcbiAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gYS5ldmVyeSgoeCwgaSkgPT4ge1xuICAgIHJldHVybiB0b29scy5jb21wYXJlKHgsIGJbaV0pID09PSAwO1xuICB9KTtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhIHZhbGlkIGVsbGlwdGljIGN1cnZlIHBvaW50LlxuICogQHBhcmFtIHAgLSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB2YWx1ZSBpcyBhIHZhbGlkIGVsbGlwdGljIGN1cnZlIHBvaW50LCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BvaW50KHApIHtcbiAgaWYgKCEocCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKSByZXR1cm4gZmFsc2U7XG4gIGlmIChwLmxlbmd0aCA8IDMzKSByZXR1cm4gZmFsc2U7XG4gIGNvbnN0IHQgPSBwWzBdO1xuICBjb25zdCB4ID0gcC5zbGljZSgxLCAzMyk7XG4gIGlmICh0b29scy5jb21wYXJlKFpFUk8zMiwgeCkgPT09IDApIHJldHVybiBmYWxzZTtcbiAgaWYgKHRvb2xzLmNvbXBhcmUoeCwgRUNfUCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICBpZiAoKHQgPT09IDB4MDIgfHwgdCA9PT0gMHgwMykgJiYgcC5sZW5ndGggPT09IDMzKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgY29uc3QgeSA9IHAuc2xpY2UoMzMpO1xuICBpZiAodG9vbHMuY29tcGFyZShaRVJPMzIsIHkpID09PSAwKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0b29scy5jb21wYXJlKHksIEVDX1ApID49IDApIHJldHVybiBmYWxzZTtcbiAgaWYgKHQgPT09IDB4MDQgJiYgcC5sZW5ndGggPT09IDY1KSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNvbnN0IFRBUExFQUZfVkVSU0lPTl9NQVNLID0gMHhmZTtcbmV4cG9ydCBmdW5jdGlvbiBpc1RhcGxlYWYobykge1xuICBpZiAoIW8gfHwgISgnb3V0cHV0JyBpbiBvKSkgcmV0dXJuIGZhbHNlO1xuICBpZiAoIShvLm91dHB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKSByZXR1cm4gZmFsc2U7XG4gIGlmIChvLnZlcnNpb24gIT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gKG8udmVyc2lvbiAmIFRBUExFQUZfVkVSU0lPTl9NQVNLKSA9PT0gby52ZXJzaW9uO1xuICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1RhcHRyZWUoc2NyaXB0VHJlZSkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoc2NyaXB0VHJlZSkpIHJldHVybiBpc1RhcGxlYWYoc2NyaXB0VHJlZSk7XG4gIGlmIChzY3JpcHRUcmVlLmxlbmd0aCAhPT0gMikgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gc2NyaXB0VHJlZS5ldmVyeSh0ID0+IGlzVGFwdHJlZSh0KSk7XG59XG5leHBvcnQgY29uc3QgQnVmZmVyMjU2Yml0U2NoZW1hID0gTkJ1ZmZlclNjaGVtYUZhY3RvcnkoMzIpO1xuZXhwb3J0IGNvbnN0IEhhc2gxNjBiaXRTY2hlbWEgPSBOQnVmZmVyU2NoZW1hRmFjdG9yeSgyMCk7XG5leHBvcnQgY29uc3QgSGFzaDI1NmJpdFNjaGVtYSA9IE5CdWZmZXJTY2hlbWFGYWN0b3J5KDMyKTtcbmV4cG9ydCBjb25zdCBCdWZmZXJTY2hlbWEgPSB2Lmluc3RhbmNlKFVpbnQ4QXJyYXkpO1xuZXhwb3J0IGNvbnN0IEhleFNjaGVtYSA9IHYucGlwZSh2LnN0cmluZygpLCB2LnJlZ2V4KC9eKFswLTlhLWZdezJ9KSskL2kpKTtcbmV4cG9ydCBjb25zdCBVSW50OFNjaGVtYSA9IHYucGlwZShcbiAgdi5udW1iZXIoKSxcbiAgdi5pbnRlZ2VyKCksXG4gIHYubWluVmFsdWUoMCksXG4gIHYubWF4VmFsdWUoMHhmZiksXG4pO1xuZXhwb3J0IGNvbnN0IFVJbnQzMlNjaGVtYSA9IHYucGlwZShcbiAgdi5udW1iZXIoKSxcbiAgdi5pbnRlZ2VyKCksXG4gIHYubWluVmFsdWUoMCksXG4gIHYubWF4VmFsdWUoMHhmZmZmZmZmZiksXG4pO1xuZXhwb3J0IGNvbnN0IFNhdG9zaGlTY2hlbWEgPSB2LnBpcGUoXG4gIHYuYmlnaW50KCksXG4gIHYubWluVmFsdWUoMG4pLFxuICB2Lm1heFZhbHVlKDB4N2ZmZmZmZmZmZmZmZmZmZm4pLFxuKTtcbmV4cG9ydCBjb25zdCBOdWxsYWJsZVBhcnRpYWwgPSBhID0+XG4gIHYub2JqZWN0KFxuICAgIE9iamVjdC5lbnRyaWVzKGEpLnJlZHVjZShcbiAgICAgIChhY2MsIG5leHQpID0+ICh7IC4uLmFjYywgW25leHRbMF1dOiB2Lm51bGxpc2gobmV4dFsxXSkgfSksXG4gICAgICB7fSxcbiAgICApLFxuICApO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/bitcoinjs-lib@7.0.0-rc.0_typescript@5.9.2/node_modules/bitcoinjs-lib/src/esm/types.js\n");

/***/ })

};
;